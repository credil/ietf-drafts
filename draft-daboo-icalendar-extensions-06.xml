<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="../../rfc2629.xslt"?><!DOCTYPE rfc SYSTEM 'rfc2629.dtd'[<!ENTITY rfc2119 PUBLIC '' 'bibxml/reference.RFC.2119.xml'><!ENTITY rfc5234 PUBLIC '' 'bibxml/reference.RFC.5234.xml'><!ENTITY rfc5545 PUBLIC '' 'bibxml/reference.RFC.5545.xml'><!ENTITY rfc5546 PUBLIC '' 'bibxml/reference.RFC.5546.xml'>]><?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?><?rfc toc="yes"?><?rfc comments="yes"?><?rfc inline="yes"?><?rfc symrefs="yes"?><?rfc sortrefs="yes"?><?rfc compact="yes"?><?rfc subcompact="no"?><?rfc tocdepth="2"?><?rfc strict="yes"?><rfc category="std" ipr='trust200902' docName='draft-daboo-icalendar-extensions-06' updates='5545'>  <front>    <title abbrev="iCalendar Property Extensions">New Properties for iCalendar</title>    <author initials="C." surname="Daboo" fullname="Cyrus Daboo">      <organization abbrev="Apple Inc.">Apple Inc.</organization>      <address>        <postal>          <street>1 Infinite Loop</street>          <city>Cupertino</city>          <region>CA</region>          <code>95014</code>          <country>USA</country>        </postal>        <email>cyrus@daboo.name</email>        <uri>http://www.apple.com/</uri>      </address>    </author>    <date />    <area>Applications</area>    <keyword>alarms</keyword>    <keyword>calendaring</keyword>    <keyword>iCalendar</keyword>    <abstract>      <t>This document defines a set of new properties for iCalendar data.</t>    </abstract>  </front>  <middle>    <section title='Introduction'>      <t>The <xref target='RFC5545'>iCalendar</xref> data format is used to represent calendar data and is used with <xref target='RFC5546'>iTIP</xref> to handle scheduling operations between calendar users. iCalendar is in widespread use, and in accordance with provisions in that specification, extension elements have been added by various vendors to the data format in order to support and enhance capabilities. This specification collects a number of these ad-hoc extensions and uses the new IANA registry capability defined in <xref target='RFC5545' /> to register standard variants with clearly defined definitions and semantics. In addition, some new elements are introduced for features that vendors have recently been requesting.</t>    </section>    <section title='Conventions Used in This Document'>      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <xref target='RFC2119' />.</t>      <t>The notation used in this memo is the ABNF notation of <xref target='RFC5234' /> as used by <xref target='RFC5545'>iCalendar</xref>. Any syntax elements shown below that are not explicitly defined in this specification come from <xref target='RFC5545'>iCalendar</xref>.</t>    </section>    <section title="Backwards Compatible Extension Properties">      <t>iCalendar defines properties which can have different value types indicated by a "VALUE" parameter. The definition of a property specifies a "default" value type that is assumed to be used when no "VALUE" parameter is present. However, this poses a problem to iCalendar parser/generator software that does not know about the default values for new properties. For example, if a new property "FOO" were defined with a default value type of URI, and a URI value with a comma was used, an iCalendar generator not aware of this fact would likely treat the property value as "TEXT" and apply backslash escaping to the comma in the value, effectively making it an invalid URI value.</t>      <t>To avoid this problem, this specification recommends that all properties not defined in <xref target="RFC5545"/>, always include a "VALUE" parameter, if the type is other than "TEXT". i.e., in the example above, the "FOO" property would have a "VALUE=URI" parameter. This allows iCalendar parser/generator software to track the correct types of unknown properties.</t>      <t>New properties defined in this specification use the term "no default" in the "Value Type" definition to indicate that the "VALUE" parameter has to be included.</t>    </section>    <section title="Modifications to Calendar Components">      <t>The following changes to the syntax defined in <xref target='RFC5545'>iCalendar</xref> are made here. New elements are defined in subsequent sections.       <figure>        <artwork name="abnf"><![CDATA[calprops /= *(             ;             ; The following are OPTIONAL,             ; but MUST NOT occur more than once.             ;             uid / url / timezid /             refresh / valid / color /             ;             ; The following are OPTIONAL,             ; and MAY occur more than once.             ;             name / description / image             ;             )eventprop /= *(              ;              ; The following are OPTIONAL,              ; but MUST NOT occur more than once.              ;              color /              ;              ; The following are OPTIONAL,              ; and MAY occur more than once.              ;              image              ;              )todoprop /= *(             ;             ; The following are OPTIONAL,             ; but MUST NOT occur more than once.             ;             color /             ;             ; The following are OPTIONAL,             ; and MAY occur more than once.             ;             image             ;             )jourprop /= *(             ;             ; The following are OPTIONAL,             ; but MUST NOT occur more than once.             ;             color /             ;             ; The following are OPTIONAL,             ; and MAY occur more than once.             ;             image             ;             )]]></artwork>      </figure></t>    </section>    <section title="Properties">      <section title="NAME Property" anchor="name">        <t>          <list style="hanging">            <t hangText="Property Name:">NAME</t>            <t hangText="Purpose:">This property specifies the name of the calendar.</t>            <t hangText="Value Type:">TEXT</t>            <t hangText="Property Parameters:">IANA, non-standard, alternate text representation, and language property parameters can be specified on this property.</t>            <t hangText="Conformance:">This property can be specified multiple times in an iCalendar object. However, each property MUST represent the name of the calendar in a different language.</t>            <t hangText="Description:">This property is used to specify a name (a short, one-line description) of the iCalendar object that can be used by calendar user agents when presenting the calendar data to a user. Whilst a calendar only has a single name, multiple language variants can be specified by including this property multiple times with different "LANGUAGE" parameter values on each.</t>            <t hangText="Format Definition:">This property is defined by the following notation:             <figure>              <artwork name="abnf"><![CDATA[name       = "NAME" nameparam ":" text CRLFnameparam  = *(              ;              ; The following are OPTIONAL,              ; but MUST NOT occur more than once.              ;              (";" altrepparam) / (";" languageparam) /              ;              ; The following is OPTIONAL,              ; and MAY occur more than once.              ;              (";" other-param)              ;              )]]></artwork>            </figure></t>            <t hangText="Example:">The following is an example of this property:             <figure>              <artwork><![CDATA[NAME:Company Vacation Days]]></artwork>            </figure></t>          </list>        </t>      </section>      <section title="DESCRIPTION Property" anchor="description">        <t>This specification modifies the definition of the "DESCRIPTION" property to allow it to be defined on an iCalendar object. The following additions are made to the definition of this property.         <list style="hanging">          <t hangText="Purpose:">This property specifies the description of the calendar.</t>          <t hangText="Conformance:">This property can be specified multiple times in an iCalendar object. However, each property MUST represent the description of the calendar in a different language.</t>          <t hangText="Description:">This property is used to specify a lengthy textual description of the iCalendar object that can be used by calendar user agents when describing the nature of the calendar data to a user. Whilst a calendar only has a single description, multiple language variants can be specified by including this property multiple times with different "LANGUAGE" parameter values on each.</t>        </list></t>      </section>      <section title="UID Property" anchor="uid">        <t>This specification modifies the definition of the "UID" property to allow it to be defined on an iCalendar object. The following additions are made to the definition of this property.         <list style="hanging">          <t hangText="Purpose:">This property specifies the persistent, globally unique identifier for the iCalendar object.</t>          <t hangText="Conformance:">This property can be specified once in an iCalendar object.</t>        </list></t>      </section>      <section title="URL Property" anchor="url">        <t>This specification modifies the definition of the "URL" property to allow it to be defined on an iCalendar object. The following additions are made to the definition of this property.         <list style="hanging">          <t hangText="Purpose:">This property specifies a URL from where the calendar data was retrieved or where it can be refreshed.</t>          <t hangText="Conformance:">This property can be specified once in an iCalendar object.</t>          <t hangText="Description:">This property specifies a URL identifying the source of the calendar data and a location from where updates can be retrieved.</t>        </list></t>      </section>      <section title="TIMEZONE-ID Property" anchor="timezid">        <t>          <list style="hanging">            <t hangText="Property Name:">TIMEZONE-ID</t>            <t hangText="Purpose:">This property specifies the default time zone identifier for the iCalendar object as a whole.</t>            <t hangText="Value Type:">TEXT</t>            <t hangText="Property Parameters:">IANA and non-standard property parameters can be specified on this property.</t>            <t hangText="Conformance:">This property can be specified once in an iCalendar object.</t>            <t hangText="Description:">This property specifies a time zone identifier that represents the default timezone for which floating time or all-day events in the iCalendar object can be assumed to be relative to. It can also be used to choose an initial time zone for use when creating new components in the iCalendar object. A "VTIMEZONE" component having a "TZID" property matching the value specified in this property MUST be present in the iCalendar object.</t>            <t hangText="Format Definition:">This property is defined by the following notation:             <figure>              <artwork name="abnf"><![CDATA[timezid      = "TIMEZONE-ID" timezidparam                 ":" text CRLF                 ;Same value syntax as "TZID" property.timezidparam = *(";" other-param)]]></artwork>            </figure></t>            <t hangText="Example:">The following is an example of this property:             <figure>              <artwork><![CDATA[TIMEZONE-ID:America/New_York]]></artwork>            </figure></t>          </list>        </t>      </section>      <section title="REFRESH-INTERVAL Property" anchor="refresh-interval">        <t>          <list style="hanging">            <t hangText="Property Name:">REFRESH-INTERVAL</t>            <t hangText="Purpose:">This property specifies a suggested minimum interval for polling for changes of the calendar data from the original source of that data.</t>            <t hangText="Value Type:">DURATION - no default</t>            <t hangText="Property Parameters:">IANA and non-standard property parameters can be specified on this property.</t>            <t hangText="Conformance:">This property can be specified once in an iCalendar object.</t>            <t hangText="Description:">This property specifies a positive duration that gives a suggested minimum polling interval for checking for updates to the calendar data. The value of this property SHOULD be used by calendar user agents to limit the polling interval for calendar data updates to the minimum interval specified.</t>            <t hangText="Format Definition:">This property is defined by the following notation:             <figure>              <artwork name="abnf"><![CDATA[refresh      = "REFRESH-INTERVAL" refreshparam                 ":" dur-value CRLF                 ;consisting of a positive duration of time.refreshparam = *(                ;                ; The following is REQUIRED,                ; but MUST NOT occur more than once.                ;                (";" "VALUE" "=" "DURATION") /                ;                ; The following is OPTIONAL,                ; and MAY occur more than once.                ;                (";" other-param)                ;                )]]></artwork>            </figure></t>            <t hangText="Example:">The following is an example of this property:             <figure>              <artwork><![CDATA[REFRESH-INTERVAL;VALUE=DURATION:P1W]]></artwork>            </figure></t>          </list>        </t>      </section>      <section title="VALID Property" anchor="valid">        <t>          <list style="hanging">            <t hangText="Property Name:">VALID</t>            <t hangText="Purpose:">This property specifies when the calendar data is valid.</t>            <t hangText="Value Type:">DATE-TIME or PERIOD</t>            <t hangText="Property Parameters:">IANA and non-standard property parameters can be specified on this property.</t>            <t hangText="Conformance:">This property can be specified once in an iCalendar object.</t>            <t hangText="Description:">This property specifies a time period for which the calendar data can assumed to be valid. If a "PERIOD" value type is used, the validity is assumed to be a time range defined by the start and end of the period. If a "DATE-TIME" value is used, the date indicates when end date when the calendar data is no longer valid. Once the end date has been reached (or at some convenient time prior) clients SHOULD refresh the calendar data to determine whether an update is available, extending the range of validity. The value MUST be specified in UTC.</t>            <t hangText="Format Definition:">This property is defined by the following notation:             <figure>              <artwork name="abnf"><![CDATA[valid      = "VALID" validparam ":" validval CRLFvalidparam   = *(                ;                ; The following is REQUIRED,                ; but MUST NOT occur more than once.                ;                (";" "VALUE" "=" ("DATE-TIME" / "PERIOD")) /                ;                ; The following is OPTIONAL,                ; and MAY occur more than once.                ;                (";" other-param)                ;                )validval     = date-time / period;Value MUST match value type. Value MUST be in UTC.]]></artwork>            </figure></t>            <t hangText="Example:">The following is an example of this property:             <figure>              <artwork><![CDATA[VALID;VALUE=DATE-TIME:20120609T000000ZVALID;VALUE=PERIOD:20120609T000000Z/P365D]]></artwork>            </figure></t>          </list>        </t>      </section>      <section title="COLOR Property" anchor="color">        <t>          <list style="hanging">            <t hangText="Property Name:">COLOR</t>            <t hangText="Purpose:">This property specifies a color used for displaying the calendar, event, todo, or journal data.</t>            <t hangText="Value Type:">TEXT. The value MUST be three COLON-separated INTEGER values.</t>            <t hangText="Property Parameters:">IANA and non-standard property parameters can be specified on this property.</t>            <t hangText="Conformance:">This property can be specified once in an iCalendar object, or "VEVENT", "VTODO", or "VJOURNAL" calendar components.</t>            <t hangText="Description:">This property specifies a color that client MAY use when presenting the relevant data to a user. Typically this would appear as the "background" color of events or tasks. The value MUST be an RGB value with integer value components in the range 0..255. If a color is specified on a "VEVENT", "VTODO" or "VJOURNAL" that SHOULD override any color specified on the enclosing iCalendar object.</t>            <t hangText="Format Definition:">This property is defined by the following notation:             <figure>              <artwork name="abnf"><![CDATA[color          = "COLOR" colorparam ":" colorvalue CRLFcolorparam     = *(";" other-param)colorvalue     = integer ":" integer ":" integer                 ; Red, green, and blue values in the range                 ; 0 - 255.]]></artwork>            </figure></t>            <t hangText="Example:">The following is an example of this property:             <figure>              <artwork><![CDATA[COLOR:255:0:255]]></artwork>            </figure></t>          </list>        </t>      </section>      <section title="IMAGE Property" anchor="image">        <t>          <list style="hanging">            <t hangText="Property Name:">IMAGE</t>            <t hangText="Purpose:">This property specifies an image associated with the calendar or a calendar component.</t>            <t hangText="Value Type:">URI or BINARY - no default. The value MUST refer to or be data with a media type of "image".</t>            <t hangText="Property Parameters:">IANA, non-standard, display, inline encoding, and value data type property parameters can be specified on this property. The format type parameter can be specified on this property and is RECOMMENDED for inline binary encoded content information.</t>            <t hangText="Conformance:">This property can be specified multiple times in an iCalendar object, or "VEVENT", "VTODO", or "VJOURNAL" calendar components.</t>            <t hangText="Description:">This property specifies an image for an iCalendar object or a calendar component via a uri or directly with inline data that can be used by calendar user agents when presenting the calendar data to a user. Multiple properties MAY be used to specify alternative sets of images with, for example, varying media subtypes, resolutions or sizes. When multiple properties are present, calendar user agents SHOULD display only one of them, picking one that provides the most appropriate image quality, or display none. The "DISPLAY" parameter is used to indicate the intended display mode for the image. An "ALTURI" parameter is used to provide a "clickable" image where the URI in the parameter value can be "launched" by a click on the image in the calendar user agent.</t>            <t hangText="Format Definition:">This property is defined by the following notation:             <figure>              <artwork name="abnf"><![CDATA[image      = "IMAGE" imageparam ( ":" uri ) /             (               ";" "ENCODING" "=" "BASE64"               ";" "VALUE" "=" "BINARY"               ":" binary             )             CRLFimageparam = *(              ;              ; The following is REQUIRED,              ; but MUST NOT occur more than once.              ;              (";" "VALUE" "=" "URI") /              ;              ; The following is OPTIONAL for a URI value,              ; RECOMMENDED for a BINARY value,              ; and MUST NOT occur more than once.              ;              (";" fmttypeparam) /              ;              ; The following are OPTIONAL,              ; and MUST NOT occur more than once.              ;              (";" alturiparam) / (";" displayparam) /              ;              ; The following is OPTIONAL,              ; and MAY occur more than once.              ;              (";" other-param)              ;              )]]></artwork>            </figure></t>            <t hangText="Example:">The following is an example of this property:             <figure>              <artwork><![CDATA[IMAGE;VALUE=URI;DISPLAY=BACKGROUND;FMTTYPE=image/png:h ttp://example.com/images/party.png]]></artwork>            </figure></t>          </list>        </t>      </section>    </section>    <section title="Property Parameters">      <section title="ALTURI Property Parameter" anchor="alturi">        <t>          <list style="hanging">            <t hangText="Parameter Name:">ALTURI</t>            <t hangText="Purpose:">To specify a URI alternative to a property value.</t>            <t hangText="Format Definition:">This property parameter is defined by the following notation:             <figure>              <artwork name="abnf-rfc5234"><![CDATA[alturiparam = "ALTURI" "=" DQUOTE uri DQUOTE]]></artwork>            </figure></t>            <t hangText="Description:">This property parameter MAY be specified on "IMAGE" properties.</t>            <t hangText="Example:">              <figure>                <artwork><![CDATA[IMAGE;VALUE=URI;FMTTYPE=image/png:ALTURI="http://example.co m/clicked-image1":http://example.com/images/party.png]]></artwork>              </figure>            </t>          </list>        </t>      </section>      <section title="DISPLAY Property Parameter" anchor="display">        <t>          <list style="hanging">            <t hangText="Parameter Name:">DISPLAY</t>            <t hangText="Purpose:">To specify different ways in which an image for a calendar or component can be displayed.</t>            <t hangText="Format Definition:">This property parameter is defined by the following notation:             <figure>              <artwork name="abnf-rfc5234"><![CDATA[displayparam = "DISPLAY" "="               ("BADGE" /       ; A small "badge" image                "BACKGROUND" /  ; Use as a background image                "OVERLAY" /     ; Use as an overlay image                "BANNER" /      ; Use as a "banner" across the top                x-name /        ; Experimental type                iana-token)     ; Other IANA registered type                                ;                                ; Default is BADGE]]></artwork>            </figure></t>            <t hangText="Description:">This property parameter MAY be specified on "IMAGE" or "IMAGE" properties. In the absence of this parameter, the value "BADGE" MUST be used for the default behavior. The value determines how a client ought to present an image supplied in iCalendar data to the user.</t>            <t>Values for this parameter are registered with IANA as per <xref target='iana_display_types' />. New values can be added to this registry following the procedure outlined in Section 8.2.1 of <xref target="RFC5545" />.</t>            <t>Servers and clients MUST handle x-name and iana-token values they don't recognize by not displaying any image at all.</t>            <t hangText="Example:">              <figure>                <artwork><![CDATA[IMAGE;VALUE=URI;DISPLAY=BANNER;FMTTYPE=image/png:http://exa mple.com/images/weather-cloudy.png]]></artwork>              </figure>            </t>          </list>        </t>      </section>    </section>    <section title='Security Considerations'>      <t>Several of the new properties or parameters defined by this specification allow reference to "external" URIs. Care MUST be taken when accessing data at external URIs as malicious content could be present. In addition, access to those URIs could be tracked, leading to loss of privacy.</t>    </section>    <section title='IANA Considerations'>      <section title='Property Registrations'>        <t>This document defines the following new iCalendar properties to be added to the registry defined in Section 8.2.3 of <xref target="RFC5545" />:</t>        <texttable>          <ttcol>Property</ttcol>          <ttcol>Status</ttcol>          <ttcol>Reference</ttcol>          <c>NAME</c>          <c>Current</c>          <c>RFCXXXX, <xref target="name" /></c>          <c>DESCRIPTION</c>          <c>Current</c>          <c>RFC5545 Section 3.8.1.5, RFCXXXX, <xref target="description" /></c>          <c>UID</c>          <c>Current</c>          <c>RFC5545 Section 3.8.4.7, RFCXXXX, <xref target="uid" /></c>          <c>URL</c>          <c>Current</c>          <c>RFC5545 Section 3.8.4.6, RFCXXXX, <xref target="url" /></c>          <c>TIMEZONE-ID</c>          <c>Current</c>          <c>RFCXXXX, <xref target="timezid" /></c>          <c>REFRESH-INTERVAL</c>          <c>Current</c>          <c>RFCXXXX, <xref target="refresh-interval" /></c>          <c>VALID</c>          <c>Current</c>          <c>RFCXXXX, <xref target="valid" /></c>          <c>COLOR</c>          <c>Current</c>          <c>RFCXXXX, <xref target="color" /></c>          <c>IMAGE</c>          <c>Current</c>          <c>RFCXXXX, <xref target="image" /></c>        </texttable>      </section>      <section title='Parameter Registrations'>        <t>This document defines the following new iCalendar property parameters to be added to the registry defined in Section 8.2.4 of <xref target="RFC5545" />:</t>        <texttable>          <ttcol>Property Parameter</ttcol>          <ttcol>Status</ttcol>          <ttcol>Reference</ttcol>          <c>ALTURI</c>          <c>Current</c>          <c>RFCXXXX, <xref target="alturi" /></c>          <c>DISPLAY</c>          <c>Current</c>          <c>RFCXXXX, <xref target="display" /></c>        </texttable>      </section>      <section anchor='iana_display_types' title='Display Types Registry'>        <t>This document defines the following new iCalendar value registry as per Section 8.2.6 of <xref target="RFC5545" />:</t>        <texttable>          <ttcol>Display Type</ttcol>          <ttcol>Status</ttcol>          <ttcol>Reference</ttcol>          <c>BADGE</c>          <c>Current</c>          <c>RFCXXXX, <xref target="display" /></c>          <c>BACKGROUND</c>          <c>Current</c>          <c>RFCXXXX, <xref target="display" /></c>          <c>OVERLAY</c>          <c>Current</c>          <c>RFCXXXX, <xref target="display" /></c>          <c>BANNER</c>          <c>Current</c>          <c>RFCXXXX, <xref target="display" /></c>        </texttable>      </section>    </section>    <section title='Acknowledgments'>      <t>Thanks to the following for feedback: Bernard Desruisseaux, Mike Douglass, Arnaud Quillaud, and Dave Thewlis. This specification came about via discussions at the Calendaring and Scheduling Consortium.</t>    </section>  </middle>  <back>    <references title='Normative References'>&rfc2119; &rfc5234; &rfc5545;</references>    <references title='Informative References'>&rfc5546;</references>    <section title="Change History (To be removed by RFC Editor before publication)">      <t>Changes in -06:       <list style='numbers'>        <t>Removed BROADCAST/CONFERENCE properties and related parameters.</t>      </list></t>      <t>Changes in -05:       <list style='numbers'>        <t>Added section with recommendation on handling extension properties.</t>        <t>Added VALID property.</t>      </list></t>      <t>Changes in -04:       <list style='numbers'>        <t>TZID changed to new property TIMEZONE-ID.</t>        <t>Minor formal syntax changes.</t>      </list></t>      <t>Changes in -03:       <list style='numbers'>        <t>Dropped CALENDAR- prefix</t>        <t>DESCRIPTION, UID and TZID now based on existing RFC5545 properties</t>        <t>COLOR now on both the calendar and component level</t>        <t>IMAGE now on both the calendar and component level</t>        <t>Added FEATURE and REGION parameters to CONFERENCE property</t>        <t>Added ALTURI parameter to IMAGE property</t>        <t>Added FEED value to FEATURE parameter</t>        <t>Added BROADCAST property and clarified that CONFERENCE is for bi-direction channels and BROADCAST is for uni-directional.</t>      </list></t>      <t>Changes in -02:       <list style='numbers'>        <t>Minor wording changes.</t>        <t>Interval is now described as the "minimum interval".</t>        <t>Added CONFERENCE property and INFO parameter.</t>      </list></t>      <t>Changes in -01:       <list style='numbers'>        <t>Fixed DISPLAY parameter handling of x- and iana tokens to state that clients ignore the image if the token is not recognized.</t>        <t>Allow language variants for CALENDAR-NAME and CALENDAR-DESCRIPTION.</t>        <t>Added registry for DISPLAY values.</t>      </list></t>    </section>  </back></rfc>