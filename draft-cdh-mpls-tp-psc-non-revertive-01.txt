



MPLS Working Group                                             T. Cheung
Internet-Draft                                                      ETRI
Intended status: Standards Track                         A. D'Alessandro
Expires: March 14, 2014                                   Telecom Italia
                                                         H. van Helvoort
                                                     Huawei Technologies
                                                      September 10, 2013


            PSC protocol updates for non-revertive operation
               draft-cdh-mpls-tp-psc-non-revertive-01.txt

Abstract

   This document optionally updates [RFC6378], "MPLS Transport Profile
   (MPLS-TP) Linear Protection", to change non-revertive operation to be
   aligned with the behavior defined in [RFC4427] and in an effort to
   satisfy the ITU-T's protection switching requirements.  An operator
   command, Manual Switch to Working (MS-W) is also included to revert
   traffic to the working path in non-revertive operation.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on March 14, 2014.

Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect



Cheung, et al.           Expires March 14, 2014                 [Page 1]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Motivation for adding MS-W  . . . . . . . . . . . . . . .   3
     1.2.  Behavior of MS-P and MS-W . . . . . . . . . . . . . . . .   3
     1.3.  Equal priority resolution . . . . . . . . . . . . . . . .   3
   2.  Conventions Used in This Document . . . . . . . . . . . . . .   4
   3.  Acronyms  . . . . . . . . . . . . . . . . . . . . . . . . . .   4
   4.  Updates to the PSC RFC  . . . . . . . . . . . . . . . . . . .   4
     4.1.  Updates to Section 2.1. Acronyms  . . . . . . . . . . . .   4
     4.2.  Updates to Section 3.1. Local Request Logic . . . . . . .   5
     4.3.  Updates to Section 3.2. Remote Requests . . . . . . . . .   6
     4.4.  Updates to Section 3.6. PSC Control States  . . . . . . .   6
     4.5.  Updates to Section 4.2.2. PSC Request Field . . . . . . .   7
     4.6.  Updates to Section 4.3.2. Priority of Inputs  . . . . . .   7
     4.7.  Updates to Section 4.3.3.1. Normal State  . . . . . . . .   9
     4.8.  Updates to Section 4.3.3.2. Unavailable State . . . . . .  11
     4.9.  Updates to Section 4.3.3.3. Protecting Administrative
           State . . . . . . . . . . . . . . . . . . . . . . . . . .  12
     4.10. Updates to Section 4.3.3.4. Protecting Failure State  . .  15
     4.11. Updates to Section 4.3.3.5. Wait-to-Restore State . . . .  16
     4.12. Updates to Section 4.3.3.6. Do-not-Revert State . . . . .  17
     4.13. Updates to Appendix A. PSC State Machine Tables . . . . .  19
   5.  Security considerations . . . . . . . . . . . . . . . . . . .  22
   6.  IANA considerations . . . . . . . . . . . . . . . . . . . . .  22
   7.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  22
   8.  Normative References  . . . . . . . . . . . . . . . . . . . .  22
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  22

1.  Introduction

   Non-revertive mode of protection switching is defined in [RFC4427].
   In this mode, the traffic does not return to the working path when
   switch-over requests are terminated.

   However, PSC protocol defined in [RFC6378] supports this operation
   only when recovering from a defect condition, but does not operate as
   non-revertive when an operator's switch-over command such as Forced
   Switch or Manual Switch is cleared.  To be aligned with legacy
   transport network behavior and [RFC4427], a node should go into the
   Do-not-Revert (DNR) state not only when a failure condition on a
   working path is cleared but also when an operator command requesting
   switch-over is cleared.



Cheung, et al.           Expires March 14, 2014                 [Page 2]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   Changing the non-revertive operation introduces necessity of a new
   operator command to revert traffic to the working path when in DNR
   state.  Moreover, according to Section 4.3.3.6 (Do-not-Revert State)
   in [RFC6378], "to revert back to Normal state, the administrator
   SHALL issue a Lockout of protection command followed by a Clear
   command."  This requirement introduces the potential risk of an
   unprotected situation while the Lockout of protection is in effect.
   Manual Switch-over for recovery LSP/span command, defined in
   [RFC4427] and also defined in [RFC5654], Requirement 83, as one of
   the mandatory external commands, should be used for this purpose, but
   is not included in [RFC6378].

   This document optionally updates [RFC6378] to change non-revertive
   operation to be aligned with the behavior defined in [RFC4427] and to
   meet the ITU-T's protection switching requirements, and add a new
   operator command, Manual Switch to Working (MS-W) to avoid the
   potential problem with the Lockout of protection command when the DNR
   should be cleared.  For the sake of clarity, Manual Switch (MS)
   defined in [RFC6378] is renamed Manual Switch to Protection (MS-P).

1.1.  Motivation for adding MS-W

   Most of the operational interventions on working paths are executed
   after operating a "Manual switch-over for normal traffic" switch
   command that switches the normal traffic from the working path to the
   protection path.  This command will keep the traffic on the
   protection path unless a "Manual switch-over for recovery LSP/span"
   command is issued that switches the normal traffic back to the
   working path.  Using Lockout of protection command as currently
   suggested in [RFC6378] may cause, in some circumstances, traffic
   loss.

1.2.  Behavior of MS-P and MS-W

   The MS-P and MS-W commands SHALL have the same priority.  If one of
   these commands is already issued, and the other command is issued
   afterwards, it SHALL be ignored.  If two LERs are requesting opposite
   operations simultaneously, i.e. one LER is sending MS-P while the
   other LER is sending MS-W, the MS-W SHALL be considered to have a
   higher priority than MS-P, and MS-P SHALL be ignored.

   This behavior is described in Section 4.2 that proposes updates to
   Section 3.1 "Local Request Logic" of [RFC6378].

1.3.  Equal priority resolution

   [RFC6378] defines only one rule for equal priority condition in
   Section 4.3.2 as "The remote message from the far-end LER is assigned



Cheung, et al.           Expires March 14, 2014                 [Page 3]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   a priority just below the similar local input."  In order to support
   the manual switch behavior described in Section 1.2, additional rules
   for equal priority resolution are required, and are described in
   Section 4.6 that proposes updates to Section 4.3.2.  "Priority of
   Inputs" of [RFC6378].

2.  Conventions Used in This Document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

3.  Acronyms

   This draft uses the following acronyms:

   MPLS-TP Transport Profile for MPLS
   MS      Manual Switch
   MS-P    Manual Switch to Protection
   MS-W    Manual Switch to Working
   PSC     Protection State Coordination Protocol


4.  Updates to the PSC RFC

   This section describes the changes required to change non-revertive
   operation and add "Manual Switch to Working" operator command in the
   PSC protocol defined in [RFC6378].

   The term "Manual Switch" and its acronym "MS" used in [RFC6378] are
   replaced respectively by "Manual Switch to Protection" and "MS-P" by
   this document to avoid confusion with "Manual Switch to Working" and
   its acronym "MS-W".

   Also, the term "Protecting administrative state" used in [RFC6378] is
   replaced by "Switching administrative state" by this document to
   include the case where traffic is switched back to the working path
   by administrative Manual Switch to Working command.

4.1.  Updates to Section 2.1.  Acronyms

   Replace the following bullet item:

   MS Manual Switch


   With:




Cheung, et al.           Expires March 14, 2014                 [Page 4]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   MS-P Manual Switch to Protection
   MS-W Manual Switch to Working


4.2.  Updates to Section 3.1.  Local Request Logic

   Replace the following text in the bullet item for operator command:

      The commands Forced Switch, Manual Switch, Clear, Lockout of
      protection (defined in [RFC4427] as Forced switch-over, Manual
      switch-over, Clear, and Lockout of recovery LSP/span,
      respectively) MUST be supported.

   With:

      The commands Forced Switch, Manual Switch to Protection, Manual
      Switch to Working, Clear, Lockout of protection (defined in
      [RFC4427] as Forced switch-over for normal traffic, Manual switch-
      over for normal traffic, Manual switch-over for recovery LSP/span,
      Clear and Lockout of recovery LSP/span, respectively) MUST be
      supported.

   Replace the following bullet item in the local request list:

   o  Manual Switch (MS) - if the operator requested that traffic be
      switched from the working path to the protection path.  This is
      only relevant if there is no currently active fault condition or
      operator command.

   With:

   o  Manual Switch to Protection (MS-P) - if the operator requested
      that traffic be switched from the working path to the protection
      path.  This is only relevant if there is no currently active fault
      condition or operator command.

   o  Manual Switch to Working (MS-W) - if the operator requested that
      traffic be switched from the protection path to the working path.
      This is only relevant if there is no currently active fault
      condition or operator command.

   Add the following text above the last paragraph:

      The MS-P and MS-W commands SHALL have the same priority.  If one
      of these commands is already issued, and the other command is
      issued afterwards, it SHALL be ignored.  If two LERs are
      requesting opposite operations simultaneously, i.e. one LER is
      sending MS-P while the other LER is sending MS-W, the MS-W SHALL



Cheung, et al.           Expires March 14, 2014                 [Page 5]

Internet-Draft   PSC updates for non-revertive operation  September 2013


      be considered to have a higher priority than MS-P, and MS-P SHALL
      be ignored.

4.3.  Updates to Section 3.2.  Remote Requests

   Replace the following bullet item in the remote request list:

   o  Remote MS - indicates that the remote end point is operating under
      an operator command to switch the traffic from the working path to
      the protection path.

   With:

   o  Remote MS-P - indicates that the remote end point is operating
      under an operator command to switch the traffic from the working
      path to the protection path.

   o  Remote MS-W - indicates that the remote end point is operating
      under an operator command to switch the traffic from the
      protection path to the working path.

   Replace the following bullet item:

   o  Remote DNR - indicates that the remote end point has determined
      that the failure condition has recovered and will continue
      transporting traffic on the protection path due to operator
      configuration that prevents automatic reversion to the Normal
      state.

   With:

   o  Remote DNR - indicates that the remote end point has determined
      that the switch-over condition by administrative commands has
      ceased or that the failure condition has recovered and will
      continue transporting traffic on the protection path due to
      operator configuration that prevents automatic reversion to the
      Normal state.

4.4.  Updates to Section 3.6.  PSC Control States

   Replace the following bullet item in the protection domain states
   list:

   o  Protecting administrative state - The operator has issued a
      command switching the user traffic to the protection path.

   With:




Cheung, et al.           Expires March 14, 2014                 [Page 6]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   o  Switching administrative state - The operator has issued a command
      switching the user traffic either from the working path to the
      protection path or from the protection path to the working path.

4.5.  Updates to Section 4.2.2.  PSC Request Field

   Replace the following bullet item in the request list:

   o  (5) Manual Switch - indicates that the transmitting end point has
      switched traffic to the protection path as a result of an
      administrative Manual Switch command.  The FPath field SHALL
      indicate that the working path is being blocked (i.e., FPath set
      to 1), and the Path field SHALL indicate that user data traffic is
      being transported on the protection path (i.e., Path set to 1).

   With:

   o  (5) Manual Switch - indicates that the transmitting end point has
      switched traffic to the protection path as a result of an
      administrative Manual Switch to Protection (MS-P) command or to
      the working path as a result of an administrative Manual Switch to
      Working (MS-W) command.  Two commands, MS-P and MS-W are
      represented by the same Request Field value, but differentiated by
      the FPath value.  When traffic is switched to the protection path,
      the FPath field SHALL indicate that the working path is being
      blocked (i.e., FPath set to 1), and the Path field SHALL indicate
      that user data traffic is being transported on the protection path
      (i.e., Path set to 1).  When traffic is switched to the working
      path, the FPath field SHALL indicate that the protection path is
      being blocked (i.e., FPath set to 0), and the Path field SHALL
      indicate that user data traffic is being transported on the
      working path (i.e., Path set to 0).

4.6.  Updates to Section 4.3.2.  Priority of Inputs

   Replace the following number item:

      8.  Manual Switch (operator command)

   With:

      8.  Manual Switch to Protection/Working (operator command)

   Replace the following two paragraphs:

      As was noted above, the Local Request logic SHALL always select
      the local input indicator with the highest priority as the current
      local request, i.e., only the highest priority local input will be



Cheung, et al.           Expires March 14, 2014                 [Page 7]

Internet-Draft   PSC updates for non-revertive operation  September 2013


      used to affect the control logic.  All local inputs with lower
      priority than this current local request will be ignored.

      The remote message from the far-end LER is assigned a priority
      just below the similar local input.  For example, a remote Forced
      Switch would have a priority just below a local Forced Switch but
      above a local Signal Fail on protection input.  As mentioned in
      Section 3.6.1, the state transition is determined by the higher
      priority input between the highest priority local input and the
      remote message.  This also determines the classification of the
      state as local or remote.  The following subsections detail the
      transition based on the current state and the higher priority of
      these two inputs.

   With:

      As was noted above, the Local Request logic SHALL always select
      the local input indicator with the highest priority as the current
      local request, i.e., only the highest priority local input will be
      used to affect the control logic.  All local inputs with lower
      priority than this current local request will be ignored.  For
      local inputs with same priority, first-come, first-served rule is
      applied.  For example, once MS-P (or MS-W) local input is
      determined as the highest priority local input, then subsequent
      MS-W (or MS-P) local input will be ignored and automatically
      canceled.

      The remote message from the far-end LER is assigned a priority
      just below the same local input.  For example, a remote Forced
      Switch would have a priority just below a local Forced Switch but
      above a local Signal Fail on protection input.

      However, if the LER is in a remote state due to a remote message,
      a subsequent local input having the same priority but requesting
      different action to the control logic, will be considered as
      having lower priority than the remote message, and will be
      ignored.  For example, if the LER is in remote Switching
      administrative status due to a remote MS-P, then subsequent local
      MS-W will be ignored and automatically canceled.

      It should be noted that there is a reverse case where one LER
      receives a local command and the other LER receives,
      simultaneously, a command with the same priority but requesting
      different action.  In this case, each of the two LERs receives a
      subsequent remote message having the same priority but requesting
      different action, while the LER is in a local state due to the
      local input.  In this case, a priority must be set for the
      commands with the same priority regardless of its orgin (local



Cheung, et al.           Expires March 14, 2014                 [Page 8]

Internet-Draft   PSC updates for non-revertive operation  September 2013


      input or remote message).  For example, one LER receives MS-P as a
      local input and the other LER receives MS-W as a local input,
      simultaneously.  In this case, MS-W SHALL be considered as having
      higher priority than MS-P at both LERs.

      In order to resolve the equal priority conditions described above,
      following rules are defined:

      *  If two local inputs having same priority but requesting
         different action come to the Local Request logic, then the
         input coming first SHALL be considered to have a higher
         priority than the other coming later (first-come, first-
         served).

      *  If the LER receives both a local input and a remote message
         with the same priority and requesting the same action, i.e.,
         the same PSC Request Field and the same FPath value, then the
         local input SHALL be considered to have a higher priority than
         the remote message.

      *  If the LER receives both a local input and a remote message
         with the same priority but requesting different actions, i.e.,
         the same PSC Request Field but different FPath value, then the
         first-come, first-served rule SHALL be applied.  If the remote
         message comes first, then the state SHALL be a remote state and
         subsequent local input is ignored.  However, if the local input
         comes first, the first-come, first-served rule cannot be
         applied and must be viewed as simultaneous condition.  This is
         because the subsequent remote message will not be an
         acknowledge of the local input by the far-end node.  In this
         case, the priority SHALL be determined by rules for each
         simultaneous conditions.

      *  If the LER receives both MS-P and MS-W commands either as local
         input or remote message and the LER is in a local Switching
         administrative state, then the MS-W command SHALL be considered
         to have a higher priority than the MS-P command.

      As mentioned in Section 3.6.1, the state transition is determined
      by the higher priority input between the highest priority local
      input and the remote message.  This also determines the
      classification of the state as local or remote.  The following
      subsections detail the transition based on the current state and
      the higher priority of these two inputs.

4.7.  Updates to Section 4.3.3.1.  Normal State





Cheung, et al.           Expires March 14, 2014                 [Page 9]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   Replace the following bullet item in the reaction to local input
   list:

   o  A local Forced Switch input SHALL cause the LER to go into local
      Protecting administrative state and begin transmission of an
      FS(1,1) message.

   With:

   o  A local Forced Switch input SHALL cause the LER to go into local
      Switching administrative state and begin transmission of an
      FS(1,1) message.

   Replace the following bullet item in the reaction to local input
   list:

   o  A local Manual Switch input SHALL cause the LER to go into local
      Protecting administrative state and begin transmission of an
      MS(1,1) message.

   With:

   o  A local Manual Switch Protection input SHALL cause the LER to go
      into local Switching administrative state and begin transmission
      of an MS(1,1) message.

   o  A local Manual Switch Working input SHALL cause the LER to go into
      local Switching administrative state and begin transmission of an
      MS(0,0) message.

   Replace the following bullet item in the reaction to remote message
   list:

   o  A remote Forced Switch message SHALL cause the LER to go into
      remote Protecting administrative state and begin transmitting an
      NR(0,1) message.

   With:

   o  A remote Forced Switch message SHALL cause the LER to go into
      remote Switching administrative state and begin transmitting an
      NR(0,1) message.

   Replace the following bullet item in the reaction to remote message
   list:






Cheung, et al.           Expires March 14, 2014                [Page 10]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   o  A remote Manual Switch message SHALL cause the LER to go into
      remote Protecting administrative state, and transmit an NR(0,1)
      message.

   With:

   o  A remote Manual Switch to Protection message SHALL cause the LER
      to go into remote Switching administrative state, and transmit an
      NR(0,1) message.

   o  A remote Manual Switch to Working message SHALL cause the LER to
      go into remote Switching administrative state, while continuing to
      transmit the NR(0,0) message.

4.8.  Updates to Section 4.3.3.2.  Unavailable State

   Replace the following bullet item in the reaction to local input
   list:

   o  A local Forced Switch SHALL be ignored by the PSC Control logic
      when in Unavailable state as a result of a (local or remote)
      Lockout of protection.  If in Unavailable state due to an SF on
      protection, then the FS SHALL cause the LER to go into local
      Protecting administrative state and begin transmitting an FS(1,1)
      message.  It should be noted that due to the unavailability of the
      protection path (i.e., due to the SF condition) that this FS may
      not be received by the far-end until the SF condition is cleared.

   With:

   o  A local Forced Switch SHALL be ignored by the PSC Control logic
      when in Unavailable state as a result of a (local or remote)
      Lockout of protection.  If in Unavailable state due to an SF on
      protection, then the FS SHALL cause the LER to go into local
      Switching administrative state and begin transmitting an FS(1,1)
      message.  It should be noted that due to the unavailability of the
      protection path (i.e., due to the SF condition) that this FS may
      not be received by the far-end until the SF condition is cleared.

   Replace the following bullet item in the reaction to remote message
   list:

   o  A remote Forced Switch message SHALL be ignored by the PSC Control
      logic when in Unavailable state as a result of a (local or remote)
      Lockout of protection.  If in Unavailable state due to a local or
      remote SF on protection, then the FS SHALL cause the LER to go
      into remote Protecting administrative state; if in Unavailable
      state due to local SF, begin transmitting an SF(0,1) message.



Cheung, et al.           Expires March 14, 2014                [Page 11]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   With:

   o  A remote Forced Switch message SHALL be ignored by the PSC Control
      logic when in Unavailable state as a result of a (local or remote)
      Lockout of protection.  If in Unavailable state due to a local or
      remote SF on protection, then the FS SHALL cause the LER to go
      into remote Switching administrative state; if in Unavailable
      state due to local SF, begin transmitting an SF(0,1) message.

4.9.  Updates to Section 4.3.3.3.  Protecting Administrative State

   Replace the title of this section with "Switching Administrative
   State".

   Replace the following text in the first paragraph:

      In the Protecting administrative state, the user data traffic
      SHALL be transported on the protection path, while the working
      path is blocked due to an operator command, i.e., Forced Switch or
      Manual Switch.

   With:

      In the Switching administrative state, the user data traffic SHALL
      be transported on either the protection path or working path,
      depending on an operator command.  If FS or MS-P command is in
      effect, the working path is blocked and the traffic SHALL be
      transported on the protection path.  If MS-W command is in effect,
      the protection path is blocked and the traffic SHALL be
      transported on the working path.

   Replace the reaction to local input list with:

   o  A local Clear SHALL be ignored if in remote Switching
      administrative state.  If in local Switching administrative state
      due to local FS or MS-P, then this input SHALL cause the LER to go
      into Normal state when the LER is configured for revertive
      behavior, or Do-not-Revert State when the LER is configured for
      non-revertive behavior.  If in local Switching administrative
      state due to local MS-W, then this input SHALL cause the LER to go
      into Normal state.

   o  A local Lockout of protection input SHALL cause the LER to go into
      local Unavailable state and begin transmission of an LO(0,0)
      message.

   o  A local Forced Switch input SHALL cause the LER to remain in local
      Switching administrative state and transmit an FS(1,1) message.



Cheung, et al.           Expires March 14, 2014                [Page 12]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   o  A local Signal Fail indication on the protection path SHALL cause
      the LER to go into local Unavailable state and begin transmission
      of an SF(0,0) message, if the current state is due to a (local or
      remote) MS-P or MS-W command.  If the LER is in (local or remote)
      Switching administrative state due to an FS situation, then the SF
      on protection SHALL be ignored.

   o  A local Signal Fail indication on the working path SHALL cause the
      LER to go into local Protecting failure state and begin
      transmitting an SF(1,1) message, if the current state is due to a
      (local or remote) MS-P or MS-W command.  If the LER is in remote
      Switching administrative state due to a remote Forced Switch
      command, then this local indication SHALL cause the LER to remain
      in remote Switching administrative state and transmit an SF(1,1)
      message.  If the LER is in local Switching administrative state
      due to a local Forced Switch command, then this indication SHALL
      be ignored (i.e., the indication should have been blocked by the
      Local Request logic).

   o  A local Clear SF SHALL clear any local SF condition that may
      exist.  If in remote Switching administrative state, the LER SHALL
      stop transmitting the SF(x,1) message and begin transmitting an
      NR(0,1) message.

   o  A local Manual Switch to Protection input SHALL be ignored if in
      remote Switching administrative state due to a remote Forced
      Switch command.  If the current state is due to a (local or
      remote) Manual Switch to Protection operator command, it SHALL
      cause the LER to remain in local Switching administrative state
      and transmit an MS(1,1) message.  If the current state is due to a
      (local or remote) Manual Switch to Working operator command, the
      local MS-P SHALL be ignored.

   o  A local Manual Switch to Working input SHALL be ignored if in
      remote Switching administrative state due to a remote Forced
      Switch command.  If the current state is due to a (local or
      remote) Manual Switch to Working operator command, it SHALL cause
      the LER to remain in local Switching administrative state and
      transmit an MS(0,0) message.  If the current state is due to a
      (local or remote) Manual Switch to Protection operator command,
      the local MS-W SHALL be ignored.

   o  All other local inputs SHALL be ignored.

   Replace the reaction to remote message list with:

   o  A remote Lockout of protection message SHALL cause the LER to go
      into remote Unavailable state and begin transmitting an NR(0,0)



Cheung, et al.           Expires March 14, 2014                [Page 13]

Internet-Draft   PSC updates for non-revertive operation  September 2013


      message.  It should be noted that this automatically cancels the
      current Forced Switch, Manual Switch to Protection or Manual
      Switch to Working command and data traffic is reverted to the
      working path, if required.

   o  A remote Forced Switch message SHALL be ignored by the PSC Process
      logic if there is an active local Forced Switch operator command.
      If the Switching administrative state is due to a remote Forced
      Switch message, then the LER SHALL remain in remote Switching
      administrative state and continue transmitting the last message.
      If the Switching administrative state is due to either a local or
      remote Manual Switch to Protection or Manual Switch to Working
      command, then the LER SHALL remain in remote Switching
      administrative state (updating the state information with the
      proper relevant information) and begin transmitting an NR(0,1)
      message.

   o  A remote Signal Fail message indicating a failure on the
      protection path SHALL cause the LER to go into remote Unavailable
      state and begin transmitting an NR(0,0) message, if the Switching
      administrative state is due to a Manual Switch to Protection or
      Manual Switch to Working command.  It should be noted that this
      automatically cancels the current Manual Switch to Protection or
      Manual Switch to Working command, and data traffic is reverted to
      the working path, if required.

   o  A remote Signal Fail message indicating a failure on the working
      path SHALL be ignored if there is an active local Forced Switch
      command.  If the Switching administrative state is due to a local
      or remote Manual Switch to Protection or Manual Switch to Working,
      then the LER SHALL go to remote Protecting failure state and begin
      transmitting an NR(0,1) message.

   o  A remote Manual Switch to Protection message SHALL be ignored by
      the PSC Control logic if in Switching administrative state due to
      a local or remote Forced Switch.  If in Switching administrative
      state due to a remote Manual Switch to Protection, then the LER
      SHALL remain in remote Switching administrative state and continue
      transmitting the current message.  If in local Switching
      administrative state due to an active Manual Switch to Protection,
      then the LER SHALL remain in local Switching administrative state
      and continue transmission of the MS(1,1) message.  If in Switching
      administrative state due to a remote MS-W, then the LER SHALL
      remain in remote Switching administrative state, and begin
      transmitting an NR(0,1) message.  If in Switching administrative
      state due to a local MS-W, then the remote MS-P message SHALL be
      ignored.




Cheung, et al.           Expires March 14, 2014                [Page 14]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   o  A remote Manual Switch to Working message SHALL be ignored by the
      PSC Control logic if in Switching administrative state due to a
      local or remote Forced Switch.  If in Switching administrative
      state due to a remote MS-W, then the LER SHALL remain in remote
      Switching administrative state and continue transmission of an
      NR(0,0) message.  If in Switching administrative state due to a
      local MS-W, then the remote MS-W message SHALL be ignored.  If in
      Switching administrative state due to a remote MS-P, then the LER
      SHALL remain in remote Switching administrative state and begin
      transmitting an NR(0,0) message.  If in Switching administrative
      state due to a local MS-P, then the LER SHALL go into remote
      Switching administrative state and begin transmitting an NR(0,0)
      message.  It should be noted that this automatically cancels the
      current MS-P command.

   o  A remote DNR(0,1) message SHALL be ignored if in local Switching
      administrative state.  If in remote Switching administrative state
      due to a remote FS or MS-P, then the LER SHALL go to Do-not-Revert
      state and continue transmitting an NR(0,1) message.  If in remote
      Switching administrative state due to a remote MS-W, then the
      remote DNR message SHALL be ignored.

   o  A remote NR(0,0) message SHALL be ignored if in local Switching
      administrative state.  If in remote Switching administrative state
      due to remote FS and there is no active local Signal Fail
      indication, then the LER SHALL go into Normal state and begin
      transmitting an NR(0,0) message.  If there is a local Signal Fail
      on the working path, the LER SHALL go into local Protecting
      failure state and begin transmitting an SF(1,1) message.  If in
      remote Switching administrative state due to remote MS-P or MS-W,
      then the LER SHALL go into Normal state and begin transmitting an
      NR(0,0) message.  If in local Switching administrative state due
      to local MS-P or MS-W, then the remote NR(0,0) message SHALL be
      ignored.

   o  All other remote messages SHALL be ignored.

4.10.  Updates to Section 4.3.3.4.  Protecting Failure State

   Replace the following bullet item in the reaction to local input
   list:

   o  A local Forced Switch input SHALL cause the LER to go into
      Protecting administrative state and begin transmission of an
      FS(1,1) message.

   With:




Cheung, et al.           Expires March 14, 2014                [Page 15]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   o  A local Forced Switch input SHALL cause the LER to go into
      Switching administrative state and begin transmission of an
      FS(1,1) message.

   Replace the following bullet item in the reaction to remote message
   list:

   o  A remote Forced Switch message SHALL cause the LER go into remote
      Protecting administrative state, and if in local Protecting
      failure state, the LER SHALL transmit the SF(1,1) message;
      otherwise, it SHALL transmit NR(0,1).

   With:

   o  A remote Forced Switch message SHALL cause the LER go into remote
      Switching administrative state, and if in local Protecting failure
      state, the LER SHALL transmit the SF(1,1) message; otherwise, it
      SHALL transmit NR(0,1).

4.11.  Updates to Section 4.3.3.5.  Wait-to-Restore State

   Replace the following bullet item in the reaction to local input
   list:

   o  A local Forced Switch command SHALL send the Stop command to the
      WTR timer, go into local Protecting administrative state, and
      begin transmission of an FS(1,1) message.

   With:

   o  A local Forced Switch command SHALL send the Stop command to the
      WTR timer, go into local Switching administrative state, and begin
      transmission of an FS(1,1) message.

   Replace the following bullet item in the reaction to local input
   list:

   o  A local Manual Switch input SHALL send the Stop command to the WTR
      timer, go into local Protecting administrative state, and begin
      transmission of an MS(1,1) message.

   With:

   o  A local Manual Switch to Protection input SHALL send the Stop
      command to the WTR timer, go into local Switching administrative
      state, and begin transmission of an MS(1,1) message.





Cheung, et al.           Expires March 14, 2014                [Page 16]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   o  A local Manual Switch to Working input SHALL send the Stop command
      to the WTR timer, go into local Switching administrative state,
      and begin transmission of an MS(0,0) message.

   Replace the following bullet item in the reaction to remote message
   list:

   o  A remote Forced Switch message SHALL send the Stop command to the
      WTR timer, go into remote Protecting administrative state, and
      begin transmission of an NR(0,1) message.

   With:

   o  A remote Forced Switch message SHALL send the Stop command to the
      WTR timer, go into remote Switching administrative state, and
      begin transmission of an NR(0,1) message.

   Replace the following bullet item in the reaction to remote message
   list:

   o  A remote Manual Switch message SHALL send the Stop command to the
      WTR timer, go into remote Protecting administrative state, and
      begin transmission of an NR(0,1) message.

   With:

   o  A remote Manual Switch to Protection message SHALL send the Stop
      command to the WTR timer, go into remote Switching administrative
      state, and begin transmission of an NR(0,1) message.

   o  A remote Manual Switch to Working message SHALL send the Stop
      command to the WTR timer, go into remote Switching administrative
      state, and begin transmission of an NR(0,0) message.

4.12.  Updates to Section 4.3.3.6.  Do-not-Revert State

   Replace the first paragraph:

      Do-not-Revert state is a continuation of the Protecting failure
      state when the protection domain is configured for non-revertive
      behavior.  While in Do-not-Revert state, data traffic SHALL
      continue to be transported on the protection path until the
      administrator sends a command to revert to Normal state.  It
      should be noted that there is a fundamental difference between
      this state and Normal -- whereas Forced Switch in Normal state
      actually causes a switch in the transport path used, in Do-not-
      Revert state, the Forced Switch just switches the state (to
      Protecting administrative state) but the traffic would continue to



Cheung, et al.           Expires March 14, 2014                [Page 17]

Internet-Draft   PSC updates for non-revertive operation  September 2013


      be transported on the protection path!  To revert back to Normal
      state, the administrator SHALL issue a Lockout of protection
      command followed by a Clear command.

   With:

      Do-not-Revert state is a continuation of either the Protecting
      failure state or Switching administrative state due to Forced
      Switch or Manual Switch to Protection when the protection domain
      is configured for non-revertive behavior.  While in Do-not-Revert
      state, data traffic SHALL continue to be transported on the
      protection path until the administrator sends a command to revert
      to Normal state.  When the LER transitions into the Do-not-Revert
      state, the PSC Control Process SHALL check the persistent state of
      the local triggers to decide if it should further transition into
      a new state.  If the result of this check is a transition into a
      new state, the LER SHALL transmit the corresponding message
      described in this section and SHALL use the data path
      corresponding to the new state.  When the protection domain
      remains in Do-not-Revert state, the end point SHALL transmit an
      DNR(0,1) message if the state is local, or an NR(0,1) message if
      the state is remote, indicating -- Nothing to report and data
      traffic is being transported on the protection path.

   Replace the following bullet item in the reaction to local input
   list:

   o  A local Forced Switch command SHALL cause the LER to go into local
      Protecting administrative state and begin transmission of an
      FS(1,1) message.

   With:

   o  A local Forced Switch command SHALL cause the LER to go into local
      Switching administrative state and begin transmission of an
      FS(1,1) message.

   Replace the following bullet item in the reaction to local input
   list:

   o  A local Manual Switch input SHALL cause the LER to go into local
      Protecting administrative state and begin transmission of an
      MS(1,1) message.

   With:






Cheung, et al.           Expires March 14, 2014                [Page 18]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   o  A local Manual Switch to Protection input SHALL cause the LER to
      go into local Switching administrative state and begin
      transmission of an MS(1,1) message.

   o  A local Manual Switch to Working input SHALL cause the LER to go
      into local Switching administrative state and begin transmission
      of an MS(0,0) message.

   Replace the following bullet item in the reaction to remote message
   list:

   o  A remote Forced Switch message SHALL cause the LER to go into
      remote Protecting administrative state and begin transmission of
      an NR(0,1) message.

   With:

   o  A remote Forced Switch message SHALL cause the LER to go into
      remote Switching administrative state and begin transmission of an
      NR(0,1) message.

   Replace the following bullet item in the reaction to remote message
   list:

   o  A remote Manual Switch message SHALL cause the LER to go into
      remote Protecting administrative state and begin transmission of
      an NR(0,1) message.

   With:

   o  A remote Manual Switch to Protection message SHALL cause the LER
      to go into remote Switching administrative state and begin
      transmission of an NR(0,1) message.

   o  A remote Manual Switch to Working message SHALL cause the LER to
      go into remote Switching administrative state and begin
      transmission of an NR(0,0) message.

4.13.  Updates to Appendix A. PSC State Machine Tables

   Modify the state machine as follows (only modified cells are shown):

   Part 1: Local input state machine

   +---------+------+---------+--------+--------+--------+-----+
   |         | OC   | LO      | SF-P   | FS     | SF-W   | SFc |
   +---------+------+---------+--------+--------+--------+-----+
   | N       |      |         |        | SA:F:L |        |     |



Cheung, et al.           Expires March 14, 2014                [Page 19]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   | UA:LO:L |      |         |        |        |        |     |
   | UA:P:L  |      |         |        | SA:F:L |        |     |
   | UA:LO:R |      |         |        |        |        |     |
   | UA:P:R  |      |         |        | SA:F:L |        |     |
   | PF:W:L  |      |         |        | SA:F:L |        |     |
   | PF:W:R  |      |         |        | SA:F:L |        |     |
   | SA:F:L  | [20] |         |        |        |        |     |
   | SA:MW:L | N    | UA:LO:L | UA:P:L | SA:F:L | PF:W:L | i   |
   | SA:MP:L | [20] |         |        | SA:F:L |        |     |
   | SA:F:R  |      |         |        | SA:F:L |        |     |
   | SA:MW:R | i    | UA:LO:L | UA:P:L | SA:F:L | PF:W:L | i   |
   | SA:MP:R |      |         |        | SA:F:L |        |     |
   | WTR     |      |         |        | SA:F:L |        |     |
   | DNR     |      |         |        | SA:F:L |        |     |
   +---------+------+---------+--------+--------+--------+-----+


   +---------+---------+---------+--------+
   |         | MS-W    | MS-P    | WTRExp |
   +---------+---------+---------+--------+
   | N       | SA:MW:L | SA:MP:L |        |
   | UA:LO:L | i       |         |        |
   | UA:P:L  | i       |         |        |
   | UA:LO:R | i       |         |        |
   | UA:P:R  | i       |         |        |
   | PF:W:L  | i       |         |        |
   | PF:W:R  | i       |         |        |
   | SA:F:L  | i       |         |        |
   | SA:MW:L | i       | i       | i      |
   | SA:MP:L | i       |         |        |
   | SA:F:R  | i       |         |        |
   | SA:MW:R | SA:MW:L | i       | i      |
   | SA:MP:R | i       | SA:MP:L |        |
   | WTR     | i       | SA:MP:L |        |
   | DNR     | SA:MW:L | SA:MP:L |        |
   +---------+---------+---------+--------+


   Part 2: Remote messages state machine

   +---------+---------+--------+--------+------+---------+---------+
   |         | LO      | SF-P   | FS     | SF-W | MS-W    | MS-P    |
   +---------+---------+--------+--------+------+---------+---------+
   | N       |         |        | SA:F:R |      | SA:MW:R | SA:MP:R |
   | UA:LO:L |         |        |        |      | i       |         |
   | UA:P:L  |         |        |        |      | i       |         |
   | UA:LO:R |         |        |        |      | i       |         |
   | UA:P:R  |         |        | SA:F:R |      | i       |         |



Cheung, et al.           Expires March 14, 2014                [Page 20]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   | PF:W:L  |         |        | SA:F:R |      | i       |         |
   | PF:W:R  |         |        | SA:F:R |      | i       |         |
   | SA:F:L  |         |        |        |      | i       |         |
   | SA:MW:L | UA:LO:R | UA:P:R | SA:F:R | [13] | i       | i       |
   | SA:MP:L |         |        | SA:F:R |      | SA:MW:R |         |
   | SA:F:R  |         |        |        |      | i       |         |
   | SA:MW:R | UA:LO:R | UA:P:R | SA:F:R | [13] | i       | SA:MP:R |
   | SA:MP:R |         |        | SA:F:R |      | SA:MW:R |         |
   | WTR     |         |        | SA:F:R |      | SA:MW:R | SA:MP:R |
   | DNR     |         |        | SA:F:R |      | SA:MW:R | SA:MP:R |
   +---------+---------+--------+--------+------+---------+---------+


   +---------+-----+-----+----+
   |         | WTR | DNR | NR |
   +---------+-----+-----+----+
   | N       |     |     |    |
   | UA:LO:L |     |     |    |
   | UA:P:L  |     |     |    |
   | UA:LO:R |     |     |    |
   | UA:P:R  |     |     |    |
   | PF:W:L  |     |     |    |
   | PF:W:R  |     |     |    |
   | SA:F:L  |     |     |    |
   | SA:MW:L | i   | i   | i  |
   | SA:MP:L |     |     |    |
   | SA:F:R  |     |     |    |
   | SA:MW:R | i   | i   | i  |
   | SA:MP:R |     |     |    |
   | WTR     |     |     |    |
   | DNR     |     |     |    |
   +---------+-----+-----+----+


   Replace the following item in the footnotes for the table:

      [4]  Remain in the current state (PA:F:R) and transmit SF(1,1).

      [8]  Remain in PA:F:R and transmit NR(0,1).

      [19]  Transition to PA:F:R and send SF (0,1).

   With:

      [4]  Remain in the current state (SA:F:R) and transmit SF(1,1).

      [8]  Remain in SA:F:R and transmit NR(0,1).




Cheung, et al.           Expires March 14, 2014                [Page 21]

Internet-Draft   PSC updates for non-revertive operation  September 2013


      [19]  Transition to SA:F:R and send SF(0,1).

   Add the following item in the footnotes for the table:

      [20] If domain configured for revertive behavior transition to N,
      else transition to DNR.

5.  Security considerations

   No specific security issue is raised in addition to those ones
   already documented in [RFC6378]

6.  IANA considerations

   This document makes no request of IANA.

   Note to RFC Editor: this section may be removed on publication as an
   RFC.

7.  Acknowledgements

8.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC4427]  Mannie, E. and D. Papadimitriou, "Recovery (Protection and
              Restoration) Terminology for Generalized Multi-Protocol
              Label Switching (GMPLS)", RFC 4427, March 2006.

   [RFC5654]  Niven-Jenkins, B., Brungard, D., Betts, M., Sprecher, N.,
              and S. Ueno, "Requirements of an MPLS Transport Profile",
              RFC 5654, September 2009.

   [RFC6378]  Weingarten, Y., Bryant, S., Osborne, E., Sprecher, N., and
              A. Fulignoli, "MPLS Transport Profile (MPLS-TP) Linear
              Protection", RFC 6378, October 2011.

Authors' Addresses

   Taesik Cheung
   ETRI
   218 Gajeongno
   Yuseong-gu, Daejeon  305-700
   South Korea

   Phone: +82-42-860-5646
   Email: cts@etri.re.kr



Cheung, et al.           Expires March 14, 2014                [Page 22]

Internet-Draft   PSC updates for non-revertive operation  September 2013


   Alessandro D'Alessandro
   Telecom Italia
   via Reiss Romoli, 274
   Torino  10141
   Italy

   Phone: +39 011 2285887
   Email: alessandro.dalessandro@telecomitalia.it


   Huub van Helvoort
   Huawei Technologies
   Karspeldreef 4
   Amsterdam  1101 CJ
   The Netherlands

   Phone: +31 20 4300832
   Email: huub.van.helvoort@huawei.com

































Cheung, et al.           Expires March 14, 2014                [Page 23]
