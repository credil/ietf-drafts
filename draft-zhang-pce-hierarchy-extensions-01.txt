PCE Working Group                                               F. Zhang
Internet-Draft                                                   Q. Zhao
Intended status: Informational                       Huawei Technologies
Expires: April 13, 2012                              O. Gonzalez de Dios
                                                          Telefonica I+D
                                                             R. Casellas
                                                                    CTTC
                                                                 D. King
                                                      Old Dog Consulting
                                                        October 13, 2011


Extensions to Path Computation Element Communication Protocol (PCEP) for
              Hierarchical Path Computation Elements (PCE)
                draft-zhang-pce-hierarchy-extensions-01

Abstract

   The hierarchical Path Computation Element (PCE) architecture, defined
   in the companion framework document [I-D.ietf-pce-hierarchy-fwk],
   allows the selection of an optimum domain sequence and the optimum
   end-to-end path, to be derived through the use of a hierarchical
   relationship between domains.

   This document defines the Path Computation Element Protocol (PCEP)
   extensions for the purpose of implementing hierarchical PCE
   procedures which are described the aforementioned document.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 13, 2012.

Copyright Notice

   Copyright (c) 2011 IETF Trust and the persons identified as the



Zhang, et al.            Expires April 13, 2012                 [Page 1]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  4
     1.1.  Terminology  . . . . . . . . . . . . . . . . . . . . . . .  4
     1.2.  Requirements Language  . . . . . . . . . . . . . . . . . .  4
   2.  PCEP Extension Requirements  . . . . . . . . . . . . . . . . .  4
     2.1.  Building of parent topology  . . . . . . . . . . . . . . .  5
     2.2.  New Objective Functions  . . . . . . . . . . . . . . . . .  5
     2.3.  PCEP Request Qualifiers  . . . . . . . . . . . . . . . . .  6
     2.4.  Discovery Between Parent and Child PCEs  . . . . . . . . .  6
       2.4.1.  Parent PCE Capability Discovery  . . . . . . . . . . .  6
       2.4.2.  PCE Domain and PCE ID Discovery  . . . . . . . . . . .  7
     2.5.  Domain Connectivity Information Collection . . . . . . . .  7
     2.6.  Error Case Handling  . . . . . . . . . . . . . . . . . . .  8
   3.  PCEP Extensions  . . . . . . . . . . . . . . . . . . . . . . .  8
     3.1.  Extensions to OPEN object  . . . . . . . . . . . . . . . .  8
       3.1.1.  OF Codes . . . . . . . . . . . . . . . . . . . . . . .  8
       3.1.2.  OPEN Object Flags  . . . . . . . . . . . . . . . . . .  8
       3.1.3.  Domain-ID TLV  . . . . . . . . . . . . . . . . . . . .  9
       3.1.4.  PCE-ID TLV . . . . . . . . . . . . . . . . . . . . . . 10
       3.1.5.  Procedures . . . . . . . . . . . . . . . . . . . . . . 10
     3.2.  Extensions to RP object  . . . . . . . . . . . . . . . . . 11
       3.2.1.  RP Object Flags  . . . . . . . . . . . . . . . . . . . 11
       3.2.2.  Domain-ID TLV  . . . . . . . . . . . . . . . . . . . . 11
       3.2.3.  Procedures . . . . . . . . . . . . . . . . . . . . . . 11
     3.3.  Extensions to NOTIFICATION object  . . . . . . . . . . . . 12
       3.3.1.  Notification Types . . . . . . . . . . . . . . . . . . 12
       3.3.2.  Inter-domain Link TLV  . . . . . . . . . . . . . . . . 12
       3.3.3.  Inter-domain Node TLV  . . . . . . . . . . . . . . . . 13
       3.3.4.  Domain-ID TLV  . . . . . . . . . . . . . . . . . . . . 15
       3.3.5.  PCE-ID TLV . . . . . . . . . . . . . . . . . . . . . . 15
       3.3.6.  Procedures . . . . . . . . . . . . . . . . . . . . . . 15
     3.4.  Extensions to PCEP-ERROR object  . . . . . . . . . . . . . 15
       3.4.1.  Hierarchy PCE Error-Type . . . . . . . . . . . . . . . 15
       3.4.2.  Procedures . . . . . . . . . . . . . . . . . . . . . . 16



Zhang, et al.            Expires April 13, 2012                 [Page 2]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


   4.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 16
   5.  Contributors . . . . . . . . . . . . . . . . . . . . . . . . . 16
   6.  Manageability Considerations . . . . . . . . . . . . . . . . . 16
   7.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 16
     7.1.  Objective Function (OF) codes  . . . . . . . . . . . . . . 16
     7.2.  OPEN Object Flags  . . . . . . . . . . . . . . . . . . . . 16
     7.3.  RP Object Flags  . . . . . . . . . . . . . . . . . . . . . 16
     7.4.  PCEP TLVs  . . . . . . . . . . . . . . . . . . . . . . . . 17
     7.5.  PCEP NOTIFICATION types  . . . . . . . . . . . . . . . . . 17
     7.6.  PCEP PCEP-ERROR types  . . . . . . . . . . . . . . . . . . 17
   8.  Security Considerations  . . . . . . . . . . . . . . . . . . . 17
   9.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 17
     9.1.  Normative References . . . . . . . . . . . . . . . . . . . 17
     9.2.  Informative References . . . . . . . . . . . . . . . . . . 18
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 18




































Zhang, et al.            Expires April 13, 2012                 [Page 3]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


1.  Introduction

   [I-D.ietf-pce-hierarchy-fwk] describes a hierarchical PCE
   architecture which can be used for computing end-to-end paths for
   inter-domain MPLS Traffic Engineering (TE) and GMPLS Label Switched
   Paths (LSPs).  In the hierarchical PCE architecture, the parent PCE
   can compute a multi-domain path based on the domain connectivity
   information and each child PCE is able to compute the intra-domain
   path based on its domain topology information.  The end-to-end domain
   path computing procedures can be abstracted as follows:

   o  A path computation client (PCC) requests its own child PCE the
      computation of an inter-domain path.
   o  The child PCE forwards the request to the parent PCE.
   o  The parent PCE computes one or multiple domain paths from the
      ingress domain to the egress domain.
   o  The parent PCE sends the intra-domain path computation requests
      (between the domain border nodes) to the child PCEs which are
      responsible for the domains along the domain path(s).
   o  The child PCEs return the intra-domain paths to the parent PCE.
   o  The parent PCE constructs the end-to-end inter-domain path based
      on the intra-domain paths and returns the inter-domain path to the
      child PCE.
   o  The child PCE forwards the inter-domain path to the PCC.

   This document defines the PCEP extensions for the purpose of
   implementing hierarchical PCE procedures, which are described in
   [I-D.ietf-pce-hierarchy-fwk].

   The document also uses a number of editor notes to describe options
   and alternative solutions.  These options and notes will be removed
   before publication.

1.1.  Terminology

   This document uses the terminology defined in [RFC4655], [RFC5440]
   and [I-D.ietf-pce-hierarchy-fwk].

1.2.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].


2.  PCEP Extension Requirements





Zhang, et al.            Expires April 13, 2012                 [Page 4]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


2.1.  Building of parent topology

   As stated in section 5.4 of [I-D.ietf-pce-hierarchy-fwk] a parent PCE
   maintains a domain topology map and may contain nodes and links on
   its own right, maintaining a traffic engineering database (TED) for
   the parent domain.

   The parent PCE TED may be configured or learnt by the child PCEs.

   Editors note.  A child PCE could forward the topology within PCNtf
   messages or any other mechanisms, without an IGP adjacency.  Further
   discussion of the discovery mechanism and scope will be discussed in
   later versions of this document.

2.2.  New Objective Functions

   For inter-domain path computation, there are three new objective
   functions which are defined in section 1.3.1 of
   [I-D.ietf-pce-hierarchy-fwk].

   o  Minimize the number of boundary nodes used.
   o  Limit the number of domains crossed.
   o  Disallow domain re-entry.

   During the PCEP session establishment procedure, the parent PCE needs
   to be capable of indicating the objective functions (OF) capability
   in the Open message.  This information can be, in turn, announced by
   child PCEs and used for selecting the PCE when a PCC want a path that
   satisfies a certain inter-domain objective function.

   When a PCC requests a PCE to compute an inter-domain path, the PCC
   needs also to be capable of indicating the new objective functions
   for inter-domain path.  Note that a given PCE may act as a regular
   PCE and as a parent PCE.

   For the reasons described above, new OF codes need to be defined for
   the new inter-domain objective functions.  Then the PCE can notify
   its new inter-domain objective functions to the PCC by carrying them
   in the OF-list TLV which is carried in the OPEN object.  The PCC can
   specify which objective function code to use, which is carried in the
   OF object when requesting a PCE to compute an inter-domain path.

   The proposed solutions may need to differentiate between the OF code
   that is requested at the parent level and the OF code that is
   requested at the intra-domain (child) level.

   A parent PCE needs to be able to insure homogeneity when applying OF
   codes for the intra-domain requests.



Zhang, et al.            Expires April 13, 2012                 [Page 5]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


2.3.  PCEP Request Qualifiers

   As described in section 5.8.1 of [I-D.ietf-pce-hierarchy-fwk], the
   H-PCE architecture will introduce new request qualifications as
   follows:

   o  It MUST be possible for a child PCE to indicate that a request it
      sends to a parent PCE should be satisfied by a domain sequence
      only, that is, not by a full end-to-end path.  This allows the
      child PCE to initiate a per-domain [RFC5152] or a backward
      recursive path computation (BRPC) [RFC5441].
   o  A parent PCE needs to be able to ask a child PCE whether a
      particular node address (the destination of an end-to-end path) is
      present in the domain that the child PCE serves.
   o  As stated in [I-D.ietf-pce-hierarchy-fwk], section 5.5, if a PCC
      knows the egress domain, it can suppy this information as the path
      computation request.  It SHOULD be possible to specify the
      destination domain information in a PCEP request, if it is known.

   To meet the above requirements, the PCEP PCReq message should be
   extended.

2.4.  Discovery Between Parent and Child PCEs

   In the H-PCE architecture, the parent PCE does not need to be aware
   of each child domain topology.  Therefore, it is possible that the
   parent PCE does not join the IGP instance of the child PCE domain,
   i.e. there is no IGP discovery mechanism between the parent PCE and
   child PCE.

   Therefore there must be a discovery mechanism for basic PCE
   information between the parent and child PCEs.  In this case, PCEP
   needs to provide discovery mechanisms that do not rely on IGP
   announcement/discovery procedures.  A simple discovery mechanism
   relies on the static configuration / provisioning of the parent PCE
   id and address, which is configured at each child PCE.

2.4.1.  Parent PCE Capability Discovery

   As described in [I-D.ietf-pce-hierarchy-fwk], during the PCEP session
   establishment procedure, the child PCE needs to be capable of
   indicating to the parent PCE whether it requests the parent PCE
   capability or not.  The parent PCE needs also to be capable of
   indicating whether its parent capability can be provided to the child
   PCE or not.






Zhang, et al.            Expires April 13, 2012                 [Page 6]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


2.4.2.  PCE Domain and PCE ID Discovery

   A PCE domain is a single domain with an associated PCE. it is
   possible for a PCE to manage multiple domains.  The PCE domain may be
   an IGP area or AS.

   The PCE ID is an IPv4 and/or IPv6 address that is used to reach the
   parent/child PCE.  It is RECOMMENDED to use an address that is always
   reachable if there is any connectivity to the PCE.

   The PCE ID information and PCE domain identifiers may be provided
   during the PCEP session establishment procedure or the domain
   connectivity information collection procedure.

2.5.  Domain Connectivity Information Collection

   As described in [I-D.ietf-pce-hierarchy-fwk], the parent PCE builds
   the domain topology map either from configuration or from information
   received from each child PCE.  A child PCE may report its neighbor
   domain connectivity to its parent PCE.  It is reasonable to use PCEP
   PCNtf message to do this procedure.  If an IGP adjacency is
   established between parent and children, it could be used for this
   purpose.

   There are two types of domain border for providing the domain
   connectivity information:

   o  Domain border is a TE link, e.g. the inter-AS TE link which
      connects two ASs.
   o  Domain border is a node, e.g. the IGP ABR which connects two IGP
      areas.

   For the inter-AS TE links, the following information needs to be
   notified to the parent PCE:

   o  Identifier of advertising child PCE.
   o  Identifier of PCE's domain.
   o  Identifier of the link.
   o  TE properties of the link (metrics, bandwidth).
   o  Other properties of the link (technology-specific).
   o  Identifier of link end-points.
   o  Identifier of adjacent domain.

   For the ABR, the following information needs to be notified to the
   parent PCE:






Zhang, et al.            Expires April 13, 2012                 [Page 7]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


   o  Identifier of the ABR.
   o  Identifier of the IGP Area IDs.

2.6.  Error Case Handling

   A PCE that is capable of acting as a parent PCE might not be
   configured or willing to act as the parent for a specific child PCE.
   This fact could be determined when the child sends a PCReq that
   requires parental activity (such as querying other child PCEs), and
   could result in a negative response in a PCEP Error (PCErr) message
   and indicate the hierarchy PCE error types.


3.  PCEP Extensions

3.1.  Extensions to OPEN object

3.1.1.  OF Codes

   There are three new OF codes defined here for H-PCE:

   o  MBN
      *  Name: Minimize the number of Boundary Nodes used
      *  Objective Function Code: (to be assigned by IANA, recommended
         11)
      *  Description: Find a path P such that passes through the least
         boundary nodes.
   o  MTD
      *  Name: Minimize the number of Transit Domains
      *  Objective Function Code: (to be assigned by IANA, recommended
         12)
      *  Description: Find a path P such that passes through the least
         transit domains.
   o  DDR
      *  Name: Disallow Domain Re-entry (DDR)
      *  Objective Function Code: (to be assigned by IANA, recommended
         13)
      *  Description: Find a path P such that does not entry a domain
         more than once.

3.1.2.  OPEN Object Flags

   There are two OPEN object flags defined here for H-PCE:

   o  Parent PCE request bit (to be assigned by IANA, recommended bit
      0): if set it means the child PCE wishes to use the peer PCE as a
      parent PCE.




Zhang, et al.            Expires April 13, 2012                 [Page 8]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


   o  Parent PCE indication bit (to be assigned by IANA, recommended bit
      1): if set it means the PCE can be used as a parent PCE by the
      peer PCE.
   o  Editors Note.  It is possible that a parent PCE will also act as a
      child PCE.

3.1.3.  Domain-ID TLV

   The type of Domain-ID TLV is to be assigned by IANA (recommended 7).
   The length is 8 octets.  The format of this TLV is defined below:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Domain Type         |            Reserved           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Domain ID                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                          Figure 1: Domain-ID TLV

   Domain Type (8 bits): Indicates the domain type.  There are two types
   of domain defined currently:

   o  Type=1: the Domain ID field carries an IGP Area ID.
   o  Type=2: the Domain ID field carries an AS number.

   Domain ID (32 bits): Indicates an IGP Area ID or AS number.

   An AS number may be 2 or 4 bytes long.  For 2-byte AS numbers, the AS
   value is left-padded with 0.

   Editor's note: it may be necessary to support 64 bit domain IDs.

   Editor's note: draft-dhody-pce-pcep-domain-sequence, section 3.2
   deals with the encoding of domain sequences, using ERO-subobjects.
   Work is ongoing to define domain identifiers for OSPF-TE areas, IS-IS
   area (which are variable sized), 2-byte and 4-byte AS number, and any
   other domain that may be defined in the future.  It uses RSVP-TE
   subobject discriminators, rather than new type 1/ type 2.  A domain
   sequence may be encoded as a route object.  The "VALUE" part of the
   TLV could follow common RSVP-TE subobject format:









Zhang, et al.            Expires April 13, 2012                 [Page 9]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |0|    Type     |     Length    |         Reserved              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                          AS Id (4 bytes)                      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |0|    Type     |     Length    |  AS Id (2 bytes)              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    Figure 2: Alternative Domain-ID TLV

3.1.4.  PCE-ID TLV

   The type of PCE-ID TLV is to be assigned by IANA (recommended 8).
   The length is 8.  The format of this TLV is defined below:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Address Type        |            Reserved           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   //                     PCE IP Address                          //
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                           Figure 3: PCE-ID TLV

   Address Type (16 bits): Indicates the address type of PCE IP Address.
   1 means IPv4 address type, 2 means IPv6 address type.

   PCE IP Address: Indicates the reachable address of a PCE.

   Editor's note: RFC5886 already defines the PCE-ID object.  If a
   semantically equivalent PCE-ID TLV is needed (to avoid modifying
   message grammars to include the object), it can align with the PCEP
   object: n any case, the length (4 / 16 bytes) can be used to know
   whether it is an IPv4 or an IPv6 PCE, the address type is not needed.

3.1.5.  Procedures

   The OF codes defined in this document can be carried in the OF-list
   TLV of the OPEN object.  If the OF-list TLV carries the OF codes, it



Zhang, et al.            Expires April 13, 2012                [Page 10]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


   means that the PCE is capable of implementing the corresponding
   objective functions.  This information can be used for selecting a
   proper parent PCE when a child PCE wants to get a path that satisfies
   a certain objective function.

   If a child PCE wants to use the peer PCE as a parent, it can set the
   parent PCE request bit in the OPEN object carried in the Open message
   during the PCEP session creation procedure.  If the peer PCE does not
   want to provide the parent function to the child PCE, it must send a
   PCErr message to the child PCE and clear the parent PCE indication
   bit in the OPEN object.

   If the parent PCE can provide the parent function to the peer PCE, it
   may set the parent PCE indication bit in the OPEN object carried in
   the Open message during the PCEP session creation procedure.

   The PCE may also report its PCE ID and list of domain ID to the peer
   PCE by specifying them in the PCE-ID TLV and List of Domain-ID TLVs
   in the OPEN object carried in the Open message during the PCEP
   session creation procedure.

3.2.  Extensions to RP object

3.2.1.  RP Object Flags

   o  Domain Path Request bit (to be assigned by IANA, recommended bit
      17): if set it means the child PCE wishes to get the domain
      sequence.
   o  Destination Domain Query bit (to be assigned by IANA, recommended
      bit 16): if set it means the parent PCE wishes to get the
      destination domain ID.

3.2.2.  Domain-ID TLV

   The format of this TLV is defined in section Section 3.1.3.  This TLV
   can be carried in an OPEN object to indicate a (list of) managed
   domains, or carried in a RP object to indicate the destination domain
   ID when a child PCE responds to the parent PCE's destination domain
   query by a PCRep message.

   Editors note.  In some cases, the Parent PCE may need to allocate a
   node which is not necessarily the destination node.

3.2.3.  Procedures

   If a child PCE only wants to get the domain sequence for a multi-
   domain path computation from a parent PCE, it can set the Domain Path
   Request bit in the RP object carried in a PCReq message.  The parent



Zhang, et al.            Expires April 13, 2012                [Page 11]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


   PCE which receives the PCReq message tries to compute a domain
   sequence for it.  If the domain path computation succeeds the parent
   PCE sends a PCRep message which carries the domain sequence in the
   ERO to the child PCE .  The domain sequence is specified as AS or
   AREA ERO sub-objects (type 32 for AS [RFC3209] or a to-be-defined IGP
   arrea type).  Otherwise it sends a PCReq message which carries the
   NO-PATH object to the child PCE.

   The parent PCE can set the Destination Domain Query bit in a PCReq
   message to query the destination (which is specified in the END-
   POINTS objects) domain ID from a child PCE.  If the child PCE knows
   the destination(s) domain ID, it sends a PCRep message to the parent
   PCE and specifies the domain ID in the Domain-ID TLV which is carried
   in the RP object.  Otherwise it sends a PCRep message with a NO-PATH
   object to the parent PCE.

3.3.  Extensions to NOTIFICATION object

   Because there will not be too many PCEP sessions between the child
   PCE(s) and parent PCE, it is recommended that the PCEP sessions
   between them keeping alive all the time .  Then the child PCE can
   report all of the domain connectivity information to the parent PCE
   when the PCEP session is established successfully.  It can also
   notify the parent PCE to update or delete the domain connectivity
   information when it detects the changes.

3.3.1.  Notification Types

   There is a new notification type defined in this document:

   o  Domain Connectivity Information notification-type (to be assigned
      by IANA, recommended 3).
      *  Notification-value=0: sent from the parent to the child to
         query all of the domain connectivity information maintained by
         the child PCE.
      *  Notification-value=1: sent from the child to the parent to
         update the domain connectivity information maintained by the
         child PCE.
      *  Notification-value=2: sent from the child to the parent to
         delete the domain connectivity information maintained by the
         child PCE.

3.3.2.  Inter-domain Link TLV

   IGP in each neighbor domain can advertise its inter-domain TE link
   capabilities [RFC5316], [RFC5392].  This information can be collected
   by the child PCEs and forwarded to the parent PCE.  PCEP Inter-domain
   Link TLV is used for carrying the inter-domain TE link attributes for



Zhang, et al.            Expires April 13, 2012                [Page 12]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


   this purpose.  Each Inter-domain Link TLV can carry the attributes of
   one inter-domain link at the most.

   The type of Inter-domain Link TLV is to be assigned by IANA
   (recommended 9).  The length is variable.  The format of this TLV is
   defined below:

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   Advertise Router ID                         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   //                        sub-TLVS                             //
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                      Figure 4: Inter-domain Link TLV

   Editor's note: evaluate other possibilities regarding the wrapping
   and encoding (LSAs / LSUs).  Other fields may be needed, such as LSA
   age (max age methods can be used to "withdraw" or remove a link).
   Sub-TLVs may need to be defined in the context of a Link TLV (top
   TLV).

   Advertise Router ID (32 bits): indicates the router ID which
   advertises the TE LSA or LSP.

   Sub-TLVs: the OSPF sub-TLVs for a TE link which defined in [RFC5392]
   and other associated OSPF RFCs.  It is noted that if the IGP is IS-IS
   for the child domain the sub-TLVs must be converted to the OSPF sub-
   TLVs format when sending this information to the parent PCE through
   PCEP PCNtf message.

   Each inter-domain link is identified by the combination of advertise
   router ID and the link local IP address or link local unnumbered
   identifier.  The PCNtf message which is used for notifying the parent
   PCE to update or delete a inter-domain link must contain the
   information identifies a TE link exclusively.

3.3.3.  Inter-domain Node TLV

   The Inter-domain Node TLV carries only the two adjacent domain ID and
   the router (IGP ABR) ID.

   The type of Inter-domain Node Information TLV is to be assigned by
   IANA (recommended 10).  The length is variable .  The format of this
   TLV is defined below:



Zhang, et al.            Expires April 13, 2012                [Page 13]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                         ABR ID                                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Area ID1                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Area ID2                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                      Figure 5: Inter-domain Node TLV

   ABR ID (32 bits): indicates the domain border router ID.

   Area ID1 & Area ID2 (32 bits): indicates the two neighbor area IDs.

   Editor's note (1): a node may be an inter-domain node for more than
   just 2 areas, the encoding is wrong, unless we explicitly state that
   this TLV can be repeated and we give an example.  Alternatively, we
   can use the generic concept of "domain id" as introduced earlier, to
   avoid the restriction of 4 byte areas only.

   Editor's note (2): do we homogenize so we also have a Advertising
   Router ID? would it be different from the ABR id?

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   Advertise Router ID                         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                         ABR ID                                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |0|    Type     |     Length    |         Reserved              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       IS/IS area 1 ...                        |
     ..                                                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |0|    Type     |     Length    |         Reserved              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       IS/IS area 2 ...                        |
     ..                                                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                Figure 6: Alternative Inter-domain Node TLV







Zhang, et al.            Expires April 13, 2012                [Page 14]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


3.3.4.  Domain-ID TLV

   The format of this TLV is defined in section Section 3.1.3.  This TLV
   can be carried in a NOTIFICATION object to indicate the domain ID of
   the PCE who sends the PCNtf message.

   Editors note.  A PCE may be responsible for several domains, it may
   be beneficial to use a list of TLVs.

3.3.5.  PCE-ID TLV

   The format of this TLV is defined in section Section 3.1.4.  This TLV
   can be carried in a NOTIFICATION object to indicate the PCE ID of the
   PCE who sends the PCNtf message.

3.3.6.  Procedures

   When a parent PCE establishes a PCEP session with a child PCE
   successfully, the parent PCE may request the child PCE to report the
   domain connectivity information.  This procedure can be done by
   sending a PCNtf message from the parent to the child, setting the
   notification-type to 3 and notification-value to 0 in the
   NOTIFICATION object.

   When a child PCE receives the PCNtf message, it may send all of the
   domain connectivity information to the parent PCE by the PCNtf
   message(s).  The notification-type is 3 and notification-value is 1
   in the NOTIFICATION object.  The NOTIFICATION object may carry the
   inter-domain link TLV and inter-domain node TLV to describe the
   inter-domain connectivity information.  It is noted that if the child
   PCE dose not support this function, it will ignore the received PCNtf
   message and the parent PCE will not receive the response.

   The child PCE can also update the domain connectivity information by
   re-sending the PCNtf message(s) with the newly information.

   When the child PCE detects a deletion of domain connectivity (e.g.,
   the inter-domain link TLV is aged out), it must notify the parent PCE
   to delete the inter-domain link by sending the PCNtf message.  The
   notification-type is 3 and notification-value is 2 in the
   NOTIFICATION object.

3.4.  Extensions to PCEP-ERROR object

3.4.1.  Hierarchy PCE Error-Type

   A new PCEP Error-Type is allocated for hierarchy PCE (to be assigned
   by IANA, recommended 19):



Zhang, et al.            Expires April 13, 2012                [Page 15]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


   +------------+------------------------------------------------------+
   | Error-Type | Meaning                                              |
   +------------+------------------------------------------------------+
   | 19         | H-PCE error Error-value=1: parent PCE capability     |
   |            | cannot be provided                                   |
   +------------+------------------------------------------------------+

                        Table 1: H-PCE error table

3.4.2.  Procedures

   When a specific child PCE sends a PCReq to a peer PCE that requires
   parental activity and the peer PCE does not want to act as the parent
   for it, the peer PCE should send a PCErr message to the child PCE and
   specify the error-type (IANA) and error-value (1) in the PCEP-ERROR
   object.


4.  Acknowledgements


5.  Contributors

   TBD.


6.  Manageability Considerations

   TBD.


7.  IANA Considerations

   As per RFC 5226 [RFC5226], IANA is requested to create/update the
   following registries

7.1.  Objective Function (OF) codes

                        Value Meaning Reference
                        11    MBN     This document
                        12    MTD     This document
                        13    DDR     This document

7.2.  OPEN Object Flags

7.3.  RP Object Flags





Zhang, et al.            Expires April 13, 2012                [Page 16]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


7.4.  PCEP TLVs

     Value Meaning              Reference
     x     Interdomain Link TLV This document (section Section 3.3.2)
     x     Interdomain Node TLV This document (section Section 3.3.3)

7.5.  PCEP NOTIFICATION types

                      Type             Value Meaning
                      P2C Notification 1
                                       2
                                       3
                      C2P Notification 1
                                       2
                                       3

7.6.  PCEP PCEP-ERROR types

       Type           Value Meaning
       H-PCE Error 19 1     parent PCE capability cannot be provided
                      2     TBD
                      3     TBD


8.  Security Considerations

   TBD.


9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC5152]  Vasseur, JP., Ayyangar, A., and R. Zhang, "A Per-Domain
              Path Computation Method for Establishing Inter-Domain
              Traffic Engineering (TE) Label Switched Paths (LSPs)",
              RFC 5152, February 2008.

   [RFC5440]  Vasseur, JP. and JL. Le Roux, "Path Computation Element
              (PCE) Communication Protocol (PCEP)", RFC 5440,
              March 2009.

   [RFC5441]  Vasseur, JP., Zhang, R., Bitar, N., and JL. Le Roux, "A
              Backward-Recursive PCE-Based Computation (BRPC) Procedure
              to Compute Shortest Constrained Inter-Domain Traffic



Zhang, et al.            Expires April 13, 2012                [Page 17]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


              Engineering Label Switched Paths", RFC 5441, April 2009.

9.2.  Informative References

   [I-D.ietf-pce-hierarchy-fwk]
              King, D. and A. Farrel, "The Application of the Path
              Computation Element Architecture to the Determination of a
              Sequence of Domains in MPLS and GMPLS",
              draft-ietf-pce-hierarchy-fwk-00 (work in progress),
              October 2011.

   [RFC2629]  Rose, M., "Writing I-Ds and RFCs using XML", RFC 2629,
              June 1999.

   [RFC3209]  Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V.,
              and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
              Tunnels", RFC 3209, December 2001.

   [RFC4655]  Farrel, A., Vasseur, J., and J. Ash, "A Path Computation
              Element (PCE)-Based Architecture", RFC 4655, August 2006.

   [RFC5226]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", BCP 26, RFC 5226,
              May 2008.

   [RFC5316]  Chen, M., Zhang, R., and X. Duan, "ISIS Extensions in
              Support of Inter-Autonomous System (AS) MPLS and GMPLS
              Traffic Engineering", RFC 5316, December 2008.

   [RFC5392]  Chen, M., Zhang, R., and X. Duan, "OSPF Extensions in
              Support of Inter-Autonomous System (AS) MPLS and GMPLS
              Traffic Engineering", RFC 5392, January 2009.


Authors' Addresses

   Fatai Zhang
   Huawei Technologies
   F3-5-B R&D Center, Huawei Base. Bantian, Longgang District
   Shenzhen,   518129
   P.R.China

   Phone: +86-755-28972912
   Email: zhangfatai@huawei.com







Zhang, et al.            Expires April 13, 2012                [Page 18]

Internet-Draft          PCEP Extensions for H-PCE           October 2011


   Quintin Zhao
   Huawei Technologies
   125 Nagog Technology Park
   Acton, MA  01719
   US

   Phone:
   Email: qzhao@huawei.com


   Oscar Gonzalez de Dios
   Telefonica I+D
   Emilio Vargas, 6
   Madrid,
   Spain

   Phone:
   Email: ogondio@tid.es


   Ramon Casellas
   CTTC
   Av. Carl Friedrich Gauss n.7
   Castelldefels,   Barcelona
   Spain

   Phone: +34 93 645 29 00
   Email: ramon.casellas@cttc.es


   Daniel King
   Old Dog Consulting


   Phone:
   Email: daniel@olddog.co.uk















Zhang, et al.            Expires April 13, 2012                [Page 19]
