%!PS-Adobe-3.0
%%Title: draft-vanrein-v6ops-6bed4-00.txt
%%For: Rick van Rein
%%Creator: a2ps version 4.14
%%CreationDate: Mon Jul 25 10:05:27 2011
%%BoundingBox: 24 24 571 818
%%DocumentData: Clean7Bit
%%Orientation: Portrait
%%Pages: 5
%%PageOrder: Ascend
%%DocumentMedia: A4 595 842 0 () ()
%%DocumentNeededResources: font Courier
%%+ font Courier-Bold
%%+ font Courier-BoldOblique
%%+ font Courier-Oblique
%%+ font Helvetica
%%+ font Helvetica-Bold
%%+ font Symbol
%%+ font Times-Bold
%%+ font Times-Roman
%%DocumentProcessColors: Black 
%%DocumentSuppliedResources: procset a2ps-a2ps-hdr
%%+ procset a2ps-black+white-Prolog
%%+ encoding ISO-8859-1Encoding
%%EndComments
/a2psdict 200 dict def
a2psdict begin
%%BeginProlog
%%Copyright: (c) 1988, 89, 90, 91, 92, 93 Miguel Santana
%%Copyright: (c) 1995, 96, 97, 98 Akim Demaille, Miguel Santana
% Check PostScript language level.
/languagelevel where {
  pop /gs_languagelevel languagelevel def
} {
  /gs_languagelevel 1 def
} ifelse

% EPSF import as in the Red Book
/BeginInclude {
  /b4_Inc_state save def    		% Save state for cleanup
  /dict_count countdictstack def	% Count objects on dict stack
  /op_count count 1 sub def		% Count objects on operand stack 
  userdict begin
    0 setgray 0 setlinecap
    1 setlinewidth 0 setlinejoin
    10 setmiterlimit [ ] 0 setdash newpath
    gs_languagelevel 1 ne {
      false setstrokeadjust false setoverprint 
    } if
} bind def

/EndInclude {
  count op_count sub { pos } repeat	% Clean up stacks
  countdictstack dict_count sub { end } repeat
  b4_Inc_state restore
} bind def

/BeginEPSF {
  BeginInclude
  /showpage { } def
} bind def

/EndEPSF {
  EndInclude
} bind def

% Page prefeed
/page_prefeed {         % bool -> -
  statusdict /prefeed known {
    statusdict exch /prefeed exch put
  } {
    pop
  } ifelse
} bind def

/deffont {
  findfont exch scalefont def
} bind def

/reencode_font {
  findfont reencode 2 copy definefont pop def
} bind def

% Function c-show (str => -)
% centers text only according to x axis.
/c-show { 
  dup stringwidth pop
  2 div neg 0 rmoveto
  show
} bind def

% Function l-show (str => -)
% prints texts so that it ends at currentpoint
/l-show {
  dup stringwidth pop neg 
  0 
  rmoveto show
} bind def

% center-fit show (str w => -)
% show centered, and scale currentfont so that the width is less than w
/cfshow {
  exch dup stringwidth pop
  % If the title is too big, try to make it smaller
  3 2 roll 2 copy
  gt
  { % if, i.e. too big
    exch div
    currentfont exch scalefont setfont
  } { % ifelse
    pop pop 
  }
  ifelse
  c-show			% center title
} bind def

% Return the y size of the current font
% - => fontsize
/currentfontsize {
  currentfont /FontType get 0 eq {
    currentfont /FontMatrix get 3 get
  }{
    currentfont /FontMatrix get 3 get 1000 mul
  } ifelse
} bind def

% reencode the font
% <encoding-vector> <fontdict> -> <newfontdict>
/reencode { %def
  dup length 5 add dict begin
    { %forall
      % <vector> <key> <val>
      1 index /FID ne 
      { def }{ pop pop } ifelse
    } forall
    /Encoding exch def % -

    % Use the font's bounding box to determine the ascent, descent,
    % and overall height; don't forget that these values have to be
    % transformed using the font's matrix.
    % We use `load' because sometimes BBox is executable, sometimes not.
    % Since we need 4 numbers an not an array avoid BBox from being executed
    /FontBBox load aload pop
    FontMatrix transform /Ascent exch def pop
    FontMatrix transform /Descent exch def pop
    /FontHeight Ascent Descent sub def

    % Get the underline position and thickness if they're defined.
    % Use 1 if they are not defined.
    currentdict /FontInfo 2 copy known
    { get
      /UnderlinePosition 2 copy % <FontInfo> /UP <FontInfo> /UP
      2 copy known
      { get }{ pop pop 1 } ifelse
      0 exch FontMatrix transform exch pop
      def % <FontInfo>

      /UnderlineThickness 2 copy % <FontInfo> /UT <FontInfo> /UT
      2 copy known
      { get }{ pop pop 1 } ifelse
      0 exch FontMatrix transform exch pop
      def % <FontInfo>
      pop % -
    }{ pop pop
    } ifelse

    currentdict
  end 
} bind def

% composite fonts for ASCII-EUC mixed strings
% Version 1.2 1/31/1990
% Original Ken'ichi HANDA (handa@etl.go.jp)
% Modified Norio Katayama (katayama@rd.nacsis.ac.jp),1998
% Extend & Fix Koji Nakamaru (maru@on.cs.keio.ac.jp), 1999
% Anyone can freely copy, modify, distribute this program.

/copyfont {	% font-dic extra-entry-count  copyfont  font-dic
	1 index maxlength add dict begin
	{	1 index /FID ne 2 index /UniqueID ne and
		{def} {pop pop} ifelse
	} forall
	currentdict
	end
} bind def

/compositefont { % ASCIIFontName EUCFontName RomanScale RomanOffset Rot(T/F) compositefont font
    /RomanRotation exch def
    /RomanOffset exch def
    /RomanScale exch def
    userdict /fixeucfont_dict known not {
	userdict begin
	    /fixeucfont_dict 2 dict begin
		/UpperByteEncoding [
		    16#00 1 16#20 { pop 0 } for
		    16#21 1 16#28 { 16#20 sub } for
		    16#29 1 16#2F { pop 0 } for
		    16#30 1 16#74 { 16#27 sub } for
		    16#75 1 16#FF { pop 0 } for
		] def
	        /LowerByteEncoding [
		    16#00 1 16#A0 { pop /.notdef } for
		    16#A1 1 16#FE { 16#80 sub 16 2 string cvrs
				    (cXX) dup 1 4 -1 roll
				    putinterval cvn } for
		    /.notdef
		] def
		currentdict
	    end def
	end
    } if
    findfont dup /FontType get 0 eq {
	14 dict begin
	    %
	    % 7+8 bit EUC font
	    %
	    12 dict begin
		/EUCFont exch def
		/FontInfo (7+8 bit EUC font) readonly def
		/PaintType 0 def
		/FontType 0 def
		/FontMatrix matrix def
		% /FontName
		/Encoding fixeucfont_dict /UpperByteEncoding get def
		/FMapType 2 def
		EUCFont /WMode known
		{ EUCFont /WMode get /WMode exch def }
		{ /WMode 0 def } ifelse
		/FDepVector [
		    EUCFont /FDepVector get 0 get
		    [ 16#21 1 16#28 {} for 16#30 1 16#74 {} for ]
		    {
			13 dict begin
			    /EUCFont EUCFont def
			    /UpperByte exch 16#80 add def	
			    % /FontName
			    /FontInfo (EUC lower byte font) readonly def
			    /PaintType 0 def
			    /FontType 3 def
			    /FontMatrix matrix def
			    /FontBBox {0 0 0 0} def
			    /Encoding
				fixeucfont_dict /LowerByteEncoding get def
			    % /UniqueID
			    % /WMode
			    /BuildChar {
				gsave
				exch dup /EUCFont get setfont
				/UpperByte get
				2 string
				dup 0 4 -1 roll put
				dup 1 4 -1 roll put
				dup stringwidth setcharwidth
				0 0 moveto show
				grestore
			    } bind def
			    currentdict
			end
			/lowerbytefont exch definefont
		    } forall
		] def
		currentdict
	    end
	    /eucfont exch definefont
	    exch
	    findfont 1 copyfont dup begin
		RomanRotation {
			/FontMatrix FontMatrix
			[ 0 RomanScale neg RomanScale 0 RomanOffset neg 0 ]
			matrix concatmatrix def
		}{
			/FontMatrix FontMatrix
			[ RomanScale 0 0 RomanScale 0 RomanOffset ] matrix concatmatrix
			def
			/CDevProc
			    {pop pop pop pop 0 exch -1000 exch 2 div 880} def
		} ifelse
	    end
	    /asciifont exch definefont
	    exch
	    /FDepVector [ 4 2 roll ] def
	    /FontType 0 def
	    /WMode 0 def
	    /FMapType 4 def
	    /FontMatrix matrix def
	    /Encoding [0 1] def
	    /FontBBox {0 0 0 0} def
%	    /FontHeight 1.0 def % XXXX
	    /FontHeight RomanScale 1.0 ge { RomanScale }{ 1.0 } ifelse def
	    /Descent -0.3 def   % XXXX
	    currentdict
	end
	/tmpfont exch definefont
	pop
	/tmpfont findfont
    }{
	pop findfont 0 copyfont
    } ifelse
} def	

/slantfont {	% FontName slant-degree  slantfont  font'
    exch findfont 1 copyfont begin
    [ 1 0 4 -1 roll 1 0 0 ] FontMatrix exch matrix concatmatrix
    /FontMatrix exch def
    currentdict
    end
} def

% Function print line number (<string> # -)
/# {
  gsave
    sx cw mul neg 2 div 0 rmoveto
    f# setfont
    c-show
  grestore
} bind def

% -------- Some routines to enlight plain b/w printings ---------

% Underline
% width --
/dounderline {
  currentpoint
  gsave
    moveto
    0 currentfont /Descent get currentfontsize mul rmoveto
    0 rlineto
    stroke
  grestore
} bind def

% Underline a string
% string --
/dounderlinestring {
  stringwidth pop
  dounderline
} bind def

/UL {
  /ul exch store
} bind def

% Draw a box of WIDTH wrt current font
% width --
/dobox {
  currentpoint
  gsave
    newpath
    moveto
    0 currentfont /Descent get currentfontsize mul rmoveto
    dup 0 rlineto
    0 currentfont /FontHeight get currentfontsize mul rlineto
    neg 0 rlineto
    closepath
    stroke
  grestore
} bind def

/BX {
  /bx exch store
} bind def

% Box a string
% string --
/doboxstring {
  stringwidth pop
  dobox
} bind def

%
% ------------- Color routines ---------------
%
/FG /setrgbcolor load def

% Draw the background
% width --
/dobackground {
  currentpoint
  gsave
    newpath
    moveto
    0 currentfont /Descent get currentfontsize mul rmoveto
    dup 0 rlineto
    0 currentfont /FontHeight get currentfontsize mul rlineto
    neg 0 rlineto
    closepath
    bgcolor aload pop setrgbcolor
    fill
  grestore
} bind def

% Draw bg for a string
% string --
/dobackgroundstring {
  stringwidth pop
  dobackground
} bind def


/BG {
  dup /bg exch store
  { mark 4 1 roll ] /bgcolor exch store } if
} bind def


/Show {
  bg { dup dobackgroundstring } if
  ul { dup dounderlinestring } if
  bx { dup doboxstring } if
  show
} bind def

% Function T(ab), jumps to the n-th tabulation in the current line
/T {
  cw mul x0 add
  bg { dup currentpoint pop sub dobackground } if
  ul { dup currentpoint pop sub dounderline } if
  bx { dup currentpoint pop sub dobox } if
  y0 moveto
} bind def

% Function n: move to the next line
/n {
  /y0 y0 bfs sub store
  x0 y0 moveto
} bind def

% Function N: show and move to the next line
/N {
  Show
  /y0 y0 bfs sub store
  x0 y0 moveto
} bind def

/S {
  Show
} bind def

%%BeginResource: procset a2ps-a2ps-hdr 2.0 2
%%Copyright: (c) 1988, 89, 90, 91, 92, 93 Miguel Santana
%%Copyright: (c) 1995, 96, 97, 98 Akim Demaille, Miguel Santana
% Function title: prints page header.
% <ct> <rt> <lt> are passed as argument
/title { 
  % 1. Draw the background
  x v get y v get moveto
  gsave
    0 th 2 div neg rmoveto 
    th setlinewidth
    0.95 setgray
    pw 0 rlineto stroke
  grestore
  % 2. Border it
  gsave
    0.7 setlinewidth
    pw 0 rlineto
    0 th neg rlineto
    pw neg 0 rlineto
    closepath stroke
  grestore
  % stk: ct rt lt
  x v get y v get th sub 1 add moveto
%%IncludeResource: font Helvetica
  fHelvetica fnfs 0.8 mul scalefont setfont
  % 3. The left title
  gsave
    dup stringwidth pop fnfs 0.8 mul add exch % leave space took on stack
    fnfs 0.8 mul hm rmoveto
    show			% left title
  grestore
  exch
  % stk: ct ltw rt
  % 4. the right title
  gsave
    dup stringwidth pop fnfs 0.8 mul add exch % leave space took on stack
    dup
    pw exch stringwidth pop fnfs 0.8 mul add sub
    hm
    rmoveto
    show			% right title
  grestore
  % stk: ct ltw rtw
  % 5. the center title
  gsave
    pw 3 1 roll
    % stk: ct pw ltw rtw
    3 copy 
    % Move to the center of the left room
    sub add 2 div hm rmoveto
    % What is the available space in here?
    add sub fnfs 0.8 mul sub fnfs 0.8 mul sub
    % stk: ct space_left
%%IncludeResource: font Helvetica-Bold
  fHelvetica-Bold fnfs scalefont setfont
    cfshow
  grestore
} bind def

% Function border: prints virtual page border
/border { %def
  gsave				% print four sides
    0 setgray
    x v get y v get moveto
    0.7 setlinewidth		% of the square
    pw 0 rlineto
    0 ph neg rlineto
    pw neg 0 rlineto
    closepath stroke
  grestore
} bind def

% Function water: prints a water mark in background
/water { %def
  gsave
    scx scy moveto rotate
%%IncludeResource: font Times-Bold
  fTimes-Bold 100 scalefont setfont
    .97 setgray
    dup stringwidth pop 2 div neg -50 rmoveto
    show
  grestore
} bind def

% Function rhead: prints the right header
/rhead {  %def
  lx ly moveto
  fHelvetica fnfs 0.8 mul scalefont setfont
  l-show
} bind def

% Function footer (cf rf lf -> -)
/footer {
  fHelvetica fnfs 0.8 mul scalefont setfont
  dx dy moveto
  show

  snx sny moveto
  l-show
  
  fnx fny moveto
  c-show
} bind def
%%EndResource
%%BeginResource: procset a2ps-black+white-Prolog 2.0 1

% Function T(ab), jumps to the n-th tabulation in the current line
/T { 
  cw mul x0 add y0 moveto
} bind def

% Function n: move to the next line
/n { %def
  /y0 y0 bfs sub store
  x0 y0 moveto
} bind def

% Function N: show and move to the next line
/N {
  Show
  /y0 y0 bfs sub store
  x0 y0 moveto
}  bind def

/S {
  Show
} bind def

/p {
  false UL
  false BX
  fCourier bfs scalefont setfont
  Show
} bind def

/sy {
  false UL
  false BX
  fSymbol bfs scalefont setfont
  Show
} bind def

/k {
  false UL
  false BX
  fCourier-Oblique bfs scalefont setfont
  Show
} bind def

/K {
  false UL
  false BX
  fCourier-Bold bfs scalefont setfont
  Show
} bind def

/c {
  false UL
  false BX
  fCourier-Oblique bfs scalefont setfont
  Show
} bind def

/C {
  false UL
  false BX
  fCourier-BoldOblique bfs scalefont setfont
  Show 
} bind def

/l {
  false UL
  false BX
  fHelvetica bfs scalefont setfont
  Show
} bind def

/L {
  false UL
  false BX
  fHelvetica-Bold bfs scalefont setfont
  Show 
} bind def

/str{
  false UL
  false BX
  fTimes-Roman bfs scalefont setfont
  Show
} bind def

/e{
  false UL
  true BX
  fHelvetica-Bold bfs scalefont setfont
  Show
} bind def

%%EndResource
%%EndProlog
%%BeginSetup
%%IncludeResource: font Courier
%%IncludeResource: font Courier-Oblique
%%IncludeResource: font Courier-Bold
%%IncludeResource: font Times-Roman
%%IncludeResource: font Symbol
%%IncludeResource: font Courier-BoldOblique
%%BeginResource: encoding ISO-8859-1Encoding
/ISO-8859-1Encoding [
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/space /exclam /quotedbl /numbersign /dollar /percent /ampersand /quoteright 
/parenleft /parenright /asterisk /plus /comma /minus /period /slash 
/zero /one /two /three /four /five /six /seven 
/eight /nine /colon /semicolon /less /equal /greater /question 
/at /A /B /C /D /E /F /G 
/H /I /J /K /L /M /N /O 
/P /Q /R /S /T /U /V /W 
/X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore 
/quoteleft /a /b /c /d /e /f /g 
/h /i /j /k /l /m /n /o 
/p /q /r /s /t /u /v /w 
/x /y /z /braceleft /bar /braceright /asciitilde /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef 
/space /exclamdown /cent /sterling /currency /yen /brokenbar /section 
/dieresis /copyright /ordfeminine /guillemotleft /logicalnot /hyphen /registered /macron 
/degree /plusminus /twosuperior /threesuperior /acute /mu /paragraph /bullet 
/cedilla /onesuperior /ordmasculine /guillemotright /onequarter /onehalf /threequarters /questiondown 
/Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla 
/Egrave /Eacute /Ecircumflex /Edieresis /Igrave /Iacute /Icircumflex /Idieresis 
/Eth /Ntilde /Ograve /Oacute /Ocircumflex /Otilde /Odieresis /multiply 
/Oslash /Ugrave /Uacute /Ucircumflex /Udieresis /Yacute /Thorn /germandbls 
/agrave /aacute /acircumflex /atilde /adieresis /aring /ae /ccedilla 
/egrave /eacute /ecircumflex /edieresis /igrave /iacute /icircumflex /idieresis 
/eth /ntilde /ograve /oacute /ocircumflex /otilde /odieresis /divide 
/oslash /ugrave /uacute /ucircumflex /udieresis /yacute /thorn /ydieresis 
] def
%%EndResource
% Initialize page description variables.
/sh 842 def
/sw 595 def
/llx 24 def
/urx 571 def
/ury 818 def
/lly 24 def
/#copies 1 def
/th 15.000000 def
/fnfs 11 def
/bfs 5.996705 def
/cw 3.598023 def

% Dictionary for ISO-8859-1 support
/iso1dict 8 dict begin
  /fCourier ISO-8859-1Encoding /Courier reencode_font
  /fCourier-Bold ISO-8859-1Encoding /Courier-Bold reencode_font
  /fCourier-BoldOblique ISO-8859-1Encoding /Courier-BoldOblique reencode_font
  /fCourier-Oblique ISO-8859-1Encoding /Courier-Oblique reencode_font
  /fHelvetica ISO-8859-1Encoding /Helvetica reencode_font
  /fHelvetica-Bold ISO-8859-1Encoding /Helvetica-Bold reencode_font
  /fTimes-Bold ISO-8859-1Encoding /Times-Bold reencode_font
  /fTimes-Roman ISO-8859-1Encoding /Times-Roman reencode_font
currentdict end def
/bgcolor [ 0 0 0 ] def
/bg false def
/ul false def
/bx false def
% The font for line numbering
/f# /Helvetica findfont bfs .6 mul scalefont def
/fSymbol /Symbol findfont def
/hm fnfs 0.25 mul def
/pw
   cw 73.400000 mul
def
/ph
   363.999997 th add
def
/pmw urx llx sub pw 2 mul sub 1 div def
/pmh ury lly sub ph 2 mul sub 24 sub 1 div def
/v 0 def
/x [
  0
  dup pmw add pw add
  0
  dup pmw add pw add
] def
/y [
  pmh ph add 1 mul ph add
  dup
  pmh ph add 0 mul ph add
  dup
] def
/scx sw 2 div def
/scy sh 2 div def
/snx urx def
/sny lly 2 add def
/dx llx def
/dy sny def
/fnx scx def
/fny dy def
/lx snx def
/ly ury fnfs 0.8 mul sub def
/sx 0 def
/tab 8 def
/x0 0 def
/y0 0 def
%%EndSetup

%%Page: (1-4) 1
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
() N
() N
() N
(INTERNET-DRAFT                                             Rick van Rein) N
(Intended Status: Proposed Standard                          OpenFortress) N
(Expires: January 26, 2012                                  July 25, 2011) N
() N
(              IPv6 Tunneling for Embedded Systems \(6bed4\)) N
(                      draft-vanrein-v6ops-6bed4-00) N
() N
() N
(Abstract) N
() N
(   Given the limited resources available to a lot of embedded systems,) N
(   dual-stack solutions are not always feasible for such hosts.  A) N
(   mechanism that supports a direct transition from IPv4-only to) N
(   IPv6-only may prove beneficial in getting the smallest hosts to make) N
(   a transition to IPv6 at a much earlier stage than would otherwise be) N
(   possible.  This calls for tunnels, but no current tunnel technique) N
(   appears to be optimal for embedded systems.) N
() N
(   This specification details an IPv6 tunneling technique over UDP and) N
(   IPv4.  The technique is specifically designed to benefit embedded) N
(   systems, and to work without end user configuration.  The working) N
(   principle for obtaining a routable IPv6 address is through stateless) N
(   autoconfiguration from an anycast tunnel service.) N
() N
() N
(Status of this Memo) N
() N
(   This Internet-Draft is submitted to IETF in full conformance with the) N
(   provisions of BCP 78 and BCP 79.) N
() N
(   Internet-Drafts are working documents of the Internet Engineering) N
(   Task Force \(IETF\), its areas, and its working groups.  Note that) N
(   other groups may also distribute working documents as) N
(   Internet-Drafts.) N
() N
(   Internet-Drafts are draft documents valid for a maximum of six months) N
(   and may be updated, replaced, or obsoleted by other documents at any) N
(   time.  It is inappropriate to use Internet-Drafts as reference) N
(   material or to cite them other than as "work in progress.") N
() N
(   The list of current Internet-Drafts can be accessed at) N
(   http://www.ietf.org/1id-abstracts.html) N
() N
(   The list of Internet-Draft Shadow Directories can be accessed at) N
(   http://www.ietf.org/shadow.html) N
() N
() N
(Copyright and License Notice) N
() N
() N
() N
(Van Rein                Expires January 26, 2012                [Page 1]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 1/17) (Jul 25, 11 10:05) title
border
/v 1 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(   Copyright \(c\) 2011 IETF Trust and the persons identified as the) N
(   document authors. All rights reserved.) N
() N
(   This document is subject to BCP 78 and the IETF Trust's Legal) N
(   Provisions Relating to IETF Documents) N
(   \(http://trustee.ietf.org/license-info\) in effect on the date of) N
(   publication of this document.  Please review these documents) N
(   carefully, as they describe your rights and restrictions with respect) N
(   to this document.) N
() N
() N
() N
(Table of Contents) N
() N
(   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3) N
(     1.1  Terminology . . . . . . . . . . . . . . . . . . . . . . . .  3) N
(     1.2  Well-known Addresses. . . . . . . . . . . . . . . . . . . .  3) N
(   2.  Design Overview  . . . . . . . . . . . . . . . . . . . . . . .  4) N
(     2.1.  Rationale - Why Embedded Systems are Different . . . . . .  4) N
(     2.2.  Solution - IPv6-only on Any Network  . . . . . . . . . . .  4) N
(     2.3.  Requirements - Specifically for Embedded Systems . . . . .  6) N
(     2.4.  Design - Choices Made  . . . . . . . . . . . . . . . . . .  7) N
(   3.  Link-local profile . . . . . . . . . . . . . . . . . . . . . .  8) N
(   4.  Tunneling Traffic  . . . . . . . . . . . . . . . . . . . . . .  9) N
(     4.1.  Sending Traffic Up the Tunnel  . . . . . . . . . . . . . .  9) N
(     4.2.  Sending Traffic Down the Tunnel  . . . . . . . . . . . . . 10) N
(     4.3.  Bouncing Traffic on the Tunnel's IPv4 Side . . . . . . . . 11) N
(   5.  Tunnel Service Profiles  . . . . . . . . . . . . . . . . . . . 11) N
(     5.1.  Public Tunnel Service Profile  . . . . . . . . . . . . . . 11) N
(     5.2.  Local Tunnel Service Profile . . . . . . . . . . . . . . . 12) N
(     5.3.  En-route Translation Profile . . . . . . . . . . . . . . . 12) N
(   6.  NAT-traversal Issues . . . . . . . . . . . . . . . . . . . . . 13) N
(   7.  Security Considerations  . . . . . . . . . . . . . . . . . . . 15) N
(   8.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 15) N
(   9.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 16) N
(     9.1.  Normative References . . . . . . . . . . . . . . . . . . . 16) N
(     9.2.  Informative References . . . . . . . . . . . . . . . . . . 16) N
(   Author's Address . . . . . . . . . . . . . . . . . . . . . . . . . 17) N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
(Van Rein                Expires January 26, 2012                [Page 2]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 2/17) (Jul 25, 11 10:05) title
border
/v 2 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(1.  Introduction) N
() N
(   The 6bed4 mechanism is a tunnel that encapsulates IPv6 packets in UDP) N
(   and IPv4.  The mechanism assumes a remote tunnel service at a well-) N
(   known IPv4 address and UDP port, effectively making the tunnel) N
(   independent of DNS [RFC1034], and capable of traversing NAT) N
(   [RFC2766].  The local IPv4 address is acquired through traditional) N
(   techniques such as DHCPv4 [RFC2131] or manual IPv4 configuration, and) N
(   the local UDP port can be chosen in any way that makes sense locally.) N
() N
(   The tunnel service can be implemented at many locations) N
(   simultaneously, each announcing a route to their well-known IPv4) N
(   address over BGP [RFC4271], following the anycast [RFC4786]) N
(   principle.  The routing infrastructure will cause tunnel traffic to) N
(   be relayed to a nearby instance of the 6bed4 service.  In addition to) N
(   classically routed service, the well-known tunnel service address) N
(   enables en-route translation.) N
() N
(   Embedded systems obtain a routable IPv6 address over the tunnel) N
(   through stateless autoconfiguration [RFC4862].  The router, always) N
(   with interface identifier 0, can be reached over the tunnel on the) N
(   fixed link-local IPv6 address fe80:: or on the all-routers address) N
(   ff02::2 or on the all-nodes address ff02::1.  The tunnel client,) N
(   being the only other participant in the tunnel, can choose non-zero) N
(   interface identifiers at will to complete autoconfiguration.) N
() N
(   The routable prefix offered by the 6bed4 tunnel service includes the) N
(   IPv4 address and UDP port as seen from the Internet.  Any NAT layer) N
(   crossed by the tunnel may influence the client-side IPv4 address and) N
(   UDP port, which is why the tunnel service must provide this data.) N
(   Autoconfiguration serves to assign an IPv6 address to the tunnel) N
(   client that incorporates the way it looks from the perspective of the) N
(   Internet.) N
() N
() N
(1.1  Terminology) N
() N
(   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",) N
(   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this) N
(   document are to be interpreted as described in RFC 2119 [RFC2119].) N
() N
(1.2.  Well-known Addresses) N
() N
(   This specification allocates a number of well-known numbers for) N
(   addressing.  These numbers can be fixated into an embedded system,) N
(   and serve to address an anycast-published tunnel as a fallback for) N
(   local IPv6 facilities.) N
() N
() N
() N
() N
(Van Rein                Expires January 26, 2012                [Page 3]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 3/17) (Jul 25, 11 10:05) title
border
/v 3 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(   IPv4 address for the remote tunnel service:  TBD1) N
() N
(   IPv6 prefix for the remote tunnel service:   TBD2::/64) N
() N
(   UDP port for the remote tunnel service:      TBD3) N
() N
(   The IPv4 address and UDP port are used to refer to the anycasted) N
(   tunnel service.  The IPv6 prefix is the default prefix for 6bed4) N
(   service, although local implementations MAY sometimes use another) N
(   prefix.  The IPv6 prefix is configured as a /64 on tunnel servers,) N
(   composed of an IANA-registerd /48 and 16 zero bits.) N
() N
() N
(2.  Design Overview) N
() N
(   The most important desktop systems of today support IPv6 as well as) N
(   IPv4, and have IPv6 enabled by default.  This means that the Internet) N
(   as a whole can now make the transition to IPv6, without the risk that) N
(   users will be thrown out.  Indeed, this is gradually happening.) N
() N
(   Embedded systems however, show a vastly different situation.  The) N
(   support for IPv6 is lagging behind, and numerous manufacturers are) N
(   not even considering support.) N
() N
(2.1.  Rationale - Why Embedded Systems are Different) N
() N
(   As long as a majority of Internet users still use IPv4, at least some) N
(   parties may see no serious economic incentive to migrate to IPv6.) N
(   Considering that IPv4 is not scheduled to be deprecated anytime soon,) N
(   this situation may persist for many years to come.  This limited) N
(   incentive to transit to IPv6 applies equally to all host) N
(   implementations, and will usually be weighed with other arguments.) N
() N
(   Specifically for embedded systems, a second force applies.  The) N
(   resources available to such systems are often limited; not only) N
(   technical limitations such as available memory space, but also) N
(   economic limitations such as lack of development time and the cost) N
(   efficiency of support on more complicated implementations.) N
() N
(   The possible lack of an economic incentive to adopt IPv6, combined) N
(   with limited resources, may lead to a situation where embedded) N
(   systems are the last ones to support IPv6.  This is probably) N
(   aggravated by the fragmented market for embedded systems, compared to) N
(   the desktop and router markets.) N
() N
(2.2.  Solution - IPv6-only on Any Network) N
() N
(   The 6bed4 tunnel was created to answer to the specific situation on) N
() N
() N
() N
(Van Rein                Expires January 26, 2012                [Page 4]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 4/17) (Jul 25, 11 10:05) title
border
grestore
(Printed by Rick van Rein) rhead
() (1/5) (Monday July 25, 2011) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (5-8) 2
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(   the market of embedded systems.  To resolve any problems related to) N
(   limited resources, the proposed transition is to go directly from) N
(   IPv4-only to IPv6-only.  The resulting setup can lead to simpler) N
(   embedded code than in a dual-stack system; it can even save effort) N
(   otherwise spent on NAT-traversal issues.  Finally, any infrastructure) N
(   built around IPv6-only devices is likely to be simpler than a dual-) N
(   stack infrastructure; specifically peer-to-peer infrastructure may) N
(   benefit greatly from the transparency of IPv6 addressing.  We expect) N
(   these motivations to lead to a faster adoption of IPv6 in embedded) N
(   systems.) N
() N
(   If embedded systems are to operate in IPv6-only mode, they should be) N
(   able to do that on any network, including IPv4-only networks.  That) N
(   calls for a tunneling technique.  Several tunnels have been defined,) N
(   but none would be very useful to convince programmers of embedded) N
(   systems to transit from IPv4-only to IPv6-only.  Because of this,) N
(   6bed4 is introduced as an alternate tunneling technique for this) N
(   specific application area.) N
() N
(   The following code fragment shows a procedure for automatic network) N
(   bootstrapping over IPv6 if it is locally available, with a tunnel) N
(   fallback based on IPv4 if this is needed.  Not shown are alternate) N
(   options, such as manually configured local IPv4 addresses.  The) N
(   simplicity of this network bootstrapping code means that only minor) N
(   resources are needed to make a networking application always run on) N
(   \(an illusion of\) an IPv6-only network.) N
() N
(      // Redistribution and use in source and binary forms, with) N
(      // or without modification, are permitted provided that the) N
(      // following conditions are met:) N
(      //) N
(      // * Redistributions of source code must retain the above) N
(      //   copyright notice, this list of conditions and the) N
(      //   following disclaimer.) N
(      //) N
(      // * Redistributions in binary form must reproduce the) N
(      //   above copyright notice, this list of conditions and) N
(      //   the following disclaimer in the documentation and/or) N
(      //   other materials provided with the distribution.) N
(      //) N
(      // * Neither the name of Internet Society, IETF or) N
(      //   IETF Trust, nor the names of specific contributors,) N
(      //   may be used to endorse or promote products derived) N
(      //   from this software without specific prior written) N
(      //   permission.) N
(      //) N
(      // THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND) N
(      // CONTRIBUTORS _AS_IS_ AND ANY EXPRESS OR IMPLIED) N
() N
() N
() N
(Van Rein                Expires January 26, 2012                [Page 5]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 5/17) (Jul 25, 11 10:05) title
border
/v 1 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(      // WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED) N
(      // WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A) N
(      // PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL) N
(      // THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY) N
(      // DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR) N
(      // CONSEQUENTIAL DAMAGES \(INCLUDING, BUT NOT LIMITED TO,) N
(      // PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF) N
(      // USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION\)) N
(      // HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER) N
(      // IN CONTRACT, STRICT LIABILITY, OR TORT \(INCLUDING) N
(      // NEGLIGENCE OR OTHERWISE\) ARISING IN ANY WAY OUT OF THE) N
(      // USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE) N
(      // POSSIBILITY OF SUCH DAMAGE.) N
() N
(      err = try_autoconfig6 \(&cfg\);) N
(      if \(\(err != 0\) || managed_flag_dhcp6 \(&cfg\)\) {) N
(         err = try_dhcp6 \(&cfg\);) N
(         if \(err != 0\) {) N
(            err = try_dhcp4 \(&cfg\);) N
(            if \(err == 0\) {) N
(               use_tunnel \(&cfg\);) N
(               err = try_autoconfig6 \(&cfg\);) N
(            }) N
(            if \(err\) {) N
(               panic \(\);) N
(            }) N
(         }) N
(      }) N
() N
(2.3.  Requirements - Specifically for Embedded Systems) N
() N
(   Following is a list of criteria for tunneling techniques that are) N
(   necessary to make IPv6 workable for embedded environments; no) N
(   previously designed tunnel is able to fulfill them all yet:) N
() N
(   Standard.) N
(      A tunneling approach requires interoperability between tunnel) N
(      clients and servers; therefore, open standards must be followed.) N
() N
(   Simple.) N
(      To support embedded systems with limited resources, the tunnel) N
(      should be as simple as possible.  Combined with the addressing) N
(      transparency of IPv6, the transition to IPv6 can actually be eas-) N
(      ier than using IPv4, and thus attractive for newly created or) N
(      upgraded firmware.) N
() N
(   Any router.) N
(      A tunnel technique that works for embedded systems should not make) N
() N
() N
() N
(Van Rein                Expires January 26, 2012                [Page 6]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 6/17) (Jul 25, 11 10:05) title
border
/v 2 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(      any assumptions about the routers on its path; in other words, it) N
(      should pass through any type of router, including those who rely) N
(      on symmetrical NAT.) N
() N
(   Zero configuration.) N
(      Any requirement to manually configure a tunnel will seriously) N
(      impair the possibilities of rolling out an embedded system to end) N
(      users.  As a result, such a tunnel would not be used in many prod-) N
(      ucts.  Only if IPv6 works straight out of the box, without manual) N
(      configuration, is it likely to enter mainstream devices.  In tech-) N
(      nical terms, this means that the tunnel mechanism cannot rely on) N
(      device or end user credentials.) N
() N
(   Traceable.) N
(      Even without configurable credentials, a tunnel should not become) N
(      a portal for network abuse.  It should therefore be possible to) N
(      isolate a misbehaving network node and take corrective measures.) N
(      One way of making IPv4-registered users traceable in IPv6 is by) N
(      revealing their IPv4 address as part of their IPv6 address.) N
() N
(   Stateless.) N
(      If possible, a stateless mechanism for the tunnel service would be) N
(      ideal.  This would make it easy to handle downtime on an instance,) N
(      because traffic can be diverted elsewhere.  Also, there is no need) N
(      to pass through the same server on bidirectional traffic; this) N
(      perfectly matches the stateless routing properties of IP-level) N
(      traffic.) N
() N
(   Anycast.) N
(      If possible, it would be ideal to have well-known addresses for) N
(      the tunnel service, so they can be anycasted over BGP4.  This) N
(      leads to a network service that is resilient and that can roughly) N
(      spread the load over instances.  A requirement for this to work) N
(      would be that the tunnel service is stateless.) N
() N
(2.4.  Design - Choices Made) N
() N
(      Following is the train of thought that explains how the 6bed4 tun-) N
(      neling mechanism can implement all requirements from the previous) N
(      subsection:) N
() N
(   Not anonymous.) N
(      The tunnel user should not be anonymous so abusers can be traced.) N
(      This is easily achieved by incorporating a public IPv4 address in) N
(      any IPv6 addresses that is usable through the tunnel.) N
() N
(   No registration.) N
(      Given that a tunnel user can always be traced back through their) N
() N
() N
() N
(Van Rein                Expires January 26, 2012                [Page 7]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 7/17) (Jul 25, 11 10:05) title
border
/v 3 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(      IPv4 address, it is possible to handle tunnel requests without) N
(      registration of user accounts, or login.  The tunnel service will) N
(      not aggravate problems of address spoofing if it verifies that the) N
(      IPv6 addresses sent out do indeed match the sender's IPv4 address.) N
(      That way, egress filtering on IPv4 applies to the IPv6 addresses) N
(      as well.) N
() N
(   Stateless.) N
(      Given that there is no registration, a check on traffic from the) N
(      IPv4 side to the IPv6 side is needed, and a reconstruction of IPv4) N
(      and UDP headers when traffic returns from IPv6 to IPv4.  If the) N
(      UDP information \(notably, the client-side UDP port on what will) N
(      often be a NAT router\) is also present in the IPv6 addresses used,) N
(      then the tunnel service has no need for storing any state about) N
(      the tunnel.  It is a stateless, packet-at-a-time translation ser-) N
(      vice.) N
() N
(   Anycast.) N
(      Stateless services that only perform simple translations of head-) N
(      ers can easily be made into anycast services.  Indeed, allocating) N
(      a /64 on the IPv6 side and a /24 on the IPv4 side suffices.) N
(      Broadcasting these routes from multiple BGP speakers and hosting) N
(      them in multiple autonomous systems should not be any problem.) N
() N
() N
(3.  Link-local Profile) N
() N
(      The 6bed4 tunnels add detail with respect to the autoconfiguration) N
(      mechanism described in RFC 4862.  Most importantly, the parameter) N
(      N for the number of bits in the interface identifier is 16.  The) N
(      preceding 112 bits are filled with a /64 prefix for the IPv6-side) N
(      of the tunnel service, 32 bits worth of IPv4 address and 16 bits) N
(      of UDP port number:) N
() N
(       0                            63              95     111     127) N
(      +-------------------------------+---------------+-------+-------+) N
(      |      IPv6-side /64 PREFIX     | Public v4addr |UDPport| if-id |) N
(      +-------------------------------+---------------+-------+-------+) N
() N
(   Or, as seen from the tunnel client perspective:) N
() N
(       0                                                   111     127) N
(      +-------------------------------------------------------+-------+) N
(      |                 IPv6-side /112 PREFIX                 | if-id |) N
(      +-------------------------------------------------------+-------+) N
() N
(   The interface identifier \(if-id\) for the router is always 0 and only) N
(   0, which means that it can always be reached at its link-local) N
() N
() N
() N
(Van Rein                Expires January 26, 2012                [Page 8]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 8/17) (Jul 25, 11 10:05) title
border
grestore
(Printed by Rick van Rein) rhead
() (Monday July 25, 2011) (2/5) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (9-12) 3
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(   address fe80::/128.  The tunnel client can choose its own interface) N
(   identifier\(s\) at will from the range 1 to 65535 inclusive.  The tun-) N
(   nel client MAY fixate interface identifiers in its firmware.) N
() N
(   The point-to-point nature makes it possible for tunnel clients and) N
(   servers to ignore the interface identifier altogether without mal-) N
(   functioning.  Upon sending however, a node MUST use a valid interface) N
(   identifier to accommodate peers that do check it.) N
() N
(   The value of DupAddrDetectTransmits defaults to 0 for this kind of) N
(   link, meaning that no neighbor discovery is required for 6bed4 links.) N
(   This is possible because of the static allocation of interface iden-) N
(   tifiers to endpoint.  Note that RFC 4862 requires the tunnel client) N
(   and server provide a facility for overriding this setting.  For this) N
(   reason, the tunnel endpoints MUST support neighboring requests.) N
() N
() N
(4.  Tunneling Traffic) N
() N
(   The following describes how to pass traffic down from the IPv6-side) N
(   of the tunnel to the IPv4-tunneled side; how to pass it up in the) N
(   opposite direction; and, as an optimisation, how a tunnel may) N
(   directly connect two tunnels by bouncing traffic to the other side.) N
() N
(4.1.  Sending Traffic Up the Tunnel) N
() N
(   The embedded system can send IPv6 packets through a tunnel as soon as) N
(   it has an assigned IPv6 address.  To do this, it will prefix a UDP) N
(   header with the well-known UDP port as a destination and the UDP port) N
(   used locally for the tunnel as a source.  It will then prefix an IPv4) N
(   header, containing the well-known IPv4 address of the tunnel as des-) N
(   tination, and the classically obtained local IPv4 address as the) N
(   sender.) N
() N
(   This is shipped over the IPv4 network, may pass NAT routers, and will) N
(   arrive on the tunnel server with possibly altered sender information) N
(   in the IPv4 and UDP headers.) N
() N
(   When traffic is sent to the all-routers multicast address ff02::2,) N
(   the all-nodes multicast address ff02::1 or to the router's link-local) N
(   address fe80::/128 it is subject to local handling according to RFC) N
(   4861 and RFC 4862.  If however, the time-to-live is not 255, the) N
(   packet MUST be dropped or rejected with Time Exceeded error sent with) N
(   ICMPv6.  Specifically, router solicitation will result in sending a) N
(   router advertisement, and neighbor solicitation is handled as usual.) N
() N
(   Before passing traffic through the tunnel, the time-to-live in the) N
(   IPv6 packet MUST be decremented.  If this is not possible because it) N
() N
() N
() N
(Van Rein                Expires January 26, 2012                [Page 9]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 9/17) (Jul 25, 11 10:05) title
border
/v 1 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(   is already 0, then the packet MUST be rejected and a Time Exceeded) N
(   error sent over ICMPv6 in response.) N
() N
(   The tunnel server then verifies the correctness of the sending IPv6) N
(   address: The first 64 bits should match the fixed prefix assigned to) N
(   the tunnel server; the following 32 bits should match the IPv4) N
(   address according to the incoming message; the following 16 bits) N
(   should match the UDP port from which the incoming message came; the) N
(   final 16 bits with the interface identifier may not be zero, as that) N
(   is always the tunnel server's address.) N
() N
(   If the match is good, the IPv6 payload will be taken out of its) N
(   IPv4/UDP wrapper, and forwarded as normal traffic over the IPv6 net-) N
(   work.  In doing so, the DiffServ field SHOULD be preserved.  A few) N
(   exceptional forms of delivery are handled in later sections of this) N
(   specification.) N
() N
(   If the match is false, the tunnel server will send back an unso-) N
(   licited router advertisement to the origin from which the failing) N
(   tunnel traffic came, assuming that a 6bed4 endpoint is listening) N
(   behind that address/port combination.  This advertisement will revoke) N
(   the prefix that the tunnel client tried to use by setting its pre-) N
(   ferred and valid lifetimes to 0.  In the same message, it will adver-) N
(   tise the new prefix that holds the external IPv4 address and UDP port) N
(   of the client, and assign it an infinite preferred and valid lifetime) N
(   value 0xffffffff.) N
() N
(   Upon reception of a router advertisement, the tunnel client MUST) N
(   immediately update its IPv6 addresses and it MUST NOT send out any) N
(   further messages using an outdated IPv6 prefix.  It MAY resend any) N
(   unacknowledged messages that are being processed.) N
() N
(4.2.  Sending Traffic Down the Tunnel) N
() N
(   Traffic that is to be sent down through the tunnel, is routed to a) N
(   tunnel server by routing to its IPv6 /64 prefix.  If this is the) N
(   well-known prefix, then many BGP speakers may be announcing it; the) N
(   routing infrastructure would then find a suitable tunnel server) N
(   nearby the IPv6 sender.) N
() N
(   If an entering IPv6 packet has a destination address with a different) N
(   /64 prefix than the prefix setup for the tunnel, then that packet) N
(   MUST be dropped or rejected with an ICMPv6 message.) N
() N
(   If an IPv6 packet is passed down through the tunnel, its time-to-live) N
(   MUST be decremented.  If this is not possible because the time-to-) N
(   live is already 0, then the packet MUST be rejected with a Time) N
(   Exceeded ICMPv6 error message.) N
() N
() N
() N
(Van Rein                Expires January 26, 2012               [Page 10]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 10/17) (Jul 25, 11 10:05) title
border
/v 2 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(   The IPv6 address to which the message is sent contains an IPv4) N
(   address right after its /64 prefix, followed by 16 bits of client UDP) N
(   port.  The destination side of a UDP header and IPv4 header can be) N
(   reconstructed from that, and the source side can be filled with the) N
(   well-known values that have been defined for 6bed4.  The DiffServ) N
(   field of the incoming IPv6 header SHOULD be replicated in the newly) N
(   constructed IPv4 header.  At some point before shipping this message,) N
(   the last 16 bits of the address, holding the interface identifier,) N
(   MUST be checked to be non-zero.  If the value is zero, the incoming) N
(   traffic MUST be silently dropped.) N
() N
(4.3.  Bouncing Traffic on the Tunnel's IPv4 Side) N
() N
(   If a tunnel receives a tunneled package destined for an IPv6 address) N
(   that begins with the well-known IPv6 /64 prefix for 6bed4 or perhaps) N
(   a locally used alternative prefix for 6bed4, then it MAY optimize the) N
(   flow of traffic by forwarding it as tunneled traffic to the IPv4) N
(   address and UDP port found in the remainder of the IPv6 destination) N
(   address.) N
() N
(   In doing so, it MUST NOT bypass the comparison of the IPv6 prefix,) N
(   IPv4 address and UDP port as mentioned in the source IPv6 address.) N
(   If this comparison fails, the traffic MUST be treated as traffic try-) N
(   ing to pass up through the tunnel with an incorrectly set IPv6) N
(   address.) N
() N
() N
(5.  Tunnel Service Profiles) N
() N
(   Three different service profiles are expected to be useful for this) N
(   tunnel mechanism.  The first is public, available to users anywhere) N
(   in the World.  The second profile is local, intended to serve only a) N
(   part of the Internet, such as the network of a particular provider.) N
(   The third profile focusses on translation in routers through which) N
(   the 6bed4-encapsulated traffic happens to flow.) N
() N
(5.1.  Public Tunnel Service Profile) N
() N
(   This profile describes the situation of a service made publicly) N
(   available in the spirit of supporting the transition of embedded sys-) N
(   tems as proposed in this specification.) N
() N
(   Such services are announced over BGP, which SHOULD be done for both) N
(   the IPv4-side and IPv6-side addresses.  Given the stateless nature of) N
(   Internet routing, the upstream and downstream routes may well go) N
(   through different services, and there can even be situation where) N
(   traffic is evenly spread over more than one target.  For this reason,) N
(   the addresses announced MUST be the well-known address TBD1/24 for) N
() N
() N
() N
(Van Rein                Expires January 26, 2012               [Page 11]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 11/17) (Jul 25, 11 10:05) title
border
/v 3 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(   the IPv4 side and TBD2::/48 for the IPv6 side.) N
() N
(   Public Tunnel Service providers MUST register their tunnel service) N
(   with their Regional Internet Registry, to support finding the) N
(   Autonomous System that supports the 6bed4 service.) N
() N
(5.2.  Local Tunnel Service Profile) N
() N
(   This profile describes the situation of a local administrator at any) N
(   scale from a home or company network to an ISP, offering 6bed4 ser-) N
(   vice to hosts internal to the network.) N
() N
(   Such services are announced over interior gateway routing protocols.) N
(   On the IPv4 side, the well-known address TBD1/24 SHOULD be announced,) N
(   to provide service any embedded device that was equipped to deal with) N
(   standard 6bed4 facilities.  On the IPv6 side a non-standard address) N
(   range MUST be used, namely one that routes to the locally available) N
(   6bed4 service.) N
() N
(   The reason that a local 6bed4 service MAY use a non-standard IPv4) N
(   address is that it may be desirable to support other applications) N
(   than embedded systems, for instance desktops or routers, which MUST) N
(   NOT put pressure on the public 6bed4 infrastructure.  Using another) N
(   IPv4 address however, releases the pressure that such applications) N
(   would bring if the locally supported systems switch to external) N
(   Internet access mechansims.  Next to such alternative local use of) N
(   6bed4 it is still possible to run a normal 6bed4 service on TBD1/24,) N
(   using any of the profiles sketched here.) N
() N
(   Local tunnel service providers SHOULD register their IPv6 /64 range) N
(   with their Regional Internet Registry, and MAY refer to this specifi-) N
(   cation in abuse-handling comments.) N
() N
(5.3.  En-route Translation Profile) N
() N
(   This profile describes routers that translate 6bed4 traffic while it) N
(   happens to pass through them.  This can be done by any router that) N
(   has both IPv4 and IPv6 connectivity, and that decides to terminate) N
(   either TBD1/24 or the IPv6-side address range.) N
() N
(   En-route translation need not be announced publicly, but it may help) N
(   to direct traffic to such routers if there would otherwise be alter-) N
(   nate paths around it.  For example, if all gateways of an Internet) N
(   Service Provider implement 6bed4 in an en-route profile, then it may) N
(   not be necessary to announce this service on the local network or on) N
(   the Internet at large.) N
() N
(   A few variations exist regarding the prefix used on the IPv6 side of) N
() N
() N
() N
(Van Rein                Expires January 26, 2012               [Page 12]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 12/17) (Jul 25, 11 10:05) title
border
grestore
(Printed by Rick van Rein) rhead
() (3/5) (Monday July 25, 2011) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (13-16) 4
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(   en-route translation.  If all upstream traffic \(for a targeted net-) N
(   work\) is guaranteed to pass through a router that performs en-route) N
(   6bed4 translation, then the IPv6 side SHOULD use an IPv6 address that) N
(   routes to the local network, but it MAY use TBD2::/64 if downstream) N
(   6bed4 service is not locally available.  On the other hand, if not) N
(   all upstream traffic \(for the target network\) passes through an en-) N
(   route translating router, then its IPv6 side MUST use the well-known) N
(   prefix TBD2::/64 so that alternate routes and the en-route transla-) N
(   tion cannot be distinguished from the end user's perspective.) N
() N
(   The major advantage of en-route translation is that it can avoid) N
(   diversion of traffic through a third-party 6bed4 tunnel server.) N
(   Instead of routing the traffic in two legs, going through an interme-) N
(   diary, it can be kept on the fastest route available, which is good) N
(   for the routing budget of the Internet as a whole.  It may even cause) N
(   the IPv6 traffic to remain on the local network of the Internet Ser-) N
(   vice Provider.) N
() N
(   En-route translation providers SHOULD register their IPv6 /64 range) N
(   with their Regional Internet Registry, and MAY refer to this specifi-) N
(   cation in abuse-handling comments.) N
() N
() N
(6.  NAT-traversal Issues) N
() N
(   Very often, a 6bed4 tunnel will have to pass through a layer of net-) N
(   work address translation, or NAT.  Even if 6bed4 recovers the trans-) N
(   parency of network connections at the IPv6 level, there may still be) N
(   simpler problems to resolve at an underlying IPv4 level.  NAT will) N
(   rewrite IPv4 and UDP-over-IPv4 source addresses.  Handling these) N
(   translations has been designed into 6bed4.) N
() N
(   A remaining concern with NAT is that UDP has no connection status,) N
(   and its translation must therefore be flushed at some point.) N
(   Although the 6bed4 tunnel will quickly recover when that happens, the) N
(   higher protocols may not be as accommodating; notably, TCP connec-) N
(   tions over IPv6 would break if the translation changed suddenly.) N
() N
(   For this reason, it may be necessary to send messages for the purpose) N
(   of keeping the address translation active in any on-route NAT) N
(   routers.  This can either be achieved by an actively communicating) N
(   protocol, or by explicit keep-alive messages.) N
() N
(   Any such messages SHOULD NOT be sent if there is no application need) N
(   for keeping the same IPv6 address on which the tunnel client can be) N
(   reached.  Keep-alive messages MUST NOT be sent more often than once) N
(   in 25 seconds.  Furthermore, randomization of the keep-alive message) N
(   interval is important so as to offload the tunnel server from) N
() N
() N
() N
(Van Rein                Expires January 26, 2012               [Page 13]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 13/17) (Jul 25, 11 10:05) title
border
/v 1 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(   synchronization of keep-alive messages after things like power out-) N
(   ages.) N
() N
(   Instead of sending keep-alive messages, a device MAY use other means) N
(   to achieve the longevity of an open link.  If it can communicate its) N
(   wish for an open UDP port directed to its local endpoint directly,) N
(   this is a much simpler method.  The only disadvantage of this) N
(   approach is usually that it cannot be relied upon as a general mecha-) N
(   nism; but if it does, it will save energy and bandwidth, so it is) N
(   certainly recommended.) N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
(Van Rein                Expires January 26, 2012               [Page 14]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 14/17) (Jul 25, 11 10:05) title
border
/v 2 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(7.  Security Considerations) N
() N
(   Any party that can convince a network of being the router for a given) N
(   range of addresses will be able to attract the traffic for 6bed4 tun-) N
(   nels.  This could open up such protocols for man-in-the-middle) N
(   attacks.) N
() N
(   The foreseeable means of doing this are either through BGP advertise-) N
(   ments on the Internet, or through router advertisements on a local) N
(   network.  The issue of BGP advertisements is a general problem and is) N
(   not commonly thought of as being hazardous; notwithstanding that,) N
(   work is being done to solve the general problem at that general) N
(   level.) N
() N
(   When done at the local level using an interior gateway routing proto-) N
(   col, the attack is not much different from DHCP hijacking, a risk) N
(   that is usually dealt with locally by monitoring client nodes to not) N
(   exhibit server behavior, or by strict control over network access.) N
() N
(   Although symmetric signatures are possible over neighbor discovery) N
(   protocols, this is not usable for the 6bed4 system, because it is a) N
(   global protocol and includes too many parties to be able to protect) N
(   the shared secret keys.  Any signature mechanism for 6bed4 would have) N
(   to be asymmetrical.) N
() N
() N
(8.  IANA Considerations) N
() N
(   This document allocates three resources from existing registries.) N
() N
(   First, the well-known IPv4 address TBD1 under its own /24 prefix, to) N
(   be registered in  the IPv4 Special Purpose Address Registry.) N
(   Although only a single address is required, the choice of a /24 inte-) N
(   grates better with BGP routing practices.  [TO BE REMOVED:) N
(   192.64.64.1/24 or 192.6.4.1/24 would be nice!]  [TO BE REMOVED: This) N
(   registration should take place at the following location:) N
(   http://www.iana.org/assignments/iana-ipv4-special-registry/iana-) N
(   ipv4-special-registry.xml]) N
() N
(   Second, the well-known IPv6 prefix TBD2::/48, to be registered in the) N
(   IANA IPv6 Special Purpose Address Registry.  Although only a /64 pre-) N
(   fix is needed, the choice of a /48 integrates better with BGP routing) N
(   practices.  The additional bits to come to a /64 prefix are filled) N
(   with zeroes.  [TO BE REMOVED: The address can be taken from) N
(   2001:0000::/23] [TO BE REMOVED: 2001:6:bed4::/48 would be nice!]  [TO) N
(   BE REMOVED: This registration should take place at the following) N
(   location: http://www.iana.org/assignments/iana-ipv6-special-reg-) N
(   istry/iana-ipv6-special-registry.xml]) N
() N
() N
() N
(Van Rein                Expires January 26, 2012               [Page 15]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 15/17) (Jul 25, 11 10:05) title
border
/v 3 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(   Thirdly, the well-known UDP port TBD3, to be registered in the Port) N
(   Numbers Registry.  [TO BE REMOVED: Suggest to share 3653 for compara-) N
(   ble & interoperable TSP from RFC 5572; draft author contacted Marc) N
(   Blanchet with this sharing proposal] [TO BE REMOVED: This registra-) N
(   tion should take place at the following location:) N
(   http://www.iana.org/assignments/port-numbers]) N
() N
() N
(9.  References) N
() N
(9.1.  Normative References) N
() N
(   [RFC4862]  Thomson, S., Narten, T., and T. Jinmei, "IPv6 Stateless) N
(              Address Autoconfiguration", RFC 4862, September 2007.) N
() N
(   [RFC4861]  Narten, T., Nordmark, E., Simpson, W., and H. Soliman,) N
(              "Neighbor Discovery for IP version 6 \(IPv6\)", RFC 4861,) N
(              September 2007.) N
() N
(   [RFC4443]  Conta, A., Deering, S., and M. Gupta, Ed., "Internet Con-) N
(              trol Message Protocol \(ICMPv6\) for the Internet Protocol) N
(              Version 6 \(IPv6\) Specification", RFC 4443, March 2006.) N
() N
(   [RFC4271]  Rekhter, Y., Ed., Li, T., Ed., and S. Hares, Ed., "A Bor-) N
(              der Gateway Protocol 4 \(BGP-4\)", RFC 4271, January 2006.) N
() N
(   [RFC4786]  Abley, J. and K. Lindqvist, "Operation of Anycast Ser-) N
(              vices", BCP 126, RFC 4786, December 2006.) N
() N
(   [RFC2474]  Nichols, K., Blake, S., Baker, F., and D. Black, "Defini-) N
(              tion of the Differentiated Services Field \(DS Field\) in) N
(              the IPv4 and IPv6 Headers", RFC 2474, December 1998.) N
() N
(   [RFC1918]  Rekhter, Y., Moskowitz, B., Karrenberg, D., de Groot, G.,) N
(              and E. Lear, "Address Allocation for Private Internets",) N
(              BCP 5, RFC 1918, February 1996.) N
() N
(   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate) N
(              Requirement Levels", BCP 14, RFC 2119, March 1997.) N
() N
() N
(9.2.  Informative References) N
() N
(   [RFC2766]  Tsirtsis, G. and P. Srisuresh, "Network Address Transla-) N
(              tion - Protocol Translation \(NAT-PT\)", RFC 2766, February) N
(              2000.) N
() N
(   [RFC1034]  Mockapetris, P., "Domain names - concepts and facilities",) N
() N
() N
() N
(Van Rein                Expires January 26, 2012               [Page 16]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 16/17) (Jul 25, 11 10:05) title
border
grestore
(Printed by Rick van Rein) rhead
() (Monday July 25, 2011) (4/5) footer
end % of iso1dict
pagesave restore
showpage
%%Page: (17) 5
%%BeginPageSetup
/pagesave save def
%%EndPageSetup
iso1dict begin
gsave
llx lly 12 add translate
/v 0 store
/x0 x v get 2.518616 add sx cw mul add store
/y0 y v get bfs th add sub store
x0 y0 moveto
() p n
() N
() N
(INTERNET DRAFT      IPv6 for Embedded Systems \(6bed4\)      July 25, 2011) N
() N
() N
(              STD 13, RFC 1034, November 1987.) N
() N
(   [RFC2131]  Droms, R., "Dynamic Host Configuration Protocol",) N
(              RFC 2131, March 1997.) N
() N
() N
() N
(Author's Address) N
() N
() N
(   Rick van Rein) N
(   OpenFortress Digital signatures) N
(   Haarlebrink 5) N
(   7544 WP  Enschede) N
(   The Netherlands) N
() N
(   email: rick@openfortress.nl) N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
() N
(Van Rein                Expires January 26, 2012               [Page 17]) N
() N
() N
(draft-vanrein-v6ops-6bed4-00.txt) (Page 17/17) (Jul 25, 11 10:05) title
border
grestore
(Printed by Rick van Rein) rhead
() (5/5) (Monday July 25, 2011) footer
end % of iso1dict
pagesave restore
showpage

%%Trailer
end
%%EOF
