 



INTERNET-DRAFT                                       John Kaippallimalil
Intended Status: Informational                                    Huawei
Expires: April 17, 2014                             Rajesh S. Pazhyannur
                                                                   Cisco
                                                           Parviz Yegani
                                                                 Juniper
                                                        October 14, 2013


             Mapping Wi-Fi QoS in a PMIPv6 Mobility Domain
              draft-kaippallimalil-netext-pmip-qos-wifi-03


Abstract

   This document provides a specification to enable end to end QoS in
   networks containing a Wi-Fi network coupled with a PMIPv6 mobility
   domain consisting of a local mobility anchor and mobility access
   gateway. This enables QoS policing and labeling of packets in a
   consistent manner on the 802.11 link between the MN and the AP as
   well as the link between the MAG and the LMA. To enable this, the
   document specifies mapping between QoS parameters on the 802.11 link
   and the QoS Mobility options in the PMIPv6 domain.



Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/1id-abstracts.html

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html


 


Kaippallimalil et al.    Expires April 17, 2014                 [Page 1]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


Copyright and License Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors. All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document. Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document. Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.



Table of Contents

   1. Introduction  . . . . . . . . . . . . . . . . . . . . . . . . .  3
     1.1. Terminology . . . . . . . . . . . . . . . . . . . . . . . .  3
     1.2. Definitions . . . . . . . . . . . . . . . . . . . . . . . .  4
     1.3. Abbreviations . . . . . . . . . . . . . . . . . . . . . . .  4
   2. Background  . . . . . . . . . . . . . . . . . . . . . . . . . .  4
     2.1. QoS in 3GPP based Networks  . . . . . . . . . . . . . . . .  4
     2.2. QoS in PMIPv6 Mobility domain . . . . . . . . . . . . . . .  5
     2.3. QoS in IEEE 802.11 based Networks . . . . . . . . . . . . .  5
   3. End-to-End QoS with Admission Control . . . . . . . . . . . . .  6
     3.1. Case A: MN Initiated QoS Signaling  . . . . . . . . . . . .  6
     3.2. Case B: Network Initiated QoS Signaling (802.11aa based)  .  7
     3.3. Case C: Hybrid (Network Initiated for PMIPv6 and MN
          initiated for Wi-Fi)  . . . . . . . . . . . . . . . . . . .  9
     3.4. Mapping of Connection Parameters  . . . . . . . . . . . . . 10
     3.5. Service Guarantees in 802.11  . . . . . . . . . . . . . . . 11
   4. End-to-End QoS without Admission Control  . . . . . . . . . . . 11
     4.1. Default Values and Recommendations  . . . . . . . . . . . . 13
   5. Security Considerations . . . . . . . . . . . . . . . . . . . . 13
   6. IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 13
   7.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 14
     7.1. Normative References  . . . . . . . . . . . . . . . . . . . 14
     7.2. Informative References  . . . . . . . . . . . . . . . . . . 14
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 15
   Appendix A: QoS Policy Architecture  . . . . . . . . . . . . . . . 16





 


Kaippallimalil et al.    Expires April 17, 2014                 [Page 2]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


1. Introduction

   The deployment network considered here is where there is a Wi-Fi
   access link coupled with a PMIPv6 mobility domain. A MAG is co-
   located with the Access Point (AP) and in cases where the Wi-Fi
   network consists of Access Point and a Wireless LAN Controller (WLC),
   we assume that the MAG is located either at the AP or the WLC.
   Additionally, the Wi-Fi access network may be part of a 3GPP network.
   In such a case, the per user QoS Policy may be provided from the 3GPP
   network. Specifically, the 3GPP network may provision QoS during
   authorization of the user, and may also dynamically provision QoS for
   individual flows. [TS23.402] [TS23.273] describe the initial
   authorization and download of user profile, including QoS profile. In
   this specification we describe how end to end QoS  may be
   established: spanning the access domain (Wi-Fi access network) and
   the PMIPv6 mobility domain between the MAG and the LMA. A key
   question from an end to end QoS standpoint is how QoS policies on the
   Wi-Fi access link is mapped to QoS in the PMIPv6 mobility domain and
   further to 3GPP QoS policies for per user/per flow.  

   [PMIP-QoS] defines a QoS option to enable QoS in the PMIPv6 mobility
   domain. The sub-options defined in the QoS option are mapped into
   corresponding parameters in the 3GPP specified QoS parameters. [PMIP-
   QoS] does not explicitly describe how the QoS signaling and QoS sub-
   options map into corresponding signaling and parameters in the Wi-Fi
   access network. This mapping is the focus of this document.   The key
   distinction between [PMIP-QoS] and this document is that this focuses
   on the end-to-end flow (spanning 802.11 access and PMIPv6 domain)
   while [PMIP-QoS] focuses on the QoS within the PMIPv6 mobility
   domain. This document provides a systematic way to map to the various
   QoS parameters available in initial authorization, as well as setup
   of new sessions (such as a voice/video call). The mapping
   recommendations allow for proper provisioning and consistent
   interpretation between the various QoS parameters provided by PMIP
   QoS, 3GPP and 802.11.

   The rest of the document is organized as follows. Chapter 2 provides
   an overview of the QoS mechanisms in 3GPP mobile networks and 802.11
   networks. Chapter 3 describes different ways how end to end QoS with
   Wi-Fi admission control is achieved.  Chapter 4 describes how end to
   end QoS without admission control is achieved.  


1.1. Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].
 


Kaippallimalil et al.    Expires April 17, 2014                 [Page 3]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


1.2. Definitions

   Guaranteed Bit Rate (GBR)
       GBR in 3GPP mobile network defines the guaranteed (reserved) bit
       rate resources of service data flow on a connection (bearer)
       [TS23.203].

   Aggregate Maximum Bit Rate (AMBR)
       AMBR represents the total bandwidth that all flows of a user is
       allowed.

   Allocation Retention Priority (ARP)
       ARP is used in the mobile network to determine the order in which
       resources for a flow may be preempted during severe congestion or
       other resource limitation. ARP of 1 is the highest priority while
       15 is the lowest [TS23.203]. 

   Mean Data Rate
       In WMM, Mean Data Rate specifies the average data rate in bits
       per second. The Mean Data Rate does not include the MAC and PHY
       overheads [WMM 1.2.0].   


1.3. Abbreviations

   3GPP		Third Generation Partnership Project	
   AAA		Authentication Authorization Accounting
   AMBR		Aggregate Maximum Bit Rate
   ARP		Allocation and Retention Priority
   AP		Access Point
   DSCP		Differentiated Services Code Point
   EPC		Enhanced Packet Core
   GBR		Guaranteed Bit Rate
   MAG		Mobility Access Gateway
   MBR		Maximum Bit Rate
   MN		Mobile Node
   PDN-GW 	Packet Data Network Gateway
   QCI		QoS Class Indicator
   QoS		Quality of Service
   Tspec		Traffic Conditioning Spec
   WLC		Wireless Controller



2. Background

2.1. QoS in 3GPP based Networks 

 


Kaippallimalil et al.    Expires April 17, 2014                 [Page 4]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


   3GPP has standardized QoS for EPC (Enhanced Packet Core) from Release
   8 [TS 23.107]. 3GPP QoS policy configuration defines access agnostic
   QoS parameters that can be used to provide service differentiation in
   multi vendor and operator deployments. The concept of a bearer is
   used as the basic construct for which the same QoS treatment is
   applied for uplink and downlink packet flows between the MN (host)
   and gateway [TS23.402]. A bearer may have more than one packet filter
   associated and this is called a Traffic Flow Template (TFT). The IP
   five tuple (IP source address, port, IP destination, port, protocol)
   identifies a flow.

   The access agnostic QoS parameters associated with each bearer are
   QCI (QoS Class Identifier), ARP (Allocation and Retention Priority),
   MBR (Maximum Bit Rate) and optionally GBR (Guaranteed Bit Rate). QCI
   is a scalar that defines packet forwarding criteria in the network.
   Mapping of QCI values to DSCP is well understood and GSMA has defined
   standard means of mapping between these scalars [GSMA-IR34].

   In a 3GPP radio network, priority and packet delay budget in QCI
   determines the policy used for rate-shaping, scheduling and queue
   management. The ARP is used to determine if a connection session
   request should be allowed (e.g. insufficient radio resource) and the
   order in which flows should be pre-empted in case of severe
   congestion.

   An MN may have more than one IP addresses associated with the same
   hardware (MAC) address corresponding to each of the networks than it
   is attached to. This corresponds to more than one PMIP mobility
   session for which QoS is provisioned in the WLC.


2.2. QoS in PMIPv6 Mobility domain

   [PMIP-QoS] defines a mobility option that can be used by the mobility
   entities in the Proxy Mobile IPv6 domain to exchange Quality of
   Service parameters associated with a subscriber's IP flows. Using the
   QoS option, the local mobility anchor and the mobile access gateway
   can exchange available QoS attributes and associated values. This
   enables QoS policing and labeling of packets to enforce QoS
   differentiation on the path between the local mobility anchor and the
   mobile access gateway.


2.3. QoS in IEEE 802.11 based Networks

   IEEE 802.11-2012 [802.11-2012] provides an enhancement of the MAC
   layer in WiFi networks to support QoS--EDCA (Enhanced Distributed
   Channel Access). EDCA uses a contention based channel access method.
 


Kaippallimalil et al.    Expires April 17, 2014                 [Page 5]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


   The EDCA mechanism provides differentiated, distributed access using
   eight different UPs (User Priorities). EDCA also defines four access
   categories (AC) that provide support for the delivery of traffic. In
   EDCA, the random back-off timer and arbitration inter-frame space is
   adjusted according to the QoS priority. Frames with higher priority
   AC have shorter random back-off timers and arbitration inter-frame
   spaces. Thus, there is a better chance for higher priority frames to
   be transmitted. The Wi-Fi Alliance has created a specification
   referred to as WMM (Wi-Fi Multimedia) based on above.

   In addition to the above, QoS can also be provided using admission
   control. The MN uses ADDTS (Add Traffic Specs) to setup a traffic
   stream between itself and the AP, and DELTS to delete that stream. In
   WMM [WMM 1.2.0], the AP advertises if admission control is mandatory
   for an access class. Admission control for best effort or background
   access classes is not recommended. The Wi-Fi Alliance has created a
   specification referred to as WMM-AC (Wi-Fi Multimedia Admission
   Control) based on the above.


3. End-to-End QoS with Admission Control

   This section outlines a few use cases to illustrate how the
   parameters and mapping in section 4 are applied. These cases are not
   expected to be exhaustive.

   There are two main types of interaction possible to provision QoS -
   one is where the UE initiates the QoS request and the network
   provisions the resources. The second is where the network provisions
   resources as a result of some out of band signaling (like application
   signaling). In this scenario, if the MN supports 802.11aa (TCLAS),
   the network can push the QoS configuration to the MN. If the MN only
   supports WMM QoS, then MN requests for QoS for the WiFi segment and
   the MAG provisions based on QoS already provisioned for the MN.


3.1. Case A: MN Initiated QoS Signaling

   When an MN sets up a connection that requires admission control in
   the WiFi network, the level of QoS for the connection needs to be set
   up. When the MN is configured (e.g. in SIM, subscription) to start
   the QoS signaling, it sends an ADDTS request indicating the QoS
   required for the connection. The AP/WLC (MAG) obtains the
   corresponding level of QoS to be granted to the flow by sending a
   PMIPv6 PBU message with QoS options to the LMA. Details of the setup
   are described below. 


 


Kaippallimalil et al.    Expires April 17, 2014                 [Page 6]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


                          +--------+              
      +----+              | AP/WLC |              +-------+
      | MN |              | (MAG)  |              |  LMA  |         
      +-+--+              +---+----+              +---+---+
        |                     |                       |
      /*************************************************************/
      /*       [0] connection setup to mobile network              */
      /*************************************************************/
        |                     |                       |
        |[1] ADDTS(TSPEC)     |                       |
        |-------------------->|                       |
        |                     |   PBU(QoS options)[2] |
        |                     |---------------------->| Policy request
        |                     |                       |--------------->
        |                     |                       |Policy response
        |                     |                       |<--------------- 
        |                     |  PBA (QoS option) [3] |
        |[4]ADDTS Response    |<----------------------|
        |    (TSPEC)          |                       |
        |<--------------------|                       |
        |                     |                       |

      Figure 1: MN initiated QoS setup

    [0] The MN starts signaling to setup the connection. In mobile
        networks, these are not default connections that are setup
        initially. Default connections are best effort and do not need
        explicit admission control with ADDTS.

    [1] If the MN and network support 802.11aa and the MN is configured
        to start QoS signaling, the MN sends an ADDTS request specifying
        the QoS requested for the traffic stream including TSPEC element
        with connection setup identifier.    

    [2] The MAG (AP/WLC) identifies the PMIP based on the connection
        identifier and sends a PBU with QoS options requested.

    [3] The LMA responds with the authorized QoS for the connection. 

    [4] The AP/WLC (MAG) provisions the corresponding QoS and replies
        with ADDTS Response containing authorized QoS in TSPEC.


3.2. Case B: Network Initiated QoS Signaling (802.11aa based)

   When an MN has connections or flows that require admission control,
   the mobile network may provision correspond QoS in the MAG. This use
   case illustrates how an MN and WiFi network that supports 802.11aa
 


Kaippallimalil et al.    Expires April 17, 2014                 [Page 7]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


   can provision QoS to the MN. In this case, the network is configured
   to start the QoS signaling, it sends an ADDTS request indicating the
   QoS required for the connection.

                          +--------+               
      +----+              | AP/WLC |              +-------+
      | MN |              | (MAG)  |              |  LMA  |         
      +-+--+              +---+----+              +---+---+
        |                     |                       |
        |                     |                       |
      /*************************************************************/
      /*          [0] connection setup to mobile network           */
      /*************************************************************/
        |                     |                       | Policy update
        |                     |UPN(update session)[2] |<---------------
        |                     |<----------------------|       [1]
        |                     |   PBU(QoS option) [3] |
        |                     |---------------------->| 
        |                     |  PBA (QoS option)[4]  |       
        | ADDTS Reserve Req   |<----------------------|
        | (TCLAS/app id) [5]  |                       |
        |<--------------------|                       |
        | ADDTS Reserve Response[6]                   |
        |-------------------->|                       |
        |                     |                       |

      Figure 2: Network initiated QoS setup with 802.1aa

    [0] The MN starts signaling to setup the connection. In mobile
        networks, these are not default connections that are setup
        initially. Default connections are best effort and do not need
        explicit admission control with ADDTS.

    [1] The LMA gets a QoS policy update for an existing connection. 

    [2] LMA sends a PMIP UPN (Update Notification) message to the MAG
        requesting it to update session parameters.

    [3] The MAG (AP/WLC) replies to UPN with a PBU including QoS
        options.

    [4] The LMA responds with the authorized QoS for the connection. 

    [5] If the MN and network support 802.11aa, the AP/WLC (MAG) sends
        an ADDTS Reserve Request specifying the QoS reserved for the
        traffic stream including TSPEC and TCLAS element with the
        connection identifier (from PMIP).    

 


Kaippallimalil et al.    Expires April 17, 2014                 [Page 8]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


    [6] The MN notes the QoS reserved in the network and replies with
        ADDTS Reserve Response.


3.3. Case C: Hybrid (Network Initiated for PMIPv6 and MN initiated for
   Wi-Fi) 

   This example outlines a scenario where an MN attaches to the WiFi and
   then obtains services in the mobile network. When the MN attaches,
   PMIP signaling between the MAG and LMA establishes mobile connection
   and related QoS. Subsequently, the MN starts an application that
   requires dedicated bandwidth resources and signals that using
   TSPEC/ADDTS request. The details of this sequence are described
   below.  

                          +--------+               
      +----+              | AP/WLC |              +-------+
      | MN |              | (MAG)  |              |  LMA  |         
      +-+--+              +---+----+              +---+---+
        |                     |                       |
        |                     |                       |
      /*************************************************************/
      /*           [0] connection setup to mobile network          */
      /*************************************************************/
        |                     |                       |  Policy update 
        |                     |UPN(update session)[2] |<---------------
        |                     |<----------------------|       [1]
        |                     |   PBU(QoS option) [3] |
        |                     |---------------------->| 
        |                     |  PBA (QoS option)[4]  |       
        |                     |<----------------------|
      +-------------+         |                       | 
      |upper layer  |         |                       |
      |notification |         |                       |
      +-+-+-+-+-+-+-+         |                       |
        |ADDTS Request(TSPEC)[5]                      |
        |-------------------->|                       |
        | ADDTS Response [6]  |                       |
        |<--------------------|                       |
        |                     |                       |

      Figure 3: Network initiated QoS setup with WMM

    [0] The MN starts signaling to setup the connection. In mobile
        networks, these are not default connections that are setup
        initially. Default connections are best effort and do not need
        explicit admission control with ADDTS.

 


Kaippallimalil et al.    Expires April 17, 2014                 [Page 9]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


    [1] The LMA gets a QoS policy update for an existing connection. 

    [2] LMA sends a PMIP UPN (Update Notification) message to the MAG
        requesting it to update session parameters.

    [3] The MAG (AP/WLC) replies to UPN with a PBU including QoS
        options.

    [4] The LMA responds with the authorized QoS for the connection.
        Since the MAG or MN does not support 802.11aa, the MAG updates
        QoS profile of MN and waits for request from MN.

    [5] When the MN receives upper layer signaling (e.g. SDP) indicating
        acceptance of codec or other media parameters, the MN requests
        for corresponding QoS in TSPEC of ADDTS Request.    

    [6] When the(AP/WLC (MAG) receives the ADDTS Request from MN, it
        checks the QoS profile for the MN to see if the additional QoS
        requested for the stream is consistent with the QoS profile
        stored for the MN. The AP/WLC then responds with ADDTS Response.


3.4. Mapping of Connection Parameters 

   This section outlines the handling of QoS connection (session)
   parameters between WiFi 802.11 and PMIP QoS. 

   Connection Mapping:

        802.11 QoS in TSPEC is used to reserve QoS for a traffic stream
        (MN MAC, TS(Traffic Stream) id). The QoS reservation is for
        802.11 frames and here is no IP prefix/flow associated during
        this reservation. The AP/WLC evaluates this request against
        policy installed using PMIP QoS. When PMIP QoS policy is
        installed in AP/WLC, the TSPEC request is granted if the MN
        (identified by MAC) is authorized. The AP/WLC may police
        subsequent flows with {MAC, TS, 802.1D, IP prefix} to match QoS
        policy installed by PMIP QoS for {IP prefix, DSCP}.

   QoS Class:

        802.11 QoS Access Class (AC_VO, AC_VI) requests corresponds to
        DSCP in PMIP QoS setup. Table 1 (section 4.1) below shows the
        complete mapping. 

   Bandwidth:

        For flows with reservation, the 802.11 Mean Data Rate should be
 


Kaippallimalil et al.    Expires April 17, 2014                [Page 10]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


        equal to (or less than) Guaranteed Bit Rate (GBR). If the MN
        requests Mean Data Rate in ADDTS greater than GBR, then AP/WLC
        should deny the request in ADDTS Response.

        For flows with no reservation, the bandwidth should not exceed
        MBR (Maximum Bit Rate). If such a flow is offloaded at AP/WLC,
        the policy obtained during authorization is used.

        The total bandwidth used by all flows of an MN should not exceed
        AMBR (Aggregate Maximum Bit Rate).  

   Preemption Priority:

        Mobile networks configure ARP (Allocation Retention Priority)
        during authorization and in [PMIP QoS]. If there is limited
        resource and multiple ADDTS requests, ARP should be used by the
        AP/WLC to determine which requests to grant. ARP has a range 1
        to 15 with 1 being the highest priority [TS23.203].

        During severe congestion or partial failure, if the AP/WLC has
        to preempt existing reservations, ARP may be used to determine
        the order of preemption.    


3.5. Service Guarantees in 802.11

   The GBR - Guaranteed Bit Rate in mobile networks are used to request
   and commit resources in the network for providing the bandwidth
   requested. In WiFi networks, a random backoff timer based on the
   access class only provides priority access to a shared medium. These
   mappings and recommendations allow the AP to schedule resources in a
   fair manner based on subscribed QoS and application request/policy
   server interaction.

   However, there are no guaranteed or committed resources in the WiFi
   network - only prioritization that gives better opportunity for
   frames to compete for a shared medium. 

   It should also be noted that unlike mobile networks which inform the
   MN about QoS for established or modified connections (bearers), there
   is no means for an MN in WiFi networks to find out the QoS that a
   policy server requests to be granted. Thus, the application in MN
   should make its determination to downgrade a request based on SDP and
   media parameters to downgrade to a lower quality.


4. End-to-End QoS without Admission Control

 


Kaippallimalil et al.    Expires April 17, 2014                [Page 11]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


   GSMA and IETF (RFC 4594) have defined mapping between DSCP and IEEE
   802.11 UP (user Priority). The MAG could be pre-configured to use the
   mapping from one of these specifications. Per MN connection
   configuration may be setup at the AP/WLC based by PMIP QoS signaling
   during connection setup. This is described in [PMIP QoS], section
   3.5.

   However, in many cases it may be beneficial to use a different set of
   mapping and potentially different mappings for different users. For
   example an operator may choose to provide only best effort service to
   one subscriber class while providing more enhanced (AF or EF)
   services to other subscriber classes. To enables such capabilities, a
   QoS Service Attribute called QoS MAP Set is introduced. This is
   modeled after an IEEE 802.11 element with the same name (see 8.4.2.97
   in IEEE 802.11-2012).

   The QoS Map Set attribute is used as follows. The LMA would send a
   specific DSCP to UP mapping in the Proxy Binding Update. In cases
   where the MAG is co-located with the AP, AP/MAG can ensure that
   received packets from the mobile node have the the correct DSCP to UP
   mapping(packets with inappropriate marking may be remarked).
   Similarly, on the downstream, the QoS Map Set enables the MAG/AP to
   determine the correct UP. This also ensures that a source ineligible
   for higher grades of service (provided by higher priority UP bits)
   cannot avail of such a service by marking the packets with DSCP
   values (for example by marking the packets with EF and AF
   codepoints). There is an additional benefit of providing the AP/MAG
   with the QoS Map Set. For mobile nodes that support the IEEE 802.11
   QoS Map Set capability, the AP can provide the corresponding QoS Map
   Set information to the mobile node. This can ensure that the mobile
   node uses the correct DSCP to UP marking. 

   0               1               2               3
   0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7      
   +=+-+-+-+-+=+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Type       |   Length      |    Reserved                   |
   +=+-+-+-+-+=+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    UP0 Range  |   UP1 Range   |   UP2 Range   |  UP3 Range    |
   +=+-+-+-+-+=+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    UP4 Range  |   UP5 Range   |   UP6 Range   |  UP7 Range    |
   +=+-+-+-+-+=+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+   
   |    DSCP Ex-0  |   DSCP Ex-1   | DSCP Ex-3 ....
   +=+-+-+-+-+=+-+-+-+-+-+-+-+-+-+-+-++-+-+-+

   Type: TBD Length: Length of the following data value in octets,
   greater than or equal to 10.

   The format of UP0,..,UP7 Range is as follows 
 


Kaippallimalil et al.    Expires April 17, 2014                [Page 12]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


             0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 
            +=+-+-+-+-+=+-+-+-+-+-+-+-+-+-+-+
            | DSCP Low Val  | DSCP Hi Val   |  
            +=+-+-+-+-+=+-+-+-+-+-+-+-+-+-+-+

   The format of the DSCP Exception field is as follows

             0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 
            +=+-+-+-+-+=+-+-+-+-+-+-+-+-+-+-+
            | DSCP Val      |    UP Value   |  
            +=+-+-+-+-+=+-+-+-+-+-+-+-+-+-+-+




4.1. Default Values and Recommendations

   The table below outlines a recommended mapping between 3GPP QCI,  
   and 802.11 Access Category (AC)/ 802.1D UP.  

     QCI     DSCP   802.1D UP    WMM AC      Example Services
    ------------------------------------------------------------
      1       EF      6(VO)      3 AC_VO     conversational voice	
      2       EF      6(VO)      3 AC_VO     conversational video
      3       EF      6(VO)      3 AC_VO     real-time gaming
      4      AF41     5(VI)      2 AC_VI     buffered streaming
      5      AF31     4(CL)      2 AC_VI     IMS signaling
      6      AF32     4(CL)      2 AC_VI     buffered streaming
      7      AF21     3(EE)      0 AC_BE     interactive gaming
      8      AF11     1(BE)      0 AC_BE     web access
      9       BE      0(BK)      1 AC_BK     e-mail

      Table 1: QoS Mapping between QCI/DSCP, 802.1D UP, WMM AC

   The QoS mapping table above provides recommendations and default
   mapping between DSCP provided in [PMIP QoS], WMM AC used for TSPEC
   reservation, and 802.1D UP in 802.11 frames.


5. Security Considerations

   This document describes mapping of 3GPP QoS profile and parameters to
   IEEE 802.11 QoS parameters. No security concerns are expected as a
   result of using this mapping.


6. IANA Considerations

 


Kaippallimalil et al.    Expires April 17, 2014                [Page 13]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


   No IANA assignment of parameters are required in this document.


7.  References

7.1. Normative References

   [KEYWORDS]  Bradner, S., "Key words for use in RFCs to Indicate
               Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC1776]   Crocker, S., "The Address is the Message", RFC 1776,
               April 1 1995.

   [TRUTHS]    Callon, R., "The Twelve Networking Truths", RFC 1925,
               April 1 1996.



7.2. Informative References

   [EVILBIT]  Bellovin, S., "The Security Flag in the IPv4 Header",
              RFC 3514, April 1 2003.

   [RFC5513]  Farrel, A., "IANA Considerations for Three Letter
              Acronyms", RFC 5513, April 1 2009.

   [RFC5514]  Vyncke, E., "IPv6 over Social Networks", RFC 5514, April 1
              2009.

   [PMIP-QoS] Liebsch, et al., "Quality of Service Option for Proxy
              Mobile IPv6", draft-ietf-netext-pmip6-qos-00, June 2012.

   [WMM 1.2.0] Wi-Fi Multimedia Technical Specification (with WMM-Power
              Save and WMM-Admission Control) Version 1.2.0

   [802.11aa]  Wireless LAN Medium Access Control (MAC) and Physical
              Layer (PHY) Specification, Amendment 2: MAC Enhancements
              for Robust Audio Video Streaming, IEEE 802.11aa-2012. 

   [802.11-2012] 802.11-2012 - IEEE Standard for Information technology-
              -Telecommunications and information exchange between
              systems Local and metropolitan area networks--Specific
              requirements Part 11: Wireless LAN Medium Access Control
              (MAC) and Physical Layer (PHY) Specifications

   [GSMA-IR34]Inter-Service Provider Backbone Guidelines 5.0, 22
              December 2010

 


Kaippallimalil et al.    Expires April 17, 2014                [Page 14]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


   [RFC 2211] Wroclawski, J., "Specification of the Controlled Load
              Quality of Service", RFC 2211, September 1997.

   [RFC 2212] Shenker, S., Partridge, C., and R. Guerin, "Specification
              of Guaranteed Quality of Service", RFC 2212, September
              1997.

   [RFC 2216] Shenker, S., and J. Wroclawski, "Network Element QoS
              Control Service Specification Template", RFC 2216,
              September 1997.

   [TS23.107] Quality of Service (QoS) Concept and Architecture, Release
              10, 3GPP TS 23.107, V10.2.0 (2011-12).

   [TS23.207] End-to-End Quality of Service (QoS) Concept and
              Architecture, Release 10, 3GPP TS 23.207, V10.0.0 (2011-
              03).

   [TS23.402] Architecture Enhancements for non-3GPP accesses(Release
              12), 3GPP TS 23.402, V12.2.0 (2013-09).

   [TS23.203] Policy and Charging Control Architecture, Release 11, 3GPP
              TS 23.203, V11.2.0 (2011-06). 

   [TS29.212] Policy and Charging Control over Gx/Sd Reference Point,
              Release 11, 3GPP TS 29.212, V11.1.0 (2011-06). 

   [TS29.273] 3GPP EPS AAA interfaces(Release 12), 3GPP TS 29.273
              v12.1.0 (2013-09)




Authors' Addresses

   John Kaippallimalil
   5340 Legacy Drive, Suite 175
   Plano, Texas 75024

   E-Mail: john.kaippallimalil@huawei.com


   Rajesh Pazhyannur
   170 West Tasman Drive
   San Jose, CA 95134

   E-Mail: rpazhyan@cisco.com

 


Kaippallimalil et al.    Expires April 17, 2014                [Page 15]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


   Parviz Yegani
   1194 North Mathilda Ave.
   Sunnyvale, CA 94089-1206

   E-Mail: pyegani@juniper.net




Appendix A: QoS Policy Architecture

   The QoS architecture in this section provides a brief outline for
   provisioning QoS in a consistent manner across the WiFi network,
   backhaul and PMIP mobile network. 

   QoS information is available to AP/WLC when the MN attaches to the
   WiFi network and authenticates. The authorization profile includes
   QoS that the user/MN has subscribed to. When the MN attaches to the
   network, the LMA returns the session parameters such as IP address
   and may also include QoS profile as per [PMIP-QoS].  


                          +-----------+              +-----------+
                          |    AAA    |              |  Policy   |
                          +-----+-----+              +-----+-----+
                                |                          |
                         (Authorization)               (Session)
                                |                          |
                         AP/WLC |(MAG)              PDN-GW |(LMA)
        +----+           +------|-----+             +------|-----+
        |    |           | +----v---+ |   PMIP-QoS  | +----v---+ |
        |    |           | |QoS-Pol <---------------| |QoS-Pol | |
        |    |           | +---+----+ |             | +---+----+ |
        | MN |           |     |      |     ___     |     |      |
        |    |  801.11   | +---v----+ |   (    )    +---v----+ |
        |    +-------------+  PEP   +-+--(  IP  )-----+  PEP   + |
        |    |           | +--------+ | (Network )  | +--------+ |
        +----+           +------------+  \      /   +------------+
                                          +---+

        Figure 4: Architecture for provisioning QoS Policy on WiFi AP

   Figure 4 provides an overview of the architecture in which QoS for an
   MN is provisioned on the AP/WLC. MN QoS policy from initial 
   authorization and PMIP connection establishment is provisioned in the
   AP/WLC QoS-Pol (logical function). AP/WLC PEP uses the policies for
   handling QoS flows from an MN.

 


Kaippallimalil et al.    Expires April 17, 2014                [Page 16]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


   Policy Server provisioning of Admission control for connections has
   traditionally relied on information from Deep Packet Inspection (DPI)
   or Application Level Gateways (ALG). DPIs and ALGs cannot however
   determine the MNs subscribed bandwidth or QoS. The alternative is to
   provision QoS policy for a user's connections and use subscribed
   policy and PMIP QoS policy. When the AP/WLC has both the subscribed
   QoS policy and policy parameters from PMIP QoS, the QoS parameters
   obtained through PMIP reflect the policy that accounts for current
   network conditions. 

   In mobile networks, default connections are not setup with a
   bandwidth reservation and hence do not have a GBR (Guaranteed Bit
   Rate) associated. However, the PDN-GW (LMA) polices the AMBR
   (Aggregate Maximum Bandwidth Rate) - the maximum bit rate for all
   flows to/from the MN. Thus, upstream traffic should be policed by
   AP/WLC to not exceed the maximum prescribed in AMBR values. The
   AP/WLC should also schedule traffic for these connections as
   background or best effort (AC_BK, AC_BE) and the corresponding
   802.1D

   For voice, video and other applications that require reservation of
   QoS resources, a dedicated PMIP connection is setup in mobile
   networks and the PDN-GW (LMA) reserves resources as per GBR
   (Guaranteed Bit Rate) for upstream and downstream. In this also, the
   total bit rate of all flows to/from MN should not exceed the maximum
   bit rates in AMBR (Aggregate Maximum Bit Rate). Upstream and
   downstream traffic should be scheduled by MN and AP/WLC using ADDTS
   (TSPEC) for voice or video (AC_VO, AC_VI). The MN should also include
   the Mean Data Rate for the connection based on the requirements of
   the application or negotiated codec. The AP/WLC grants resources
   based on policy obtained over PMIP QoS. GBR values in PMIP QoS should
   be used to derive Mean Data Rate as described in section 4.1. When
   the MN completes the session, it may send DELTS to request release of
   associated QoS resources.

   If the MN connection is offloaded to the internet by the AP/WLC,
   there is no corresponding PMIP session setup to the mobile network.
   In this case, the AP/WLC may use AMBR obtained during authorization
   if the MN has no other connections to the mobile network. If the MN
   has other connections to the mobile network, he AP/WLC should limit
   the maximum bit rate of all flows of the MN to AMBR obtained in PMIP
   QoS.

   When the network is congested and the AP/WLC cannot grant the QoS
   requested by MN, the AP/WLC should refuse the ADDTS request and not
   continue the PMIP QoS signaling request. The application in MN may
   downgrade the codec and re-negotiate a new TSPEC/resource request
   that the AP/WLC may grant. If the AP/WLC cannot handle committed
 


Kaippallimalil et al.    Expires April 17, 2014                [Page 17]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6       October 14, 2013


   connections due to network degradation or other partial failures, the
   AP/WLC may use the ARP (Allocation Retention Priority) values of the
   connection to gracefully release resources.
















































Kaippallimalil et al.    Expires April 17, 2014                [Page 18]
