<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY rfc2119 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY rfc3261 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3261.xml">
<!ENTITY rfc1123 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.1123.xml">
<!ENTITY rfc2141 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2141.xml">
<!ENTITY rfc3406 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3406.xml">
<!ENTITY rfc5234 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5234.xml">
<!ENTITY rfc5226 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5226.xml">
<!ENTITY rfc6365 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6365.xml">
<!ENTITY rfc3120 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3120.xml">
<!ENTITY rfc3044 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3044.xml">
<!ENTITY rfc3187 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3187.xml">
<!ENTITY rfc3188 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3188.xml">
<!ENTITY rfc4179 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4179.xml">
<!ENTITY rfc4195 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4195.xml">
<!ENTITY rfc4198 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4198.xml">
<!ENTITY rfc4152 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4152.xml">
<!ENTITY rfc3043 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3043.xml">
<!ENTITY rfc5890 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5890.xml">
<!ENTITY rfc5031 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5031.xml">


]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<?rfc tocdepth="3"?>
<?rfc tocindent="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc iprnotified="no" ?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<rfc category="std" docName="draft-ietf-salud-alert-info-urns-07" updates="3261" ipr="trust200902">
	<front>
		<title abbrev="Alert-Info URNs">Alert-Info URNs for the Session Initiation
    Protocol (SIP)</title>
		<author fullname="Laura Liess" initials="L." role="editor" surname="Liess">
			<organization>Deutsche Telekom AG</organization>
			<address>
				<postal>
					<street>Heinrich-Hertz Str 3-7</street>
					<city>Darmstadt</city>
					<code>64295</code>
					<region>Hessen</region>
					<country>Germany</country>
				</postal>
				<phone>+49 6151 5812761</phone>
				<email>laura.liess.dt@gmail.com</email>
               </address>
		</author>
		<author fullname="Roland  Jesske" initials="R." surname="Jesske">
			<organization>Deutsche Telekom AG</organization>
			<address>
				<postal>
					<street>Heinrich-Hertz Str. 3-7</street>
					<city>Darmstadt</city>
					<code>64295</code>
					<region>Hessen</region>
					<country>Germany</country>
				</postal>
				<phone>+49 6151 5812766</phone>
				<email>r.jesske@telekom.de</email>
			</address>
		</author>
		<author fullname="Alan Johnston" initials="A." surname="Johnston">
			<organization abbrev="Avaya">
      Avaya Inc.</organization>
			<address>
				<postal>
					<street></street>
					<city>St. Louis</city>
					<region>MO</region>
					<country>United States</country>
				</postal>
				<phone></phone>
				<email>alan.b.johnston@gmail.com</email>
			</address>
		</author>
		<author initials="D. R." surname="Worley" fullname="Dale R. Worley">
			<organization abbrev="Ariadne">
      Ariadne Internet Services, Inc.
      </organization>
			<address>
				<postal>
					<street>738 Main St.</street>
					<city>Waltham</city>
					<region>MA  </region>
					<code>02451</code>
					<country>US</country>
				</postal>
				<phone>+1 781 647 9199</phone>
				<email>worley@ariadne.com</email>
				</address>
		</author>
		<author fullname="Paul Kyzivat" initials="P." surname="Kyzivat">
<organization>Huawei</organization>
			<address>
				<postal>
					<street></street>
					<city></city>
					<country>United States</country>
				</postal>
				<email>pkyzivat@alum.mit.edu</email>
			</address>
		</author>
		<date month="October" year="2012"/>
		<area>Real-time Applications and Infrastructure Area</area>
		<workgroup>SALUD</workgroup>
		<keyword>SIP</keyword>
		<keyword>Alert-Info</keyword>
		<keyword>URN</keyword>
		<abstract>
			<t>The Session Initiation Protocol (SIP) supports the capability to
      provide a reference to a specific rendering to be used by the UA when
      the user is alerted. This is done using the Alert-Info header field.
      However, the reference addresses only network resources with specific
      rendering properties. There is currently no support for predefined
      standard identifiers for describing the semantics of the alerting
      situation or the characteristics of the alerting signal, without being
      tied to a particular rendering. To overcome this limitation and support
      new applications, a new family of URNs for use in SIP Alert-Info header
      fields is defined in this specification.     
</t>
			<t>This document normatively updates <xref target="RFC3261"></xref>, 
    the Session Initiation
   Protocol (SIP). It 
        changes the usage of the SIP Alert-Info header
        field defined in the <xref target="RFC3261"></xref> by additionally
        allowing its use in all provisional responses to INVITE (except the
        100 response).</t>
			<t></t>
		</abstract>
		<note title="Requirements Language">
			<t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <xref target="RFC2119"></xref>.</t>
		</note>
	</front>
	<middle>
		<section title="Introduction">
			<section title="Motivation">
				<t>The Session Initiation Protocol (SIP) <xref target="RFC3261"></xref> includes a
        means to suggest to a user agent
        (UA) a particular ringback tone or ring tone to be used during session
        establishment. In <xref target="RFC3261"></xref> this is done by
        including a URI in the Alert-Info header field, that specifies the
        tone. The URI is most commonly the HTTP URL to the audio file. On the
        receipt of the Alert-Info header field the user agent may fetch the
        referenced ringback tone or ring tone and play it to the user.</t>
				<t>This mechanism hinders interoperability when there is no common
        understanding of the meaning of the referenced tone, which might be
        country- or vendor-specific. It can lead to problems for the user
        trying to interpret the tone and for the UA wanting to substitute its
        own tone (e.g., in accordance with user preferences) or provide an
        alternative alerting mode (e.g., for hearing-impaired users). If
        caller and callee are from different countries, the understanding of
        the tones may vary significantly. Hearing impaired users may not sense
        the specific tone if it is provided as an audio file. The tone per se
        is also not useful for automata.</t>
				<t>There are currently interoperability issues around the use of the
        Alert-Info header field when not using an external ring file. For
        example, consider the PBX special ring tone for an external (to the
        PBX) caller. Different vendors use different approaches such as:
        Alert-Info: &lt;file://ring.pcm&gt;;alert=normal where ring.pcm is a
        dummy file or: Alert-Info: &lt;file://normal.ring.pcm&gt; or:
        Alert-Info: &lt;sip:normal-ringtone@example.com&gt;. As a result,
        Alert-Info currently only works when the same vendor provides PBX
        and UA, as only then is the same "fake" proprietary URI convention
        used.</t>
				<t>Another limitation of the current solution is that the referenced
        tones are tied to particular rendering. It is not possible to provide
        semantic indications or names for rendering characteristics that
        signals the intent and allows the recipient to decide how to render
        the received information in an appropriate way.</t>
				<t>To solve the described issues, this specification defines the new
        URN namespace 'alert' for the Alert-Info header field that allows for
        programmatic user interface adaptation and for conversion of
        equivalent alerting tones in the Public Switched Telephone Network
        (PSTN) when the client is a gateway. The work to standardize an
        Alert-Info URN will increase SIP interoperability for this header
        field by replacing proprietary conventions used today.</t>
				<t>Using the 'alert' namespace provides syntax for several different
        application spaces, e. g.:<list style="symbols">
						<t>Names for service indications, such as call waiting or
            automatic callback, not tied to any particular rendering.</t>
						<t>Names for common ring tones generated by PBX phones for cases
            such as an internal enterprise caller, external caller, ringback
            tone after a transfer failure or expiration of a hold timer,
            etc.</t>
						<t>Names for country-specific ringback tones.</t>
						<t>Names for things with specific renderings that aren't purely
            audio. They might be static icons, video sequences, text, etc.</t>
					</list></t>
				<t>Some advantages of a URN rather than a URL of a downloadable
        resource:</t>
				<t><list style="symbols">
						<t>Do not need to download it or deal with security issues
            associated with dereferencing.</t>
						<t>No formatting or compatibility issues.</t>
						<t>No security risk of rendering something unexpected and
            undesirable.</t>
						<t>The tone can be stored locally in whatever format and at
            whatever quality level is appropriate, because it is specified "by
            name" rather than "by value".</t>
						<t>It is easier to make policy decisions about whether to use it
            or not.</t>
						<t>It facilitates translation for the hearing impaired.</t>
					</list> The downside is that if the recipient does not understand
        the URN then it will only be able to render a default ringback tone or
        ring tone.</t>
				<t>This document creates a new URN namespace and registry for alert
        indications and registers some initial values.</t>
			</section>
			<section title="Alert-Info Header Field Usage Change">
				<t>This specification changes the usage of the SIP Alert-Info header
        field defined in the <xref target="RFC3261"></xref> by additionally
        allowing its use in all provisional responses to INVITE (except the
        100 response).</t>
				<t>In practice, this specification extends Alert-Info in that it will
        cause the use of a new class of URIs and the use of multiple URIs.
        Backward compatibility issues are not expected, as devices that do not
        understand an Alert-Info URN should ignore it, and devices should not
        malfunction upon receiving multiple Alert-Info alert-params (which was
        syntactically permitted before, but rarely used).</t>
			</section>
			<section title="Terminology">
				<t>This specification uses a number of terms to refer to the roles
        involved in the use of alerting indications in SIP. A "specifier"
        sends an "alerting indication" (one or more URNs in an Alert-Info
        header) to a "renderer" which then "renders" a "signal" or "rendering"
        based on the indication to a human user. A "category" is a
        characteristic whose "values" can be used to classify indications.</t>
				<t>This specification uses the terms "ring tone" and "ringback tone".
        A "ring tone" or "calling signal" (terminology used in 
      <xref target="E182"></xref>) is a signal generated by the callee's
        end device, advising the callee about an incoming call. A "ringback
        tone" or "ringing tone" (terminology used in <xref target="E182"></xref>)
         is a signal advising the caller that a
        connection has been made and that a ring tone is being rendered to the
        callee.</t>
			</section>
		</section>
		<section title="Requirements">
			<t>This section discusses the requirements for an alerting indication to
      transport the semantics of the alerting situation or the characteristics
      of the rendering.</t>
			<t>REQ-1: The mechanism will allow user agents (UAs) and proxies to
      provide in the Alert-Info header field an alerting indication which
      describes the semantics of the signaling situation or the
      characteristics of the rendering and allows the recipient to decide how
      to render the received information to the user.</t>
			<t>REQ-2: The mechanism will allow the alerting indication to be
      specified "by name" rather than "by value", to enable local policy
      decisions whether to use it or not.</t>
			<t>REQ-3: The mechanism will enable alerting indications to represent a
      wide variety of signals, which have many largely-orthogonal
      characteristics.</t>
			<t>REQ-4: has been deleted. To avoid confusion, the number will not be
      reused.</t>
			<t>REQ-5: The mechanism will enable the set of alerting indications to
      be able to support extensibility by a wide variety of organizations that
      are not coordinated with each other. Extensions will be able to: 
          <list style="hanging">
					<t hangText="- add further values to any existing category "/>
					<t hangText="- add further categories that are orthogonal to existing categories "/>
					<t hangText="- semantically subdivide the meaning provided by any existing indication"/>
				</list>
        REQ-6: The mechanism will be flexible, so new alerting
      indications can be defined in the future, when SIP-applications evolve.
      E. g. Alert-Info URNs could identify specific media by name, such as
      "Beethoven's Fifth", and the end device could render some small part of
      it as a ring tone.</t>
			<t>REQ-7: The mechanism will provide only an indication capability, not
      a negotiation capability. </t>
			<t>REQ-8:  The mechanism will not require an alerting
      indication to depend on context provided by a previous alerting
      indication in either direction.</t>
			<t>REQ-9: The mechanism will allow transmission in the Alert-Info header
      field of SIP INVITE requests and provisional 1xx responses excepting the
      100 responses.</t>
			<t>REQ-10: The mechanism will be able to accommodate renderers that are
      customized with a limited or uncommon set of signals they can render and
      renderers that are provided with a set of signals that have uncommon
      semantics. (The canonical example is a UA for the hearing-impaired,
      customized with an uncomon set of signals, video or text instead of
      audio. By REQ-7, the renderer has no way of transmitting this fact to
      the specifier.)</t>
			<t>REQ-11: The mechanism will allow an alerting indication to reliably
      carry all extensions if the specifier and the renderer have designs that
      are properly coordinated.</t>
			<t>REQ-12: The mechanism will allow a renderer to select a tone that
      approximates to that intended by the specifier if the renderer is unable
      to provide the precise tone indicated.</t>
			<t>REQ-13: The mechanism will support alerting indications relating to
      services such as call waiting, forward, transfer-recall, auto-callback
      and hold-recall.</t>
			<t>REQ-14: The mechanism will allow rendering common PBX ring tone
      types.</t>
			<t>REQ-15: The mechanism will allow rendering specific country ringback
      tones.</t>
			<t>REQ-16: The mechanism will allow rendering tones for emergency
      alerts. (Use cases and values definition are not subject of this
      specification.)</t>
			<t>REQ-17: The mechanism will allow rendering using other means than
      tones, e.g. text or images.</t>
			<t>REQ-18: The mechanism will allow TDM gateways to map ring/ringback
      tones from legacy protocols to SIP at the edge of a network, e.g.
      national ring tones as defined in TIA/EIA-41-D and 3GPP2 A.S0014. (Use
      cases and values definition are not subject of this specification.)</t>
			<t>REQ-19: The mechanism will ensure that if an UA receives Alert-Info
      URNs or portions of an Alert-Info URN it does not understand, it can
      ignore them.</t>
			<t>REQ-20 The mechanism will allow storage of the actual encoding of
      the rendering locally rather than fetching it.</t>
			<t>REQ-21: The mechanism must provide a simple way to combine two
      alerting indications to produce an alerting indication that requests a
      combination of the intentions of the two alerting indications, where any
      contradictions or conflicts between the two alerting indications are
      resolved in favor of the intention of the first alerting indication.</t>
		</section>
		<section anchor="UseCases" title="Use Cases">
			<t>This section describes some use cases for which the Alert-Info URN
      mechanism is needed today.</t>
			<section anchor="PBX_Tones" title="PBX Ring Tones">
				<t>This section defines some commonly encountered ring tones on PBX or
        business phones. They are as follows:</t>
				<section title="normal">
					<t>This tone indicates that the default or normal ring tone should
          be rendered. This is essentially a no-operation Alert-Info URN and
          should be treated by the UA as if no Alert-Info URN is present. This
          is most useful when Alert-Info header field parameters are being
          used. For example, in <xref target="I-D.ietf-bliss-shared-appearances"></xref>, an Alert-Info
          header field needs to be present containing the "appearance"
          parameter, but no special ring tone needs to be specified.</t>
				</section>
				<section title="external">
					<t>This tone is used to indicate that the caller is external to the
          enterprise or PBX system. This could be a call from the PSTN or from
          a SIP trunk.</t>
				</section>
				<section title="internal">
					<t>This tone is used to indicate that the caller is internal to the
          enterprise or PBX system. The call could have been originated from
          another user on this PBX or on another PBX within the
          enterprise.</t>
				</section>
				<section title="priority">
					<t>A PBX tone needs to indicate that a priority level alert should
          be applied for the type of alerting specified (e.g. internal
          alerting).</t>
				</section>
				<section title="short ">
					<t>In this case the alerting type specified (e.g. internal alerting)
          should be rendered shorter than normal. In contact centers, this is
          sometimes referred to as "abbreviated ringing" or a "zip tone".</t>
				</section>
				<section title="delayed">
					<t>In this case the alerting type specified should be rendered after
          a short delay. In some bridged line/shared line appearance
          implementations, this is used so that the bridged line does not ring
          at exactly the same time as the main line, but is delayed a few
          seconds.</t>
				</section>
			</section>
			<section anchor="ServiceTones" title="Service Tones">
				<t>These tones are used to indicate specific PBX and public network
        telephony services.</t>
				<section title="call-waiting">
					<t>The Call Waiting Service <xref target="TS24.615"></xref> permits
          a callee to be notified of an incoming call while the callee is
          engaged in an active or held call. Subsequently, the callee can
          either accept, reject, or ignore the incoming call. There is an
          interest on the caller side to be informed about the call waiting
          situation on the callee side. Having this information the caller can
          decide whether to continue waiting for callee to pickup or better to
          call some time later when it is estimated that the callee could have
          finished the ongoing conversation. To provide this information, the
          callee's UAS ( or proxy) aware of the call waiting condition can add
          the call-waiting indication to the Alert-Info header field in the
          180 Ringing response. As call-waiting information may be subject to
          the callee's privacy concerns, the exposure of this information
          shall be done only if explicitly required by the callee.</t>
				</section>
				<section title="forward">
					<t>This feature is used in a 180 Ringing response when a call
          forwarding feature has been initiated on an INVITE. Many PBX system
          implement a forwarding "beep" followed by normal ringing to indicate
          this. Note that a 181 response can be used in place of this URN.</t>
				</section>
				<section title="transfer-recall">
					<t>This feature is used when a blind transfer 
       <xref target="RFC5589"></xref> has been performed by a server on behalf of
          the transferor and fails. Instead of failing the call, the server
          calls back the transferor, giving them another chance to transfer or
          otherwise deal with the call. This service tone is used to
          distinguish this INVITE from any other normal incoming call.</t>
				</section>
				<section title="auto-callback">
					<t>This feature is used when a user has utilized a server to
          implement an automatic callback service 
     <xref target="I-D.ietf-bliss-call-completion"></xref>. When the user is available,
          the server calls back the user and utilizes this service tone to
          distinguish this from any other normal incoming call.</t>
				</section>
				<section title="hold-recall">
					<t>This feature is used when a server implements a call hold timer
          on behalf of an endpoint. After a certain period of time of being on
          hold, the user who placed the call on hold is alerted to either
          retrieve the call or otherwise dispose of the call. This service
          tone is used to distinguish this case from any other normal incoming
          call.</t>
				</section>
			</section>
			<section anchor="CountryTones" 
           title="Country-specific ringback tone indications for the public telephone network">
				<t>In the PSTN, different tones are used in different countries. End
        users are accustomed to hear the callee's country ringback tone and
        would like to have this feature for SIP.</t>
			</section>
		</section>
		<section anchor="Registration" title="Namespace Registration Template">
			<t>This section describes the registration template for the 'alert' URN
      namespace identifier (NID) according to the <xref target="RFC2141">
				</xref> and <xref target="RFC3406">
				</xref></t>
			<t><list style="hanging">
					<t hangText="Namespace ID:">alert</t>
					<t hangText="Registration Information:"/>
					<t>
						<list style="hanging">
							<t hangText="Registration version:">1</t>
							<t hangText="Registration date:">TBD</t>
						</list>
					</t>
					<t hangText="Declared registrant of the namespace:"/>
					<t>
						<list style="hanging">
							<t hangText="Registering organization:">IETF</t>
							<t hangText="Designated contact:">Laura Liess</t>
							<t hangText="Designated contact email:">l.liess@telekom.de</t>
						</list>
					</t>
					<t hangText="Declaration of syntactic structure:"/>
					<t>The Namespace Specific String (NSS) for the "alert" URNs is
          called alert-identifier and has a hierarchical structure. The
          left-most &lt;label&gt; is called &lt;alert-category&gt; and is separated from the
          right-side of the &lt;alert-identifier&gt;, the &lt;alert-indication&gt; by a
          colon. The general form is
          urn:alert:{alert-category}:{alert-indication}.</t>
					<t>In this specification, following alert-categories identifiers are
          described: "service" , "priority" , "source" , "duration", "delay"
          and "locale". The &lt;alert-category&gt; set can be extended in the
          future.</t>
					<t>The categories are orthogonal. Any Alert-Info URN defined in this
          specification is syntactically valid for ring and ringback tones and
          can be used in INVITE requests or in provisional 1xx responses
          excepting the 100 response.</t>
					<t>The&lt;alert-indication&gt;s are hierarchical identifiers. The set of
         allowable characters is the same as that for domain names
          <xref target="RFC1123"/>.  Labels used in &lt;standard-name&gt; MUST comply with the syntax for Non
      Reserved LDH-labels  <xref target="RFC5890"/>.  Labels used in &lt;private-name&gt; MUST
      comply with the syntax for Non Reserved LDH-labels or for A-labels
      <xref target="RFC5890"/>. Comparisons MUST follow the comparison rules for the
      corresponding type of label.  Registered URNs MUST be transmitted as
     registered. A new name MUST NOT be registered if it is equal by the
      comparison rules above to an already registered name.</t>
					<t/>
					<t/>
					<t>The ABNF <xref target="RFC5234"/> for the Alert -Info URNs is
          shown below:</t>
					<t>
						<figure>
							<artwork><![CDATA[                           
        alert-URN        = "urn:alert:" alert-identifier
        alert-identifier = alert-category ":" alert-indication
        alert-category   = name
        alert-indication = name *(":" name)
        name             = standard-name / private-name
        standard-name    = label
        private-name     = label "." label *[ "." label ]
        label            = let-dig [ *let-dig-hyp let-dig ]
        let-dig-hyp      = let-dig / "-"
        let-dig          = ALPHA / DIGIT
        ALPHA            = %x41-5A / %x61-7A   ; A-Z / a-z
        DIGIT            = %x30-39 ; 0-9

      

]]></artwork>
						</figure>

					</t>
<t>
Note: &lt;private-name&gt;  is  
</t>
					<t hangText="Relevant ancillary documentation:">None</t>
					<t hangText="Community considerations:">The alert URN is believed to
          be relevant to a large cross-section of Internet users, including
          both technical and non-technical users, on a variety of devices and
          with a variety of perception capabilities. The 'alert' URN will
          allow Internet users to receive more information and enable them to
          better make decisions about accepting an offered call, or get better
          feedback on the progress of a call they have made. User interfaces
          for the perception impaired users can better render the ringback
          tone indication based on the Alert-Info URN. The assignment of
          identifiers is described in <xref target="IANA"/>. The Alert-Info URN
         does not prescribe a particular resolution
          mechanism, but any resolution MUST comply with the
          rules in <xref target="Combinations"></xref>.</t>
					<t hangText="Namespace considerations:">
This specification proposes a new URN namespace &#8220;alert&#8221; for global 
   names representing the semantic of signals or renderings. The
        particular rendering of an &#8220;alert&#8221; URN identifier depends on the context in
        which the rendering is done. </t>
					<t> Also the initial scope is the usage in
        the SIP Alert-Info header, the new &#8220;alert&#8221; URN  namespace 
      is designed for more general usage. The URN may appear
   in any protocols that allow general URIs (e.g. also in  ITU-T protocols) ,
 in web pages or in any end devices software. </t>
					<t>For the reasons described above, the usage of the already
 existing namespace  "urn:ietf:params" was not considered 
appropriate. The URN namespace for Emergency and 
Other Well-Known Services  <xref target="RFC5031"/>, was used as a model.</t>
					<t>Note, to be deleted for the final version of this draft: Because 
the work on this draft lasts for about fouryears,  the new &#8220;alert&#8221; 
URN  namespace is already used in already finalized 
specifications of other SDOs  (3GPP) and there are already 
existing implementations  in products and large carrier 
networks. </t>
					<t>Also there do not appear to be other URN namespaces that serve the same
      need of uniquely identifying the semantic of a signal or rendering feature. 
      Unlike most other currently registered URN namespaces, the &#8220;alert&#8221; URN
     does not identify documents and protocol objects (e.g., <xref target="RFC3044"/>,
     <xref target="RFC3120"/>, <xref target="RFC3187"/>, 
      <xref target="RFC3188"/>, 
     <xref target="RFC4179"/>, <xref target="RFC4195"/>, 
    <xref target="RFC4198"/>  ),
     types of telecommunications equipment <xref target="RFC4152"/>, 
     people or
   organizations <xref target="RFC3043"/>. </t>
					<t hangText="Identifier uniqueness considerations:"> 
 An "alert" URN identifies the semantic or sensory feature of the
   rendering at the caller's or callee's end device. The feature
   identified by a particular "alert" URN is 
   distinct from the feature identified any other "alert"  URN. For "alert" URN identifiers 
    based on &lt;standard-name&gt;s this is ensured
   through the IANA registration of each "alert" URN (that is, each
   defined combination of &lt;alert-category&gt;  and &lt;alert-identifier&gt;) as
   described in <xref target="IANA"/>. </t>
					<t> "Alert" URN identifiers with a  &lt;private-name&gt; part, IANA delegates 
         the task to act as a registry  to the owner of the "reverse FQDN" in the 
             &lt;private-name&gt;.</t>
					<t hangText="Identifier persistence considerations:">The "alert" 
          URN identifiers based on &lt;standard-name&gt;s for the same indication 
    is expected to be persistent, as long as
          it is registered with IANA.</t>
					<t>The "alert" 
         For URN identifiers with a  &lt;private-name&gt;part,  the owner of the 
      "reverse FQDN" in the &lt;private-name&gt; is responsible for the correct 
   proper functionality within the private domain. </t>
					<t hangText="Process of identifier assignment:">The process of identifier
      assignment is described in <xref target="IANA"/>, which includes the
      extension rules for independent organizations described in  
     <xref target="ExtensionsRulesforIndependentOrganizations"></xref>.</t>
					<t hangText="Process for identifier resolution:">Alert-Info URNs
          are statically resolved according to the IANA registry.</t>
					<t hangText="Rules for lexical equivalence:">Alert-Info URNs are
          compared according to case-insensitive string equality.</t>
					<t hangText="Conformance with URN syntax:">The BNF in the
          'Declaration of syntactic structure' above constrains the syntax for
          this URN scheme.</t>
					<t hangText="Validation mechanism:">Validation determines whether a
          given string is currently a validly-assigned URN <xref target="RFC3406"/>. 
      Static validation is performed based on the
          currently registered Alert-Info URNs at IANA.</t>
					<t hangText="Scope:">The scope for this URN is public and
          global.</t>
				</list></t>
		</section>
		<section anchor="Values" title="Alert-Info URN Values Definitions">
			<section anchor="CategoryValues" title="Alert-category Values Definitions">
				<t>Following &lt;alert-category&gt;  values are defined in this document:</t>
				<t><list style="hanging">
						<t hangText="- service"></t>
						<t hangText="- source"></t>
						<t hangText="- priority"></t>
						<t hangText="- duration"></t>
						<t hangText="- delay"></t>
						<t hangText="- locale"></t>
					</list></t>
			</section>
			<section anchor="IndicationValues" title="Alert-indication Values Definitions">
				<t>This section describes the Alert-Info URN indication values for the
        alert-categories defined in this document.</t>
				<t>For each &lt;alert-category&gt; , a default indication is defined, which is
        essentially a no-operation Alert-Info URN and should be treated by the
        UA as if no Alert-Info URN for the respective category is present.
        Alert-Info URN default indications are most useful when Alert-Info
        header field parameters are being used. For example, in 
    <xref target="I-D.ietf-bliss-shared-appearances"></xref>, an Alert-Info
        header field needs to be present containing the "appearance"
        parameter, but no special ringtone need be specified.</t>
				<t>The "&lt;private-name&gt;" syntax is used for extensions
        specific to independent organizations, as described in 
       <xref target="ExtensionsRulesforIndependentOrganizations"></xref>. </t>
				<section anchor="ServiceIndications" 
      title="Alert-Info URN Indication Values for the alert-category 'service' ">
					<t><list style="hanging">
							<t hangText="- normal (default)"></t>
							<t hangText="- call-waiting"></t>
							<t hangText="- forward"></t>
							<t hangText="- recall:callback"></t>
							<t hangText="- recall:hold"></t>
							<t hangText="- recall:transfer"></t>
							<t hangText="- &lt;private-name&gt;"></t>
						</list></t>
					<t>Examples: urn:alert:service:call-waiting or
          urn:alert:service:recall:transfer.</t>
				</section>
				<section anchor="SourceIndications" 
    title="Alert-Info URN Indication Values for the alert-category 'source' ">
					<t><list style="hanging">
							<t hangText="- unclassified (default)"></t>
							<t hangText="- internal"></t>
							<t hangText="- external"></t>
							<t hangText="- friend"></t>
							<t hangText="- family"></t>
							<t hangText="- &lt;private-name&gt;"></t>
						</list></t>
					<t>Examples: urn:alert:source:external.</t>
				</section>
				<section anchor="PriorityIndications" 
     title="Alert-Info URN Indication Values for the alert-category 'priority' ">
					<t><list style="hanging">
							<t hangText="- normal (default)"></t>
							<t hangText="- low"></t>
							<t hangText="- high"></t>
							<t hangText="- &lt;private-name&gt;"></t>
						</list></t>
					<t>Examples: urn:alert:priority:high.</t>
				</section>
				<section anchor="DurationIndications" 
    title="Alert-Info URN Indication  Values for the alert-category 'duration' ">
					<t><list style="hanging">
							<t hangText="- normal (default)"></t>
							<t hangText="- short"></t>
							<t hangText="- long"></t>
							<t hangText="- &lt;private-name&gt;"></t>
						</list></t>
					<t>Examples: urn:alert:duration:short.</t>
				</section>
				<section anchor="DelayIndications" title="Alert-Info URN Indication Values for the alert-category 'delay' ">
					<t><list style="hanging">
							<t hangText="- none (default)"></t>
							<t hangText="- yes"></t>
							<t hangText="- &lt;private-name&gt;"></t>
						</list></t>
					<t>Examples: urn:alert:delay:yes .</t>
				</section>
				<section anchor="LocaleIndications" title="Alert-Info URN Indication Values for the alert-category 'locale' ">
					<t><list style="hanging">
							<t hangText="- default (default)"></t>
							<t hangText="- country:&lt;ISO 3166-1 country code&gt;"></t>
							<t hangText="- &lt;private-name&gt;"></t>
						</list></t>
					<t>The ISO 3166-1 country code <xref target="ISO3166-1"></xref> is
          used to inform the UA on the other side of the call that a
          country-specific rendering should be used. For example, to indicate
          ringback tones from South Africa, the following URN would be used:
          &lt;urn:alert:locale:country:za&gt;.</t>
				</section>
			</section>
		</section>
		<section anchor="IANA" title="IANA Considerations">
			<t>This section registers a new URN namespace identifier (NID) in
      accordance with RFC 3406 with the registration template provided in
      <xref target="Registration"></xref>.</t>
			<section anchor="NewAlert-identifiers" title="New alert identifiers">
				<t>Alert URN identifiers are identified by &lt;label&gt;s managed by IANA,
        according to the processes outlined in <xref target="RFC5226"></xref>
        in a new registry called "Alert URN Labels". Thus, creating a new
        Alert-Info URN identifier requires IANA action. The policy for adding
        a new alert category is 'Standards Action'. (This document defines the
        alert categories 'service', 'source', 'priority', 'duration', 'delay'
        and 'locale'. ) The policy for assigning &lt;label&gt;s to &lt;alert-indication&gt;s
        and the rules to combine them may differ for each &lt;alert-category&gt; and
        MUST be defined by the document describing the corresponding alert
        category. The entries in the registration table have the following
        format:</t>
				<t><figure>
						<artwork><![CDATA[
   <alert-category>/      Reference    Description
   <alert-identifier>; 
   ---------------------------------------------------------------
   foo                    RFCxyz     Description of the 'foo'
                                     <alert-category>;                                                        
   foo:bar                RFCabc     Description of the 'foo:bar' 
                                     <alert-identifier>
                                                       
]]></artwork>
					</figure></t>
				<t>Each &lt;alert-category&gt; or &lt;alert-indication&gt; label MUST NOT exceed 27
        characters.</t>
			</section>
			<section anchor="InitialIANARegistration" title="Initial IANA Registration">
				<section anchor="ServiceRegistrations" title=" The &quot;service&quot; alert-category and alert-identifiers ">
					<t>The following table contains the initial IANA registration for
          the "service" &lt;alert-category&gt; and &lt;alert-identifier&gt;s. The value of
          this indicator is set to a value different from "normal" if the
          caller or callee is informed that a specific telephony service 
         has been initiated.</t>
					<figure>
						<artwork><![CDATA[
<alert-category>/              Reference  Description
<alert-identifier>
-----------------------------------------------------------
service                        RFC XXXX  <alert-category> 
                                         for  "service" 
                                         <alert-identifier>s
service:normal                 RFC XXXX  Normal ring /rinback 
                                         rendering (default value)
service:call-waiting           RFC XXXX  Call waiting was 
                                         initiated at the other side 
                                         of the call
service:forward                RFC XXXX  Call has been forwarded
service:recall:calback         RFC XXXX  Recall due to callback
service:recall:hold            RFC XXXX  Recall due to call hold
service:recall:transfer        RFC XXXX  Recall due to callback
service:<private-name>         RFC XXXX  Reserved for private 
                                         extensions         
     ]]></artwork>
					</figure>
				</section>
				<section anchor="SourceRegistrations" title="The &quot;source&quot; alert-category and alert-identifiers ">
					<t>The following table contains the initial IANA registration for
          the "source" &lt;alert-category&gt; and &lt;alert-identifier&gt;. The value of this
          indicator provides information about the user at the other side of
          the call.</t>
					<figure>
						<artwork><![CDATA[
<alert-category>/             Reference  Description
<alert-identifier>
-----------------------------------------------------------
source                        RFC XXXX  <alert-category> 
                                        for "source" 
                                        <alert-identifier>s
source:unclassified           RFC XXXX  Unclassified ring /rinback 
                                        rendering (default value)
source:internal               RFC XXXX  User at the other side of 
                                        the call is internal to the
                                        enterprise or PBX system 
source:external               RFC XXXX  User at the other side of
                                        the call is internal to the
                                        enterprise or PBX system 
source:friend                 RFC XXXX  User at the other side of 
                                        the call is a friend 
source:family                 RFC XXXX  User at the other side of 
                                        the call is a family member
source:<private-name>         RFC XXXX  Reserved for private 
                                        extensions         
     ]]></artwork>
					</figure>
				</section>
				<section anchor="PriorityRegistrations" title=" The &quot;priority&quot; alert-category and alert-identifiers">
					<t>The following table contains the initial IANA registration for
          the "priority" &lt;alert-category&gt; and &lt;alert-identifier&gt;s. The value of
          this indicator provides information about the priority the alerted
          user should give to the call.</t>
					<figure>
						<artwork><![CDATA[
<alert-category>/               Reference  Description
<alert-identifier>
-----------------------------------------------------------
priority                        RFC XXXX <alert-category> for 
                                         "priority" <alert-identifier>s
priority:normal                 RFC XXXX  Normal ring /rinback 
                                          rendering (default value)
priority:low                    RFC XXXX  Low priority call.
priority:high                   RFC XXXX  High priority call  
priority:<private-name>         RFC XXXX  Reserved for private 
                                          extensions         
     ]]></artwork>
					</figure>
				</section>
				<section anchor="DurationRegistrations" title="The &quot;duration&quot; alert-category and alert-identifiers ">
					<t>The following table contains the initial IANA registration for
          the "duration" &lt;alert-category&gt; and &lt;alert-identifier&gt;s. The value of
          this indicator provides information about the duration of the
          alerting signals compared to the default alerting signals.</t>
					<figure>
						<artwork><![CDATA[
<alert-category>/               Reference  Description
<alert-identifier>
-----------------------------------------------------------
duration                        RFC XXXX  <alert-category> 
                                          for "duration" 
                                          <alert-identifier>s
duration:normal                 RFC XXXX  Normal ring /rinback 
                                          rendering (default value)
duration:short                  RFC XXXX  Shorter than normal
duration:long                   RFC XXXX  Longer than normal
duration:<private-name>         RFC XXXX  Reserved for private 
                                          extensions.         
     ]]></artwork>
					</figure>
				</section>
				<section anchor="DelayRegistrations" title="The &quot;delay&quot;  alert-category and alert-identifiers">
					<t>The following table contains the initial IANA registration for
          the "delay" &lt;alert-category&gt; and &lt;alert-identifier&gt;s. The value of this
          indicator provides information about the delay of the alerting
          signals.</t>
					<figure>
						<artwork><![CDATA[
<alert-category>/            Reference  Description
<alert-identifier>
-----------------------------------------------------------
delay                        RFC XXXX  <alert-category> for "delay" 
                                       <alert-identifier>
delay:none                   RFC XXXX  Immediate alerting 
                                       (default value)
delay:yes                    RFC XXXX  Delayed alerting
delay:<private-name>         RFC XXXX  Reserved for private 
                                       extensions         
     ]]></artwork>
					</figure>
				</section>
				<section anchor="LocaleRegistrations" title="The &quot;locale&quot;  alert-category and alert-identifiers ">
					<t>The following table contains the initial IANA registration for
          the "locale" &lt;alert-category&gt; and &lt;alert-identifier&gt;s. The value of this
          indicator provides information about the location of the user at the
          other side of the call.</t>
					<figure>
						<artwork><![CDATA[
<alert-category>/             Reference  Description
<alert-identifier>
-----------------------------------------------------------
locale                        RFC XXXX  <alert-category> 
                                        for "locale" <alert-identifier>
locale:default                RFC XXXX  Alerting not location 
                                        specific  
                                        (default value)
locale:country:<ISO 3166-1 country code>
                              RFC XXXX  Country-specific alerting
locale:<private-name>         RFC XXXX  Reserved for private 
                                        extensions         
     ]]></artwork>
					</figure>
				</section>
			</section>
		</section>
		<section anchor="ExtensibilityRules" title="Extensibility Rules">
			<section anchor="GeneralExtensibilityRules" title="General Extensibility Rules">
				<t> The set of Alert-Info URNs is intended to be extensible. An extension "at the top level" 
creates an entirely new category (or characteristic), an extension "at the second level" creates a
new indication value for a category, an extension "at the third level"
creates a subdivision of a indication value, etc.  Extensions at lower
levels are preferred over those at upper levels.</t>
				<t>URNs allow in principle infinite subdivision of existing indication
values, although most of the standard Alert-Info URNs give only one level of
subdivision and a few give two levels of
subdivision.
      </t>
				<t>The process for defining new  Alert-Info URNs is described in  <xref target="NewAlert-identifiers"></xref>. 
      Adding new categories and adding &lt;alert-indication&gt; values other than
        via the "private" mechanism described in 
      <xref target="ExtensionsRulesforIndependentOrganizations"></xref> is standards action.</t>
			</section>
			<section anchor="ExtensionsRulesforIndependentOrganizations" title="Extensions Rules for Independent Organizations">
				<t>
The "&lt;private-name&gt;" syntax is for proprietary extensions
specific to independent organizations. The "&lt;private-name&gt;" is
 used in the form of a "reverse FQDN" of the entity that defines the extension, possibly
followed by further components.  Standard URNs will never contain
a  ".", so proprietary extensions need no further
marker. This gives a way of assigning unique names without the need for
a new registry. The namespace for each alert category is independent.
 Those assigning new names must ensure they are in a position to assign
 names uniquely for the FQDN they choose. </t>
				<t>For example, some company SomeCompany.example.org could use
   urn:alert:service:call-waiting:org.example.somecompany, which is the
   SomeCompany's private version for call-waiting or it may have several
   distinct private versions of call-waiting, e.g.
   urn:alert:service:call-waiting:abc.org.example.somecompany and
   urn:alert:service:call-waiting:def.org.example.somecompany (which are
   siblings in the tree under urn:alert:service:call-waiting).  Also it
   can subdivide its private version of call-waiting in
   urn:alert:service:call-waiting:org.example.somecompany:abc and
   urn:alert:service:call-waiting:org.example.somecompany:def (which are
   siblings in the tree under service:call-
   waiting:org.example.somecompany).
</t>
				<t>Adding new categories and adding &lt;alert-indication&gt; values 
        via the "private" mechanism is not a standards action.</t>
			</section>
		</section>
		<section anchor="Combinations" title="Combinations of Alert-Info URNs ">
			<section anchor="PriorityRules" title="Priority Rules ">
				<t>This section describes combination rules for the case when all
      the Alert-Info header fields only contain Alert-Info URNs. Combinations
      of URNs and URIs in the Alert-Info header fields of the same SIP-message
      are not defined in this specification.</t>
				<t>In many cases, more than one URNs will be needed to fully define a
      particular tone. This is done by including multiple Alert-Info URNs, in
      one or more Alert-Info header fields in a request or a response. For
      example, an internal, priority call could be indicated by Alert-Info:
      &lt;urn:alert:source:internal&gt;, &lt;urn:alert:priority:high&gt;. A
      priority call waiting tone could be indicated by Alert-Info:
      &lt;urn:alert:service:call-waiting&gt;,
      &lt;urn:alert:priority:high&gt;.</t>
				<t>
The sender of the Alert-Info header may include an
arbitrary list of Alert-Info URNs, even if they are redundant or
contradictory.  An earlier URN has priority over any later
contradictory URN.  This allows any element to modify a list of URNs
to require a feature value (by adding a URN at the beginning of the
list) or to suggest a feature value (by adding a URN at the end of the
list).</t>
				<t>The receiving UA attempts to match the received
      Alert-Info URNs combination with the signal(s) it is able to render. </t>
				<t>The implementation is free
      to ignore any or all parts of the received Alert-Info URNs.  The exact way in which a UA 
       renders a received combination of Alert-Info URNs is 
      left as an implementation issue.  However, the implementation  MUST comply to following rules:</t>
				<t><list>
						<t>a. Each alert-info URN has precedence over all URNs that follow it, and
  its interpretation is subordinate to all URNs that precede it.</t>
						<t> b.  If the UA cannot implement the effect of a URN (because it does
  not recognize the URN or the URN's effect is precluded by preceding
  URNs), the UA repeatedly removes either </t>
						<t><list>
								<t> (1) the final &lt;name&gt; of the URN, or</t>
								<t>(2) if the final &lt;name&gt; is a &lt;private-name&gt; with three or more &lt;label&gt;s,
	  the final &lt;label&gt;</t>
							</list></t>
						<t> until either </t>
						<t><list>
								<t> (i) the resulting URN is recognized and can be given effect by
      some signal (without reducing the degree of expression of
      any preceding URN), or</t>
								<t>(ii) the resulting URN is reduced to having no &lt;alert-indication&gt;.</t>
								<t>  In case (ii), that URN in the series cannot be given effect, so it
  is ignored.</t>
							</list></t>
						<t>c. In case that after processing all the received URNs, the UA can generate more
  than one signal that are equally effective at expressing the URNs
  (under the preceding rules), one of those signals is selected.  
  When selecting from the set of equally effective signals, no signal
   should be chosen if a less-specific signal is also in the set.
   (Specificity is to be judged based on the defined meanings of the
   signals to the user.)  (E.g., if each signal is considered to
   express certain &lt;alert-indication&gt;s of certain &lt;alert-categories&gt;, one
   signal is less-specific than a second signal if the first signal's
   &lt;alert-indication&gt;s are a subset or are prefixes of the second signal's
   &lt;alert-indication&gt;s.)  However, a more-specific signal may be chosen if the choice is
   based on information derived from the containing SIP message.
   E.g., a signal implying urn:alert-info:priority:high may be chosen
   if the SIP message contains the header "Priority: urgent".</t>
					</list></t>
				<t>In all situations, the set of signals that can be rendered and
   their significances may change based on user preferences and local
   policy.  In adidition, they may change based on the status of the
   UA.  E.g., if a call is active on the UA, all audible signals may
   become unavailable, or audible signals may be available only if
   urn:alert-info:priority:high is specified.</t>
			</section>
			<section anchor="MultiModeSignals" title="Multi-mode signals ">
				<t>There are cases when the device can render two signal modes (e.g.,
 audio and visual, or video or text) at the same time.</t>
				<t>Formally, the device must be considered as making its choice from
 the set of all combined signals that it can render, and that choice
 must conform to the above rules.  However, it can be proven that if
 the device makes its rendering choice for each of the two modes
 independently, with each choice separately conforming to the above
 rules, its combined choice conforms to the above rules, when it is
 regarded as a choice from among all possible combinations.</t>
				<t>In such a situation, it may simplify implementation to make each
 choice separately.  It is an implementation decision whether to chose
 from among combined signals, or to combine choices made from each
 signal mode. </t>
			</section>
		</section>
		<section anchor="Algorithm" title="Non-normative Algorithm for Handling Combinations of URNs">
			<t>The following text is a non-normative example of an algorithm for
   handling combinations of URNs that complies with the requirements
   in <xref target="Combinations"></xref>.  Thus, it demonstrates that requirements in section 7
   are consistent and implementable.  (Of course, a device may use any
   other algorithm which complies with <xref target="Combinations"></xref>.)</t>
			<section anchor="AlgorithmDescription" title=" Algorithm Description">
				<t>  For each category (feature), there is a tree of possible values.  For this
  description, we will name each tree by the category name, and name each
  node by the trailing portion of the URN.  Each URN thus corresponds to a
  node in a category tree.  Thus, there is a tree named "source", whose
  root node is also named "source", and which has the children
  source:internal, source:external, source:friend, and source:family.  
For example, urn:alert:source:external is placed at the node
  "source:external" in the "source" tree. (Of course, there are an infinite number of potential additional nodes
  in the tree for private values, but we don't have to represent those
  nodes explicitly unless the device has a signal representing the
  private value.)</t>
				<t>We assign similar locations to signals, but each signal has a place in
  *every* tree.  If a signal has a simple meaning, such as "external
  source", its place in the "source" tree is source:external, but its
  place in every other feature tree is at the root node, meaning that it
  has no particular meaning for that feature.</t>
				<t> A signal that has a complex meaning may have non-root positions in
  more than one feature tree.  For example, an "external, high
  priority" signal would be placed at source:external and
  priority:high in those trees, but be at the root in all other
  feature trees.</t>
				<t> In order to assure that the algorithm always selects at least one
  signal, we assume that there is a "default" signal, whose position in
  every feature tree is at the root.  The default signal is set up so
  that it will never be excluded from the set of acceptable signals for
  an indication, but will usually be the least-desirable signal for any
  indication.</t>
				<t>The algorithm proceeds by considering each URN in the received Alert-Info header from
  left to right, while revising a set of signals. The set of signals
  starts as the entire set of signals available to the device.  Each URN
  excludes some signals from the set, and *sorts* the signals that
  remain in the set according to how well they represent the URN. (The details of these
   operations are described below.)  The
  first URN is the "major sort", and has the most influence on the
  position of a signal in the set.  The second URN is a "minor sort", in
  that it arranges the orders of the signals that are tied within the
  first sort, the third URN arranges the orders of the signals that are
  tied within the first two sorts, etc.</t>
				<t>At the end of the algorithm, a final, "most minor" sort is done, which
  orders the signals which have been tied under all the sorts driven by
  the URNs.  This final sort places the least specific
   signals (within their groups) *first*.  (If one signal's position
   in each category tree is ancestral or the same as a second signal's
   position in that tree, the first signal is "less specific" than the
   second signal.  Other cases are left to the implementation to
   decide.)</t>
				<t>Once all the URNs are processed and the sorting is done, the device
  selects the first signal in the set.</t>
				<t>Here is how a single sort step proceeds, examining a single URN to
  modify the set of signals (by excluding some signals and further
  sorting the signals that remain):</t>
				<t><list style="symbols">
						<t>The URN specifies a specific node in a specific category tree.</t>
						<t>All signals in the set that are positioned at that node, or at
      an ancestor node of the URN, are kept.  All other signals are
      removed from the set.</t>
						<t>Within any group of signals that are tied under the previous sorts,
      place first those which are at the node of the URN, place second
      those which are at the parent node of the URN, etc., and place
      last those which are at the root node of the feature tree.</t>
					</list>
				</t>
			</section>
			<section anchor="Examples " title="Examples of how the algorithm works">
				<t>The following examples show how the algorithm described in the previous section works: </t>
				<t></t>
				<section anchor="Example_1 " title="Example 1">
					<t>The device has a set of 4 alerting signals. We list their primary meanings, and the
locations that they are placed in the feature trees:</t>
					<t>Signal 1 </t>
					<t><list>
							<t>Meaning: external</t>
							<t>Locations:</t>
							<t>- source:external</t>
							<t>-	priority (that is, the root node of the priority tree)</t>
						</list>
					</t>
					<t>
					</t>
					<t>Signal 2 </t>
					<t><list>
							<t>Meaning: internal</t>
							<t>Locations:</t>
							<t>- source:internal</t>
							<t>-	priority</t>
						</list>
					</t>
					<t></t>
					<t>Signal 3 </t>
					<t><list>
							<t>	Meaning: low</t>
							<t>	Locations:</t>
							<t>-	source</t>
							<t>-	priority:low</t>
						</list>
					</t>
					<t></t>
					<t>Signal 4 </t>
					<t><list>
							<t>	Meaning: high</t>
							<t>	Locations:</t>
							<t>-	source</t>
							<t>-	priority:high</t>
						</list>
					</t>
					<t></t>
					<t>	To which we add:</t>
					<t>Signal 5 </t>
					<t><list>
							<t>	Meaning: default</t>
							<t>	Locations:</t>
							<t>-	source</t>
							<t>-	priority</t>
						</list>
					</t>
					<t></t>
					<t>If the device receives &lt;urn:alert:source:internal&gt;, then the sort is:</t>
					<t>Signals at source:internal:</t>
					<t><list>
							<t>	&lt;urn:alert:source:internal&gt;</t>
						</list>
					</t>
					<t>Signals at source:</t>
					<t><list>
							<t>	&lt;urn:alert:priority:low&gt;</t>
							<t>&lt;urn:alert:priority:high&gt;</t>
						</list>
					</t>
					<t>default</t>
					<t>And these signals are excluded from the set:</t>
					<t>	&lt;urn:alert:source:external&gt;</t>
					<t>So in this example, the sorting algorithm properly gives first place
to &lt;urn:alert:source:internal&gt;.</t>
				</section>
				<section anchor="Example_2 " title="Example 2">
					<t>Let us add to the set of signals in Example 1 ones that express combinations like
"internal, high priority", but let us specifically exclude the
combination "internal, low priority" so as to set up some tricky
examples.  This enlarges our set of signals:</t>
					<t>Signal 1 </t>
					<t><list>
							<t>Meaning: default</t>
							<t>Locations:</t>
							<t>- source</t>
							<t>- priority</t>
						</list>
					</t>
					<t></t>
					<t>Signal 2 </t>
					<t><list>
							<t>Meaning: external</t>
							<t>Locations:</t>
							<t>-	source:external</t>
							<t>-	priority</t>
						</list>
					</t>
					<t>Signal 3 </t>
					<t><list>
							<t>Meaning: internal</t>
							<t>Locations:</t>
							<t>-	source:internal</t>
							<t>-	priority</t>
						</list>
					</t>
					<t>Signal 4 </t>
					<t><list>
							<t>Meaning: low</t>
							<t>Locations:</t>
							<t>-	source</t>
							<t>-	priority:low</t>
						</list>
					</t>
					<t>Signal 5 </t>
					<t><list>
							<t>Meaning: high</t>
							<t>Locations:</t>
							<t>-	source</t>
							<t>-	priority:high</t>
						</list>
					</t>
					<t>Signal 6 </t>
					<t><list>
							<t>Meaning: external high</t>
							<t>Locations:</t>
							<t>-	source:external</t>
							<t>-	priority:high</t>
						</list>
					</t>
					<t>Signal 7 </t>
					<t><list>
							<t>Meaning: external low</t>
							<t>Locations:</t>
							<t>-	source:external</t>
							<t>-	priority:low</t>
						</list>
					</t>
					<t>Signal 8 </t>
					<t><list>
							<t>Meaning: internal high</t>
							<t>Locations:</t>
							<t>-	source:internal</t>
							<t>-	priority:high</t>
						</list>
					</t>
					<t>	If the device receives &lt;urn:alert:source:internal&gt;, then the sort is:</t>
					<t>	Signals at source:internal: (that is, tied for first place)</t>
					<t><list>
							<t>-	internal</t>
							<t>	-internal high</t>
						</list>
					</t>
					<t>	Signals at source: (tied for second place)</t>
					<t><list>
							<t>-	low</t>
							<t>-	high</t>
							<t>-	default</t>
						</list>
					</t>
					<t>	Signals excluded from the set:</t>
					<t><list>
							<t>-	external</t>
							<t>-	external low</t>
							<t>-	external high</t>
						</list>
					</t>
					<t>	Two signals are tied for the first place, but the final sort orders
them:</t>
					<t><list>
							<t>-	internal</t>
							<t>-	internal high</t>
						</list>
					</t>
					<t>	because it puts the least-specific signal first.  So the signal
"internal" is chosen.</t>
				</section>
				<section anchor="Example_3 " title="Example 3">
					<t>The same device receives &lt;urn:alert:source:external&gt;,
&lt;urn:alert:priority:low&gt;.  The first sort (due to
&lt;urn:alert:source:external&gt;) is:</t>
					<t>Signals at source:external:</t>
					<t><list>
							<t>- external</t>
							<t>- external low</t>
							<t>- external high</t>
						</list>
					</t>
					<t>Signals at source:</t>
					<t><list>
							<t>- low</t>
							<t>-	high</t>
							<t>-	default</t>
						</list>
					</t>
					<t>Signals excluded:</t>
					<t><list>
							<t>- internal</t>
							<t>- internal high</t>
						</list>
					</t>
					<t>The second sort (due to &lt;urn:alert:priority:low&gt;) puts signals at
priority:low before signals at priority, and excludes signal at
priority:high:</t>
					<t><list>
							<t>- external low</t>
							<t>-	external</t>
							<t>-	low</t>
							<t>-	default</t>
						</list>
					</t>
					<t>Excluded:</t>
					<t><list>
							<t>-	external high</t>
							<t>-	high</t>
							<t>-	internal</t>
							<t>-	internal high</t>
						</list>
					</t>
					<t>So, we choose "external low".</t>
				</section>
				<section anchor="Example_4 " title="Example 4">
					<t>Suppose the same device receives &lt;urn:alert:source:internal&gt;,
&lt;urn:alert:priority:low&gt;.  Note that there is no signal that
corresponds to this combination.</t>
					<t>The first sort is based on source:internal, and results in this order:</t>
					<t><list>
							<t>- internal</t>
							<t>- internal high</t>
							<t>- low</t>
							<t>- high</t>
							<t>- default</t>
						</list>
					</t>
					<t>Excluded:</t>
					<t><list>
							<t>- external</t>
							<t>- external low</t>
							<t>- external high</t>
						</list>
					</t>
					<t>The second sort is based on priority:low, and results in this order:</t>
					<t><list>
							<t>- internal</t>
							<t>-	low</t>
							<t>- default</t>
						</list>
					</t>
					<t>Excluded:</t>
					<t><list>
							<t>- internal high</t>
							<t>- high</t>
							<t>- external low</t>
							<t>- external</t>
							<t>- external high</t>
						</list>
					</t>
					<t>So we choose the signal "internal".</t>
				</section>
				<section anchor="Example_5 " title="Example 5">
					<t>Let us set up a simple set of signals, with three signals giving
priority:</t>
					<t>Signal 1 </t>
					<t><list>
							<t>Meaning: default</t>
							<t>Locations:</t>
							<t>- priority</t>
						</list>
					</t>
					<t>Signal 2 </t>
					<t><list>
							<t>Meaning: low</t>
							<t>Locations:</t>
							<t>- priority:low</t>
						</list>
					</t>
					<t>Signal 3 </t>
					<t><list>
							<t>Meaning: high</t>
							<t>Locations:</t>
							<t>-	priority:high</t>
						</list>
					</t>
					<t>Notice that we've used the "default" signal to cover "normal
priority".  That is so the signal will cover situations where no
priority URN is present, as well as the ones with
&lt;urn:alert:priority:normal&gt;.  So we're deliberately failing to
distinguish "priority:normal" from the default priority.</t>
					<t>If the device receives &lt;urn:alert:priority:low&gt;, the sort is:</t>
					<t><list>
							<t>- low</t>
							<t>- default</t>
						</list>
					</t>
					<t>Excluded:</t>
					<t><list>
							<t>- high</t>
						</list>
					</t>
					<t>and signal "low" is chosen.</t>
					<t>Similarly, if the device receives &lt;urn:alert:priority:high&gt;, signal
"high" is chosen.</t>
					<t>If the device receives &lt;urn:alert:priority:normal&gt;, the sort is:</t>
					<t><list>
							<t>- default</t>
						</list>
					</t>
					<t>Excluded:</t>
					<t><list>
							<t>-	low</t>
							<t>-	high</t>
						</list>
					</t>
					<t>and signal "default" is chosen.</t>
					<t>If no "priority" URN is received, "default" will be put before "low"
and "high" by the final sort, and so it will be chosen.</t>
				</section>
			</section>
		</section>
		<section anchor="UserAgentBehaviour" title="User Agent Behaviour">
			<t>A SIP UA MAY add a URN or multiple URNs to the Alert-Info header
      field in a SIP request or a provisional 1xx response (excepting a 100
      response) when it needs to provide additional
      information about the call or about the provided service.</t>
			<t>Upon receiving a SIP INVITE request or a SIP provisional response
      with an Alert-Info header field that contains a combination of Alert-
      Info URNs, the User Agent (UA) attempts to match the received Alert-
      Info URNs combination with a signal it can render.  The process
      the UA uses MUST conform to the rules described in     <xref target="Combinations"></xref>.  (A non-normative algorithm example for the process is described
      in <xref target="Algorithm"></xref>.)
       </t>
			<t>The User Agent (UA) is responsible for producing a reasonable
      rendering regardless of the combination of URIs (of any schemes)
      in the Alert-Info header field.
</t>
		</section>
		<section anchor="ProxyBehaviour" title="Proxy Behaviour">
			<t></t>
			<t>A SIP proxy MAY add a URN or multiple URNs to the Alert-Info header
      field in a SIP request or a provisional 1xx response (excepting a 100
      response) when it needs to  provide additional
      information about the call or about the provided service.
</t>
			<t>Following example shows both the network audio resource referenced by
      the HTTP URI and the URN indication for the call-waiting service
      transported by the Alert-Info header field in a 180 Ringing provisional
      response.</t>
			<t><figure>
					<artwork><![CDATA[ 
SIP/2.0 180 Ringing
Alert-Info: <http://www.example.com/sound/moo.wav>,
             <urn:alert:service:call-waiting>
To: Bob <sip:bob@biloxi.example.com>;tag=a6c85cf
From: Alice <sip:alice@atlanta.example.com>;tag=1928301774
Call-ID: a84b4c76e66710
Contact: <sip:bob@192.0.2.4>
CSeq: 314159 INVITE
Via: SIP/2.0/UDP server10.biloxi.example.com;
            branch=z9hG4bK4b43c2ff8.1
Content-Length: 0
]]></artwork>
				</figure></t>
			<t></t>
		</section>
		<section anchor="Internationalization" title="Internationalization Considerations ">
			<t>The &lt;alert-identifier&gt; labels are protocol elements 
    <xref target="RFC6365"></xref> and are not normally seen by users. Thus, the
      character set for these elements is restricted, as described in <xref target="IANA"></xref>.</t>
			<t>The URNs urn:alert:locale:country:&lt;ISO 3166-1 country code&gt;
   select renderings that are conventional in the specified country.</t>
		</section>
		<section anchor="Security" title="Security Considerations">
			<t>As an identifier, the alert URN does not appear to raise any
      particular security issues. The indications described by the 'alert' URN
      are meant to be well-known.</t>
			<t>However, the provision of specific indications may raise
      privacy issues, e.g. indications about the source of the message or about 
     services initiated at the other side. Such provision SHALL always be explicitly 
      authorised by
      the party (caller or callee) the information in the Alert-Info URN refers to.</t>
			<t>Proxies may choose to suppress undesired indications, e.g. from
      untrusted sources, while allowing them from trusted sources.</t>
		</section>
		<section anchor="Acknowledgements" title="Acknowledgements">
			<t>The authors wish to thank Denis Alexeitsev, the editor of the initial draft in BLISS,  
   Anwar Siddiqui for his contributions to the draft, and  Adam Roach,
      Dean Willis, Martin Huelsemann, Shida Schubert, John Elwell and Tom
      Taylor for their comments and suggestions.</t>
		</section>
	</middle>
	<back>
		<references title="Normative References">
			<?rfc include="reference.RFC.1123.xml"?>
			<?rfc include="reference.RFC.2119.xml"?>
			<?rfc include="reference.RFC.2141.xml"?>
			<?rfc include="reference.RFC.3261.xml"?>
			<?rfc include="reference.RFC.3406.xml"?>
			<?rfc include="reference.RFC.5234.xml"?>
		</references>
		<references title="Informative References">
			<?rfc include="reference.I-D.ietf-bliss-shared-appearances" ?>
			<?rfc include="reference.I-D.ietf-bliss-call-completion" ?>
			<?rfc include="reference.RFC.5589.xml"?>
			<?rfc include="reference.RFC.5226.xml"?>
			<?rfc include="reference.RFC.6365.xml"?>
			<?rfc include="reference.RFC.3120.xml"?>
			<?rfc include="reference.RFC.3044.xml"?>
			<?rfc include="reference.RFC.3187.xml"?>
			<?rfc include="reference.RFC.3188.xml"?>
			<?rfc include="reference.RFC.4179.xml"?>
			<?rfc include="reference.RFC.4195.xml"?>
			<?rfc include="reference.RFC.4198.xml"?>
			<?rfc include="reference.RFC.4152.xml"?>
			<?rfc include="reference.RFC.3043.xml"?>
            <?rfc include="reference.RFC.5890.xml"?>
            <?rfc include="reference.RFC.5031.xml"?>
			<reference anchor="TS24.615">
				<front>
					<title>3GPP TS 24.615 Communication Waiting (CW) using IP Multimedia
          (IM) Core Network (CN) subsystem</title>
					<author></author>
					<date></date>
				</front>
			</reference>
			<reference anchor="ISO3166-1">
				<front>
					<title>ISO 3166-1 English country names and code elements</title>
					<author></author>
					<date></date>
				</front>
				<seriesInfo name="http://www.iso.org/iso/english_country_names_and_code_elements" value=""/>
				<format target="http://www.iso.org/iso/english_country_names_and_code_elements" type="HTML"/>
			</reference>
			<reference anchor="E182">
				<front>
					<title>Application of tones and recorded announcements in telephone services</title>
					<author></author>
					<date></date>
				</front>
				<seriesInfo name="http://www.itu.int/rec/T-REC-E.182-199803-I/en" value=""/>
				<format type="HTML" target="http://www.itu.int/rec/T-REC-E.182-199803-I/en"/>
			</reference>
		</references>
	</back>
</rfc>
