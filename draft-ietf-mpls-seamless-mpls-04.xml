<?xml version="1.0" encoding="US-ASCII"?>
<!-- This template is for creating an Internet Draft using xml2rfc,
     which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!-- One method to get references from the online citation libraries.
     There has to be one entity for each item to be referenced. 
     An alternate method (rfc include) is described in the references. -->
<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC2629 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2629.xml">
<!ENTITY RFC3107 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3107.xml">
<!ENTITY RFC3031 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3031.xml">
<!ENTITY RFC3209 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3209.xml">
<!ENTITY RFC3353 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3353.xml">
<!ENTITY RFC3552 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3552.xml">
<!ENTITY RFC4090 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4090.xml">
<!ENTITY RFC4364 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4364.xml">
<!ENTITY RFC5036 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5036.xml">
<!ENTITY RFC5283 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5283.xml">
<!ENTITY RFC5286 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5286.xml">
<!ENTITY RFC5332 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5332.xml">
<!ENTITY RFC5925 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5925.xml">
<!ENTITY I-D.narten-iana-considerations-rfc2434bis SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.narten-iana-considerations-rfc2434bis.xml">
<!ENTITY I-D.kothari-henderickx-l2vpn-vpls-multihoming SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.kothari-henderickx-l2vpn-vpls-multihoming.xml">
<!ENTITY I-D.ietf-bfd-v4v6-1hop SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-bfd-v4v6-1hop.xml">
<!ENTITY I-D.filsfils-rtgwg-lfa-applicability SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.filsfils-rtgwg-lfa-applicability.xml">
<!ENTITY I-D.sajassi-l2vpn-rvpls-bgp SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.sajassi-l2vpn-rvpls-bgp.xml">
<!ENTITY I-D.raggarwa-mac-vpn SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.raggarwa-mac-vpn.xml">
<!ENTITY I-D.ietf-mpls-ldp-dod SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-mpls-ldp-dod.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs), 
     please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
     (Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space 
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="info" docName="draft-ietf-mpls-seamless-mpls-04"
     ipr="trust200902">
  <!-- category values: std, bcp, info, exp, and historic
     ipr values: full3667, noModification3667, noDerivatives3667
     you can add the attributes updates="NNNN" and obsoletes="NNNN" 
     they will automatically be output with "(if approved)" -->

  <!-- ***** FRONT MATTER ***** -->

  <front>
    <!-- The abbreviated title is used in the page header - it is only necessary if the 
         full title is longer than 39 characters -->

    <title abbrev="Seamless MPLS">Seamless MPLS Architecture</title>

    <!-- add 'role="editor"' below for the editors if appropriate -->

    <!-- Another author who claims to be an editor -->

    <author fullname="Nicolai Leymann" initials="N" role="editor"
            surname="Leymann">
      <organization>Deutsche Telekom AG</organization>

      <address>
        <postal>
          <street>Winterfeldtstrasse 21</street>

          <!-- Reorder these if your country does things differently -->

          <city>Berlin</city>

          <code>10781</code>

          <country>DE</country>
        </postal>

        <phone>+49 30 8353-92761</phone>

        <email>n.leymann@telekom.de</email>

        <!-- uri and facsimile elements may also be added -->
      </address>
    </author>

    <author fullname="Bruno Decraene" initials="B" surname="Decraene">
      <organization>Orange</organization>

      <address>
        <postal>
          <street>38-40 rue du General Leclerc</street>

          <city>Issy Moulineaux cedex 9</city>

          <region/>

          <code>92794</code>

          <country>FR</country>
        </postal>

        <phone/>

        <facsimile/>

        <email>bruno.decraene@orange.com</email>

        <uri/>
      </address>
    </author>

    <author fullname="Clarence Filsfils" initials="C" surname="Filsfils">
      <organization>Cisco Systems</organization>

      <address>
        <postal>
          <street/>

          <city>Brussels</city>

          <region/>

          <code/>

          <country>Belgium</country>
        </postal>

        <phone/>

        <facsimile/>

        <email>cfilsfil@cisco.com</email>

        <uri/>
      </address>
    </author>

    <author fullname="Maciek Konstantynowicz" initials="M" role="editor"
            surname="Konstantynowicz">
      <organization>Cisco Systems</organization>

      <address>
        <postal>
          <street/>

          <city>London</city>

          <region/>

          <code/>

          <country>United Kingdom</country>
        </postal>

        <phone/>

        <facsimile/>

        <email>maciek@cisco.com</email>

        <uri/>
      </address>
    </author>

    <author fullname="Dirk Steinberg" initials="D" surname="Steinberg">
      <organization>Steinberg Consulting</organization>

      <address>
        <postal>
          <street>Ringstrasse 2</street>

          <city>Buchholz</city>

          <code>53567</code>

          <country>DE</country>
        </postal>

        <email>dws@steinbergnet.net</email>
      </address>
    </author>

    <date day="15" month="July" year="2013"/>

    <!-- If the month and year are both specified and are the current ones, xml2rfc will fill 
         in the current day for you. If only the current year is specified, xml2rfc will fill 
	 in the current day and month for you. If the year is not the current one, it is 
	 necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the 
	 purpose of calculating the expiry date).  With drafts it is normally sufficient to 
	 specify just the year. -->

    <!-- Meta-data Declarations -->

    <area>Routing Area</area>

    <workgroup>MPLS Working Group</workgroup>

    <!-- WG name at the upperleft corner of the doc,
         IETF is fine for individual submissions.  
	 If this element is not present, the default is "Network Working Group",
         which is used by the RFC Editor as a nod to the history of the IETF. -->

    <keyword>Seamless MPLS, MPLS, access network, aggregation network, WAN,
    MAN, leymann, kompella, filsfils, hendrickx</keyword>

    <!-- Keywords will be incorporated into HTML output
         files in a meta tag but they have no effect on text or nroff
         output. If you submit your draft to the RFC Editor, the
         keywords will be used for the search engine. This -->

    <abstract>
      <t>This documents describes an architecture which can be used to extend
      MPLS networks to integrate access and aggregation networks into a single
      MPLS domain ("Seamless MPLS"). The Seamless MPLS approach is based on
      existing and well known protocols. It provides a highly flexible and a
      scalable architecture and the possibility to integrate 100.000 of nodes.
      The separation of the service and transport plane is one of the key
      elements; Seamless MPLS provides end to end service independent
      transport. Therefore it removes the need for service specific
      configurations in network transport nodes (without end to end transport
      MPLS, some additional services nodes/configurations would be required to
      glue each transport domain). This draft defines a routing architecture
      using existing standardized protocols. It does not invent any new
      protocols or defines extensions to existing protocols.</t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">
      <t>MPLS as a mature and well known technology is widely deployed in
      today's core and aggregation/metro area networks. Many metro area
      networks are already based on MPLS delivering Ethernet services to
      residential and business customers. Until now those deployments are
      usually done in different domains; e.g. core and metro area networks are
      handled as separate MPLS domains.</t>

      <t>Seamless MPLS extends the core domain and integrates aggregation and
      access domains into a single MPLS domain ("Seamless MPLS"). This enables
      a very flexible deployment of an end to end service delivery. In order
      to obtain a highly scalable architecture Seamless MPLS takes into
      account that typical access devices (DSLAMs, MSAN) are lacking some
      advanced MPLS features, and may have more scalability limitations. Hence
      access devices are kept as simple as possible.</t>

      <t>Seamless MPLS is not a new protocol suite but describes an
      architecture by deploying existing protocols like BGP, LDP and ISIS.
      Multiple options are possible and this document aims at defining a
      single architecture for the main function in order to ease
      implementation prioritization and deployments in multi vendor networks.
      Yet the architecture should be flexible enough to allow some level of
      personalization, depending on use cases, existing deployed base and
      requirements. Currently, this document focus on end to end unicast
      LSP.</t>

      <section title="Requirements Language">
        <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <xref
        target="RFC2119">RFC 2119</xref>.</t>
      </section>

      <section title="Terminology">
        <t>This document uses the following terminology<list style="symbols">
            <t>Access Node (AN): An access node is a node which processes
            customers frames or packets at Layer 2 or above. This includes but
            is not limited to DSLAMs or OLTs (in case of (G)PON deployments).
            Access nodes have only limited MPLS functionalities in order to
            reduce complexity in the access network.</t>

            <t>Aggregation Node (AGN): An aggregation node (AGN) is a node
            which aggregates several access nodes (ANs).</t>

            <t>Area Border Router (ABR): Router between aggregation and core
            domain.</t>

            <t>Deployment Scenario: Describes which an implementation of
            Seamless MPLS in order to fullfil the requirements derived from
            one or more use cases.</t>

            <t>Seamless MPLS Domain: A set of MPLS equipments which can set
            MPLS LSPs between them.</t>

            <t>Transport Node (TN): Transport nodes are used to connect access
            nodes to service nodes, and services nodes to services nodes.
            Transport nodes ideally have no customer or service state and are
            therefore decoupled from service creation.</t>

            <t>Seamless MPLS (S-MPLS): Used as a generic term to describe an
            architecture which integrates access, aggregation and core network
            in a single MPLS domain.</t>

            <t>Service Node (SN): A service node is used to create services
            for customers and is connected to one or more transport nodes.
            Typical examples include Broadband Network Gateways (BNGs), video
            servers</t>

            <t>Transport Pseudo Wire (T-PW): A transport pseudowire provides
            service independent transport mechanisms based on Pseudo-Wires
            within the Seamless MPLS architecture.</t>

            <t>Use Case: Describes a typical network including service
            creation points in order to describe the requirments, typical
            numbers etc. which need to be taken into account when applying the
            Seamless MPLS architecture.</t>
          </list></t>
      </section>
    </section>

    <section title="Motivation">
      <t>MPLS is deployed in core and aggregation network for several years
      and provides a mature and stable basis for large networks. In addition
      MPLS is already used in access networks, e.g. such as mobile or DSL
      backhaul. Today MPLS as technology is being used on two different
      layers:</t>

      <t><list style="symbols">
          <t>the Transport Layer and</t>

          <t>the Service Layer (e.g. for MPLS VPNs)</t>
        </list>In both cases the protocols and the encapsulation are identical
      but the use of MPLS is different especially concerning the signalling,
      the control plane, the provisioning, the scalability and the frequency
      of updates. On the service layer only service specific information is
      exchanged; every service can potentially deploy it's own architecture
      and individual protocols. The services are running on top of the
      transport layer. Nevertheless those deployments are usually isolated,
      focussed on a single use case and not integrated into an end-to-end
      manner.</t>

      <t>The motivation of Seamless MPLS is to provide an architecture which
      supports a wide variety of different services on a single MPLS platform
      fully integrating access, aggregation and core network. The architecture
      can be used for residential services, mobile backhaul, business services
      and supports fast reroute, redundancy and load balancing. Seamless MPLS
      provides the deployment of service creation points which can be
      virtually everywhere in the network. This enables network and service
      providers with a flexible service and service creation. Service creation
      can be done based on the existing requirements without the needs for
      dedicated service creation areas on fixed locations. With the
      flexibility of Seamless MPLS the service creation can be done anywhere
      in the network and easily moved between different locations.</t>

      <section title="Why Seamless MPLS">
        <t>Multiple SP plan to deploy networks with 10k to 100k MPLS nodes.
        This is typically at least one order of magnitude higher than typical
        deployments and may require a new architecture. Multiple options are
        possible and it makes sense for the industry (both vendors and SP) to
        restrict the options in order to ease the first deployments (e.g.
        restrict the number of options to implement and/or scales for vendors,
        reduce interoperability and debugging issues for SP).</t>

        <t>Many aggregation networks are already deploying MPLS but are
        limited to the use of MPLS per aggregation area. Those MPLS based
        aggregation domains are connected to a core network running MPLS as
        well. Nevertheless most of the services are not limited to an
        aggregation domain but running between several aggregation domains
        crossing the core network. In the past it was necessary to provide
        connectivity between the different domains and the core on a per
        service level and not based on MPLS (e.g. by deploying native
        IP-Routing or Ethernet based technologies between aggregation and
        core). In most cases service specific configurations on the border
        nodes between core and aggregation were required. New services led to
        additional configurations and changes in the provisioning tools (see
        <xref target="serviceConfig"/>).</t>

        <t>With Seamless MPLS there are no technology boundaries and no
        topology boundaries for the services. Network (or region) boundaries
        are for scaling and manageability, and do not affect the service
        layer, since the Transport Pseudowire that carries packets from the AN
        to the SN doesn't care whether it takes two hops or twenty, nor how
        many region boundaries it needs to cross. The network architecture is
        about network scaling, network resilience and network manageability;
        the service architecture is about optimal delivery: service scaling,
        service resilience (via replicated SNs) and service manageability. The
        two are decoupled: each can be managed separately and changed
        independently.</t>

        <t/>

        <figure align="center" anchor="serviceConfig"
                title="Service Specific Configurations">
          <artwork><![CDATA[+--------------+         +--------------+         +--------------+
|  Aggregation |         |     Core     |         |  Aggregation |             
|   Domain #1  +---------+    Domain    +---------+   Domain #2  |
|     MPLS     | ^       |     MPLS     |       ^ |     MPLS     |
+--------------+ |       +--------------+       | +--------------+
                 |                              |
                 +------ service specific ------+
                          configuration
]]></artwork>
        </figure>

        <t/>

        <t>One of the main motivations of Seamless MPLS is to get rid of
        services specific configurations between the different MPLS islands.
        Seamless MPLS connects all MPLS domains on the MPLS transport layer
        providing a single transport layer for all services - independent of
        the service itself. The Seamless MPLS architecture therefore decuples
        the service and transport layer and integrates access, aggregation and
        core into a single platform. One of the big advantages is that
        problems on the transport layer only need to be solved once (and the
        solutions are available to all services). With Seamless MPLS it is not
        necessary to use service specific configurations on intermediate
        nodes; all services can be deployed in an end to end manner.</t>
      </section>

      <section title="Use Case #1">
        <section title="Description">
          <t>In most cases at least residential and business services need to
          be supported by a network. This section describes a Seamless MPLS
          use case which supports such a scenario. The use case includes point
          to point services for business customers as well as typical service
          creation for residential customers.</t>

          <t/>

          <t><figure align="center" anchor="serviceUseCase01"
              title="Use Case #1: Service Creation">
              <artwork><![CDATA[                    +-------------+    
                    |   Service   |
                    |  Creation   |
                    | Residential |
                    |  Customers  |
                    +------+------+
                           |
                           |
                           |
    PW1    +-------+   +---+---+   
   #########################   |   
   #    +--+ AGN11 +---+ AGN21 +  +------+
   #   /   |       |  /|       |\ |      |           +--------+
+--#-+/    +-------+\/ +-------+ \|      |           | remote |
| AN |              /\            + CORE +---......--+   AN   |     
+--#-+\    +-------+  \+-------+ /|      |         #######    |
   #   \   |       |   |       |/################### +--------+
   #    +--+ AGN12 +---+ AGN22 +##+------+  P2P Business Service
   ##############################
    PW2    +-------+   +-------+   
]]></artwork>
            </figure></t>

          <t/>

          <t><xref target="serviceUseCase01"/> shows the different service
          creation points and the corresponding pseudowires between the access
          nodes and the service creation points. The use case does not show
          all PWs (e.g. not the PWs needed to support redundancy) in order to
          keep the figure simple. Node and link failures are handled by
          rerouting the PWs (based on standard mechanisms). End customers
          (either residential or business customers) are connected to the
          access nodes using a native technology like Ethernet. The access
          nodes terminates the PW(s) carrying the traffic for the end
          customers. The link between the access node (AN) and the aggregation
          node (AGN) is the first MPLS enabled link.</t>

          <t><list style="hanging">
              <t hangText="Residential Services:">The service creation for all
              residential customers connected to the Access Nodes in an
              aggregation domain is located on an Service Node connected to
              the AGN2x. The PW (PW1) originated at the AN and terminates at
              the AGN2. A second PW is deployed in the case where redundancy
              is needed on the AN (the figure shows redundancy but this might
              not be the case for all ANs in this Use Case). Additonal PWs can
              be deployed as well in case more than a single service creation
              is needed for the residential service (e.g. one service creation
              point for Internet access and a second service creation point
              for IPTV services).</t>

              <t hangText="Business Sercvices:">For business services the use
              cases shows point to point connections between two access nodes.
              PW2 originates at the AN and terminates on the remote AN
              crossing two aggregation areas and the core network. If the
              access node needs connections to several remote ANs the
              corresponding number of PWs will be originated at the AN.
              Nevertheless taking the number of ports available and the number
              of business customers on a typical access node the number of PWs
              will be relatively small.</t>
            </list></t>

          <t/>

          <figure align="center" anchor="redUseCase01"
                  title="Use Case #1: Redundancy">
            <artwork><![CDATA[           +-------+   +-------+   +------+   +------+
           |       |   |       |   |      |   |      |
        +--+ AGN11 +---+ AGN21 +---+ ABR1 +---+ LSR1 +--> to AGN
       /   |       |  /|       |   |      |   |      |
+----+/    +-------+\/ +-------+   +------+  /+------+
| AN |              /\                     \/
+----+\    +-------+  \+-------+   +------+/\ +------+
       \   |       |   |       |   |      |  \|      |
        +--+ AGN12 +---+ AGN22 +---+ ABR2 +---+ LSR2 +--> to AGN
           |       |   |       |   |      |   |      |
           +-------+   +-------+   +------+   +------+

static route     ISIS L1 LDP             ISIS L2 LDP

<-Access-><--Aggregation Domain--><---------Core---------> 
]]></artwork>
          </figure>

          <t/>

          <t><xref target="redUseCase01"/> shows the redundancy at the access
          and aggregation network deploying a two stage aggregation network
          (AGN1x/AGN2x). Nevertheless redundancy is not a must in this use
          case. It is also possible to use non redundant connection between
          the ANs and AGN1 stage and/or between the AGN1 and AGN2 stages. The
          AGN2x stage is used to aggregate traffic from several AGN1x pairs.
          In this use case an aggregation domain is not limited to the use of
          a single pair of AGN2x; the deployment of several AGN2 pairs within
          the domain is also supported. As design goal for the scalability of
          the routing and forwarding within the Seamless MPLS architecture the
          following numbers are used:</t>

          <t><list style="symbols">
              <t>Number of Aggregation Domains: 100</t>

              <t>Number of Backbone Nodes: 1.000</t>

              <t>Number of Aggregation Nodes: 10.000</t>

              <t>Number of Access Nodes: 100.000</t>
            </list>The access nodes (AN) are dual homed to two different
          aggregation nodes (AGN11 and AGN12) using static routing entries on
          the AN. The ANs are always source or sink nodes for MPLS traffic but
          not transit nodes. This allows a light MPLS implementation in order
          to reduce the complexity in the AN. The aggregation network consists
          of two stages with redundant connections between the stages (AGN11
          is connected to AGN21 and AGN22 as well as AGN12 to AGN21 and
          AGN22). The gateway between the aggregation and core network is
          realized using the Area Border Routers (ABR). From the perspective
          of the MPLS transport layer all systems are clearly identified using
          the loopback address of the system. An ingress node must be able to
          establish a service to an arbitrary egress system by using the
          corresponding MPLS transport label</t>
        </section>

        <section title="Typical Numbers">
          <t><xref target="numUseCase01"/> shows typical numbers which are
          expected for Use Case #1 (access node).</t>

          <t/>

          <texttable align="center" anchor="numUseCase01"
                     title="Use Case #1: Typical Numbers for Access Node">
            <ttcol>Parameter</ttcol>

            <ttcol>Typical Value</ttcol>

            <c>IGP Control Plane</c>

            <c>2</c>

            <c>IP FIB</c>

            <c>2</c>

            <c>LDP Control Plane</c>

            <c>200</c>

            <c>LDP FIB</c>

            <c>200</c>

            <c>BGP Control Plane</c>

            <c>0</c>

            <c>BGP FIB</c>

            <c>0</c>
          </texttable>

          <t/>
        </section>
      </section>

      <section title="Use Case #2">
        <section title="Description">
          <t>In most cases, residential, wholesales and business services need
          to be supported by the network.</t>

          <t><figure align="center" anchor="usecase2" title="Use Case #2">
              <artwork><![CDATA[                      +-------------+
                      |   Service   |
                      |  platforms  |
                      |(VoIP, VoD..)|
                      | Residential |
                      |  Customers  |
                      +------+------+
                             |
                             |
        +---+    +-----+  +--+--+   +-----+
        |AN1|----+AGN11+--+AGN21+---+ ABR |
        +---+    +--+--+  +--+--+   +--+--+
                    |        |         |
        +---+    +--+--+     |         |          +----+
        |AN2|----+AGN12+     |         |        --+ PE |
        +---+    +--+--+     |         |          +----+
                    |        |         |
                    .        |         |
                    .        |         |
                    .        |         |
                    |        |         |
+---+   +---+    +--+--+  +--+--+   +--+--+
|AN4+---+AN3|----+AGN1x+--+AGN22+---+ ABR |
+---+   +---+    +-----+  +-----+   +-----+

     <-Access-><--Aggregation Domain--><---------Core--------->
]]></artwork>
            </figure></t>

          <t>The above topology (see <xref target="usecase2"/>) is subject to
          evolutions, depending on AN types and capacities (in terms of number
          of customers and/or aggregated bandwidth). For examples, AGN1x
          connection toward AGN2y currently forms a ring but may latter evolve
          in a square or triangle topology; AGN2y nodes may not be
          present...</t>

          <t>Most access nodes (AN) are single attached on one aggregation
          node using static routing entries on the AN and AGN. Some AN, are
          dual attached on two different AGN using static routes. Some AN are
          used as transit by some lower level AN. Static routes are expected
          to be used between those AN.</t>

          <t>IPv4, IPv6 and MPLS interconnection between the aggregation and
          core network is realized using the Area Border Routers (ABR). Any
          ingress node must be able to establish IPv4, IPv6 and MPLS
          connections to any egress node in the seamless MPLS domain.</t>

          <t>Regarding MPLS connectivity requirements, a full mesh of MPLS
          LSPs is required between the ANs of an aggregation area, at least
          for 6PE purposes. Some additional LSPs are needed between ANs and
          some PE in the aggregation area or in the core area for access to
          services, wholesale and enterprises services. In short, a meshing of
          LSP is required between the AGN of the whole seamless MPLS domain.
          Finally, LSP between any node to any node should be possible.</t>

          <t>From a scalability standpoint, the following numbers are the
          targets:</t>

          <t><list style="symbols">
              <t>Number of Aggregation Domains: 30</t>

              <t>Number of Backbone Nodes: 150</t>

              <t>Number of Aggregation Nodes: 1.500</t>

              <t>Number of Access Nodes: 40.000</t>
            </list></t>
        </section>

        <section title="Typical Numbers">
          <t><xref target="numUseCase02"/> shows typical numbers which are
          expected for Use Case #2 for the purpose of establishing the
          transport LSPs. They do not take into account the services built in
          addition. (e.g. 6PE will require additional IPv6 routes).</t>

          <texttable align="center" anchor="numUseCase02"
                     title="Use Case #2: Typical Numbers for Access Node">
            <ttcol>Parameter</ttcol>

            <ttcol>Typical Value</ttcol>

            <c>IGP Control Plane</c>

            <c>2</c>

            <c>IP FIB</c>

            <c>2</c>

            <c>LDP Control Plane</c>

            <c>1000</c>

            <c>LDP FIB</c>

            <c>1000</c>
          </texttable>

          <t/>
        </section>
      </section>
    </section>

    <section title="Requirements">
      <t>The following section describes the overall requirements which need
      to be fulfilled by the Seamless MPLS architecture. Beside the general
      requirements of the architecture itself there are also certain
      requirements which are related to the different network nodes.</t>

      <t><list style="symbols">
          <t>End to End Transport LSP: MPLS based services (pseudowire based,
          L3-VPN or IP) SHALL be provided by the Seamless MPLS based
          infrastructure between any nodes.</t>

          <t>Scalability: The network SHALL be scalable to the minimum of
          100.000 nodes.</t>

          <t>Fast convergence (sub second resilience) SHALL be supported. Fast
          reroute (LFA) SHOULD be supported.</t>

          <t>Flexibility: The Seamless MPLS architecture SHALL be applied to a
          wide variety of existing MPLS deployments. It SHALL use a flexible
          approach deploying building blocks with the possiblity to use
          certain features only if those features are needed (e.g. dual homing
          ANs or fast reroute mechanisms).</t>

          <t>Service independence: Service and transport layer SHALL be
          decoupled. The architecture SHALL remove the need for service
          specific configurations on intermediate nodes.</t>

          <t>Native Multicast support: P2MP MPLS LSPs SHOULD be supported by
          the Seamless MPLS architecture.</t>

          <t>Interoperable end to end OAM mechanisms SHALL be implemented</t>
        </list></t>

      <section title="Overall">
        <section title="Access">
          <t>In respect of MPLS functionality the access network should be
          kept as simple as possible. Compared to the aggregation and/or core
          network within Seamless MPLS a typical access node is less powerful.
          The control plane and the forwarding should be as simple as
          possible. To reduce the complexity and the costs of an access node
          not the full MPLS functionality need to be supported (control and
          data plane). The use of an IGP should be avoided. Static routing
          should be sufficient. Required functionality to reach the required
          scalability should be moved out of the access node. The number of
          access nodes can be very high. The support of load balancing for
          layer 2 services should be implemented.</t>
        </section>

        <section title="Aggregation">
          <t>The aggregation network aggregates traffic from access nodes. The
          aggregation Node must have functionalities that enlarge the
          scalability of the simple access nodes that are connected. The IGP
          must be link state based. Each aggregation area must be a separated
          area. All routes that are interarea should use an EGP to keep the
          IGP small. The aggregation node must have the full scalability
          concerning control plane and forwarding. The support of load
          balancing for layer 2 services must be implemented.</t>
        </section>

        <section title="Core">
          <t>The core connects the aggregation areas. The core network
          elements must have the full scalability concerning control plane and
          forwarding. The IGP must be link state based. The core area must not
          include routes from aggregation areas. All routes that are interarea
          should use an EGP to keep the IGP small. Each area of the link state
          based IGP should have less than 2000 routes. The support of load
          balancing for layer 2 services must be implemented.</t>
        </section>
      </section>

      <section title="Multicast">
        <t>Compared with unicast connectivity Multicast is more dynamic. User
        generated messages - like joining or leaving multicast groups - are
        interacting directly with network components in the access and
        aggregation network (in order to build the corresponding forwarding
        states). This leads to the need for a highly dynamic handling of
        messages on access and aggregation nodes. Nevertheless the core
        network SHOULD be stable and state changes triggered by user generated
        messages SHOULD be minimized. This rises the need for an hierarchy for
        the P2MP support in Seamless MPLS hiding the dynamic behaviour of the
        access and aggregation nodes</t>

        <t><list style="symbols">
            <t>mLDP</t>

            <t>P2MP RSVP-TE</t>
          </list></t>
      </section>

      <section title="Availability">
        <t>All network elements should be high available (99.999%
        availability). Outage times should be as low as possible. A repair
        time of 50 milliseconds or less should be guarantied at all nodes and
        lines in the network that are redundant. Fast convergence features
        SHOULD be used in all control plane protocols. Local Repair functions
        SHOULD be used wherever possible. Full redundancy is required at all
        equipment that is shared in a network element.</t>

        <t><list style="symbols">
            <t>Power Supply</t>

            <t>Switch Fabric</t>

            <t>Routing Processor</t>
          </list>A change from an active component to a standby component
        SHOULD happen without effecting customers traffic. The Influence of
        customer traffic MUST be as low as possible.</t>
      </section>

      <section title="Scalability">
        <t>The network must be highly scalable. As a minimum requirement the
        following scalability figures should be met:</t>

        <t><list style="symbols">
            <t>Number of aggregation domains: 100</t>

            <t>Number of backbone nodes: 1.000</t>

            <t>Number of aggregation nodes: 10.000</t>

            <t>Number of access nodes: 100.000</t>
          </list></t>
      </section>

      <section title="Stability">
        <t><list style="symbols">
            <t>The platform should be stable under certain circumstances (e.g.
            missconfiguration within one area should not cause instability in
            other areas).</t>

            <t>Differentiate between &ldquo;All Loopbacks and Link addresses
            should be ping able from every where." Vs. &ldquo;Link addresses
            are not necessary ping able from everywhere".</t>
          </list></t>
      </section>
    </section>

    <!-- This PI places the pagebreak correctly (before the section title) in the text output. -->

    <?rfc needLines="8" ?>

    <section title="Architecture">
      <section title="Overall">
        <t>One of the key questions that emerge when designing an architecture
        for a seamless MPLS network is how to handle the sheer size of the
        necessary routing and MPLS label information control plane and
        forwarding plane state resulting from the stated scalability goals
        especially with respect to the total number of access nodes. This
        needs to be done without overwhelming the technical scaling limits of
        any of the involved nodes in the network (access, aggregation and
        core) and without introducing too much complexity in the design of the
        network while at the same time still maintaining good convergence
        properties to allow for quick MPLS transport and service restoration
        in case of network failures.</t>
      </section>

      <section title="Multi-Domain MPLS networks">
        <t>The key design paradigm that leads to a sound and scalable solution
        is the divide and conquer approach, whereby the large problem is
        decomposed into many smaller problems for which the solution can be
        found using well-known standard architectures.</t>

        <t>In the specific case of seamless MPLS the overall MPLS network
        SHOULD be decomposed into multiple MPLS domains, each well within the
        scaling limits of well-known architectures and network node
        implementations. From an organizational and operational point of view
        it MAY make sense to define the boundaries of such domains along the
        pre-existing boundaries of aggregation networks and the core
        network.</t>

        <t>Examples of how networks can be decomposed include using IGP areas
        as well as using multiple BGP autonomous systems.</t>
      </section>

      <section title="Hierarchy">
        <t>These MPLS domains SHOULD then be then be connected into an MPLS
        multi-domain network in a hierarchical fashion that enables the
        seamless exchange of loopback addresses and MPLS label bindings for
        transport LSPs across the entire MPLS internetwork while at the same
        time preventing the flooding of unnecessary routing and label binding
        information into domains or parts of the network that do not need
        them. Such a hierarchical routing and forwarding concept allows a
        scalability in different dimensions and allows to hide the complexity
        and size of the aggregation and access networks.</t>
      </section>

      <section title="Intra-Domain Routing">
        <t>The intra-domain routing within each of the MPLS domains (i.e.
        aggregation domains and core) SHOULD utilize standard IGP protocols
        like OSPF or ISIS. By definition, each of these domains is small
        enough so that there are no relevant scaling limits within each IGP
        domain, given well-known state-of-the-art IGP design principles and
        recent router technology.</t>

        <t>The intra-domain MPLS LSP setup and label distribution SHOULD
        utilize standard protocols like LDP or RSVP.</t>
      </section>

      <section title="Inter-Domain Routing">
        <t>The inter-domain routing is responsible for establishing
        connectivity between and across all MPLS domains. The inter-domain
        routing SHOULD establish a routing and forwarding hierarchy in order
        to achieve the scaling goals of seamless MPLS. Note that the IP
        aggregation usually performed between region (IGP areas/AS) in IP
        routing does not work for MPLS as MPLS is not capable of aggregating
        FEC (because MPLS forwarding use an exact match lookup, while IP uses
        longest match).</t>

        <t>Therefore it is RECOMMENDED to utilize protocols that support
        indirect next-hops ( e.g. using BGP to carry MPLS label information
        <xref target="RFC3107"/> ).</t>
      </section>

      <section title="Access">
        <t>Compared to the aggregation and core parts of the Seamless MPLS
        network the access part is special in two respects:</t>

        <t><list style="symbols">
            <t>The number of ndes in the access is at least one order of
            magnitude higher than in any other part of the network.</t>

            <t>Because of the large quantity of access nodes, the cost of
            these nodes is extremly relevant for the overall costs of the
            entire network, i.e. acess nodes are very cost sensitive.</t>
          </list>This makes it desirable to design the architecture such that
        the AN functionality can be kept as simple as possible. This should
        always be kept in mind when evalulating different seamless MPLS
        architectures. The goal is to limit both the number of different
        protocols needed on the AN as well as the scale to which each protocol
        must perform to the absolute minimum.</t>
      </section>
    </section>

    <!-- This PI places the pagebreak correctly (before the section
         title) in the text output. -->

    <?rfc needLines="8" ?>

    <section title="Deployment Scenarios">
      <t>This section describes the deployment scenarios based on the use
      cases and the generic architecture above.</t>

      <section title="Deployment Scenario #1">
        <t>Section describing the Seamless MPLS implementation of a large
        european ISP.</t>

        <section title="Overview">
          <t>This deployment scenario describes one way to implement a
          seamless MPLS architecture. Specific to this implementation is the
          choice of intra- and inter-domain routing and label distribution
          protocols, as well as the details of the interworking of these
          protocols to achieve the overall scalable hierarchical
          architecture.</t>
        </section>

        <section title="General Network Topology">
          <t>There are multiple aggregation domains (in the order of up to
          100) connected to the core in a star topology, i.e. aggregation
          domains are never connected among themselves, but only to the core.
          The core has its own domain.</t>

          <figure align="center" anchor="deploy01"
                  title="Deployment Scenario #1">
            <artwork><![CDATA[
           +-------+   +-------+   +------+   +------+
           |       |   |       |   |      |   |      |
        +--+ AGN11 +---+ AGN21 +---+ ABR1 +---+ LSR1 +--> to AGN
       /   |       |  /|       |   |      |   |      |
+----+/    +-------+\/ +-------+   +------+  /+------+
| AN |              /\                     \/     |
+----+\    +-------+  \+-------+   +------+/\ +------+
       \   |       |   |       |   |      |  \|      |
        +--+ AGN12 +---+ AGN22 +---+ ABR2 +---+ LSR2 +--> to AGN
           |       |   |       |   |      |   |      |
           +-------+   +-------+   +------+   +------+

static route     ISIS L1 LDP             ISIS L2 LDP

<-Access-><--Aggregation Domain--><---------Core---------> 
]]></artwork>
          </figure>

          <t>As shown in <xref target="deploy01"/>, the access nodes (AN) are
          connected to the aggregation network via aggregation nodes called
          AGN1x, either to a single AGN1x or redundantly to two AGN1x. Each
          AGN1x has redundant uplinks to a pair of second-level aggregation
          nodes called AGN2x.</t>

          <t>Each aggregation domain is connected to the core via exactly two
          border routers (ABR) on the core side. There can be multiple AGN2
          pairs per aggregation domain, but only one ABR pair for each
          aggregation domain. Each of the AGN2 in an AGN2 pair connects to one
          of the ABRs in the ABR pair responsible for that aggregation
          domain.</t>

          <t>The ABRs on the core side have redundant connections to a pair of
          LSR routers.</t>

          <t>The LSR pair is also connected via a direct link.</t>

          <t>The core LSR are connected to other core LSR in a partly meshed
          topology so that there are disjunct, redundant paths from each LSR
          to each other LSR.</t>
        </section>

        <section title="Hierarchy">
          <t>As explained before, hierarchy is the key to a scalable seamless
          MPLS architecture. The hierarchy in this implementation is achieved
          by forming different MPLS domains for aggregation domains and core,
          where within each of these domains a fairly common MPLS deployment
          using ISIS as intradomain link-state routing protocol and using LDP
          for MPLS label distribution is used.</t>

          <t>These MPLS domains are mapped to ISIS areas as follows:
          Aggregation domains are mapped to ISIS L1 areas. The core is
          configured as ISIS L2. The border routers connecting aggregation and
          core are ISIS L1L2 and are referred to as ABRs. From a technical and
          operational point of view these ABRs are part of the core, althought
          they also belong to the respective aggregation domain purely from a
          routing protocol point of view.</t>

          <t>For the inter-domain routing BGP with MPLS labels is
          deployed<xref target="RFC3107"/>.</t>
        </section>

        <section title="Intra-Area Routing">
          <section title="Core">
            <t>The core uses ISIS L2 to distribute routing information for the
            loopback addresses of all core nodes. The border routers (ABR)
            that connect to the aggregation domains are also part of the
            respective aggregation ISIS L1 area and hence ISIS L1L2.</t>

            <t>LDP is used to distribute MPLS label binding information for
            the loopback addresses of all core nodes.</t>
          </section>

          <section title="Aggregation">
            <t>The aggregation domains uses ISIS L1 as intra-domain routing
            protocol. All AGN loopback addresses are carried in ISIS.</t>

            <t>As in the core, the aggregation also uses LDP to distribute
            MPLS label bindings for the loopback addresses.</t>
          </section>
        </section>

        <section title="Access">
          <t>Access nodes do not have their own domain or IGP area. Instead,
          they directly connect to the AGN1 nodes in the aggregation domain.
          To keep access devices as simple as possible, ANs do not participate
          in ISIS.</t>

          <t>Instead, each AN has two static default routes pointing to each
          of the AGN1 it is connected to. Appropriate techniques SHOULD be
          deployed to make sure that a given default route is invalidated when
          the link to an AGN1 or that node itself fails. Examples of such
          techniques include monitoring the pysical link state for loss of
          light/loss of frame, or using Ethernet link OAM or BFD <xref
          target="RFC5881"/>.</t>

          <t>The AGN1 MUST have a configured static route to the loopback
          address of each of the ANs it is connected to, because it cannot
          learn the AN loopback address in any other way. These static routes
          have to be monitored and invalidated if necessary using the same
          techniques as described above for the static default routes on the
          AN.</t>

          <t>The AGN1 redistributes these routes into ISIS for intra-domain
          reachability of all AN loopback addresses.</t>

          <t>LDP is used for MPLS label distribution between AGN1 and AN. In
          order to keep the AN control plane as lightweight as possible, and
          to avoid the necessity for the AN to store 100.000 MPLS label
          bindings for each upstream AGN1 peer, LDP is deployed in
          downstream-on-demand (DoD) mode, described below.</t>

          <t>To allow the label bindings received via LDP DoD to be installed
          into the LFIB on the AN without having the specific host route to
          the destination loopback address, but only a default route, use of
          the LDP Extension for Inter-Area Label Switched Paths <xref
          target="RFC5283"> </xref> is made.</t>

          <section title="LDP Downstream-on-Demand (DoD)">
            <t>LDP downstream-on-demand mode is specified in <xref
            target="RFC5036"/>. In this mode the upstream LSR will explicitly
            ask the downstream LSR for a label binding for a particular FEC
            when needed.</t>

            <t>The assumption is that a given AN will only have a limited
            number of services configured to an even more limited number of
            destinations, or egress LER. Instead of learning and storing all
            label bindings for all possible loopback addresses within the
            entire Seamless MPLS network, the AN will use LDP DoD to only
            request the label bindings for the FECs corresponding to the
            loopback addresses of those egress nodes to which it has services
            configured.</t>

            <t>More detailed description of LDP DoD use cases for MPLS access
            and list of required LDP DoD procedures in the context of Seamless
            MPLS design is included in <xref
            target="I-D.ietf-mpls-ldp-dod"/>.</t>
          </section>
        </section>

        <section title="Inter-Area Routing">
          <t>The inter-domain MPLS connectivity from the aggregation domains
          to and across the core domain is realized primarily using BGP with
          MPLS labels ("labled BGP/SAFI4" <xref target="RFC3107"/>). A very
          limited amount of route leaking from ISIS L2 into L1 is also
          used.</t>

          <t>All ABR and PE nodes in the core are part of the labeled iBGP
          mesh, which can be either full mesh or based on route reflectors.
          These nodes advertise their respective loopback addresses (which are
          also carried in ISIS L2) into labeled BGP.</t>

          <t>Each ABR node has labeled iBGP sessions with all AGN1 nodes
          inside the aggregation domain that they connect to the core. Since
          there are two ABR nodes per aggregation domain, this leads to each
          AGN1 node having an iBGP sessions with each of the two ABR. Note
          that the use of iBGP implies that the entire seamless MPLS
          internetwork is just a single AS to which all core and aggregation
          nodes belong. The AGN1 nodes advertise their own loopback addresses
          into labeled BGP, in addition to these loopbacks also being in ISIS
          L1.</t>

          <t>Additionally the AGN1 nodes also redistribute all the statically
          configured routes to the AN loopback addresses into labeled BGP.
          Note that as stated obove, the AGN1 MUST ask the AN for label
          bindings for the AN loopback FECs via LDP DoD in order to have a
          valid labeled route with a non-null label.</t>

          <t>This architecture results in carrying all loopbacks of all nodes
          except pure P nodes (AN, AGN, ABR and core PE) in labeled BGP, e.g.
          there will be in the order of 100.000 routes in labeled BGP when
          approaching the stated scalability goal. Note that this only affects
          the BGP RIB size and does not necessarily imply that any node needs
          to actually have active forwarding state (LFIB) in the same order of
          magnitude. In fact, as will be discussed in the scalability
          analysis, no single node needs to install all labeled BGP routes
          into the LFIB, but each node only needs a small percentage of the
          RIB as active forwarding state in the LFIB. And from a RIB point of
          view, BGP is known to scale to hundreds of thousands of routes.</t>
        </section>

        <section title="Labeled iBGP next-hop handling">
          <t>The ABR nodes run labeled iBGP both to the core mesh as well as
          to the AGN1 nodes of their respective aggregation domains. Therefore
          they operate as iBGP route reflectors, reflecting labeled routes
          from the aggregation into the core and vice versa.</t>

          <t>When reflecting routes from the core into the aggregation domain,
          the ABR SHOULD NOT change the BGP NEXT-HOP addresses
          (next-hop-unchanged). This is the usual behaviour for iBGP route
          reflection. In order to make these routes resolvable to the AGN1
          nodes inside the aggregation domain, the ABR MUST leak all other ABR
          and core PE loopback addresses from ISIS L2 into ISIS L1 of the
          aggregation domain. Note that the number of leaked addresses is
          limited so that the overall scalability of the seamless MPLS
          architecture is not impacted. In the worst case all core loopback
          addresses COULD be leaked into ISIS L1, but even that would not be a
          scalability problem.</t>

          <t>When reflecting routes from the aggregation into the core, the
          ABR MUST set then BGP NEXT-HOP to its own loopback addresses
          (next-hop-self). This is not the default behaviour for iBGP route
          reflection, but requires special configuration on the ABR. Note that
          this also implies that the ABR MUST allocate a new local MPLS label
          for each labeled iBGP FEC that it reflects from the aggregation into
          the core. This special next-hop handling is essential for the
          scalability of the overall seamless MPLS architecture since it
          creates the required hierarchy and enables the hiding of all
          aggregation and access addresses behind the ABRs from an IGP point
          of view. Leaking of aggregation ISIS L1 loopback addresses into ISIS
          L2 is not necessary and MUST NOT be allowed.</t>

          <t>The resulting hierarchical inter-domain MPLS routing structure is
          similar to the one described in <xref target="RFC4364"/> section
          10c, only that we use one AS with route reflection instead of using
          multiple ASes.</t>
        </section>

        <section title="Network Availability">
          <t>The seamless mpls architecture guarantees a sub-second loss of
          connectivity upon any link or node failures. Furthermore, in the
          vast majority of cases, the loss of connectivity is limited to
          sub-50msec.</t>

          <t>These network availability properties are provided without any
          degradation on scale and simplicity. This is a key achievement of
          the design.</t>

          <t>In the remainder of this section, we first introduce the
          different network availability technologies and then review their
          applicability for each possible failure scenario.</t>

          <section title="IGP Convergence">
            <t>IGP convergence can be modelled as a linear process with an
            initial delay and a linear FIB update <xref target="ACM01"/>.</t>

            <t>The initial delay could conservatively be assumed to be
            260msec: 50msec to detect failures with BFD (most failures would
            be detected faster with loss of light for example or with faster
            BFD timers), 50msec to throttle the LSP generation, 150msec to
            throttle the SPF computation (making sure than all the required
            LSP&rsquo;s are received even in case of SRLG failures) and 10msec
            for shortest-path-first tree computation.</t>

            <t>Assuming 250usec per update (conservative), this allows for
            (1000-260)/0.250= 2960 prefixes update within a second following
            the outage. More precisely, this allows for 2960 important IGP
            prefixes updates. Important prefixes are automatically classified
            by the router implementation through simple heuristic (/32 is more
            important than non-/32).</t>

            <t>The number of IGP important routes (loopbacks) in deployment
            case study 1 is much smaller than 2960, and hence sub-second IGP
            convergence is conservative.</t>

            <t>IGP convergence is a simple technology for the operator
            provided that the router vendor optimizes the default IGP behavior
            (no need to tune any arcane knob).</t>
          </section>

          <section title="Per-Prefix LFA FRR">
            <t>A per-prefix LFA for a destination D is a precomputed backup
            IGP nexthop for that destination. This backup IGP nexthop can be
            link protecting or node protecting <xref target="RFC5286"/>.</t>

            <t>The analysis of the applicability of Per-Prefix LFA in the
            deployment model 1 of Seamless MPLS architecture is
            straightforward thanks to <xref target="RFC6571"/>.</t>

            <t>In deployment model 1, each aggregation network either follows
            the triangle or full-mesh topology. Further more, the backbone
            region implements a dual-plane. As a consequence, the failure of
            any link or node within an aggregation domain is protected by LFA
            FRR (sub-50msec) for all impacted IGP prefixes, whether intra-area
            or inter-area. No uloop may form as a result of these failures
            <xref target="RFC6571"/>.</t>

            <t>Per-Prefix LFA FRR is generally assessed as a simple technology
            for the operator <xref target="RFC6571"/>. It certainly is in the
            context of deployment case study 1 as the designer enforced
            triangle and full-mesh topologies in the aggregation network as
            well as a dual-plane core network.</t>
          </section>

          <section title="Hierarchical Dataplane and BGP Prefix Independent Convergence">
            <t>In a hierarchical dataplane, the FIB used by the packet
            processing engine reflects recursions between the routes. For
            example, a BGP route B recursing on IGP route I whose best path is
            via interface O is encoded as a hierarchy of FIB entry B pointing
            to a FIB entry I pointing to a FIB entry 0.</t>

            <t>BGP Prefix Independent Convergence <xref target="BGP-PIC"/>
            extends the hierarchical dataplane with the concept of a BGP
            Path-List. A BGP path-list may be abstracted as a set of primary
            multipath nhops and a backup nhop. When the primary set is empty,
            packets destined to the BGP destinations are rerouted via the
            backup nhop.</t>

            <t>For complete description of BGP-PIC technology and its
            applicability please refer to [BGP-PIC].</t>

            <t>Hierarchical data plane and BGP-PIC are very simple
            technologies to operate. Their applicability to any topology, any
            routing policy and any BGP unicast address family allows router
            vendors to enable this behavior by default.</t>
          </section>

          <section title="BGP Egress Node FRR">
            <t>BGP egress node FRR is a Fast ReRoute solution and hence relies
            on local protection and the precomputation and preinstallation of
            the backup path in the FIB. BGP egress node FRR relies on a
            transit LSR ( Point of Local Repair, PLR ) adjacent to the failed
            protected BGP router to detect the failure and re-route the
            traffic to the backup BGP router. Number of BGP egress node FRR
            schemes are being investigated: <xref target="PE-FRR"/>, <xref
            target="ABR-FRR"/>, <xref
            target="I-D.minto-2547-egress-node-fast-protection"/>, <xref
            target="I-D.bashandy-bgp-edge-node-frr"/>, <xref
            target="I-D.bashandy-idr-bgp-repair-label"/>, <xref
            target="I-D.bashandy-mpls-ldp-bgp-frr"/>, <xref
            target="I-D.bashandy-bgp-frr-mirror-table"/>, <xref
            target="I-D.bashandy-bgp-frr-vector-label"/>, <xref
            target="I-D.bashandy-isis-bgp-edge-node-frr"/>.</t>

            <t>Differences between these schemes relate to the way backup and
            protected BGP routers get associated, how the protected router's
            BGP state is signalled to the backup BGP router(s) and if any
            other state is required on protected, backup and PLR routers. The
            schemes also differ in compatibility with IP-FRR and TE-FRR
            schemes to enable PLR to switch traffic towards the backup BGP
            router in case of protected BGP router failure.</t>

            <t>In the Seamless MPLS design, BGP egress node FRR schemes can
            protect against the failures of PE, AGN and ABR nodes with no
            requirements on ingress routers.</t>
          </section>

          <section title="Assessing loss of connectivity upon any failure">
            <t>We select two typical traffic flows and analyze the loss of
            connectivity (LoC) upon each possible failure in the Seamless MPLS
            design in the deployment scenario #1.<list style="symbols">
                <t>Flow F1 starts from an AN1 in a left aggregation region and
                ends on an AN2 in a right aggregation region. Each AN is
                dual-homed to two AGN&rsquo;s.</t>

                <t>Flow F2 starts from a CE1 homed on L3VPN PE1 connected to
                the core LSRs and ends at CE2 dual-homed to L3VPN PE2 and PE3,
                both connected to the core LSRs.</t>
              </list></t>

            <t>Note that due to the symmetric network topology in case study
            1, uni-directional flows F1' and F2', associated with F1 and F2
            and forwarded in the reversed direction (AN2 to AN1 right-to-left
            and PE2 to PE1, respectively), take advantage of the same failure
            restoration mechanisms as F1 and F2.</t>

            <section title="AN1-AGN link failure or AGN node failure ">
              <t>F1 is impacted but LoC &lt;50msec is possible assuming fast
              BFD detection and fast-switchover implementation on the AN. F2
              is not impacted.</t>
            </section>

            <section title="Link or node failure within the left aggregation region">
              <t>F1 is impacted but LoC &lt;50msec thanks to LFA FRR. No uloop
              will occur during the IGP convergence following the LFA
              protection. Note: if LFA is not available (other topology then
              case study one) or if LFA is not enabled, then the LoC would be
              &lt; second as the number of impacted important IGP route in a
              seamless architecture is much smaller than 2960.</t>

              <t>F2 is not impacted.</t>
            </section>

            <section title="ABR node failure between left region and the core">
              <t>F1 is impacted but LoC &lt;50msec thanks to LFA FRR. No uloop
              will occur during the IGP convergence following the LFA
              protection.</t>

              <t>Note: This case is also called &ldquo;Local ABR
              failure&rdquo; as the ABR which fails is the one connected to
              the aggregation region at the source of flow F1.</t>

              <t>Note: remember that the left region receives the routes to
              all the remote ABR&rsquo;s and that the labelled BGP routes are
              reflected from the core to the left region with next-hop
              unchanged. This ensures that the loss of the (local) ABR between
              the left region and the core is seen as an IGP route impact and
              hence can be addressed by LFA.</t>

              <t>Note: if LFA is not available (other topology then case study
              one) or if LFA is not enabled, then the LoC would be &lt; second
              as the number of impacted important IGP routes in a seamless
              architecture is much smaller than 2960 routes.</t>

              <t>F2 is not impacted.</t>
            </section>

            <section title="Link or node failure within the core region">
              <t>F1 and F2 are impacted but LoC &lt;50msec thanks to LFA
              FRR.</t>

              <t>This is specific to the particular core topology used in
              deployment case study 1. The core topology has been optimized
              <xref target="RFC6571"/> for LFA applicability.</t>

              <t>As explained in <xref target="RFC6571"/>, another alternative
              to provide &lt;50msec in this case consists in using an MPLS-TE
              full-mesh and MPLS-TE FRR. This is required when the designer is
              not able or does not want to optimize the topology for LFA
              applicability and he wants to achieve &lt;50msec protection.</t>

              <t>Alternatively, simple IGP convergence would ensure a LoC &lt;
              second as the number of impacted important IGP routes in a
              seamless architecture is much smaller than 2960 routes.</t>
            </section>

            <section title="PE2 failure">
              <t>F1 is not impacted.</t>

              <t>F2 is impacted and the LoC is sub-300msec thanks to IGP
              convergence and BGP PIC.</t>

              <t>The detection of the primary nhop failure (PE2 down) is
              performed by a single-area IGP convergence.</t>

              <t>In this specific case, the convergence should be much faster
              than &lt;sec as very few prefixes are impacted upon an edge node
              failure. Reusing the introduction on IGP convergence presented
              in an earlier section and assuming 2 important impacted prefixes
              (two loopbacks per edge node), one would expect that PE2&rsquo;s
              failure is detected in 260msec + 2*0.250msec.</t>

              <t>If BGP PIC is used on the ingress PE ( PE1 ) then the LoC is
              the same as for IGP convergence. The LoC for BGP/L3VPN traffic
              upon PE2 failure is thus expected to be &lt;300msec.</t>

              <t>Provided that all the deployment considerations have been
              met, LoC is sub-50msec with BGP egress node FRR.</t>
            </section>

            <section title="PE2&rsquo;s PE-CE link failure">
              <t>F1 is not impacted.</t>

              <t>F2 is impacted and the LoC is sub-50msec thanks to local
              interface failure detection and local forwarding to the backup
              PE. Forwarding to the backup PE is achieved with hierarchical
              data plane and local-repair of BGP egress link providing fast
              re-route to the backup BGP nhop PE.</t>
            </section>

            <section title="ABR node failure between right region and the core">
              <t>F2 is not impacted.</t>

              <t>F1 is impacted. We analyze the LoC for F1 for both BGP PIC
              and BGP egress node FRR.</t>

              <t>LoC is sub-600msec thanks to BGP PIC.</t>

              <t>The detection of the primary nhop failure (ABR down) is
              performed by a multi-area IGP convergence.</t>

              <t>First, the two (local) ABR&rsquo;s between the left and core
              regions must complete the core IGP convergence. The analysis is
              similar to the loss of PE2. We would thus expect that the core
              convergence completes in ~260msec.</t>

              <t>Second, the IGP convergence in the left region will cause all
              AGN1 routers to detect the loss of the remote ABR. This second
              IGP convergence is very similar to the first one (2 important
              prefixes to remove) and hence should also complete in
              ~260msec.</t>

              <t>Once an AGN1 has detected the loss of the remote ABR, thanks
              to the BGP PIC, in-place modification of shared BGP path-list
              and pre-computation of BGP backup nhop, the AGN1 reroutes flow
              F1 via the alternate remote ABR in a few msec&rsquo;s
              [##BGP-PIC].</t>

              <t>As a consequence, the LoC for F1 upon remote ABR failure is
              thus expected to be &lt;600msec.</t>

              <t>Provided that all the deployment considerations have been
              met, LoC is sub-50msec with BGP egress node FRR.</t>
            </section>

            <section title="Link or node failure within the right aggregation region">
              <t>F1 is impacted but LoC &lt;50msec thanks to LFA FRR. No uloop
              will occur during the IGP convergence following the LFA
              protection.</t>

              <t>Note: if LFA is not available (other topology then case study
              one) or if LFA is not enabled, then the LoC would be &lt; second
              as the number of impacted important IGP route in a seamless
              architecture is much smaller than 2960.</t>

              <t>F2 is not impacted.</t>
            </section>

            <section title="AGN (connected to AN2) node failure">
              <t>F1 is impacted but LoC &lt;50msec thanks to LFA FRR. No uloop
              will occur during the IGP convergence following the LFA
              protection.</t>

              <t>Note: remember that AGN redistributes the static routes to
              ANs within ISIS. The loss of an AGN on the IGP path to AN2 is
              thus seen as an IGP route impact and hence LFA FRR is
              applicable.</t>

              <t>Note: if LFA is not available (other topology then case study
              one) or if LFA is not enabled, then the LoC would be &lt; second
              as the number of impacted important IGP route in a seamless
              architecture is much smaller than 2960.</t>

              <t>F2 is not impacted.</t>
            </section>

            <section title="AGN-AN2 link failure">
              <t>F2 is not impacted.</t>

              <t>F1 is impacted.</t>

              <t>LoC is sub-300msec with IGP convergence as only one prefix
              needs to be updated.</t>

              <t>Sub-50msec could be guaranteed provided that the LFA
              implementation supports a redistributed static as a native IGP
              route.</t>
            </section>

            <section title="AN2 failure">
              <t>F1 is impacted and the LoC lasts until the AN is
              recovered.</t>

              <t>F2 is not impacted.</t>
            </section>

            <section title="Summary - Loss of connectivity upon any failure">
              <t>The Seamless MPLS architecture illustrated in deployment case
              study 1 guarantees sub-50msec upon any link or node
              failures.</t>
            </section>
          </section>

          <section title="Network Resiliency and Simplicity">
            <t>A fundamental aspect of the Seamless MPLS architecture is the
            requirement for operational simplicity.</t>

            <t>In a network with 10k of IGP/BGP nodes and 100k of MPLS-enabled
            nodes, it is extremely important to provide a simple operational
            process.</t>

            <t>LFA FRR plays a key role in providing simplicity as it is an
            automated behavior which does not require any configuration or
            interoperability testing.</t>

            <t>More specifically, <xref target="RFC6571"/> plays a key role in
            the Seamless MPLS architecture as it describes simple design
            guidelines which determiniscally ensure LFA coverage for any link
            and node in the aggregation regions of the network. This is key as
            it provides for a simple &lt;50msec protection for the vast
            majority of the node and link failures (&gt;90% of the IGP/BGP3107
            footprint at least).</t>

            <t>If the guidelines cannot be met, then either the designer will
            rely on (1) augmenting native LFA coverage with remote LFA <xref
            target="I-D.draft-ietf-rtgwg-remote-lfa"/>, or (2) augmenting
            native LFA coverage with RSVP, or (3) a full-mesh TE FRR model, or
            (4) IGP convergence. The first option provides an automatic and
            fairly simple sub-50msec protection as LFA without introducing any
            additional protocols. The second option provides the same
            sub-50msec protection as LFA, but introduces additional RSVP LSPs.
            The thrid option optimizes for sub-50msec protection, but implies
            a more complex operational model. The fourth option optimizes for
            simple operation but only provides &lt;1 sec protection. Up to
            each designer to arbitrate between these three options versus the
            possibility to engineer the topology for native LFA
            protection.</t>

            <t>A similar choice involves protection against ABR node failure
            and L3VPN PE node failure. The designer can either use BGP PIC or
            BGP egress node FRR. Up to each designer to asssess the trade-off
            between the valuation of sub-50msec instead of sub-1sec versus
            additional operational considerations related to BGP egress node
            FRR.</t>
          </section>

          <section title="Conclusion">
            <t>The Seamless MPLS architecture illustrated in deployment case
            study 1 guarantees sub-50msec for majority of link and node
            failures by using LFA FRR, except ABR and L3PE node failures, and
            PE-CE link failure.</t>

            <t>L3VPN PE-CE link failure can be protected with sub-50msec
            restoration, by using hierarchical data plane and local-repair
            fast-reroute to the backup BGP nhop PE.</t>

            <t>ABR and L3PE node failure can be protected with sub-50msec
            restoration, by using BGP egress node FRR.</t>

            <t>Alternatively, ABR and L3PE node failure can be protected with
            sub-1sec restoration using BGP PIC.</t>
          </section>
        </section>

        <section title="BGP Next-Hop Redundancy">
          <t>An aggregation domain is connected to the core network using two
          redundant area boarder routers, and MPLS hierarchy is applied on
          these ABRs. MPLS hierarchy helps scale the FIB but introduces
          additional complexity for the rerouting in case of ABR failure.
          Indeed ABR failure requires a BGP converge to update the inner MPLS
          hierarchy, in addition to the IGP converge to update the outer MPLS
          hierarchy. This is also expected to take more time as BGP
          convergence is performed after the IGP convergence and because the
          number of prefixes to update in the FIB can be significant. This is
          clearly a drawback, but the architecture allows for two "local
          protection" solutions which restore the traffic before the BGP
          convergence takes place.</t>

          <t>BGP PIC would be required on all edge LSR involved in the inner
          (BGP) MPLS hierarchy. Namely all routers except the AN which are not
          involved in the inner MPLS hierarchy. It involves pre-computing and
          pre-installing in the FIB the BGP backup path. Such back up path are
          activated when the IGP advertise the failure of the primary path.
          For specification see [BGP-PIC1, 2##].</t>

          <t>BGP egress node FRR would be required on the egress LSR involved
          in the inner (BGP) MPLS hierarchy, namely AGN, ABR and L3VPN PEs.
          For specification see [PE-FRR], [ABR-FRR], [BGP-edge-FRR##].</t>

          <t>Both approaches have their pros and cons, and the choice is left
          to each Service Provider or deployment based on the different
          requirements. The key point is that the seamless MPLS architecture
          can handle fast restoration time, even for ABR failures.</t>
        </section>
      </section>

      <!-- End of Deployment Scenario #1 -->

      <section title="Scalability Analysis">
        <section title="Control and Data Plane State for Deployment Scenario #1">
          <section title="Introduction">
            <t>Let's call:</t>

            <t><list style="symbols">
                <t>#AN the number of Access Node (AN) in the seamless MPLS
                domain</t>

                <t>#AGN the number of AGgregation Node (AGN) in the seamless
                MPLS domain</t>

                <t>#Core the number of Core (Core) in the core network</t>

                <t>#Area the number of aggregation routing domains.</t>
              </list>Let's take the following assumptions:</t>

            <t><list style="symbols">
                <t>Aggregation equipments are equally spread across
                aggregation routing domains</t>

                <t>the number of IGP links is three times the number of IGP
                nodes</t>

                <t>the number of IGP prefixes is five times the number of IGP
                nodes (links prefixes + 2 loopbacks)</t>

                <t>Access Nodes need to set up 1000 (1k) LSPs. 10% (100) are
                FEC which are outside of their routing domain. Those 100
                remote FEC are the same for all Access Nodes of a given
                AGN.</t>
              </list>The following sections roughly evaluate the scalability,
            both in absolute numbers and relatively with the number of Access
            Node which is the biggest scalability factor.</t>
          </section>

          <section title="Core Domain">
            <t>The IGP &amp; LDP core domain are not affected by the number of
            access nodes:</t>

            <t hangText=""><list style="hanging">
                <t hangText="IGP:"><list>
                    <t>node : #Core ~ o(1)</t>

                    <t>links : 3*#Core ~ o(1)</t>

                    <t>IP prefixes : 5*#Core ~ o(1)</t>
                  </list></t>

                <t hangText="LDP FEC:"><list>
                    <t>#Core ~ o(1)</t>
                  </list></t>
              </list>Core TN FIBs grows linearly with the number of node in
            the core domain. In other word, they are not affected by AGN and
            AN nodes:</t>

            <t><list style="hanging">
                <t hangText="Core TN:"><list>
                    <t>IP FIB : 5*#Core ~ o(1)</t>

                    <t>MPLS LFIB : #Core ~ o(1)</t>
                  </list></t>
              </list>BGP carries all AN routes which is significant. However,
            all AN routes are only needed in the control plane, possibly in a
            dedicated BGP Route Reflector (just like for BGP/MPLS VPNs) and
            not in the forwarding plane. The number of routes (100k) is
            smaller than the number of number of routes in the Internet (300k
            and rising) or in major VPN SP (&gt;500k and rising) so the target
            can be handled with current implementations. In addition, AN
            routes are internal routes whose churn and instability is smaller
            and more under control than external routes.</t>

            <t><list style="hanging">
                <t hangText="BGP Route Reflector (RR)"><list>
                    <t>NLRI : #AN ~ o(n)</t>

                    <t>path : 2*#AN ~ o(2n)</t>
                  </list></t>
              </list>ABR handles both the core and aggregations routes. They
            do not depend on the total number of AN nodes, but only on the
            number of AN in their aggregation domain.</t>

            <t hangText="Core TN:"><list style="hanging">
                <t hangText="ABR:"><list>
                    <t>IP FIB : 5*#Core + (5*#AGN + #AN) / #Area ~ o(#AN
                    /#Area)</t>

                    <t>MPLS LFIB : #Core + (#AGN + #AN) / #Area ~ o(#AN /
                    #Area)</t>
                  </list></t>
              </list></t>
          </section>

          <section title="Aggregation Domain">
            <t>In the aggregation domain, IGP &amp; LDP are not affected by
            the number of access nodes outside of their domain. They are not
            affected by the total number of AN nodes:</t>

            <t><list style="hanging">
                <t hangText="IGP:"><list>
                    <t>node : #AGN / #Area ~ o(1)</t>

                    <t>links : 3*#AGN / #Area ~ o(1)</t>

                    <t>IP prefixes : #Core + #Area + (5*#AGN + #AN) / #Area ~
                    o(#AN *5/ #Area)</t>

                    <t><list style="symbols">
                        <t>+ 1 loopback per core node + one aggregate per area
                        + 5 prefixes per AGN in the area + 1 prefix per AN in
                        the area.</t>
                      </list></t>
                  </list></t>
              </list><list style="hanging">
                <t hangText="LDP FEC:"><list>
                    <t>Core + (#AGN + #AN) / #Area ~ o(#AN / #Area)</t>

                    <t><list style="symbols">
                        <t>+ 1 loopback per core node + 1 loopback per AGN
                        &amp; AN node in the area.</t>
                      </list></t>
                  </list></t>
              </list>AGN FIBs grows with the number of node in the core area,
            in their aggregation area, plus the number of inter domain LSP
            required by the AN attached to them. They do not depend on the
            total number of AN nodes. In the BGP control plane, AGN also needs
            to handle all the AN routes.</t>

            <t><list style="hanging">
                <t hangText="AGN:"><list>
                    <t>IP FIB : #Core + #Area + (5*#AGN + #AN) / #Area ~ o(#AN
                    *5/ #Area)</t>

                    <t>MPLS LFIB : #Core + (#AGN + #AN) / #Area + 100 ~ o(#AN
                    / #Area)</t>
                  </list></t>
              </list>AN FIBs grows with its connectivity requirement. They do
            not depend on the number of AN, AGN, SN or any others nodes.</t>

            <t><list style="hanging">
                <t hangText="AN:"><list>
                    <t>IP RIB : 1 ~ o(1)</t>

                    <t>MPLS LIB : 1k ~ o(1)</t>

                    <t>IP FIB : 1 ~ o(1)</t>

                    <t>MPLS LFIB : 1k ~ o(1)</t>
                  </list></t>
              </list></t>
          </section>

          <section title="Summary">
            <t>AN requirements are kept minimal. BGP is not required and the
            size of their FIB is limited to their own connectivity
            requirements.</t>

            <t>In the core area, IGP and LDP are not affected by the node in
            the aggregation domains. In particular they do not grow with the
            number of AGN or AN.</t>

            <t>In the aggregation areas, IGP and LDP are affected by the
            number of core nodes and the number of AGN and AN in their area.
            They are not affected by the total number of AGN or AN in the
            seamless MPLS domain.</t>

            <t>No FIB of any node is required to handle the total number of
            AGN or AN in the seamless MPLS domain. In other word, the number
            of AGN and AN in the seamless MPLS domain is not limited, if the
            number of areas can grow accordingly. The main limitation is the
            MPLS connectivity requirements on the AN, i.e. mainly the number
            of LSP needed on the AN. Another limitation may be the number of
            different LSP needed by AN attached or behind an AGN. However,
            given foreseen deployments and current AGN capabilities, this is
            not expected to be a limitation.</t>

            <t>In the control plane, BGP will typically handle all AN routes.
            This is significant but target deployments are well under current
            equipments capacities. In addition, if required, additional
            techniques could be used to improve this scalability, based on the
            experience gained with scaling BGP/MPLS VPN (e.g. route
            partitioning between RR planes, route filtering (static or dynamic
            with ORF or route refresh) between AN and on AGN to improve AGN
            scalability.</t>
          </section>

          <section title="Numerical application for use case #1">
            <t>As a recap, targets for deployment scenario 1 are:</t>

            <t><list style="symbols">
                <t>Number of Aggregation Domains 100</t>

                <t>Number of Backbone Nodes 1.000</t>

                <t>Number of AGgregation Nodes 10.000</t>

                <t>Number of Access Nodes 100.000</t>
              </list>This gives the following scaling numbers for each
            category of nodes:</t>

            <t><list style="symbols">
                <t>AN IP FIB 1</t>

                <t>AN MPLS LFIB 1 000</t>

                <t>AGN IP FIB 2 600</t>

                <t>AGN MPLS LFIB 2 200</t>

                <t>ABR IP FIB 7 600</t>

                <t>ABR MPLS LFIB 2 100</t>

                <t>TN IP FIB 5 000</t>

                <t>TN MPLS LFIB 1 000</t>

                <t>RR BGP NLRI 100 000</t>

                <t>RR BGP paths 200 000</t>
              </list></t>
          </section>

          <section title="Numerical application for use case #2">
            <t>As a recap, targets for deployment scenario 1 are:</t>

            <t><list style="symbols">
                <t>Number of Aggregation Domains 30</t>

                <t>Number of Backbone Nodes 150</t>

                <t>Number of AGgregation Nodes 1.500</t>

                <t>Number of Access Nodes 40.000</t>
              </list>This gives the following scaling numbers for each
            category of nodes:</t>

            <t><list style="symbols">
                <t>AN IP FIB 1</t>

                <t>AN MPLS LFIB 1 000</t>

                <t>AGN IP FIB 1 700</t>

                <t>AGN MPLS LFIB 1 800</t>

                <t>ABR IP FIB 3 700</t>

                <t>ABR MPLS LFIB 1 600</t>

                <t>TN IP FIB 750</t>

                <t>TN MPLS LFIB 150</t>

                <t>RR BGP NLRI 40 000</t>

                <t>RR BGP paths 80 000</t>
              </list></t>
          </section>
        </section>
      </section>
    </section>

    <section anchor="Acknowledgements" title="Acknowledgements">
      <t>Many people contributed to this document. The authors would like to
      thank Wim Henderickx, Robert Raszuk, Thomas Beckhaus, Wilfried Maas,
      Roger Wenner, Kireeti Kompella, Yakov Rekhter, Mark Tinka and Simon
      DeLord for their suggestions and review.</t>
    </section>

    <!-- Possibly a 'Contributors' section ... -->

    <section anchor="IANA" title="IANA Considerations">
      <t>This memo does not include any requests to IANA.</t>
    </section>

    <section anchor="security" title="Security Considerations">
      <t>The Seamless MPLS Architecture is subject to similar security threats
      as any MPLS LDP deployment. It is recommended that baseline security
      measures are considered as described in <xref target="RFC5920">Security
      Framework for MPLS and GMPLS networks</xref>, in the LDP specification
      <xref target="RFC5036">RFC5036</xref> and in <xref
      target="I-D.ietf-karp-routing-tcp-analysis"/>including ensuring
      authenticity and integrity of LDP messages, as well as protection
      against spoofing and Denial of Service attacks. Some deployments may
      require increased measures of network security if a subset of Access
      Nodes are placed in locations with lower levels of physical security
      e.g. street cabinets ( common practice for VDSL access ). In such cases
      it is the responsibility of the system designer to take into account the
      physical security measures ( environmental design, mechanical or
      electronic access control, intrusion detection ), as well as monitoring
      and auditing measures (configuration and Operating System changes,
      reloads, routes advertisements ).</t>

      <t>Security aspects specific to the MPLS access network based on LDP DoD
      in the context of Seamless MPLS design are described in the security
      section of <xref target="I-D.ietf-mpls-ldp-dod"/>.</t>
    </section>
  </middle>

  <!--  *****BACK MATTER ***** -->

  <back>
    <!-- References split into informative and normative -->

    <!-- There are 2 ways to insert reference entries from the citation libraries:
     1. define an ENTITY at the top, and use "ampersand character"RFC2629; here (as shown)
     2. simply use a PI "less than character"?rfc include="reference.RFC.2119.xml"?> here
        (for I-Ds: include="reference.I-D.narten-iana-considerations-rfc2434bis.xml")

     Both are cited textually in the same manner: by using xref elements.
     If you use the PI option, xml2rfc will, by default, try to find included files in the same
     directory as the including file. You can also define the XML_LIBRARY environment variable
     with a value containing a set of directories to search.  These can be either in the local
     filing system or remote ones accessed by http (http://domain/dir/... ).-->

    <references title="Normative References">
      <!--?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?-->

      &RFC2119;
    </references>

    <references title="Informative References">
      <!-- Here we use entities that we defined at the beginning. -->

      <?rfc include='reference.RFC.5881'?>

      <?rfc include='reference.I-D.bashandy-bgp-edge-node-frr'?>

      <?rfc include='reference.I-D.bashandy-bgp-frr-mirror-table'?>

      <?rfc include='reference.I-D.bashandy-bgp-frr-vector-label'?>

      <?rfc include='reference.I-D.bashandy-idr-bgp-repair-label'?>

      <?rfc include='reference.I-D.bashandy-isis-bgp-edge-node-frr'?>

      <?rfc include='reference.I-D.bashandy-mpls-ldp-bgp-frr'?>

      <?rfc include='reference.I-D.minto-2547-egress-node-fast-protection'?>

      &RFC3107;

      &RFC4364;

      &RFC5036;

      &RFC5283;

      &RFC5286;

      &I-D.ietf-mpls-ldp-dod;

      <reference anchor="I-D.draft-ietf-rtgwg-remote-lfa">
        <front>
          <title/>

          <author>
            <organization/>
          </author>

          <date/>
        </front>
      </reference>

      <reference anchor="PE-FRR">
        <front>
          <title>Fast Reroute in MPLS L3VPN Networks - Towards CE-to-CE
          Protection, MPLS 2006 Conference</title>

          <author fullname="Le Roux, J.L." initials="J.L." surname="Le Roux">
            <organization>Le</organization>
          </author>

          <author fullname="Decraene, B." initials="B." surname="Decraene">
            <organization/>

            <address>
              <postal>
                <street/>

                <city/>

                <region/>

                <code/>

                <country/>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri/>
            </address>
          </author>

          <author fullname="Ahmad, Z." initials="Z." surname="Ahmad">
            <organization/>

            <address>
              <postal>
                <street/>

                <city/>

                <region/>

                <code/>

                <country/>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri/>
            </address>
          </author>

          <date/>
        </front>
      </reference>

      <reference anchor="ABR-FRR">
        <front>
          <title>Local Protection for LSP tail-end node failure, MPLS World
          Congress 2009</title>

          <author fullname="Rekhter, Y" initials="Y." surname="Rekhter">
            <organization/>
          </author>

          <date/>
        </front>
      </reference>

      <reference anchor="ACM01">
        <front>
          <title>Archieving sub-second IGP convergence in large IP networks,
          ACM SIGCOMM Computer Communication Review, v.35 n.3</title>

          <author fullname="Pierre Francois">
            <organization/>
          </author>

          <author fullname="Clarence Filsfils">
            <organization/>

            <address>
              <postal>
                <street/>

                <city/>

                <region/>

                <code/>

                <country/>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri/>
            </address>
          </author>

          <author fullname="John Evans">
            <organization/>

            <address>
              <postal>
                <street/>

                <city/>

                <region/>

                <code/>

                <country/>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri/>
            </address>
          </author>

          <author fullname="Olivier Bonaventure">
            <organization/>

            <address>
              <postal>
                <street/>

                <city/>

                <region/>

                <code/>

                <country/>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri/>
            </address>
          </author>

          <date month="July" year="2005"/>
        </front>
      </reference>

      <reference anchor="BGP-PIC">
        <front>
          <title>BGP PIC, Technical Report</title>

          <author fullname="Cisco Systems">
            <organization/>
          </author>

          <date month="November" year="2007"/>
        </front>
      </reference>

      <reference anchor="RFC6571">
        <front>
          <title/>

          <author>
            <organization/>
          </author>

          <date/>
        </front>
      </reference>

      <reference anchor="I-D.ietf-karp-routing-tcp-analysis">
        <front>
          <title/>

          <author>
            <organization/>
          </author>

          <date/>
        </front>
      </reference>

      <reference anchor="RFC5920">
        <front>
          <title/>

          <author>
            <organization/>
          </author>

          <date/>
        </front>
      </reference>

      <!-- A reference written by by an organization not a person. -->
    </references>

    <!-- Change Log

v00 2006-03-15  EBD   Initial version

v01 2006-04-03  EBD   Moved PI location back to position 1 -
                      v3.1 of XMLmind is better with them at this location.
v02 2007-03-07  AH    removed extraneous nested_list attribute,
                      other minor corrections
v03 2007-03-09  EBD   Added comments on null IANA sections and fixed heading capitalization.
                      Modified comments around figure to reflect non-implementation of
                      figure indent control.  Put in reference using anchor="DOMINATION".
                      Fixed up the date specification comments to reflect current truth.
v04 2007-03-09 AH     Major changes: shortened discussion of PIs,
                      added discussion of rfc include.
v05 2007-03-10 EBD    Added preamble to C program example to tell about ABNF and alternative 
                      images. Removed meta-characters from comments (causes problems).  -->
  </back>
</rfc>
