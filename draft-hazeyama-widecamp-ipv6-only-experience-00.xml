<?xml version="1.0" encoding="US-ASCII"?>
<!-- This template is for creating an Internet Draft using xml2rfc,
     which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!-- One method to get references from the online citation libraries.
     There has to be one entity for each item to be referenced. 
     An alternate method (rfc include) is described in the references. -->

<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!--
<!ENTITY RFC2629 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2629.xml">
-->
<!--
<!ENTITY RFC3552 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3552.xml">
<!ENTITY RFC5226 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5226.xml">
-->
<!-- NAT -->
<!ENTITY RFC2663 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2663.xml">
<!-- source address selection -->
<!--
<!ENTITY RFC3484 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3484.xml">
-->
<!-- DHCP6 -->
<!ENTITY RFC3736 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3736.xml">
<!-- Basic transition mechanism / dual stack -->
<!ENTITY RFC4213 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4213.xml">
<!ENTITY RFC6106 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6106.xml">
<!-- DNS64 -->
<!ENTITY RFC6052 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6052.xml">
<!-- wrong DNS -->
<!ENTITY RFC4074 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4074.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs), 
     please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
     (Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space 
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<!--
<rfc category="info" docName="draft-hazeyama-widecamp-ipv6-only-experience-00" ipr="trust200902">
-->
<rfc category="info" docName="draft-hazeyama-widecamp-ipv6-only-experience-00" ipr="trust200902">

  <!-- category values: std, bcp, info, exp, and historic
     ipr values: trust200902, noModificationTrust200902, noDerivativesTrust200902,
        or pre5378Trust200902
     you can add the attributes updates="NNNN" and obsoletes="NNNN" 
     they will automatically be output with "(if approved)" -->

  <!-- ***** FRONT MATTER ***** -->

  <front>
    <!-- The abbreviated title is used in the page header - it is only necessary if the 
         full title is longer than 39 characters -->

    <title abbrev="Abbreviated Title">
	Experiences from an IPv6-Only Network in the WIDE Camp Autumn 2011
    </title>

    <!-- add 'role="editor"' below for the editors if appropriate -->

    <!-- Another author who claims to be an editor -->

    <author fullname="Hiroaki Hazeyama" initials="H." 
            surname="Hazeyama">
      <organization>NAIST</organization>

      <address>
        <postal>
          <street>Takayama 8916-5</street>

          <!-- Reorder these if your country does things differently -->

          <city>Nara</city>

          <region></region>

          <code></code>

          <country>Japan</country>
        </postal>

        <phone>+81 743 72 5216</phone>

        <email>hiroa-ha@is.naist.jp</email>

        <!-- uri and facsimile elements may also be added -->
      </address>
    </author>

    <author fullname="Yukito Ueno" initials="Y." 
            surname="Ueno">
      <organization>Keio Univ.</organization>

      <address>
        <postal>
          <street>5322 Endo</street>

          <!-- Reorder these if your country does things differently -->

          <city>Kanagawa</city>

          <region></region>

          <code></code>

          <country>Japan</country>
        </postal>

<!--        <phone>+81 743 72 5216</phone> -->

        <email>eden@sfc.wide.ad.jp</email>

        <!-- uri and facsimile elements may also be added -->
      </address>
    </author>


    <date year="2011" />

    <!-- If the month and year are both specified and are the current ones, xml2rfc will fill 
         in the current day for you. If only the current year is specified, xml2rfc will fill 
	 in the current day and month for you. If the year is not the current one, it is 
	 necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the 
	 purpose of calculating the expiry date).  With drafts it is normally sufficient to 
	 specify just the year. -->

    <!-- Meta-data Declarations -->

    <area>Operation and Management</area>

    <workgroup>Network Working Group</workgroup>

    <!-- WG name at the upperleft corner of the doc,
         IETF is fine for individual submissions.  
	 If this element is not present, the default is "Network Working Group",
         which is used by the RFC Editor as a nod to the history of the IETF. -->

    <keyword>IPv6 Only network, NAT64, DNS64, DHCP6, SA46T, 4RD</keyword>

    <!-- Keywords will be incorporated into HTML output
         files in a meta tag but they have no effect on text or nroff
         output. If you submit your draft to the RFC Editor, the
         keywords will be used for the search engine. -->

    <abstract>
      <t>
This document discusses our experiences from the IPv6 only network experiment with NAT64 and DNS64 in the WIDE camp Autumn 2011. The WIDE camp Autumn 2011 was held from September 6th to September 9th, 2011, with 153 participants.This document reports answers of questionnaire from participants, troubles and causes, with referring IETF's IPv6 only network experiences.
      </t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">
      <t>
<!--The original specification of xml2rfc format is in <xref
      target="RFC2629">RFC&nbsp;2629</xref>.
-->

This document discusses our experiences from the IPv6 only network experiment with NAT64 and DNS64 in the WIDE camp Autumn 2011. The WIDE camp Autumn 2011 was held from September 6th to September 9th, 2011, with 153 participants. The main purposes of our experiment in the WIDE camp were to grasp how much participants could live in the IPv6 only connectivity environment, and to clarify what kind problems would occurred on the operation through actual users' experiences of the IPv6 only connectivity brought by DHCP6 <xref target="RFC3736"></xref> and the 6to4 translation by DNS64 and NAT64. 

This document reports answers of questionnaire from 110 participants (71.9% of the whole participants), troubles reported to the NOC team and causes that the NOC team analyzed. Also, we refer to the IETF's IPv6 only network experiences <xref target="I-D.draft-arkko-ipv6-only-experience"></xref>, we try to clarify new issues on IPv6 transition operation.


      </t>


      <section title="Requirements Language">
        <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <xref
        target="RFC2119">RFC 2119</xref>.</t>
      </section>

    </section>

    <section title="Technology and Terminology">
<t>In this document, the following terms are used.  "NAT44" refers to any IPv4-to-IPv4 network address translation algorithm, both "Basic NAT" and "Network Address/Port Translator (NAPT)", as defined by <xref target="RFC2663"></xref>.

</t>

<t>"Dual Stack" refers to a technique for providing complete support for both Internet protocols -- IPv4 and IPv6 -- in hosts and routers <xref target="RFC4213"></xref>.</t>

<t> "NAT64" refers to a Network Address Translator - Protocol Translator defined in <xref target="RFC6052"></xref>, 
<xref target="I-D.ietf-behave-v6v4-framework"></xref>,
<xref target="I-D.ietf-behave-v6v4-xlate"></xref>,
<xref target="I-D.ietf-behave-v6v4-xlate-stateful"></xref>,
<xref target="I-D.ietf-behave-dns64"></xref>,
<xref target="I-D.ietf-behave-ftp64"></xref>.
</t>

<t> "SA46T" refers to Stateless Automatic IPv4 over IPv6 Tunneling defined in 
<xref target="I-D.draft-matsuhira-sa46t-motivation"></xref>,
<xref target="I-D.draft-matsuhira-sa46t-as"></xref>,
<xref target="I-D.draft-matsuhira-sa46t-spec"></xref>,
<xref target="I-D.draft-matsuhira-sa46t-gaddr"></xref>,
<xref target="I-D.draft-matsuhira-sa46t-applicability"></xref>,
<xref target="I-D.draft-matsuhira-sa46t-mcast"></xref>.
</t>

<t>"4RD" refers to IPv4 Residual Deployment on IPv6 Infrastructure defined in <xref target="I-D.draft-murakami-softwire-4rd"></xref>.</t>
    </section>

    <section title="Network and Experiment Setup">
<t>
The WIDE camp autumn 2011 was held at Mastushiro Royal Hotel in Nagano Prefecture of Japan from September 6th to September 9th, 2011. 
We set up the IPv6 only network as the main conference network connectivity. 
The conference network connectivity were mainly served as wireless networks. 
The served IPv6 only network was not a pure IPv6 only network because most participants had not IPv6 environment on his / her organization, yet. Therefore, we served an IPv6 connectivity with 6to4 translation mechanisms, that is, with NAT64 and DNS64. 
</t>
<t>
153 participants joined in the conference and tried the IPv6 only connectivity through their own devices, such as Laptop PCs, smart phones, and so on at September 6th and 7th, 2011.
Participants reported their experiences or troubles through questionnaire, emails, and / or directly claims to the NOC team.
</t>
<t> 
As a last resort for IPv4 only OSes or applications, we prepared a global IPv4 network through SA46T. 
From the afternoon of September 7th 2011, we additionally provided a private IPv4 network through 4RD.</t>



      <figure align="center" anchor="xml_topology">
        <artwork align="left"><![CDATA[
    +--------+              +-----------+     
    |SA46T-GW|--(v4)----+   |v6tunnel-gw|     
    |        |--(v6)-+  |   +-----------+     
    +--------+       |  |     |(v6)  |(v6)    
                 +----------------------------------+          +---+
     +-----------|              router              |--(dual)--|DNS|
     |           +----------------------------------+          +---+
     |                   |             |(v6) |(v4)
     |                   |            +--------+
    (v6)              (dual)          |  NAT64 | 
     |                   |            +--------+
     |               +---------+      +---------------+
     |               | WIDE BB |-(v4)-| IPv4 Internet |
     |               +---------+      +---------------+
     |                     |(v6)
     |              +---------------+
     |              | IPv6 Internet |
 +---------+        +---------------+
 |satellite|               |(v6)
 +---------+           +-------+
     |                 |  ONU  |
     |                 +-------+
     |                     |(v6)
     |               +-------------+
     |               | v6tunnel-gw |
     |               +-------------+
     |                     |(v6)
     |                 +--------+        +-----+
     +-----------------| router |--(v6)--|DNS64|
                       +--------+        +-----+
                        |(v6) |       
  +-----+        +--------+   |       +-----+
  |DHCP4|        |SA46T-GW|  (v6)     |DHCP6|
  +-----+        +--------+   |       +-----+
     |(v4)              |(v4) |          |(v6)
   ----------------- user access -----------------
            ]]></artwork>
        <postamble>The Basic Network Topology.</postamble>
      </figure>

      <section title="The IPv6-Only Network">
<t>Here, we explain the basic configurations on the IPv6-Only network on the WIDE camp.</t>

        <section title="External Links">
<t>
Figure. 1 shows the basic network topology of the WIDE camp autumn 2011.
We announced the IPv6 and IPv4 addresses on the conference network from the WIDE backbone's address block.
The conference network had two IPv6-Only external lines; one was an IPv6-Only network through a portable satellite base station, the other was an IPv6 Internet service on a FTTH line.</t>

<t>On the FTTH line, we set up an IPv6 tunnel between the hotel and Keio university Shonan Fujisawa Campus (SFC). The main user access VLAN was routed through this line, both the IPv6 network and the IPv4 network by SA46T. 
We tested two types of IPv6 services provided by NTT East as an access carrier, Internet MultiFeed as a virtual network enabler, and IIJ as an IPv6 ISP. The IPv6 network on the FTTH external line was served through Native method <xref target="YasudaAPRICOT2011"></xref>. 


From 2:00 PM of September 5th to 8:00 PM of September 6th (JST), we used a Flet' s Hikari Next with IPv6 option. 
The IPv6 address on the v6tunnel gateway were assigned from RA with /64 prefix.

From 8:00 PM of September 6th (JST), we changed the setting of the external line service to a Flet's Hikari Next with IPv6 option and a Hikari phone option, for the 4RD experiment, as drawn in Figure 2. 
The differences brought by Hikari phone option were as follows; i) an additional home gateway was added, ii) the IPv6 address delegation method was changed from RA with /64 prefix length to DHCP6<xref target="RFC3736"></xref> with /48 prefix length.
</t>

<t>On the other hand, the satellite line directly connected between the router on the hotel and the router on SFC. The satellite line transferred another IPv6 network VLAN. </t>
        </section>

        <section title="IPv6 Tunnel">
<t>
For the IPv6 routing by WIDE Project's IPv6 address block, 
we achieved an L2TP tunnel between the v6-tunnel gateway on the Matsushiro and that on SFC over the FTTH line. 
The v6-tunnel gateways were composed of Linux Debian squeeze (kernel
2.6.32) servers with our original L2TP for IPv6 implementation.
</t>
        </section>

        <section title="DHCP6">
<t>Global IPv6 addresses for users and the DNS64 address were provided through ISC's DHCP6 implementation <xref target="ISC-DHCP"></xref>. A user cloud automatically get the IPv6 connectivity through the IPv6 Router Advertisement Options for DNS Configuration<xref target="RFC6106"></xref>, if the DHCP6 implementation on the user's device worked well. Otherwise, a user had to set up DNS64 address as a resolver by manual. 
</t>
        </section>

        <section title="DNS64 and NAT64">
<t>We used linuxnat64 <xref target="linuxnat64"></xref> as the NAT64 implementation. DNS64 was built by ISC bind 9.8-p4 <xref target="bind"></xref>. As shown in Figure 1, we placed a DNS64 server on the hotel, on the other hand, NAT64 severs were settled on SFC side. 
</t>
        </section>


      </section>

      <section title="The IPv4 Networks">

        <section title="The IPv4 Network through SA46T">
<t>
As a last resort for IPv6 incapable OSes, devices and applications, we prepared an global IPv4 network through SA46T. 
We used a software implementation of SA46T developed by Fujitsu and Keio university. 
To conduct the capability tests of NAT64, DNS64 and DHCP6, the global IPv4 network was served as an option. 
A global IPv4 address was assigned to a user's device by registering the device's MAC address on a registration web page. 
We hid the registration web page from participants until 1:00 PM of September 7th (JST) to pursue the capability tests of NAT64, DNS64 and DHCP6. 
</t>
        </section>

        <section title="The IPv4 Network through 4RD">
<t>
We also held the capability test of 4RD implementations. 
On the midnight of September 6th, we reconstructed the external link as shown in Figure 2 to convey 4RD encapsulated packets. 
The 4RD-BR on the SFC side was composed of a vyatta 4RD implementation <xref target="vyatta-4RD"></xref>. 
On the hotel side, we used IIJ's SEIL 4RD implementation <xref target="SEIL"></xref> as 4RD gateway and 4RD-BR and 4RD-CE. 
We started the 4RD experiment to participants at 3:15 PM of September 7th (JST).

The 4RD-CE provided a private IPv4 network by DHCP4 and an IPv6 network by RA. The resolver was served through the DHCP4 function of the 4RD-CE.
</t>

      <figure align="center" anchor="xml_4rd">
        <artwork align="left"><![CDATA[
    +--------+              +-----------+               +---------+
    |SA46T-GW|--(v4)----+   |v6tunnel-gw|     +---(v4)--| 4RD-BR  |
    |        |--(v6)-+  |   +-----------+     | +-(v6)--| (vyatta)|
    +--------+       |  |     |(v6)  |(v6)    | |       +---------+
                 +----------------------------------+         +---+
     +-----------|              router              |--(dual)-|DNS|
     |           +----------------------------------+         +---+
     |                   |             |(v6) |(v4)
     |                   |            +--------+
    (v6)              (dual)          |  NAT64 |
     |                   |            +--------+
     |               +---------+      +---------------+
     |               | WIDE BB |-(v4)-| IPv4 Internet |
     |               +---------+      +---------------+
     |                     |(v6)
     |              +---------------+
     |              | IPv6 Internet |
 +---------+        +---------------+
 |satellite|          |(v6)                          
 +---------+      +-------+      +---+      +-------+      +------+
     |            |  ONU  |-(v6)-|HGW|-(v6)-|4RD-BR |-(v6)-|4RD-CE|
     |            +-------+      +---+      |(SEIL) |      |(SEIL)|
     |                                      +-------+      +------+
     |               +-------------+          |                |
     |               | v6tunnel-gw |--(v6)----+    ---user access---
     |               +-------------+               (v6 / private v4)
     |                     |(v6)                 
     |                 +--------+          +-----+
     +-----------------| router |---(v6)---|DNS64|
                       +--------+          +-----+
                        |(v6) |       
  +-----+        +--------+   |       +-----+
  |DHCP4|        |SA46T-GW|  (v6)     |DHCP6|
  +-----+        +--------+   |       +-----+
     |(v4)              |(v4) |          |(v6)
   ----------------- user access -------------------
            ]]></artwork>
        <postamble>The Network Topology with 4RD.</postamble>
      </figure>



        </section>
      </section> 
<!---
      <section title="Other Settings">
<t>Most server entities were constructed on a cloud / virtual machine environment. 
</t>
      </section> 
-->
    </section>

    <section title="Experiences from the Experiments">
      <section title="Answers of Questionnaire">
<t>
Here, we reports the answers of questionnaire about the experiments.
</t>


        <section title="The distributions of connectivities that participants used">

<t>
Table. 1 shows the distributions of used connectivities which participants answered. 

30 participants (19.6%) surely lived in the IPv6 only connectivity with NAT64 / DNS64 during the all conference days. 

7 participants, who used the v6 connectivity and the v4 connectivity through SA46T, were such participants who came to the NOC team in September 6th for the NOC team's help to be assigned the IPv4 connectivity.

33 participants, who replied that he / she used the IPv4 connectivity served by 4RD but did not use the IPv4 connectivity through SA46T, were such persons that needed the IPv4 connectivity but would not want to register his / her MAC address to be registered.

34 participants, who used both SA46T and 4RD IPv4 connectivity, would join the comparison test between SA46T and 4RD. 

</t>

        <texttable anchor="table_distributions" title="The distributions of connectivities that participants used">

<!--          <preamble>Tables use ttcol to define column headers and widths.
          Every cell then has a "c" element for its content.</preamble>
-->
          <ttcol align="center">Connectivities</ttcol>

          <ttcol align="center"># of participants (percentage) </ttcol>

          <c>v6 only</c>

          <c>30 (19.6 %)</c>

          <c>v6 only + SA46T </c>

          <c>7 (4.5 %)</c>

          <c>v6 + 4RD </c>

          <c>33 (21.5 %)</c>

          <c>v6 + SA46T + 4RD </c>

          <c>34 (22.2 %)</c>

          <c> avoidance to ans. </c>

          <c> 6 (3.9 %)  </c>

          <c> No response </c>

          <c> 43 (28.1 %)  </c>

<!--
          <postamble>which is a very simple example.</postamble>
-->
        </texttable>

        </section> 




        <section title="The satisfaction on the IPv6 only connectivity">

<t>
Table. 2 shows the satisfaction of participants about the IPv6 only connectivity. 
Different from the expectation by the NOC team, 90 participants (58.8%)
were satisfied in the IPv6 only connectivity. Especially, Windows 7 users and Mac OS X 10.7 (Lion) users were likely to reply good impressions because their DHCP6 functions worked well. On the other hand, older OS users, Layer 3 VPN users (IPSec, PPTP) and / or non-XMPP IM users were tend to escape into IPv4 connectivities. 
</t>

<t>
From the free comments on questionnaire, many users were surprised that the availability of the IPv6 only connectivity with NAT64 and DNS64 were much more comfortable than that they thought.
</t>
        <texttable anchor="table_satisfaction" title="The satisfaction on the IPv6 only connectivity">

<!--          <preamble>Tables use ttcol to define column headers and widths.
          Every cell then has a "c" element for its content.</preamble>
-->
          <ttcol align="center">Satisfaction</ttcol>

          <ttcol align="center"># of participants (percentage) </ttcol>

          <c>Very Comfortable</c>

          <c>19 (12.4 %)</c>

          <c>Comfortable </c>

          <c>52 (33.9 %)</c>

          <c>Satisfactory </c>

          <c>20 (13.0 %)</c>

          <c>Inconvenient </c>

          <c>13 (8.4 %)</c>

          <c> Unbearable </c>

          <c> 3 (1.9 %)  </c>

          <c> avoidance to ans. </c>

          <c> 3 (1.9 %)  </c>

          <c> No response </c>

          <c> 43 (28.1 %)  </c>

<!--
          <postamble>which is a very simple example.</postamble>
-->
        </texttable>

        </section> 


        <section title="The satisfaction on the network quality">

<t> 
Table. 3 shows distributions of answers about the satisfaction on the total network quality. 

92 participants (60.1 %) were satisfied with the quality on the conference network. Most of 15 participants, who answered inconvenient or unbearable, were such participants who had to log-in their companies or organizations' intranets through Layer 3 tunnels by IPv4 to read e-mails. 

</t>

        <texttable anchor="table_quality" title="The quality on the network">

<!--          <preamble>Tables use ttcol to define column headers and widths.
          Every cell then has a "c" element for its content.</preamble>
-->
          <ttcol align="center">Satisfaction</ttcol>

          <ttcol align="center"># of participants (percentage) </ttcol>

          <c>Very Comfortable</c>

          <c>14 (9.1 %)</c>

          <c>Comfortable </c>

          <c>57 (37.2 %)</c>

          <c>Satisfactory </c>

          <c>21 (13.7 %)</c>

          <c>Inconvenient </c>

          <c>13 (8.4 %)</c>

          <c> Unbearable </c>

          <c> 2 (1.3 %)  </c>

          <c> avoidance to ans. </c>

          <c> 3 (1.9 %)  </c>

          <c> No response </c>

          <c> 43 (28.1 %)  </c>

<!--
          <postamble>which is a very simple example.</postamble>
-->
        </texttable>

        </section> 


      </section> <!-- Answer of Questionnaire -->

      <section title="Reported Troubles">
<t>
Here, we summarize the reported troubles on the availability on the IPv6 network and IPv4 networks through SA46T and 4RD. 
</t>

       <section title="Troubles on the IPv6 capability of OSes and Devices">
<t>Reported troubles on the IPv6 capability of OSes were as follows.</t>

         <section title="Pains due to long fallback routine">
<t>Most commercial OSes checked IPv4 connectivity when the IPv4 property were enabled. The fallback routine spent a few minutes. Many participants claimed why the initial network setting consumed a few minutes and how to solve it. 
The long fall back routine was easily solved by turning off the IPv4 property on each OS. The NOC team provided several manuals for turning off / turning on the IPv4 property in several OSes.</t>
         </section><!-- Pains due to long fallback routine -->

         <section title="Pains due to lack of DHCP6 capability">

<t> Older version OSes such as Mac OS X 10.6 (snow leopard) and older did not have DHCP6 capability. Such users had to set up the DNS64 resolver address in manual. Several novice users were bothered with setting up the DNS resolver settings and requested the NOC team support to set up it. 
</t>
         </section> <!-- Pains due to lack of DHCP6 capability -->


         <section title="Pains due to the OS's incapability on IPv6 only setting">
<t> Windows XP could not work without the IPv4 property, therefore, Windows XP users had to set up a local proxy to resolve AAAA records through IPv4 localhost IPv4 address (127.0.0.1). These settings were difficult for most Windows XP users, many participants were tend to give up the IPv6 settings. Several participants contributed TIPS or setting instructions for such Windows XP users.</t>
<t>Android OS needed the IPv4 property on resolving names.</t>
         </section> <!-- Pains due to the OS's incapability on IPv6 only setting -->

         <section title="Pains due to the device's incapability for IPv6">
<t> Several devices, such as Apple's USB RJ45 Ethernet Port, did not have the IPv6 capability. Also, some participant reported he had to reinstall device drivers again and again.
</t>
        </section> <!-- Pains due to the device's incapability for IPv6 -->
         <section title="Failure of settings through GUI">
<t>
Some Mac Book Air user met the IPv6 settings disappeared in a few minutes after he set the IPv6 settings through GUI. 
Also, Think Pad' network setting manager could not set up IPv6 only setting through GUI appropriately. 
These failure of settings could be solved by setting through CLI commands. 
</t>
         </section> <!-- Failure of settings through GUI -->

       </section> <!-- failure of OS -->

      <section title="Troubles on Applications">
<t>Three kinds of troubles on applications were reported to the NOC team.</t>

       <section title="Pains due to IPv6 incapability on applications">
<t>
As well as Arkko's report on IETF IPv6 only connectivity experiments <xref target="I-D.draft-arkko-ipv6-only-experience"></xref>, most non-XMPP based IM applications and VoIP applications did not work. Skype and Window live messenger users claimed to the NOC team that they wanted or had to use such IMs in their business.
</t>
<t> Several applications on Windows did not work, such as CVSNT, NOD32 signature updates. In Mac OS X, non-COCOA framework applications did not work well.
</t>
<t> On the other hand, Most HTTP/XMPP based applications or communications were available or worked well, expect for such HTTP/XMPP based applications that might use IPv4 literals.
</t>

       </section> <!-- Pains due to IPv6 incapability on applications -->

       <section title="Failures due to incapability of protocol translation between IPv4 and IPv6">
<t>
IPSec-based applications, such as OpenVPN or Apple Mobile Me IPSec and PKI based communications, did not work on the 6to4 connections. 
PPTP clients did not work, too.
Also, some FTP clients did not work well on the v6 only connectivity with NAT64 / DNS64 and on the 4RD IPv4 connectivity.
</t>
       </section> <!-- Failures due to incapability of protocol translation between IPv4 and IPv6 -->

       <section title="Failures due to MTU mismatch problems">
<t>
During the setup on Sep. 5th, the NOC team met MTU problems. 
Several servers were hosted on the cloud (KVM) environment on the WIDE backbone (the WIDE Cloud). Basically, the WIDE Cloud backbone MTU
size was set 9000 for rapid live migration, however, MTU 9000 setting on KVM hyper-visors collapsed various communications in the set up day (Sep. 5th). Therefore, we set the MTU size of KVM hyper-visors to 1500.
</t>
<t>According to answers of questionnaire and reported troubles, various UDP based communications, such as a Remote KVM function of CISCO UCS server, did not still work well by MTU mismatch problems, not only on the  NAT64 / DNS64 environment, but also on the SA46T's 464 encapsulation. The NOC team could not find the actual MTU mismatch points during the conference days.
</t>
       </section> <!-- Failures due to MTU mismatch problems -->

     </section> <!-- Troubles on Applications -->

      <section title="Troubles on Name Resolution">
<t> The NOC team met several troubles on Name Resolution. Some of them were derived from typical mis-configurations. 
</t>

      <section title="Failures due to IPv4 address literals">
<t>
As well as Arkko's report on IETF IPv6 only connectivity experiments, failures due to IPv4 address literals occurred.
Many participants claimed they could not access to their IPv4 servers by IPv4 address literals through HTTP, SSH, VNC, IPSec, PPTP, IMAP, SMTP, and so on. Some of them were fixed by changing IPv4 address literals to name literals on the settings of their applications and / or by registering their IPv4 servers in DNS records. 
However, most of participants were not the administrators of their IPv4 servers or DNS servers. Thus, most of them escaped to the IPv4 connectivity served from the afternoon of Sep. 7th.
</t>
<t>
On the VNC, PPTP, IPSec and other VPN communications, many participants claimed that several applications did not work well both on IPv4 only servers and on IPv6 capable servers even when they changed the access manners to name literals. Those access failures might be affected by incapability for IPv6/IPv4 translation on VPN protocols or MTU mismatch problems against UDP based communications.
</t>
      </section><!-- Failures due to IPv4 address literals -->

      <section title="Failures due to lack of reverse lookup entries on AAAA records">
<t>
In the hot stage days, the NOC team detected several commercial web pages could not be accessed due to failure of reverse lookup. Therefore, we registered all reverse lookup AAAA records on the camp.wide.ad.jp domains.
</t>
      </section> <!-- Failures due to lack of reverse lookup entries on AAAA records -->

      <section title="Failures due to the lame delegation">
<t>
As mentioned above, some commercial web sites required the reverse lookup in AAAA records as well as in A records. Several participants claimed some commercial web pages cloud not be seen by failure of reverse lookup, although we registered all reverse lookup entries in AAAA about the camp.wide.ad.jp domain. We investigated the causes of the failure of reverse lookup, the cause was the lame delegation on the upper authoritative server of the DNS64 server (ns.wide.ad.jp) brought by a mis-configuration of bind. After the lame delegation was solved by an operator of ns.wide.ad.jp, problems on reverse lookup were fixed.
</t>
      </section> <!-- Failures due to the lame delegation -->

      <section title="Pains due to the overload of DNS64">
<t>
In September 8th, the NOC team changed the configuration of DNS64 to enable DNSSEC functions. 
After enabling DNSSEC, the DNS64 server, which was placed on a KVM virtual machine on the Matsushiro Royal hotel, was overwhelmed by handling many queries and key verifications. Then, participants hardly accessed to IPv4 Internet with DNS64.
</t>

<t>
Therefore, the NOC team moved the DNS64 server from the KVM environment
to a physical server, then, the overload on the DNS64 server was solved.
</t>
      </section> <!-- Pains due to the overload of DNS64 -->

      <section title="Failures due to inappropriate AAAA replies">
<t> Different from the IETF's experiment, the accessibility test of web pages were conducted by manual, that is, by actual web access of participants. 

Some web pages, especially search result pages of travel
reservation sites, could not access from the IPv6 network
through NAT64 / DNS64 translation. The reasons why connections
to such web pages failed were derived from inappropriate
DNS replies mentioned in <xref target="RFC4074"></xref>.
</t>
<t>
We observed ``Return Name Error'' mentioned in Section 4.2 of <xref target="RFC4074"></xref>, ``Return Other Erroneous Codes'' in Section 4.3 of
 <xref target="RFC4074"></xref>, and Return a Broken Response in Section 4.4 <xref target="RFC4074"></xref>, respectively.
We could not solve these problems in the conference days because these problems were derived from wrong behaviors of DNS resolvers on the web sites.
</t>
      </section> <!-- Failures due to inappropriate AAAA replies -->

      </section> <!-- Troubles on Name Resolution -->


      </section> <!-- reported trouble -->

    </section> <!-- experiment-->

    <section title="Lessons from the experiences on the WIDE camp">
<t> Here, we describe lessons or recommendations from the experiences on the WIDE camp for building or living in an IPv6 environment with NAT64 and DNS64.
</t>
      <t>
        <list style="symbols">
          <t>You SHOULD implement or enable the IPv6 capability into your site soon if it is possible, because NAT or NAPT environments might cause various problems such as MTU mismatch, low throughput, incapability on translation, and so on. Actually, some partner organizations of the WIDE project requested IPv6 address blocks soon after the WIDE camp.</t>

          <t>You SHOULD update or purchase OSes on your computers to the latest version, because Window 7 users and Mac OS X 10.7 (Lion) users did not meet critical troubles, and because older OS users met various troubles.</t>

          <t>You WOULD be better to register reverse AAAA lookup entries, because several commercial web sites require the reverse lookup.</t>

          <t>You SHOULD give sufficient resources to a DNS64 server, because the failure or overload of DNS64 server are critical for the accessibility to IPv4 Internet from IPv6 only network.</t>

          <t>You SHOULD check whether your web / DNS appliances return inappropriate AAAA replies or not, because some web appliances might return inappropriate AAAA replies and inappropriate AAAA replies can be solved by only administrators on web sites.</t>

          <t>You SHOULD take care of MTU size on multiple overlaid underlay networks because PMTUD might not work in some times.</t>
        </list> 
      </t>

    </section>

    <section title="Open Issues">

      <section title="PMTUD, MTU mismatch problems">
<t>
On the camp-net experiments, PMTUD, MTU mismatch problems occurred in several points. The NOC team and experiment team could not completely fix all MTU mismatch problems, therefore, several participants could not use UDP communications, such as a remote KVM function of a CISCO UCS server,  through the conference network or VPN tunnels.
</t>

<t>
These problems were mainly derived from the failure of Path MTU Discovery. In the operational problem to avoid the overload of routers or DDoS attacks, man y networks turn off PMTUD functions on routers.
However, many applications or implementations of tunneling / encapsulation protocols assume that the PMTUD would work.
</t>

<!--
<t>
One possible solution is that fragmentation is enabled on a router / an encapsulation entity even when DF bit is set.
Of course, such solution should be discussed in the IETF.
</t>
-->
<!--
<t>
Also, lack of trouble shooting tools for multiple overlaid underlay networks makes it difficult to detect the point of MTU mismatch.
Such trouble shooting tools should be developed.
</t>
-->
      </section>

      <section title="Inappropriate AAAA replies">
<t>
Inappropriate DNS replies pointed in <xref target="RFC4074"></xref> are one of open issues on the IPv6 transitions. 
Ideally, vendors SHOULD implement web / DNS appliances with taking care of <xref target="RFC4074"></xref> and network operators SHOULD replace all AAAA resolvers to appropriate AAAA resolvers. 

However, such solution will spend money, human resources, and time to deployment.
A possible  immediate solution is changing the fallback routines of DNS64 resolvers as follows;
</t>
      <t>
        <list style="symbols">
          <t>A DNS64 resolver resolves the A record even when a DNS reply contained NXDOMAIN or ServFail.</t>

          <t>A DNS64 resolver caches all possible A records. When a DNS reply was NOERROR, the DNS64 resolver queries the AAAA record.
If the AAAA record exists, then the DNS64 resolver returns the AAAA record to a client, and if not, the DNS64 resolver returns the cached A record to the client.</t>
        </list>
      </t>

<t>
These solutions would be required further discussion in appropriate working group. 
</t>
      </section>

    </section>

    <section title="Conclusion and Future Work">
<t>This experiment was the first time of WIDE Project on availability test of the IPv6 only connectivity with participants. Many participants replied good impressions, however, various issues were clarified through this experiment. We would like to store TIPS to operate the IPv6 only connectivity not only through the regular experiment on the WIDE camp, and also through the daily operation of the IPv6 only connectivity on the WIDE backbone.
</t>
    </section>


    <section anchor="Security" title="Security Considerations">
<t>
As well as Arkko mentioned in [I-D.draft-arkko-ipv6-only-experience-03],
the use of IPv6 instead of IPv4 by itself does not make a big
security difference. 
In our experience, we only set up following security functions; 
the access control list on routers / servers, DNSSEC, 
accounting on the wireless network access. 
</t>
    </section>

    <section anchor="IANA" title="IANA Considerations">
<t>
This document has no IANA implications.
</t>
    </section>




<!--
    <section anchor="Acknowledgements" title="Acknowledgements">
      <t>Here, we thank to 153 participants on this experiments.</t>

    </section>
-->
  </middle>

  <!--  *****BACK MATTER ***** -->

  <back>
    <!-- References split into informative and normative -->

    <!-- There are 2 ways to insert reference entries from the citation libraries:
     1. define an ENTITY at the top, and use "ampersand character"RFC2629; here (as shown)
     2. simply use a PI "less than character"?rfc include="reference.RFC.2119.xml"?> here
        (for I-Ds: include="reference.I-D.narten-iana-considerations-rfc2434bis.xml")

     Both are cited textually in the same manner: by using xref elements.
     If you use the PI option, xml2rfc will, by default, try to find included files in the same
     directory as the including file. You can also define the XML_LIBRARY environment variable
     with a value containing a set of directories to search.  These can be either in the local
     filing system or remote ones accessed by http (http://domain/dir/... ).-->

    <references title="Normative References">
      <!--?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?-->
      &RFC2119;

      &RFC2663; <!-- NAT -->
      &RFC3736; <!-- DHCP6 --> <!-- no ref in middle -->
      &RFC4213; <!-- ??? -->
      &RFC6106; <!-- ??? --> <!-- no ref in middle -->

    </references>

    <references title="Informative References">
      <!-- Here we use entities that we defined at the beginning. -->
<!--
      &RFC2629;
      &RFC3552;
      &RFC5226;
-->

      &RFC4074; <!-- inappropriate AAAA replies -->
      &RFC6052;

      <!-- A reference written by by an organization not a person. -->

      <reference anchor="YasudaAPRICOT2011"
                 target="http://meetings.apnic.net/__data/assets/pdf_file/0003/30981/Ayumu-Yasuda-apricot.pdf">
        <front>
          <title>Building for IPv6 by IPv6 Promotion Council Japan.</title>

          <author fullname="Ayumu Yasuda" initials="A."  surname="Yasuda">
            <organization>NTT East</organization>
          </author>

          <date year="February, 2011" />
          <keyword>http://meetings.apnic.net/__data/assets/pdf_file/0003/30981/Ayumu-Yasuda-apricot.pdf</keyword>
        </front>
      </reference>

      <reference anchor="I-D.draft-arkko-ipv6-only-experience"
                 target="draft-arkko-ipv6-only-experience-03 (work in progress)">
        <front>
          <title> Experiences from an IPv6-Only Network</title>

          <author initials="J."  surname="Arkko"></author>
          <author initials="A."  surname="Keranen"></author>

          <date year="April 2011" />
          <keyword>draft-arkko-ipv6-only-experience-03 (work in progress)</keyword>
        </front>
      </reference>



      <reference anchor="I-D.ietf-behave-v6v4-framework"
                 target="draft-ietf-behave-v6v4-framework-10 (work in progress)">
        <front>
          <title>Framework for IPv4/IPv6 Translation</title>

          <author initials="F."  surname="Baker"></author>
          <author initials="X."  surname="Li"></author>
          <author initials="C."  surname="Bao"></author>
          <author initials="K."  surname="Yin"></author>

          <date year="August 2010" />
          <keyword>draft-ietf-behave-v6v4-framework-10 (work in progress)</keyword>
        </front>
      </reference>


      <reference anchor="I-D.ietf-behave-dns64"
                 target="draft-ietf-behave-dns64-11 (work in progress)">
        <front>
          <title>DNS64: DNS extensions for Network Address Translation from IPv6 Clients to IPv4 Servers</title>

          <author initials="M."  surname="Bagnulo"></author>
          <author initials="A."  surname="Sullivan"></author>
          <author initials="P."  surname="Matthews"></author>
          <author initials="I."  surname="Beijnum"></author>

          <date year="October 2010" />
          <keyword>draft-ietf-behave-dns64-11 (work in progress)</keyword>
        </front>
      </reference>


      <reference anchor="I-D.ietf-behave-v6v4-xlate"
                 target="draft-ietf-behave-v6v4-xlate-23 (work in progress)">
        <front>
          <title>IP/ICMP Translation Algorithm</title>

          <author initials="X."  surname="Li"></author>
          <author initials="C."  surname="Bao"></author>
          <author initials="F."  surname="Baker"></author>

          <date year="September 2010" />
          <keyword>draft-ietf-behave-v6v4-xlate-23 (work in progress)</keyword>
        </front>
      </reference>


      <reference anchor="I-D.ietf-behave-v6v4-xlate-stateful"
                 target="draft-ietf-behave-v6v4-xlate-stateful-12 (work in progress)">
        <front>
          <title>Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers</title>

          <author initials="M."  surname="Bagnulo"></author>
          <author initials="P."  surname="Matthews"></author>
          <author initials="I."  surname="Beijnum"></author>

          <date year="July 2010" />
          <keyword> draft-ietf-behave-v6v4-xlate-stateful-12 (work in progress)</keyword>
        </front>
      </reference>

      <reference anchor="I-D.ietf-behave-ftp64"
                 target="draft-ietf-behave-ftp64-08 (work in progress)">
        <front>
          <title>An FTP ALG for IPv6-to-IPv4 translation</title>

          <author initials="I."  surname="Beijnum"></author>

          <date year="March 2011" />
          <keyword>  draft-ietf-behave-ftp64-08 (work in progress)</keyword>
        </front>
      </reference>


<!-- references for SA46T -->
      <reference anchor="I-D.draft-matsuhira-sa46t-as"
                 target="draft-matsuhira-sa46t-as-01 (work in progress)">
        <front>
          <title>Stateless Automatic IPv4 over IPv6 Tunneling with IPv4 Address Sharing</title>

          <author initials="N."  surname="Matsuhira"></author>

          <date year="April 2011" />
          <keyword> draft-matsuhira-sa46t-as-01 (work in progress)</keyword>
        </front>
      </reference>

      <reference anchor="I-D.draft-matsuhira-sa46t-gaddr"
                 target="draft-matsuhira-sa46t-gaddr-03 (work in progress)">
        <front>
          <title> Stateless Automatic IPv4 over IPv6 Tunneling: Global SA46T Address Format</title>

          <author initials="N."  surname="Matsuhira"></author>

          <date year="July 2011" />
          <keyword> draft-matsuhira-sa46t-gaddr-03 (work in progress)</keyword>
        </front>
      </reference>


      <reference anchor="I-D.draft-matsuhira-sa46t-mcast"
                 target="draft-matsuhira-sa46t-mcast-00 (work in progress)">
        <front>
          <title> SA46T Multicast Support</title>

          <author initials="N."  surname="Matsuhira"></author>

          <date year="September 2011" />
          <keyword> draft-matsuhira-sa46t-mcast-00 (work in progress)</keyword>
        </front>
      </reference>

      <reference anchor="I-D.draft-matsuhira-sa46t-motivation"
                 target="draft-matsuhira-sa46t-motivation-00 (work in progress)">
        <front>
          <title> Motivation for developing Stateless Automatic IPv4 over IPv6 Tunneling (SA46T)</title>

          <author initials="N."  surname="Matsuhira"></author>

          <date year="July 2011" />
          <keyword> draft-matsuhira-sa46t-motivation-00 (work in progress)</keyword>
        </front>
      </reference>


      <reference anchor="I-D.draft-matsuhira-sa46t-applicability"
                 target="draft-matsuhira-sa46t-applicability-02 (work in progress)">
        <front>
          <title> Applicability of Stateless automatic IPv4 over IPv6 Tunneling (SA46T)</title>

          <author initials="N."  surname="Matsuhira"></author>

          <date year="July 2011" />
          <keyword> draft-matsuhira-sa46t-applicability-02 (work in progress)</keyword>
        </front>
      </reference>

      <reference anchor="I-D.draft-matsuhira-sa46t-spec"
                 target="draft-matsuhira-sa46t-spec-03 (work in progress)">
        <front>
          <title>Stateless Automatic IPv4 over IPv6 Tunneling: Specification</title>

          <author initials="N."  surname="Matsuhira"></author>

          <date year="July 2011" />
          <keyword> draft-matsuhira-sa46t-spec-03 (work in progress)</keyword>
        </front>
      </reference>


<!-- reference to 4RD -->
      <reference anchor="I-D.draft-murakami-softwire-4rd"
                 target="draft-murakami-softwire-4rd-01 (work in progress)">
        <front>
          <title>Stateless Automatic IPv4 over IPv6 Tunneling: Specification</title>

          <author initials="T."  surname="Murakami"></author>
          <author initials="O."  surname="Troan"></author>
          <author initials="S."  surname="Matsushima"></author>

          <date year="September 2011" />
          <keyword>draft-murakami-softwire-4rd-01 (work in progress)</keyword>
        </front>
      </reference>


<!-- references to software -->

      <reference anchor="vyatta-4RD"
                 target="http://bougaidenpa.org/masakazu/archives/176">
        <front>
          <title>masakazu's weblog (In Japanese)</title>
          <author initials=""  surname="masakazu"></author>
          <date year="June 2011" />
        </front>
      </reference>


      <reference anchor="SEIL"
                 target="http://www.seil.jp/">
        <front>
          <title>SEIL</title>
          <author>
            <organization> Internet Initiative Japan </organization>
          </author>
            <date year="September 2011" /> 
        </front>
      </reference>


      <reference anchor="bind"
                 target="http://www.isc.org/software/bind">
        <front>
          <title>BIND</title>
          <author>
            <organization> Internet Systems Consortium. </organization>
          </author>
<!--          <keyword>http://www.isc.org/software/bind</keyword>-->
        </front>
      </reference>



      <reference anchor="ISC-DHCP"
                 target="http://www.isc.org/software/dhcp">
        <front>
          <title>DHCP</title>
          <author>
            <organization> Internet Systems Consortium. </organization>
          </author>
<!--          <keyword>http://www.isc.org/software/dhcp</keyword>-->
        </front>
      </reference>


      <reference anchor="linuxnat64"
                 target="http://linuxnat64.sourceforge.net/">
        <front>
          <title>Linux NAT64 implementation</title>
          <author>
            <organization>Geeknet, Inc.</organization>
          </author>
<!--          <keyword>http://linuxnat64.sourceforge.net/</keyword>-->
        </front>
      </reference>


    </references>

    <section anchor="app-additional" title="Acknowledgements">
      <t>Here, we thank to 153 participants of WIDE camp 2011 autumn on this experiments. We also say thank you to N. Matsuhira of Fujitsu for the SA46T implemnetation, H. Suenaga and K. Ooyatsu of IIJ for SEIL 4RD implementation, NTT EAST, Internet Multifeed, and IIJ for serving the commercial IPv6 Internet service for this experiment on the Matsushiro Royal Hotel.</t>
    </section>

  </back>
</rfc>
