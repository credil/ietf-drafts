<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="rfc2629.xslt"?>
<!DOCTYPE rfc SYSTEM 'rfc2629.dtd'>
<?rfc toc="yes"?>
<?rfc compact="no"?>
<?rfc subcompact="no"?>
<?rfc symrefs="yes" ?>
<?rfc sortrefs="yes"?>
<?rfc iprnotified="no"?>
<?rfc strict="yes"?>
<rfc ipr="trust200902"   category="std"
     docName="draft-ietf-netmod-system-mgmt-06" >
    <front>
    <title abbrev="YANG System Management">YANG Data Model for System Management</title>

    <author initials="A" surname="Bierman" fullname='Andy Bierman' >
      <organization>YumaWorks</organization>
      <address>
        <email>andy@yumaworks.com</email>
      </address>
    </author>
    <author initials="M" surname="Bjorklund" fullname='Martin Bjorklund' >
      <organization>Tail-f Systems</organization>
      <address>
        <email>mbj@tail-f.com</email>
      </address>
    </author>
	<date/>
    <abstract>
	<t>
This document defines a YANG data model for the configuration
and identification of the management system of a device.
	</t>
</abstract>
</front>
<middle>
<section title="Introduction">
    <t>
This document defines a YANG <xref target="RFC6020"/> data model for the
configuration and identification of some common properties
within the management system of a device.
    </t>
    <t>
Devices that are managed by NETCONF and perhaps other mechanisms
have common properties that need to be configured and monitored
in a standard way.
    </t>
    <t>
The &quot;ietf&#8209;system&quot; YANG module defined in this document provides the
following features:
    </t>
<t>
 <list style="symbols">
 <t>
system administrative data configuration
 </t>
 <t>
system identification monitoring
 </t>
 <t>
system time-of-day configuration and monitoring
 </t>
 <t>
user authentication configuration
 </t>
 <t>
local users configuration
 </t>
 </list>
</t>
<section title="Terminology">
    <t>
The keywords &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
&quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;NOT RECOMMENDED&quot;, &quot;MAY&quot;, and
&quot;OPTIONAL&quot; in this document are to be interpreted as described in BCP
14, <xref target="RFC2119"/>.
    </t>
<section title="Terms">
    <t>
The following terms are used within this document:
    </t>
<t>
 <list style="symbols">
 <t>
system: This term refers to the embodiment 
of the entire set of management interfaces that a 
single NETCONF server is supporting
at a given moment.  The set of physical entities
managed by a single NETCONF server can be static
or it can change dynamically.
 </t>
 </list>
</t>
</section>
</section>
<section title="Tree Diagrams">
    <t>
A simplified graphical representation of the data model is used in
this document.  The meaning of the symbols in these
diagrams is as follows:
    </t>
<t>
 <list style="symbols">
 <t>
Brackets &quot;[&quot; and &quot;]&quot; enclose list keys.
 </t>
 <t>
Abbreviations before data node names: &quot;rw&quot; means configuration
(read-write) and &quot;ro&quot; state data (read-only).
 </t>
 <t>
Symbols after data node names: &quot;?&quot; means an optional node and &quot;*&quot;
denotes a &quot;leaf&#8209;list&quot;.
 </t>
 <t>
Parentheses enclose choice and case nodes, and case nodes are also
marked with a colon (&quot;:&quot;).
 </t>
 <t>
Ellipsis (&quot;...&quot;) stands for contents of subtrees that are not shown.
 </t>
 </list>
</t>
</section>
</section>
<section title="Objectives">
<section title="System Identification">
    <t>
There are many common properties used to identify devices,
operating systems, software versions, etc. that need to 
be supported in the system data module.  
These objects are defined
as operational data and the information returned by the
server is intended to be specific to the
device vendor.
    </t>
    <t>
Some user-configurable administrative strings are also
provided, such as the system location and description.
    </t>
</section>
<section title="System Time Management">
    <t>
The management of the date and time used by the system
need to be supported.  Use of one or more NTP servers
to automatically set the system date and time need to be possible.
Utilization of the Timezone database <xref target="RFC6557"/>
also need to be supported. It should be possible
for the server, as well as clients, to configure the system
to use NTP.
    </t>
</section>
<section title="User Authentication">
    <t>
The authentication mechanism need to support password authentication over
RADIUS, to support deployment scenarios with centralized
authentication servers.  Additionally, local users need to be supported,
for scenarios when no centralized authentication server exists, or for
situations where the centralized authentication server cannot be
reached from the device.
    </t>
    <t>
Since the mandatory transport protocol for NETCONF is SSH
<xref target="RFC6242"/> the authentication model need to support
SSH&apos;s &quot;publickey&quot; and &quot;password&quot; authentication methods <xref target="RFC4252"/>.
    </t>
    <t>
The model for authentication configuration should be flexible enough
to support authentication methods defined by other standard documents
or by vendors. It should be possible
for the server, as well as clients, to configure the system
authentication properties.
    </t>
</section>
</section>
<section title="System Data Model">
<section title="System Identification">
    <t>
The data model for system identification has the following
structure:
    </t>
	<figure>
	    <artwork><![CDATA[
   +--rw system
      +--rw contact?          string
      +--rw hostname?         inet:domain-name
      +--rw location?         string
      +--ro platform
         +--ro os-name?       string
         +--ro os-release?    string
         +--ro os-version?    string
         +--ro machine?       string
	    ]]></artwork>
	</figure>
</section>
<section title="System Time Management">
    <t>
The data model for system time management has the following
structure:
    </t>
	<figure>
	    <artwork><![CDATA[
   +--rw system
      +--rw clock
      |  +--ro current-datetime?      yang:date-and-time
      |  +--ro boot-datetime?         yang:date-and-time
      |  +--rw (timezone)?
      |     +--:(timezone-location)
      |     |  +--rw timezone-location?     string
      |     +--:(timezone-utc-offset)
      |        +--rw timezone-utc-offset?   int16
      +--rw ntp
         +--rw enabled?      boolean
         +--rw server [address]
            +--rw association-type? enumeration
            +--rw address    inet:host
            +--rw enabled?   boolean
            +--rw iburst?    boolean
            +--rw prefer?    boolean
	    ]]></artwork>
	</figure>
</section>
<section title="DNS Resolver Model">
    <t>
The data model for configuration of the DNS resolver has the following
structure:
    </t>
	<figure>
	    <artwork><![CDATA[
   +--rw system
      +--rw dns
         +--rw search*    inet:domain-name
         +--rw server*    inet:ip-address
         +--rw options
            +--rw timeout?    uint8
            +--rw attempts?   uint8
	    ]]></artwork>
	</figure>
</section>
<section title="RADIUS Client Model">
    <t>
The data model for configuration of the RADIUS client has the
following structure:
    </t>
	<figure>
	    <artwork><![CDATA[
   +--rw system
      +--rw radius
         +--rw server [address]
         |  +--rw address     inet:host
         |  +--rw (transport)
         |  |  +--:(udp)
         |  |     +--rw udp
         |  |        +--rw authentication-port?   inet:port-number
         |  |        +--rw shared-secret          string
         |  +--rw authentication-type?   identityref
         +--rw options
            +--rw timeout?    uint8
            +--rw attempts?   uint8
	    ]]></artwork>
	</figure>
</section>
<section title="User Authentication Model">
    <t>
This document defines three authentication methods for use with
NETCONF:
    </t>
<t>
 <list style="symbols">
 <t>
publickey for local users over SSH
 </t>
 <t>
password for local users over any transport
 </t>
 <t>
password for RADIUS users over any transport
 </t>
 </list>
</t>
    <t>
Additional methods can be defined by other standard documents or by
vendors.
    </t>
    <t>
This document defines two optional YANG features, &quot;local&#8209;users&quot; and
&quot;radius&#8209;authentication&quot;, which the server advertises to indicate
support for configuring local users on the device, and support for
using RADIUS for authentication, respectively.
    </t>
    <t>
The authentication parameters defined in this document are primarily
used to configure authentication of NETCONF users, but MAY also be
used by other interfaces, e.g., a Command Line Interface or a
Web-based User Interface.
    </t>
    <t>
The data model for user authentication has the following structure:
    </t>
	<figure>
	    <artwork><![CDATA[
   +--rw system
      +--rw authentication
         +--rw user-authentication-order*   identityref
         +--rw user [name]
            +--rw name        string
            +--rw password?   crypt-hash
            +--rw ssh-key [name]
               +--rw name         string
               +--rw algorithm?   string
               +--rw key-data?    binary
	    ]]></artwork>
	</figure>
<section title="SSH Public Key Authentication">
    <t>
If the NETCONF server advertises the &quot;local&#8209;users&quot; feature,
configuration of local users and their SSH public keys is supported in
the /system/authentication/user list.
    </t>
    <t>
Public key authentication is requested by the SSH client.  If the
&quot;local&#8209;users&quot; feature is supported, then when a NETCONF client starts
an SSH session towards the server using the &quot;publickey&quot; authentication
&quot;method name&quot; <xref target="RFC4252"/>, the SSH server looks up the user name given
in the SSH authentication request in the /system/authentication/user
list, and verifies the key as described in <xref target="RFC4253"/>.
    </t>
</section>
<section title="Local User Password Authentication">
    <t>
If the NETCONF server advertises the &quot;local&#8209;users&quot; feature,
configuration of local users and their passwords is supported in the
/system/authentication/user list.
    </t>
    <t>
For NETCONF transport protocols that support password authentication,
the leaf-list &quot;user&#8209;authentication&#8209;order&quot; is used to control if local
user password authentication should be used.
    </t>
    <t>
In SSH, password authentication is requested by the client.  Other
NETCONF transport protocols MAY also support password authentication.
    </t>
    <t>
When local user password authentication is requested, the NETCONF
transport looks up the user name provided by the client in the
/system/ authentication/user list, and verifies the password.
    </t>
</section>
<section title="RADIUS Password Authentication">
    <t>
If the NETCONF server advertises the &quot;radius&#8209;authentication&quot; feature,
the device supports user authentication using RADIUS.
    </t>
    <t>
For NETCONF transport protocols that support password authentication,
the leaf-list &quot;user&#8209;authentication&#8209;order&quot; is used to control if RADIUS
password authentication should be used.
    </t>
    <t>
In SSH, password authentication is requested by the client.  Other
NETCONF transport protocols MAY also support password authentication.
    </t>
</section>
</section>
<section title="System Control">
    <t>
Two protocol operations are included to restart or shutdown
the system.  The &apos;system&#8209;restart&apos; operation can be used to
restart the entire system (not just the NETCONF server).
The &apos;system&#8209;shutdown&apos; operation can be used to power off
the entire system.
    </t>
</section>
</section>
<section title="System YANG module">
    <t>
This YANG module imports YANG extensions from
<xref target="RFC6536"/>, and imports YANG types from <xref target="I-D.ietf-netmod-rfc6021-bis"/> 
and <xref target="I-D.ietf-netmod-iana-timezones"/>.
It also references <xref target="RFC1321"/>, <xref target="RFC2865"/>, <xref target="RFC3418"/>, <xref target="RFC5607"/>,
<xref target="IEEE-1003.1-2008"/>, and <xref target="FIPS.180-3.2008"/>.
    </t>
    <t>
RFC Ed.: update the date below with the date of RFC publication and
remove this note.
    </t>
<t>&lt;CODE BEGINS> file "ietf-system@2013-04-21.yang"</t>
	<figure>
	    <artwork><![CDATA[
module ietf-system {
  namespace "urn:ietf:params:xml:ns:yang:ietf-system";
  prefix "sys";

  import ietf-yang-types {
    prefix yang;
  }

  import ietf-inet-types {
    prefix inet;
  }

  import ietf-netconf-acm {
    prefix nacm;
  }

  import iana-timezones {
    prefix ianatz;
  }

  organization
    "IETF NETMOD (NETCONF Data Modeling Language) Working Group";

  contact
    "WG Web:   <http://tools.ietf.org/wg/netmod/>
     WG List:  <mailto:netmod@ietf.org>

     WG Chair: David Kessens
               <mailto:david.kessens@nsn.com>

     WG Chair: Juergen Schoenwaelder
               <mailto:j.schoenwaelder@jacobs-university.de>

     Editor:   Andy Bierman
               <mailto:andy@yumaworks.com>

     Editor:   Martin Bjorklund
               <mailto:mbj@tail-f.com>";

  description
    "This module contains a collection of YANG definitions for the
     configuration and identification of the management system of a
     device.

     Copyright (c) 2013 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject
     to the license terms contained in, the Simplified BSD License
     set forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (http://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX; see
     the RFC itself for full legal notices.";

  // RFC Ed.: replace XXXX with actual RFC number and remove this
  // note.

  // RFC Ed.: remove this note
  // Note: extracted from draft-ietf-netmod-system-mgmt-06.txt

  // RFC Ed.: update the date below with the date of RFC publication
  // and remove this note.
  revision "2013-04-21" {
    description
      "Initial revision.";
    reference
      "RFC XXXX: A YANG Data Model for System Management";
  }

  /*
   * Typedefs
   */

  typedef crypt-hash {
    type string {
      pattern
        '$0$.*'
      + '|$1$[a-zA-Z0-9./]{1,8}$[a-zA-Z0-9./]{22}'
      + '|$5$(rounds=\d+$)?[a-zA-Z0-9./]{1,16}$[a-zA-Z0-9./]{43}'
      + '|$6$(rounds=\d+$)?[a-zA-Z0-9./]{1,16}$[a-zA-Z0-9./]{86}';
    }
    description
      "The crypt-hash type is used to store passwords using
       a hash function.  The algorithms for applying the hash
       function and encoding the result are implemented in
       various UNIX systems as the function crypt(3).

       A value of this type matches one of the forms:

         $0$<clear text password>
         $<id>$<salt>$<password hash>
         $<id>$<parameter>$<salt>$<password hash>

       The '$0$' prefix signals that the value is clear text.  When
       such a value is received by the server, a hash value is
       calculated, and the string '$<id>$<salt>$' or
       $<id>$<parameter>$<salt>$ is prepended to the result.  This
       value is stored in the configuration data store.

       If a value starting with '$<id>$', where <id> is not '0', is
       received, the server knows that the value already represents a
       hashed value, and stores it as is in the data store.

       When a server needs to verify a password given by a user, it
       finds the stored password hash string for that user, extracts
       the salt, and calculates the hash with the salt and given
       password as input.  If the calculated hash value is the same
       as the stored value, the password given by the client is
       correct.

       This type defines the following hash functions:

         id | hash function | feature
         ---+---------------+-------------------
          1 | MD5           | crypt-hash-md5
          5 | SHA-256       | crypt-hash-sha-256
          6 | SHA-512       | crypt-hash-sha-512

       The server indicates support for the different hash functions
       by advertising the corresponding feature.";
    reference
      "IEEE Std 1003.1-2008 - crypt() function
       Wikipedia: http://en.wikipedia.org/wiki/Crypt_(C)
       RFC 1321: The MD5 Message-Digest Algorithm
       FIPS.180-3.2008: Secure Hash Standard";
  }

  /*
   * Features
   */

  feature radius {
    description
      "Indicates that the device can be configured as a RADIUS
       client.";
    reference
      "RFC 2865: Remote Authentication Dial In User Service "
    + "(RADIUS)";
  }

  feature authentication {
    description
      "Indicates that the device can be configured
       to do authentication of users.";
  }

  feature local-users {
    if-feature authentication;
    description
      "Indicates that the device supports
       local user authentication.";
  }

  feature radius-authentication {
    if-feature radius;
    if-feature authentication;
    description
      "Indicates that the device supports user authentication over
       RADIUS.";
    reference
      "RFC 2865: Remote Authentication Dial In User Service (RADIUS)
       RFC 5607: Remote Authentication Dial-In User Service (RADIUS)
                 Authorization for Network Access Server (NAS)
                 Management";
  }

  feature crypt-hash-md5 {
    description
      "Indicates that the device supports the MD5
       hash function in 'crypt-hash' values";
    reference "RFC 1321: The MD5 Message-Digest Algorithm";
  }

  feature crypt-hash-sha-256 {
    description
      "Indicates that the device supports the SHA-256
       hash function in 'crypt-hash' values";
    reference "FIPS.180-3.2008: Secure Hash Standard";
  }

  feature crypt-hash-sha-512 {
    description
      "Indicates that the device supports the SHA-512
       hash function in 'crypt-hash' values";
    reference "FIPS.180-3.2008: Secure Hash Standard";
  }

  feature ntp {
    description
      "Indicates that the device can be configured
       to use one or more NTP servers to set the
       system date and time.";
  }

  feature timezone-location {
    description
      "Indicates that the local timezone on the device
       can be configured to use the TZ database
       to set the timezone and manage daylight savings time.";
    reference
      "TZ Database  http://www.twinsun.com/tz/tz-link.htm
       Maintaining the Timezone Database
         RFC 6557 (BCP 175)";
  }

  /*
   * Identities
   */

  identity authentication-method {
    description
      "Base identity for user authentication methods.";
  }

  identity radius {
    base authentication-method;
    description
      "Indicates user authentication using RADIUS.";
    reference
      "RFC 2865: Remote Authentication Dial In User Service (RADIUS)
       RFC 5607: Remote Authentication Dial-In User Service (RADIUS)
                 Authorization for Network Access Server (NAS)
                 Management";
  }

  identity local-users {
    base authentication-method;
    description
      "Indicates password-based authentication of locally
       configured users.";
  }

  identity radius-authentication-type {
    description
      "Base identity for RADIUS authentication types.";
  }

  identity radius-pap {
    base radius-authentication-type;
    description
      "The device requests PAP authentication from the RADIUS
       server.";
    reference
      "RFC 2865: Remote Authentication Dial In User Service";
  }

  identity radius-chap {
    base radius-authentication-type;
    description
      "The device requests CHAP authentication from the RADIUS
       server.";
    reference
      "RFC 2865: Remote Authentication Dial In User Service";
  }

  /*
   * Top-level container
   */

  container system {
    description
      "System group configuration.";

    leaf contact {
      type string {
        length "0..255";
      }
      description
        "The administrator contact information for the system.";
      reference
        "RFC 3418 - Management Information Base (MIB) for the
                    Simple Network Management Protocol (SNMP)
                    SNMPv2-MIB.sysContact";
    }

    leaf hostname {
      type inet:domain-name;
     description
       "The name of the host.  This name can be a single domain
        label, or the fully qualified domain name of the host.";
    }

    leaf location {
      type string {
        length "0..255";
      }
      description
        "The system location.";
      reference
        "RFC 3418 - Management Information Base (MIB) for the
                    Simple Network Management Protocol (SNMP)
                    SNMPv2-MIB.sysLocation";
    }

    container platform {
      config false;
      description
        "Contains vendor-specific information for
         identifying the system platform and operating system.";
      reference
        "IEEE Std 1003.1-2008 - sys/utsname.h";

      leaf os-name {
        type string;
        description
          "The name of the operating system in use,
           for example 'Linux'";
        reference
          "IEEE Std 1003.1-2008 - utsname.sysname";
      }

      leaf os-release {
        type string;
        description
          "The current release level of the operating
           system in use.  This string MAY indicate
           the OS source code revision.";
        reference
          "IEEE Std 1003.1-2008 - utsname.release";
      }

      leaf os-version {
        type string;
        description
          "The current version level of the operating
           system in use.  This string MAY indicate
           the specific OS build date and target variant
           information.";
        reference
          "IEEE Std 1003.1-2008 - utsname.version";
      }

      leaf machine {
        type string;
        description
          "A vendor-specific identifier string representing
           the hardware in use.";
        reference
          "IEEE Std 1003.1-2008 - utsname.machine";
      }

    }

    container clock {
      description
        "Configuration and monitoring of the system
         date and time properties.";

      leaf current-datetime {
        type yang:date-and-time;
        config false;
        description
          "The current system date and time.";
      }

      leaf boot-datetime {
        type yang:date-and-time;
        config false;
        description
          "The system date and time when the NETCONF
           server last restarted.";
      }

      choice timezone {
        description
          "The system timezone information.";

        leaf timezone-location {
          if-feature timezone-location;
          type ianatz:iana-timezone;
          description
            "The TZ database location identifier string
             to use for the system, such as 'Europe/Stockholm'.";
        }

        leaf timezone-utc-offset {
          type int16 {
            range "-1500 .. 1500";
          }
          units "minutes";
          description
            "The number of minutes to add to UTC time to
             identify the timezone for this system.
             For example, 'UTC - 8:00 hours' would be
             represented as '-480'.  Note that automatic
             daylight savings time adjustment is not provided,
             if this object is used.";
        }
      }
    }

    container ntp {
      if-feature ntp;

      description
        "Configuration of the NTP client.";

      leaf enabled {
        type boolean;
        default true;
        description
          "Indicates that the system should attempt
           to synchronize the system clock with an
           NTP server from the 'ntp/server' list.";
      }

      list server {
        key address;
        description
          "List of NTP servers to use for
           system clock synchronization.  If '/system/ntp/enabled'
           is 'true', then the system will attempt to
           contact and utilize the specified NTP servers.";

        leaf association-type {
          type enumeration {
            enum server {
              description
                "Use client association mode.  This device
                 will not provide synchronization to the
                 configured NTP server.";
            }
            enum peer {
              description
                "Use symmetric active association mode.
                 This device may provide synchronization
                 to the configured NTP server.";
            }
            enum pool {
              description
                "Use client association mode with one or
                 more of the NTP servers found by DNS
                 resolution of the domain name given by
                 the 'address' leaf.  This device will not
                 provide synchronization to the servers.";
            }
          }
          default server;
          description
            "The desired association type for this NTP server.";
        }
        leaf address {
          type inet:host;
          description
            "The IP address or domain name of the NTP server.";
        }
        leaf enabled {
          type boolean;
          default true;
          description
            "Indicates whether this server is enabled for use or
             not.";
        }
        leaf iburst {
          type boolean;
          default false;
          description
            "Indicates whether this server should enable burst
             synchronization or not.";
        }
        leaf prefer {
          type boolean;
          default false;
          description
            "Indicates whether this server should be preferred
             or not.";
        }
      }
    }

    container dns {
      description
        "Configuration of the DNS resolver.";

      leaf-list search {
        type inet:domain-name;
        ordered-by user;
        description
          "An ordered list of domains to search when resolving
           a host name.";
      }
      leaf-list server {
        type inet:ip-address;
        ordered-by user;
        description
          "Addresses of the name servers that the resolver should
           query.

           Implementations MAY limit the number of entries in this
           leaf list.";
      }
      container options {
        description
          "Resolver options.  The set of available options has been
           limited to those that are generally available across
           different resolver implementations, and generally
           useful.";
        leaf timeout {
          type uint8 {
            range "1..max";
          }
          units "seconds";
          default "5";
          description
            "The amount of time the resolver will wait for a
             response from a remote name server before
             retrying the query via a different name server.";
        }
        leaf attempts {
          type uint8 {
            range "1..max";
          }
          default "2";
          description
            "The number of times the resolver will send a query to
             its name servers before giving up and returning an
             error to the calling application.";
        }
      }
    }

    container radius {
      if-feature radius;

      description
        "Configuration of the RADIUS client.";

      list server {
        key address;
        ordered-by user;
        description
          "List of RADIUS servers used by the device.";

        leaf address {
          type inet:host;
          description
            "The address of the RADIUS server.";
        }
        choice transport {
          mandatory true;
          description
            "The transport protocol specific parameters
             for this server.  It is expected that new
             case statements will be added over time to
             support other transport protocols.";
          case udp {
            container udp {
              description
                "Contains UDP specific configuration parameters
                 for RADIUS.";
              leaf authentication-port {
                type inet:port-number;
                default "1812";
                description
                  "The port number of the RADIUS server.";
              }
              leaf shared-secret {
                type string;
                mandatory true;
                nacm:default-deny-all;
                description
                  "The shared secret which is known to both the
                   RADIUS client and server.";
                reference
                  "RFC 2865: Remote Authentication Dial In User
                   Service";
              }
            }
          }
        }
        leaf authentication-type {
          type identityref {
            base radius-authentication-type;
          }
          default radius-pap;
          description
            "The authentication type requested from the RADIUS
             server.";
        }
      }
      container options {
        description
          "RADIUS client options.";

        leaf timeout {
          type uint8 {
            range "1..max";
          }
          units "seconds";
          default "5";
          description
            "The number of seconds the device will wait for a
             response from a RADIUS server before trying with a
             different server.";
        }
        leaf attempts {
          type uint8 {
            range "1..max";
          }
          default "2";
          description
            "The number of times the device will send a query to
             the RADIUS servers before giving up.";
        }
      }
    }

    container authentication {
      nacm:default-deny-write;
      if-feature authentication;

       description
         "The authentication configuration subtree.";

       leaf-list user-authentication-order {
         type identityref {
           base authentication-method;
         }
         must '(. != "sys:radius" or ../../radius/server)' {
           error-message
             "When 'radius' is used, a RADIUS server"
           + " must be configured.";
           description
             "When 'radius' is used as an authentication method,
              a RADIUS server must be configured.";
         }
         ordered-by user;

         description
           "When the device authenticates a user with
            a password, it tries the authentication methods in this
            leaf-list in order.  If authentication with one method
            fails, the next method is used.  If no method succeeds,
            the user is denied access.

            If the 'radius-authentication' feature is advertised by
            the NETCONF server, the 'radius' identity can be added to
            this list.

            If the 'local-users' feature is advertised by the
            NETCONF server, the 'local-users' identity can be
            added to this list.";
       }

       list user {
         if-feature local-users;
         key name;
         description
           "The list of local users configured on this device.";

         leaf name {
           type string;
           description
            "The user name string identifying this entry.";
         }
         leaf password {
           type crypt-hash;
           description
             "The password for this entry.";
         }
         list ssh-key {
           key name;
           description
             "A list of public SSH keys for this user.";
           reference
             "RFC 4253: The Secure Shell (SSH) Transport Layer
                        Protocol";

           leaf name {
             type string;
             description
               "An arbitrary name for the ssh key.";
           }
           leaf algorithm {
             type string;
             description
               "The public key algorithm name for this ssh key.

                Valid values are the values in the IANA Secure Shell
                (SSH) Protocol Parameters registry, Public Key
                Algorithm Names";
             reference
               "IANA Secure Shell (SSH) Protocol Parameters registry,
                Public Key Algorithm Names";
           }
           leaf key-data {
             type binary;
             description
               "The binary key data for this ssh key.";
           }
         }
       }
     }
  }

  rpc set-current-datetime {
    nacm:default-deny-all;
    description
      "Set the /system/clock/current-datetime leaf
       to the specified value.

       If the system is using NTP (i.e., /system/ntp/enabled
       is set to 'true'), then this operation will
       fail with error-tag 'operation-failed',
       and error-app-tag value of 'ntp-active'";
    input {
      leaf current-datetime {
        type yang:date-and-time;
        mandatory true;
        description
          "The current system date and time.";
      }
    }
  }

  rpc system-restart {
    nacm:default-deny-all;
    description
      "Request that the entire system be restarted immediately.
       A server SHOULD send an rpc reply to the client before
       restarting the system.";
  }

  rpc system-shutdown {
    nacm:default-deny-all;
    description
      "Request that the entire system be shut down immediately.
       A server SHOULD send an rpc reply to the client before
       shutting down the system.";
  }

}
	    ]]></artwork>
	</figure>
<t>&lt;CODE ENDS></t>
</section>
<section title="IANA Considerations" anchor="iana">
    <t>
This document registers one URI in the IETF XML registry
<xref target="RFC3688"/>. Following the format in RFC 3688, the following
registration is requested to be made.
    </t>
	<figure>
	    <artwork><![CDATA[
     URI: urn:ietf:params:xml:ns:yang:ietf-system
     Registrant Contact: The NETMOD WG of the IETF.
     XML: N/A, the requested URI is an XML namespace.
	    ]]></artwork>
	</figure>
    <t>
This document registers one YANG module in the YANG Module Names
registry <xref target="RFC6020"/>.
    </t>
	<figure>
	    <artwork><![CDATA[
  name:         ietf-system
  namespace:    urn:ietf:params:xml:ns:yang:ietf-system
  prefix:       sys
  reference:    RFC XXXX
	    ]]></artwork>
	</figure>
</section>
<section title="Security Considerations">
    <t>
The YANG module defined in this memo is designed to be accessed
via the NETCONF protocol <xref target="RFC6241"/>.  The lowest NETCONF layer is
the secure transport layer and the mandatory-to-implement secure
transport is SSH <xref target="RFC6242"/>.
    </t>
    <t>
There are a number of data nodes defined in this YANG module
which are writable/creatable/deletable (i.e., config true, which
is the default).  These data nodes may be considered sensitive
or vulnerable in some network environments.  Write operations
(e.g., edit-config) to these data nodes without proper protection
can have a negative effect on network operations.  These are
the subtrees and data nodes and their sensitivity/vulnerability:
    </t>
<t>
 <list style="symbols">
 <t>
/system/clock/timezone: This choice contains the objects used to
control the timezone used by the device.
 </t>
 <t>
/system/ntp: This container contains the objects used to
control the Network Time Protocol servers used by the device.
 </t>
 <t>
/system/dns: This container contains the objects used to
control the Domain Name System servers used by the device.
 </t>
 <t>
/system/radius: This container contains the objects used to
control the Remote Authentication Dial-In User Service
servers used by the device.
 </t>
 <t>
/system/authentication/user-authentication-order: This leaf
controls how user login attempts are authenticated by the device.
 </t>
 <t>
/system/authentication/user: This list contains the 
local users enabled on the system.
 </t>
 </list>
</t>
    <t>
Some of the readable data nodes in this YANG module may be
considered sensitive or vulnerable in some network environments.
It is thus important to control read access (e.g., via get,
get-config, or notification) to these data nodes.  These are the
subtrees and data nodes and their sensitivity/vulnerability:
    </t>
<t>
 <list style="symbols">
 <t>
/system/platform: This container has objects which may help
identify the specific NETCONF server and/or operating system
implementation used on the device.
 </t>
 </list>
</t>
    <t>
Some of the RPC operations in this YANG module may be considered
sensitive or vulnerable in some network environments.  It is thus
important to control access to these operations.  These are the
operations and their sensitivity/vulnerability:
    </t>
<t>
 <list style="symbols">
 <t>
set-current-datetime: Changes the current date and time on the device.
 </t>
 <t>
system-restart: Reboots the device.
 </t>
 <t>
system-shutdown: Shuts down the device.
 </t>
 </list>
</t>
</section>
<section title="Change Log">
	<figure>
	    <artwork><![CDATA[
    -- RFC Ed.: remove this section before publication.  
	    ]]></artwork>
	</figure>
<section title="00-01">
<t>
 <list style="symbols">
 <t>
added configuration-source identities
 </t>
 <t>
added configuration-source leaf to ntp and dns (via grouping) to 
choose configuration source
 </t>
 <t>
added association-type, iburst, prefer, and true leafs to the 
ntp-server list
 </t>
 <t>
extended the ssh keys for a user to a list of keys.  support all
defined key algorithms, not just dsa and rsa
 </t>
 <t>
clarified timezone-utc-offset description-stmt
 </t>
 <t>
removed &apos;/system/ntp/server/true&apos; leaf from data model
 </t>
 </list>
</t>
</section>
<section title="01-02">
<t>
 <list style="symbols">
 <t>
added default-stmts to ntp-server/iburst and ntp-server/prefer leafs
 </t>
 <t>
changed timezone-location leaf to use iana-timezone typedef instead
of a string
 </t>
 </list>
</t>
</section>
<section title="02-03">
<t>
 <list style="symbols">
 <t>
removed configuration-source identities and leafs
 </t>
 </list>
</t>
</section>
<section title="03-04">
<t>
 <list style="symbols">
 <t>
removed ndots dns resolver option
 </t>
 <t>
added radius-authentication-type identity, and identities for pap
and chap, and a leaf to control which authentication type to use
when communicating with the radius server
 </t>
 <t>
made 0 an invalid value for timeouts and attempts
 </t>
 </list>
</t>
</section>
<section title="04-05">
<t>
 <list style="symbols">
 <t>
updated tree diagram explanation text 
 </t>
 </list>
</t>
</section>
<section title="05-06">
<t>
 <list style="symbols">
 <t>
changed ntp/use-ntp to ntp/enabled
 </t>
 <t>
changed ntp/ntp-server to ntp/server
 </t>
 <t>
removed /system/platform/nodename leaf
 </t>
 <t>
changed /system/name to /system/hostname
 </t>
 <t>
simplified must expression in user-authentication-order
 </t>
 <t>
added optional rounds to sha hash definition
 </t>
 <t>
clarified the crypt-hash description
 </t>
 <t>
clarified ntp descriptions
 </t>
 <t>
clarified YANG module description to indicate that some
system properties are supported, not the entire system
 </t>
 <t>
clarified that system identification values are vendor
specific, not the data node objects
 </t>
 <t>
clarified sec. 2.2 and 2.3 to indicate that the server should
also be capable of configuring these properties
 </t>
 <t>
changed /system/dns/search from inet:host to inet:domain-name
 </t>
 <t>
changed RFC6021 reference to 6021-bis
 </t>
 <t>
changed /system/platform/nodename to /system/platform/hostname
 </t>
 <t>
changed /system/radius/server/{leafs} to be within a choice
and &apos;udp&apos; case statement so other transport specific parameters can
augment this list or they can be added by the WG to a future
version of this module. {leafs} are authentication-port and
shared-secret.
 </t>
 <t>
updated YANG tree diagrams for objects added in -05 and -06
 </t>
 </list>
</t>
</section>
</section>
</middle>
<back>
<references title="Normative References">

  <reference anchor="RFC2119">
    <front>
      <title>Key words for use in RFCs to Indicate Requirement Levels</title>
      <author initials="S." surname="Bradner" fullname="S.  Bradner">
        <organization>Harvard University</organization>
      </author>
      <date month="March" year="1997"/>
      <abstract>
        <t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized.  This document defines these words as they should be interpreted in IETF documents.</t>
      </abstract>
    </front>
    <seriesInfo name="BCP" value="14"/>
    <seriesInfo name="RFC" value="2119"/>
    <format type="TXT" octets="4723" target="ftp://ftp.isi.edu/in-notes/rfc2119.txt"/>
  </reference>
  
  <reference anchor='RFC3688'>
    <front>
      <title>The IETF XML Registry</title>
      <author initials='M.' surname='Mealling' fullname='M. Mealling'>
        <organization /></author>
      <date year='2004' month='January' />
      <abstract>
        <t>This document describes an IANA maintained registry for IETF standards which use Extensible Markup Language (XML) related items such as Namespaces, Document Type Declarations (DTDs), Schemas, and Resource Description Framework (RDF) Schemas.</t></abstract></front>
    
    <seriesInfo name='BCP' value='81' />
    <seriesInfo name='RFC' value='3688' />
    <format type='TXT' octets='17325' target='http://www.rfc-editor.org/rfc/rfc3688.txt' />
  </reference>
  
<reference anchor="RFC4252">
  <front>
    <title>The Secure Shell (SSH) Authentication Protocol</title>
    <author initials="T." surname="Ylonen" fullname="T. Ylonen">
      <organization/>
    </author>
    <author initials="C." surname="Lonvick" fullname="C. Lonvick">
      <organization/>
    </author>
    <date year="2006" month="January"/>
    <abstract>
      <t>The Secure Shell Protocol (SSH) is a protocol for secure remote login and other secure network services over an insecure network.  This document describes the SSH authentication protocol framework and public key, password, and host-based client authentication methods.  Additional authentication methods are described in separate documents.  The SSH authentication protocol runs on top of the SSH transport layer protocol and provides a single authenticated tunnel for the SSH connection protocol. [STANDARDS-TRACK]</t>
    </abstract>
  </front>
  <seriesInfo name="RFC" value="4252"/>
  <format type="TXT" octets="34268" target="http://www.rfc-editor.org/rfc/rfc4252.txt"/>
</reference>

<reference anchor="RFC4253">
  <front>
    <title>The Secure Shell (SSH) Transport Layer Protocol</title>
    <author initials="T." surname="Ylonen" fullname="T. Ylonen">
      <organization/>
    </author>
    <author initials="C." surname="Lonvick" fullname="C. Lonvick">
      <organization/>
    </author>
    <date year="2006" month="January"/>
    <abstract>
      <t>The Secure Shell (SSH) is a protocol for secure remote login and other secure network services over an insecure network.&lt;/t&gt;&lt;t&gt; This document describes the SSH transport layer protocol, which typically runs on top of TCP/IP. The protocol can be used as a basis for a number of secure network services. It provides strong encryption, server authentication, and integrity protection. It may also provide compression.&lt;/t&gt;&lt;t&gt; Key exchange method, public key algorithm, symmetric encryption algorithm, message authentication algorithm, and hash algorithm are all negotiated.&lt;/t&gt;&lt;t&gt; This document also describes the Diffie-Hellman key exchange method and the minimal set of algorithms that are needed to implement the SSH transport layer protocol. [STANDARDS-TRACK]</t>
    </abstract>
  </front>
  <seriesInfo name="RFC" value="4253"/>
  <format type="TXT" octets="68263" target="http://www.rfc-editor.org/rfc/rfc4253.txt"/>
</reference>

    <reference anchor='RFC6241'>
      <front>
        <title>Network Configuration Protocol (NETCONF)</title>
        <author initials='R.' surname='Enns' fullname='R. Enns' role="editor">
          <organization/>
        </author>
        <author initials='M.' surname='Bjorklund' fullname='M. Bjorklund' role="editor">
          <organization/>
        </author>
        <author initials='J.' surname='Schoenwaelder' fullname='J. Schoenwaelder' role="editor">
          <organization/>
        </author>
        <author initials='A.' surname='Bierman' fullname='A. Bierman' role="editor">
          <organization/>
        </author>
        <date year='2011' month='June'/>
      </front>
      <seriesInfo name='RFC' value='6241'/>
    </reference>

<reference anchor="RFC6242">
  <front>
    <title>Using the NETCONF Protocol over Secure Shell (SSH)</title>
    <author initials="M." surname="Wasserman" fullname="M. Wasserman">
      <organization/>
    </author>
    <date year="2011" month="June"/>
    <abstract>
      <t>This document describes a method for invoking and running the Network Configuration Protocol (NETCONF) within a Secure Shell (SSH) session as an SSH subsystem.  This document obsoletes RFC 4742. [STANDARDS-TRACK]</t>
    </abstract>
  </front>
  <seriesInfo name="RFC" value="6242"/>
  <format type="TXT" octets="22704" target="http://www.rfc-editor.org/rfc/rfc6242.txt"/>
</reference>

<reference anchor='RFC6557'>
<front>
<title>Procedures for Maintaining the Time Zone Database</title>
<author initials='E.' surname='Lear' fullname='E. Lear'>
<organization /></author>
<author initials='P.' surname='Eggert' fullname='P. Eggert'>
<organization /></author>
<date year='2012' month='February' />
<abstract>
<t>Time zone information serves as a basic protocol element in protocols, such as the calendaring suite and DHCP.  The Time Zone (TZ) Database specifies the indices used in various protocols, as well as their semantic meanings, for all localities throughout the world.  This database has been meticulously maintained and distributed free of charge by a group of volunteers, coordinated by a single volunteer who is now planning to retire.  This memo specifies procedures involved with maintenance of the TZ database and associated code, including how to submit proposed updates, how decisions for inclusion of those updates are made, and the selection of a designated expert by and for the time zone community.  The intent of this memo is, to the extent possible, to document existing practice and provide a means to ease succession of the database maintainers.  This memo documents an Internet Best Current Practice.</t></abstract></front>

<seriesInfo name='BCP' value='175' />
<seriesInfo name='RFC' value='6557' />
<format type='TXT' octets='18469' target='http://www.rfc-editor.org/rfc/rfc6557.txt' />
</reference>

<reference anchor='RFC6536'>
<front>
<title>Network Configuration Protocol (NETCONF) Access Control Model</title>
<author initials='A.' surname='Bierman' fullname='A. Bierman'>
<organization /></author>
<author initials='M.' surname='Bjorklund' fullname='M. Bjorklund'>
<organization /></author>
<date year='2012' month='March' />
<abstract>
<t>The standardization of network configuration interfaces for use with the Network Configuration Protocol (NETCONF) requires a structured and secure operating environment that promotes human usability and multi-vendor interoperability.  There is a need for standard mechanisms to restrict NETCONF protocol access for particular users to a pre-configured subset of all available NETCONF protocol operations and content.  This document defines such an access control model. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='6536' />
<format type='TXT' octets='90803' target='http://www.rfc-editor.org/rfc/rfc6536.txt' />
</reference>

  <reference anchor="RFC6020">
    <front>
      <title>YANG - A Data Modeling Language for the Network Configuration Protocol (NETCONF)</title>
      <author initials="M." surname="Bjorklund" fullname="M. Bjorklund">
        <organization/>
      </author>
      <date year="2010" month="October"/>
      <abstract>
        <t>YANG is a data modeling language used to model configuration and state data manipulated by the Network Configuration Protocol (NETCONF), NETCONF remote procedure calls, and NETCONF notifications. [STANDARDS TRACK]</t>
      </abstract>
    </front>
    <seriesInfo name="RFC" value="6020"/>
    <format type="TXT" octets="324178" target="http://www.rfc-editor.org/rfc/rfc6020.txt"/>
  </reference>

<reference anchor="RFC1321">
  <front>
    <title abbrev="MD5 Message-Digest Algorithm">The MD5 Message-Digest Algorithm</title>
    <author initials="R." surname="Rivest" fullname="Ronald L. Rivest">
      <organization>Massachusetts Institute of Technology, (MIT) Laboratory for Computer Science</organization>
      <address>
        <postal>
          <street>545 Technology Square</street>
          <street>NE43-324</street>
          <city>Cambridge</city>
          <region>MA</region>
          <code>02139-1986</code>
          <country>US</country>
        </postal>
        <phone>+1 617 253 5880</phone>
        <email>rivest@theory.lcs.mit.edu</email>
      </address>
    </author>
    <date year="1992" month="April"/>
  </front>
  <seriesInfo name="RFC" value="1321"/>
  <format type="TXT" octets="35222" target="http://www.rfc-editor.org/rfc/rfc1321.txt"/>
</reference>

<reference anchor="RFC2865">
  <front>
    <title>Remote Authentication Dial In User Service (RADIUS)</title>
    <author initials="C." surname="Rigney" fullname="C. Rigney">
      <organization/>
    </author>
    <author initials="S." surname="Willens" fullname="S. Willens">
      <organization/>
    </author>
    <author initials="A." surname="Rubens" fullname="A. Rubens">
      <organization/>
    </author>
    <author initials="W." surname="Simpson" fullname="W. Simpson">
      <organization/>
    </author>
    <date year="2000" month="June"/>
    <abstract>
      <t>This document describes a protocol for carrying authentication, authorization, and configuration information between a Network Access Server which desires to authenticate its links and a shared Authentication Server. [STANDARDS-TRACK]</t>
    </abstract>
  </front>
  <seriesInfo name="RFC" value="2865"/>
  <format type="TXT" octets="146456" target="http://www.rfc-editor.org/rfc/rfc2865.txt"/>
</reference>

<reference anchor="RFC3418">
  <front>
    <title>Management Information Base (MIB) for the Simple Network Management Protocol (SNMP)</title>
    <author initials="R." surname="Presuhn" fullname="R. Presuhn">
      <organization/>
    </author>
    <date year="2002" month="December"/>
    <abstract>
      <t>This document defines managed objects which describe the behavior of a Simple Network Management Protocol (SNMP) entity.  This document obsoletes RFC 1907, Management Information Base for Version 2 of the Simple Network Management Protocol (SNMPv2). [STANDARDS-TRACK]</t>
    </abstract>
  </front>
  <seriesInfo name="STD" value="62"/>
  <seriesInfo name="RFC" value="3418"/>
  <format type="TXT" octets="49096" target="http://www.rfc-editor.org/rfc/rfc3418.txt"/>
</reference>

<reference anchor="RFC5607">
  <front>
    <title>Remote Authentication Dial-In User Service (RADIUS) Authorization for Network Access Server (NAS) Management</title>
    <author initials="D." surname="Nelson" fullname="D. Nelson">
      <organization/>
    </author>
    <author initials="G." surname="Weber" fullname="G. Weber">
      <organization/>
    </author>
    <date year="2009" month="July"/>
    <abstract>
      <t>This document specifies Remote Authentication Dial-In User Service (RADIUS) attributes for authorizing management access to a Network Access Server (NAS).  Both local and remote management are supported, with granular access rights and management privileges.  Specific provisions are made for remote management via Framed Management protocols and for management access over a secure transport protocol. [STANDARDS-TRACK]</t>
    </abstract>
  </front>
  <seriesInfo name="RFC" value="5607"/>
  <format type="TXT" octets="55464" target="http://www.rfc-editor.org/rfc/rfc5607.txt"/>
</reference>

<reference anchor="FIPS.180-3.2008" target="http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf">
  <front>
    <title>Secure Hash Standard</title>
    <author>
      <organization>National Institute of Standards and Technology</organization>
    </author>
    <date month="October" year="2008"/>
  </front>
  <seriesInfo name="FIPS" value="PUB 180-3"/>
</reference>


<reference anchor="IEEE-1003.1-2008">
  <front>
    <title>POSIX.1-2008</title>
    <author>
      <organization>Institute of Electrical and Electronics Engineers</organization>
    </author>
    <date month="March" year="2008"/>
  </front>
  <seriesInfo name="IEEE" value="Standard 1003.1"/>
</reference>


  <reference anchor="I-D.ietf-netmod-iana-timezones">
    <front>
      <title>IANA Timezone Database YANG Module</title>
      <author initials="J." surname="Lange" fullname="J. Lange">
        <organization>GE Digital Energy</organization>
      </author>
      <date year="2012" month="July"/>
    </front>
    <seriesInfo name="Internet-Draft"
                value="draft-ietf-netmod-iana-timezones-00"/>
    <format type='TXT'
    target='http://tools.ietf.org/id/draft-ietf-netmod-iana-timezones-00.txt'/>
  </reference>

<reference anchor="I-D.ietf-netmod-rfc6021-bis">
  <front>
    <title>Common YANG Data Types</title>
    <author initials="J." surname="Schoenwaelder" fullname="J. Schoenwaelder">
      <organization/>
    </author>
    <date year="2013" month="March"/>
    <abstract>
      <t>This document introduces a collection of common data types to be used with the YANG data modeling language. [STANDARDS-TRACK]</t>
    </abstract>
  </front>
  <seriesInfo name="Internet-Draft"
              value="draft-ietf-netmod-rfc6021-bis-01"/>
  <format type="TXT"
  target='http://tools.ietf.org/id/draft-ietf-netmod-rfc6021-bis-01.txt'/>
</reference>

</references>

</back></rfc>
