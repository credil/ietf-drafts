


Network Working Group                                           S. Jiang
Internet-Draft                                                    F. Xia
Intended status: Standards Track                             B. Sarikaya
Expires: May 24, 2012                                Huawei Technologies
                                                       November 21, 2011


                      Prefix Assignment in DHCPv6
                   draft-ietf-dhc-host-gen-id-01.txt

Abstract

   This document describes a procedure for configuring hosts' IPv6
   address which the prefix is assigned from a DHCPv6 server through
   DHCPv6 protocol while the interface identifiers are independently
   generated by the hosts.  The method is applicable to
   Cryptographically Generated Addresses (CGA), and other IPv6 addresses
   with host-generated interface identifiers.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on May 24, 2012.

Copyright Notice

   Copyright (c) 2011 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of



Jiang, et al.             Expires May 24, 2012                  [Page 1]

Internet-Draft         Prefix Assignment in DHCPv6         November 2011


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Address Auto-configuration . . . . . . . . . . . . . . . . . .  4
   4.  DHCPv6 Operation . . . . . . . . . . . . . . . . . . . . . . .  5
   5.  DHCPv6 IA_PA Option  . . . . . . . . . . . . . . . . . . . . .  6
     5.1.  Identity Association for Prefix Assignment Option  . . . .  6
     5.2.  IA_PA Prefix Option  . . . . . . . . . . . . . . . . . . .  7
   6.  Applicability  . . . . . . . . . . . . . . . . . . . . . . . .  8
   7.  IANA consideration . . . . . . . . . . . . . . . . . . . . . .  8
   8.  Security Considerations  . . . . . . . . . . . . . . . . . . .  8
   9.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . .  9
   10. References . . . . . . . . . . . . . . . . . . . . . . . . . .  9
     10.1. Normative References . . . . . . . . . . . . . . . . . . .  9
     10.2. Informative references . . . . . . . . . . . . . . . . . .  9
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 10






























Jiang, et al.             Expires May 24, 2012                  [Page 2]

Internet-Draft         Prefix Assignment in DHCPv6         November 2011


1.  Introduction

   [RFC3315] describes the operation of address assignment by a DHCPv6
   server.  A client uses a Solicit message to discover DHCPv6 servers
   configured to assign addresses.  A server sends an Advertise message
   in response to announce the availability of the server to the client.
   The client then uses a Request message to request addresses.  The
   server then returns addresses in a Reply message.  The operation
   assumes that the server is responsible for the assignment of an
   integral address which includes prefix and interface identifier parts
   as described in [RFC4291].

   This document introduces a new DHCPv6 procedure to configure hosts'
   IPv6 addresses.  In this new procedure, the prefix is advertised from
   a DHCPv6 server through DHCPv6 protocol while the interface
   identifiers are independently generated by the hosts.

   [RFC3633] defines Prefix Delegation options providing a mechanism for
   automated delegation of IPv6 prefixes using the DHCPv6.  This
   mechanism is intended for delegating a long-lived prefix from a
   delegating router to a requesting router.  This mechanism "is not
   bound to the assignment of IP addresses or other configuration
   information to hosts" [RFC3633].  It delegates prefixes to a routable
   device for itself use only.  It does not support the host-genarated
   interface identifiers model, in which prefix(es) need to be
   advertised or assigned to hosts.

   [RFC3972] describes a method for binding a public signature key to an
   IPv6 address in the Secure Neighbor Discovery (SEND) protocol
   [RFC3971].  The basic idea is to generate the interface identifier
   (i.e., the rightmost 64 bits) of the IPv6 address by computing a
   cryptographic hash of the public key.  That is, the host decides its
   interface identifier.  As for the prefix part of the CGA, it is
   probably got through Router Advertisement message defined in
   [RFC4861], or through DHCPv6 operations defined in this document.
   [I-D.ietf-csi-dhcpv6-cga-ps] describes potential issues in the
   interaction between DHCPv6 and CGA.  In that document , the usage of
   DHCPv6 for assigning prefixes is proposed to facilitate separation of
   prefix assignment and interface identifier generation.

   There are also other host-generated IPv6 addresses, which are
   combined by prefixes obtained from network configuration and
   ingerface identifiers generated by hosts, such as modified EUI-64
   interface identifier [EUI-64], temporary addresses for privacy
   [RFC4941],etc.  The DHCPv6 operations defined in this document also
   supports such address methods.

   The DHCPv6 operations defined in this document also supports the



Jiang, et al.             Expires May 24, 2012                  [Page 3]

Internet-Draft         Prefix Assignment in DHCPv6         November 2011


   assigned prefix to be shared across multiple hosts.


2.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

   The terminology in this document is based on the definitions in
   [RFC3315], in addition to the ones specified in this section

   derivative prefix:  A prefix is derived from another prefix.  For
      example, a /64 prefix is derived from a /48 prefix, that is, the
      /64 prefix has the same leftmost 48 bits with the /48 prefix.
   authorized prefix:  A specific router is given a specific set of
      subnet prefixes to advertise; other routers have an authorization
      to advertise other subnet prefixes.  In [RFC3971],Certification
      Path Advertisement message is used to convey authorized prefixes.


3.  Address Auto-configuration

   Router Advertisements in [RFC4861] allow routers to inform hosts how
   to perform Address Auto-configuration.  For example, routers can
   specify whether hosts should use DHCPv6 and/or stateless address
   configuration.  In Router Advertisement message, M and O bits are
   used for indication of address auto-configuration mode.

   Whatever address auto-configuration mode a host uses, the following
   two parts are necessary for the host to formulate it's IPv6 address:

   o  A prefix.  In [RFC3971], Certification Path Solicitation and
      Certification Path Advertisement messages are designed for
      verifying routers being authorized to act as routers.
      Certification Path Advertisement message can also be used to
      verify that routers are authorized to advertise a certain set of
      subnet prefixes.  In the stateless auto-configuration address
      mode, the prefixes in Router Advertisement message should be a
      subset of authorized prefixes, or derivative prefixes from
      authorized prefixes.  In the stateful auto-configuration address
      mode, prefix assignment from a DHCPv6 server is not currently
      support.
   o  An interface identifier.  Modified EUI-64 interface identifier
      [EUI-64] is a widely-used host generated interface identifier.  It
      generates interface identifier from the host MAC address.  The
      interface identifier of [RFC3972] is generated by computing a
      cryptographic hash of a public key of a host.  The host is



Jiang, et al.             Expires May 24, 2012                  [Page 4]

Internet-Draft         Prefix Assignment in DHCPv6         November 2011


      responsible for interface identifier generation.

   In the ND-managed environment, RA is used to assign the prefix.

   So far, there is no mechanism to support the scenario that prefixes
   are managed by a DHCPv6 server.  The DHCPv6 operation defined in this
   document enables the DHCPv6 server to assign a prefix, rather than a
   integral address, to the host, so that the host can obtain an IPv6
   address by combining the prefix with its own generated interface
   identifier.  It actually enables the auto address configuration
   through DHCPv6.

   This document targets to meet this gap.


4.  DHCPv6 Operation

   Figure 1 shows the operation of separating prefix assignment and
   interface identifier generation in the DHCPv6.
        +------------+         +-------------+
        |Host(Client)|         |DHCPv6 Server|
        +------------+         +-------------+
              |  1 Solicit            |
              |---------------------> |
              |  2 Advertise          |
              |<--------------------- |
     3 Combination of Prefix          |
     and Interface Identifier         |
              |                       |

                        Figure 1: DHCPv6 Operation

   1.  A host uses a Solicit message to discover DHCPv6 servers that
       have been configured to assign prefixes for the host.  Identity
       Association for Prefix Delegation Option (IA_PD) is defined in
       [RFC3633] for prefix delegation between a requesting router and
       delegating router.  Referring to the definition, a new Identity
       Association for Prefix Assignment (IA-PA) option is defined in
       Section 5.1 to enable the prefix assignment from a DHCPv6 server
       to a host.
   2.  The DHCPv6 server assigns one or more prefixes to the host in
       Advertise messages or in the Reply messages to the prefix
       requests from the hosts.  The assigned prefixes SHOULD be a
       subset of the authorized prefixes or derivative prefixes of the
       authorized prefixes.  Identity Association for Prefix Assignment
       Option in Section 5.1 is used for conveying the assigned
       prefixes.  If there is not a proper prefix available, a status-
       code is returned to the host and the procedure is terminated.



Jiang, et al.             Expires May 24, 2012                  [Page 5]

Internet-Draft         Prefix Assignment in DHCPv6         November 2011


       When receiving multiple prefixes, the host may use pre-configured
       hints for prefix assignment preference.  The hints are authorized
       prefixes advertised by an authorized router through Certification
       Path Advertisement defined in [RFC3971].
   3.  The host generates an interface identifier and formulates a
       combined IPv6 address by concatenating the assigned prefix and
       the self-generated interface identifier.  There are many ways to
       generate interface identifier.  [RFC3972] defines a method to
       generate the interface identifier by computing a cryptographic
       hash of a public key of the host.  Modified EUI-64 interface
       identifier [EUI-64] is generated based on the host MAC address.

   After the host generates an IPv6 address using the above procedure,
   the host may send a Request message to the DHCPv6 server in order to
   confirm the usage of the new address.  The confirmation procedure may
   be completed together with the address registration procedure.
   However, the confirmation procedure is out of scope.


5.  DHCPv6 IA_PA Option

   In this section, one new option is defined, Identity Association for
   Prefix Assignment Option .  The format of this new DHCPv6 IA_PA
   Option has been deliberately designed to be the same with IA_PD
   option[RFC3633].  The IA_PD Prefix and IA Address sub-options from
   IA_PD option are also reused.  However, the two options are different
   on the semantics and usage models.

   The prefixed assigned through this DHCPv6 IA_PA option could be
   shared accross multiple hosts.

5.1.  Identity Association for Prefix Assignment Option

   The IA_PA option is used to carry a prefix assignment identity
   association, the parameters associated with the IA_PA and the
   prefixes associated with it.

   The format of the IA_PA option is:













Jiang, et al.             Expires May 24, 2012                  [Page 6]

Internet-Draft         Prefix Assignment in DHCPv6         November 2011


        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |         OPTION_IA_PA          |         option-length         |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                         IAID (4 octets)                       |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                              T1                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                              T2                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       .                                                               .
       .                          IA_PA-options                        .
       .                                                               .
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   option-code:      OPTION_IA_PA (TBA1)

   option-length:    12 + length of IA_PA-options field.

   IAID:             The unique identifier for this IA_PA; the IAID must
                     be unique among the identifiers for all of this
                     host's IA_PAs.

   T1:               The time at which the host should
                     contact the DHCPv6 server from which the
                     prefixes in the IA_PA were obtained to extend the
                     lifetimes of the prefixes assigned to the IA_PA;
                     T1 is a time duration relative to the current time
                     expressed in units of seconds.

   T2:               The time at which the host should
                     contact any available DHCPv6 server to extend
                     the lifetimes of the prefixes assigned to the
                     IA_PA; T2 is a time duration relative to the
                     current time expressed in units of seconds.

   IA_PA-options:    Options associated with this IA_PA.

   The details of the fields are similar to the IA_PD option description
   in [RFC3633].  The difference is here a DHCPv6 server and a host
   involved, while a delegating router and requesting router involved in
   [RFC3633].

5.2.  IA_PA Prefix Option

   OPTION_IAPREFIX (26) "IA_PD Prefix Option" defined in Section 10 of
   [RFC3633] is reused.




Jiang, et al.             Expires May 24, 2012                  [Page 7]

Internet-Draft         Prefix Assignment in DHCPv6         November 2011


   Originally, the option is used for conveying prefix information
   between a delegating router and a requesting router.  Here the IA_PD
   Prefix option is used to specify IPv6 address prefixes associated
   with an IA_PA in Section 5.1.  The IA_PD Prefix option must be
   encapsulated in the IA_PA-options field of an IA_PA option.


6.  Applicability

   In point-to-point link model, DHCPv6 operation with host-generated
   interface identifier, described in this document, may be used.
   [RFC4968] provides different IPv6 link models that are suitable for
   802.16 based networks and a point-to-point link model is recommended.
   Also, 3GPP and 3GPP2 have earlier adopted the point-to-point link
   model based on the recommendations in [RFC3314].  In this model, one
   prefix can only be assigned to one interface of a host (mobile
   station) and different hosts (mobile stations) can't share a prefix.
   The unique prefix can be used to identify the host.  It is not
   necessary for a DHCPv6 server to generate an interface identifier for
   the host.  The host may generate its interface identifier as
   described in [RFC4941].  An interface identifier could even be
   generated via random number generation.

   Modified EUI-64 interface identifier [EUI-64] is also typically
   generated by hosts.  [RFC4941] has defined temporary addresses for
   privacy purposes.  The temporary addresses is also generated by hosts
   using random algorithm.  The DHCPv6 operations defined in this
   document also supports such address methods.


7.  IANA consideration

   This document defines a new DHCPv6 [RFC3315] option, which must be
   assigned Option Type values within the option numbering space for
   DHCPv6 messages:

   The OPTION_IA_PA Option (TBA1), described in Section 5.1.


8.  Security Considerations

   Security considerations in DHCPv6 are described in [RFC3315].

   To guard against attacks through prefix assignment, a host and a
   DHCPv6 server SHOULD use DHCPv6 authentication as described in
   Section 21, "Authentication of DHCP messages" of [RFC3315] or Secure
   DHCPv6 [I-D.ietf-dhc-secure-dhcpv6] .




Jiang, et al.             Expires May 24, 2012                  [Page 8]

Internet-Draft         Prefix Assignment in DHCPv6         November 2011


9.  Acknowledgements

   The authors would like to thanks Suresh Krishnan, Ted Lemon and other
   members of DHC WG for their valuable comments.


10.  References

10.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC4861]  Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
              "Neighbor Discovery for IP version 6 (IPv6)", RFC 4861,
              September 2007.

   [RFC3971]  Arkko, J., Kempf, J., Zill, B., and P. Nikander, "SEcure
              Neighbor Discovery (SEND)", RFC 3971, March 2005.

   [RFC3972]  Aura, T., "Cryptographically Generated Addresses (CGA)",
              RFC 3972, March 2005.

   [RFC3315]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C.,
              and M. Carney, "Dynamic Host Configuration Protocol for
              IPv6 (DHCPv6)", RFC 3315, July 2003.

   [RFC3633]  Troan, O. and R. Droms, "IPv6 Prefix Options for Dynamic
              Host Configuration Protocol (DHCP) version 6", RFC 3633,
              December 2003.

   [RFC4291]  Hinden, R. and S. Deering, "IP Version 6 Addressing
              Architecture", RFC 4291, February 2006.

   [RFC4941]  Narten, T., Draves, R., and S. Krishnan, "Privacy
              Extensions for Stateless Address Autoconfiguration in
              IPv6", RFC 4941, September 2007.

10.2.  Informative references

   [RFC4968]  Madanapalli, S., "Analysis of IPv6 Link Models for 802.16
              Based Networks", RFC 4968, August 2007.

   [RFC3314]  Wasserman, M., "Recommendations for IPv6 in Third
              Generation Partnership Project (3GPP) Standards",
              RFC 3314, September 2002.

   [I-D.ietf-csi-dhcpv6-cga-ps]



Jiang, et al.             Expires May 24, 2012                  [Page 9]

Internet-Draft         Prefix Assignment in DHCPv6         November 2011


              Jiang, S., Shen, S., and T. Chown, "DHCPv6 and CGA
              Interaction: Problem Statement",
              draft-ietf-csi-dhcpv6-cga-ps-07 (work in progress),
              May 2011.

   [I-D.ietf-dhc-secure-dhcpv6]
              Jiang, S. and S. Shen, "Secure DHCPv6 Using CGAs",
              draft-ietf-dhc-secure-dhcpv6-03 (work in progress),
              June 2011.

   [EUI-64]   "Guidelines for 64-bit Global Identifier (EUI-64)
              Registration Authority", http://standards.ieee.org/
              regauth/oui/tutorials/EUI64.html", March 1997.


Authors' Addresses

   Sheng Jiang
   Huawei Technologies
   Q14, Huawei Campus, No.156, BeiQing Road
   Hai-Dian District, Beijing  100095
   P.R. China

   Email: jiangsheng@huawei.com


   Frank Xia
   Huawei Technologies
   1700 Alma Dr. Suite 500
   Plano, TX  75075

   Email: xiayangsong@huawei.com


   Behcet Sarikaya
   Huawei Technologies
   1700 Alma Dr. Suite 500
   Plano, TX  75075

   Email: sarikaya@ieee.org











Jiang, et al.             Expires May 24, 2012                 [Page 10]

