<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<!-- 
(c) 1999 Marshall T. Rose
    All rights reserved.

This file is licenced under the same terms as xml2rfc, even though
running it through xml2rfc adds the more restrictive Internet Society
copyright notices.
-->
<?rfc toc="yes"?>
<?rfc symrefs="yes"?>
<rfc category="info" ipr="pre5378Trust200902" number="">
  <front>
    <title abbrev="Multitenant Isolation  in Hybrid Cloud">A framework for
    controlling Multitenant Isolation, Connectivity and Reachability in a
    Hybrid Cloud Environment</title>

    <author fullname="Masum Z. Hasan" initials="M." surname="Hasan">
      <organization>Cisco Systems, Inc.</organization>

      <address>
        <postal>
          <street>170 West Tasman Drive</street>

          <city>San Jose</city>

          <region>CA</region>

          <code>95134</code>

          <country>USA</country>
        </postal>

        <email>masum@cisco.com</email>
      </address>
    </author>

    <author fullname="Abdelhadi Chari" initials="A." surname="Chari">
      <organization>France Telecom - Orange Labs</organization>

      <address>
        <postal>
          <street>2, avenue Pierre Marzin</street>

          <city>Lannion&nbsp; </city>

          <region/>

          <code>22307</code>

          <country>France</country>
        </postal>

        <email>abdelhadi.chari@orange.com</email>
      </address>
    </author>

    <author fullname="David Fahed" initials="D." surname="Fahed">
      <organization>France Telecom - Orange Labs</organization>

      <address>
        <postal>
          <street>2, avenue Pierre Marzin</street>

          <city>Lannion</city>

          <region/>

          <code>22307</code>

          <country>France</country>
        </postal>

        <email>david.fahed@orange.com</email>
      </address>
    </author>

    <author fullname="Lew Tucker" initials="L." surname="Tucker">
      <organization>Cisco Systems, Inc.</organization>

      <address>
        <postal>
          <street>170 West Tasman Drive</street>

          <city>San Jose</city>

          <region>CA</region>

          <code>95134</code>

          <country>USA</country>
        </postal>

        <email>letucker@cisco.com</email>
      </address>
    </author>

    <author fullname="Monique Morrow " initials="M." surname="Morrow">
      <organization>Cisco Systems, Inc.</organization>

      <address>
        <postal>
          <street>170 West Tasman Drive</street>

          <city>San Jose</city>

          <region>CA</region>

          <code>95134</code>

          <country>USA</country>
        </postal>

        <email>mmorrow@cisco.com</email>
      </address>
    </author>

    <author fullname="Mark Malyon" initials="M." surname="Malyon">
      <organization>Cisco Systems, Inc.</organization>

      <address>
        <postal>
          <street>170 West Tasman Drive</street>

          <city>San Jose</city>

          <region>CA</region>

          <code>95134</code>

          <country>USA</country>
        </postal>

        <email>mmalyon@cisco.com</email>
      </address>
    </author>

    <date month="March" year="2012"/>

    <area>General</area>

    <keyword>Cloud</keyword>

    <keyword>Hybrid Cloud</keyword>

    <keyword>Logical Hybrid Cloud</keyword>

    <keyword>Seamless Hybrid Cloud</keyword>

    <keyword>Multitenant Isolation</keyword>

    <keyword>Reachability</keyword>

    <keyword>PPVPN</keyword>

    <keyword>MPLS</keyword>

    <keyword>L3 MPLS VPN</keyword>

    <keyword>Network Management Architecture</keyword>

    <keyword>Internet-Draft</keyword>

    <abstract>
      <t>Multiple enterprises (tenants) consuming resources in a public Cloud
      shares the physical infrastructure of one or more DCs out of which the
      Cloud resources are serviced. Hence one of the major features that has
      to be supported in public Cloud DCs is multitenant isolation, which is
      realized via various DC isolation technologies, such as VLAN or VxLAN.
      In a hybrid Cloud environment where a public Cloud (more specifically
      off-premises public Cloud resources acquired by a tenant ) becomes an
      <spanx style="emph">extension</spanx> of a tenant intranet or private
      Cloud, the multitenant isolation capability has to be extended beyond
      the public Cloud DCs. The multitenant isolation <spanx style="emph">domain</spanx>
      has to span end-to-end from the tenant network or on-premises resources
      via the MAN/WAN and the public Cloud DC networks to tenant off-premises
      resources. While multitenant isolationI isolates one tenant from another
      (inter-hybrid Cloud isolation), an enterprise may desire controlled
      connectivity to a hybrid Cloud from another Cloud or network or tenant
      or select resources. In addition, there may be need for controlling
      direct reachability of resources within a hybrid Cloud itself
      (intra-hybrid Cloud). The tenant network may be connected to the public
      Cloud (DCs) over the Internet or a private IP/MPLS MAN/WAN owned or
      operated by a service provider, which also may support PPVPN (Provider
      Provided VPN) service, such as the L3 MPLS VPN. In this work we consider
      the latter type of network and describe a framework for supporting
      inter-hybrid Cloud multitenant isolation, inter-hybrid Cloud
      connectivity and intra-hybrid Cloud reachability.</t>

      <t/>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">
      <t/>

      <t>A Cloud service provider (CSP) offers services to tenants
      (enterprises, enterprise departments, employees, end consumers) out of
      one or more Cloud DCs, where a tenant can acquire or release (CRUD:
      Create, Read, Update, Delete) compute, storage or network resources
      on-demand and anytime. The CSP exposes Cloud service interfaces to
      tenants which are used by tenants to CRUD resources.</t>

      <t>The <xref target="NIST">NIST definition of Cloud computing </xref>
      has defined following Cloud deployment models: <list style="symbols">
          <t>Private Cloud: A Cloud for use by an enterprise only, where the
          Cloud infrastructure and services are owned and/or operated by the
          enterprise IT or a 3rd party.</t>

          <t>Public Cloud: A Cloud that can be used by anyone and
          owned/operated/offered by a Cloud Service Provider.</t>

          <t>Hybrid Cloud: A Cloud consisting of multiple interoperable Clouds
          that enables data and application portability.</t>

          <t>Community Cloud: The Cloud infrastructure is shared by several
          organizations and supports a specific community that has shared
          concerns.</t>
        </list></t>

      <t>The NIST definition of the hybrid Cloud refers to multiple
      interoperable Clouds to which we include a case where an enterprise may
      not have a private Cloud. Following are the options in which a hybrid
      Cloud can be architected or deployed: <list style="numbers">
          <t>A1: A tenant intranet and a single public Cloud.</t>

          <t>A2: A tenant Private Cloud and a single public Cloud.</t>

          <t>A3: A tenant intranet or private Cloud and multiple public
          Clouds.</t>

          <t>A4: A Public Cloud and one or more other public Clouds. In this
          case the source public Cloud may acquire resources from another
          public Cloud on behalf of its tenant.</t>

          <t>A5: A3 + A4.</t>
        </list>In this document we focus on A1 and A2 (the other options
      require further considerations and will be addressed in future work). We
      assume that the same SP owns or operates both the public Cloud (DCs) and
      the private MAN/WAN. Employing PPVPN (Provider Provided VPN, such as L3
      MPLS VPN) features we describe a framework that facilitates inter-hybrid
      Cloud multitenant isolation and connectivity and intra-hybrid Cloud
      direct reachability between resources in the same hybrid Cloud. Note
      that the realization framework discussed in this document covers only
      the MAN/WAN segment of the end-to-end network of a hybrid Cloud.</t>

      <t/>

      <section title="Acronyms and Definitions">
        <t><list style="empty">
            <t>Tenant: An enterprise, enterprise department, enterprise user
            or end consumer.</t>

            <t>CRUD: Create, Read, Update, Delete (of resources,
            entities).</t>

            <t>ONPR: On-premises resources &ndash; Tenant intranet or private
            Cloud resident resources.</t>

            <t>OFPR: Off-premises resources &ndash; Resources acquired by a
            tenant in a public Cloud on-demand.</t>

            <t>MTI: Multitenant Isolation - Isolate traffic and
            routing/forwarding/switching instances from one tenant or hybrid
            Cloud from another.</t>

            <t>E2E: End-to-end - From ONPR via private MAN/WAN and public
            Cloud DC networks to OFPR.</t>

            <t>PPVPN: Provider Provided VPN - VPN that is configured and
            managed by a service provider on behalf of a tenant.</t>

            <t>L3MV: L3 MPLS VPN.</t>

            <t>PE: Provider Edge router.</t>

            <t>CE: Customer Edge router.</t>

            <t>VRF: Virtual Routing and Forwarding instance.</t>

            <t>VRF-Lite: VRF without need for various MPLS and L3MV features
            typically supported on CE or other DC routers.</t>

            <t>CSP: Cloud Service Provider - Owns or operates a public and
            hybrid Cloud.</t>

            <t>SHC: Seamless Hybrid Cloud - An instance of a logical hybrid
            Cloud.</t>

            <t>ECRT: BGP Extended Community Route Target.</t>

            <t>SRTR: Source MPLS PE router that originates or exports vpnv4
            routes.</t>

            <t>DRTR: Destination MPLS PE router that imports vpnv4 routes.</t>

            <t/>
          </list></t>
      </section>
    </section>

    <section title="Logical Hybrid Cloud">
      <t/>

      <t>The simplest case of a hybrid Cloud environment is where an
      enterprise connects to a public Cloud and consumes resources and
      all-to-all communication, connectivity, reachability and route
      advertisements are allowed (between the whole enterprise intranet or
      private Cloud and all the acquired off-premises resources). But
      enterprises should have the flexibility in defining what constitutes a
      hybrid Cloud and control communication, connectivity and reachability in
      and across a hybrid Cloud (for enhanced security, flexibility and
      enterprise specific needs).</t>

      <t>While deploying a hybrid Cloud an enterprise (IaaS admin) should be
      able to specify following (it is expected that a CSP will support these
      requirements as part of its hybrid Cloud service and expose relevant
      tenant facing service interfaces so that an enterprise can choose these
      features; the full definition of services and tenant facing interfaces
      is beyond the scope of this document; Readers may check <xref
      target="SHCA">seamless Cloud abstraction, model and interfaces</xref> ):
      <list style="numbers">
          <t>Logical hybrid Cloud: Creation of instances of hybrid Clouds, for
          example, each belonging to an organization within the enterprise or
          for a particular use case or application. We call an instance of a
          logical hybrid Cloud a <spanx style="emph">seamless hybrid Cloud (SHC)</spanx>.
          The concept of a tenant is accordingly generalized where each SHC
          has an associated tenant. Following are the components of an SHC
          that can be associated to or disassociated from an SHC on-demand (by
          a tenant IaaS admin) thus allowing flexible hybrid Cloud
          deployment:<list style="numbers">
              <t>Sites: A set of tenant selected sites (DC, remote/branch).
              Sites not associated with an SHC will not be able to communicate
              with the SHC or resources in it. When a whole site is selected
              all the resources in it become accessible from within the
              SHC.</t>

              <t>ONPR: A set of on-premises (intranet or private Cloud)
              resources of a particular site. In this case the whole site is
              not accessible from within the SHC, only the selected ONPR.</t>

              <t>OFPR: A set of off-premises resources that are acquired in a
              public Cloud DC location.</t>
            </list></t>

          <t>Intra-SHC Direct Reachability: ONPR or OFPR that is <spanx
          style="emph">directly</spanx> reachable within an SHC. For example,
          an ONPR or OFPR (such as a web tier) may be directly reachable from
          within an SHC, but an app tier is reachable indirectly via the web
          tier.</t>

          <t>Inter-SHC connectivity/reachability: Which SHC can connect to or
          reach directly which other SHC.</t>
        </list></t>

      <t>The multitenant isolation will isolate both the data plane traffic
      and control plane elements, such as routing/forwarding/switching table
      instances.</t>

      <t>Figure 1 shows an example of full view of a network and Cloud. An
      example of an SHC (as viewed by a tenant) is shown in Figure 2.</t>

      <t/>

      <figure>
        <artwork><![CDATA[
------------------------- 
| O ONPR-DB  O Other    | T1 Site 1       FIGURE 1         
| |          | Resources|                   
| O FW -------          |
| |                     |   HSW: Hypervisor Switch  
| O ONPR-App1-0         |   VLB/FW: Virtual Load-balancer/Firewall
| |                     |   ER: Edge Router, CE: Customer Edge
| O FW       O ONPR-    |   VM: Virtual Machine, PE: Provider Edge        
| |          | App-D-0  |           
| O ONPR-DMZ |          |
| |          |          |   T2 Site 1       T1 Site 5      T1 Site 7
|---------------------- | -------------  -------------   ------------
| Tenant DC Network   | | |  |        |  |  |        |   |  |       |
|---------------------- | |  |        |  |  |        |   |  |       |
|    |                  | |  |        |  |  |        |   |  |       |
|----O CE11-------------| |--O CE21---|  |--O CE15---|   |--O CE17--|
     |                       |              |               |
     -------------------------              -----------------
              |                                     |
              O PE-TS1------------------------------O PE-TS2
              |   SP Private (IP/MPLS) MAN/WAN      |
CSP           O PE-CL1------------------------------O PE-CL2 CSP
DC-Loc1       |                                     |        DC-Loc2
|-------------O ER-CL1-------------------| |--------O ER-CL2--------|
|             |                          | |        |               |
|            -------------------------   | | ---------------------- |
|            | CSP DC 1 Core/Aggr    |   | | |CSP DC 2 Core/Aggr  | |
|            ---------O Access SW1----   | | ------O Access SW2---| |
|                     |                  | |       | \              |
|         ------------|-----------       | |       |   \            |
|         |                      |       | |       |     \          |
|      ---O HSW 1 ----------     O HSW 2 | | HSW 3 O       O HSW 4  |
|      |           |       |     |       | |       |       |        |
|      |           |       |     |       | |       |       |        |        
|      |           O VFW   |     |       | |       O VFW   |        |
|      |           | T11   |     |       | |       | T12   |        |
| ---------   ----------  ---- ------    | | -----------  --------- |
|  |     |     |     |      |     |      | |  |      |       |      |
|  O ... O     O ... O      O ... O ...  | |  O  ... O       O ...  |
|  T1    T1    T1    T1     T2    T1     | |  T1     T1      T1     |
|  VM11  VM12  VM13  VM14   VM21  VM15   | |  VM16   VM17    VM18   |
|     OFPR-      OFPR-            OFPR-  | |     OFPR-       OFPR-  |
|     DMZ1       App1-1           App-D-1| |     App1-2      App-D-2|
------------------------------------------ --------------------------

]]></artwork>
      </figure>

      <t/>

      <t/>

      <figure>
        <artwork><![CDATA[
------------------------- 
| O ONPR-DB             | T1 Site 1       FIGURE 2         
| |                     |                   
| O FW                  |
| |                     |   HSW: Hypervisor Switch  
| O ONPR-App1-0         |   VLB/FW: Virtual Load-balancer/Firewall
| |                     |   SHC Cloud Abstractions:
| O FW       O ONPR-    |     ST: Site  VST: Virtual Site        
| |          | App-D-0  |     CDCL: Cloud DC Location        
| O ONPR-DMZ |          |
| |          |          |                                 T1 Site 7
|---------------------- |                                ------------
|                     | |                                |  |       |
|---------------------- |                                |  |       |
|    |                  |                                |  |       |
|----O ST11-------------|                                |--O ST17--|
     |                                                      |
     |---------                                     ---------
              |                                     |
              O-------------------------------------O 
              |              T1-SHC-1               |
CSP           O-------------------------------------O        CSP
DC-Loc1       |                                     |        DC-Loc2
|-------------O CDCL1---------------------| |--------O CDCL2--------|
|           /                             | |        |              |
|         /                               | |        |              |
|         |                               | |        |              |
|         |                               | |        |              |
|         |                               | |        |              |
|         |                               | |        |              |
|         |                               | |        |              |
|   VST-  O ------------                  | |   VST- O --------     |
|   T11 / |            |                  | |   T12  |        |     |
|     /   |            |                  | |        |        |     |        
|    |    O VFW        |                  | |        O VFW    |     |
|    |    | T11        |                  | |        | T12    |     |
| ------ --------     ----                | | -----------  ---------|
|  |        |          |                  | |  |      |      |      |
|  O ...    O ...      O ...              | |  O  ... O      O ...  |
|  T1       T1         T1                 | |  T1     T1     T1     |
|  VM11     VM13       VM15               | |  VM16   VM17   VM18   |
|  OFPR-    OFPR-      OFPR-              | |     OFPR-      OFPR-  |
|  DMZ1     App1-1     App-D-1            | |     App1-2     App-D-2|
------------------------------------------ --------------------------



]]></artwork>
      </figure>

      <t/>

      <t/>
    </section>

    <section title="Realization Framework">
      <t/>

      <t>The realization mechanism described in this document is based on the
      assumption that the CSP not only owns or operates the public Cloud DCs,
      but also owns or operates the private IP/MPLS MAN/WAN connecting tenant
      sites and the CSP DCs (note that with proper framework or interfaces in
      place this restriction can be lifted). We outline a framework for
      supporting inter-SHC isolation (multitenant isolation), intra SHC
      isolation ( reachability rules between SHC components) and inter-SHC
      connectivity (akin to extranet), which is as follows (note that the
      realization framework covers only the MAN/WAN segment of the E2E network
      of an SHC):<list style="symbols">
          <t>The inter-SHC isolation is realized by mapping an SHC to an
          instance of an <xref target="RFC4364">L3 MPLS VPN</xref> (L3MV)
          identified with a <xref target="RFC2685">VPN ID</xref> to uniquely
          identify the SHC (SHC-L3MV). The L3MV technology provides a
          framework for multitenant isolation (of traffic and routes) in the
          IP/MPLS MAN/WAN. For SHC, the multitenant isolation has to be
          extended into the public Cloud DCs to incorporate the OFPR in the
          SHC-L3MV. As shown in Figure 2, the set of OFPR can be considered as
          virtual L3MV sites, which in the CSP DC network spans from the DC
          edge (router) to the OFPR resources. On the DC edge the MTI can be
          realized via the L3MV multitenat feature on customer edge (CE)
          router, where multiple customers of an SP (such as in a multitenant
          building) are supported (via VRF-lite together with subinterface or
          other mechanism to separate traffic and routes of each tenant in the
          multitenant CE). Following are various options of mapping an SHC to
          L3MV:<list style="symbols">
              <t>Assuming that the tenant is already on an L3MV with a SP
              (where all the tenant sites are connected via the private
              IP/MPLS MAN/WAN), which is also a CSP:<list style="numbers">
                  <t>V1: Extend the existing L3MV (L3MV-Original) to include
                  OFPR DC locations (to include OFPR resources) as <spanx
                  style="emph">extended multitenant L3MV sites</spanx> (set of
                  OFPR of the SHC in a CSP DC becomes virtual L3MV site) of
                  the L3MV-Original. No new L3MV created (see below). This
                  option requires updates of existing configurations every
                  time SHC or its elements (described above) are CRUD
                  on-demand.</t>

                  <t>V2: Create a separate L3MV for an SHC (L3MV-SHC-Extr)
                  identified by its unique VPN ID (different from
                  L3MV-Original). The L3MV-SHC-Extr is then <spanx
                  style="emph">connected</spanx> as an <spanx style="emph">extranet</spanx>
                  to the L3MV-Original.</t>

                  <t>V3: Create a separate L3MV for an SHC (L3MV-SHC)
                  identified by its unique VPN ID, but L3MV-SHC stands on its
                  own without being connected to the L3MV-Original.</t>
                </list></t>
            </list><list style="symbols">
              <t>In the case where a tenant is not already on an L3MV with a
              CSP, the V3 option above will cover it.</t>
            </list></t>
        </list><spanx style=""/><list style="symbols">
          <t>Map SHC components (Site, ONPR and OFPR) that are specified as
          directly reachable to <xref target="RFC4360">BGP Extended Community
          Route Targets</xref> (ECRT) in <xref target="RFC4364">L3 MPLS
          VPN</xref>. While a single resource can be mapped to an ECRT,
          typically an ONPR or OFPR will be an IP address prefix, subnet or DC
          tier (such as web, app and DB tiers). With this mapping only routes
          for selected SHC components will be exchanged between <spanx
          style="emph">relevant</spanx> MPLS PEs.</t>

          <t>Export the ECRTs from the <spanx style="emph">source MPLS PE router</spanx>
          (export of ECRT results in MP-BGP update message to relevant PEs
          with MP_REACH_NLRI attribute containing VPNv4 address, ECRT and
          other parameters). Referring to Figure 1, examples of source MPLS
          PEs are PE-TS1, which is the source for ONPR-DMZ and PE-CL1 for
          OFPR-App-D2 .</t>

          <t>Import the ECRTs in all <spanx style="emph">relevant</spanx>
          <spanx style="emph">destination MPLS PE routers</spanx> of the SHC.
          Referring to Figure 1, examples of <spanx style="emph">relevant</spanx>
          destination PEs are PE-TS1, PE-TS2 and PE-CL1 for OFPR-App-D2.</t>

          <t>On public Cloud DC networks the L3MV corresponding an SHC can be
          mapped to any of existing (such as VRF-lite, VLAN) or new generation
          DC isolation technologies, such as <xref target="VXLN">VxLAN
          </xref>.</t>

          <t>When a component is detached from an SHC, withdraw the ECRT
          (resulting in MP-BGP update message with MP_UNREACH_NLRI).</t>
        </list></t>

      <t/>
    </section>

    <section title="Use Cases">
      <t/>

      <t>We provide two use cases to explain the framework.</t>

      <t/>

      <section title="Use Case 1 - One SHC">
        <t/>

        <t>This use case shows creation of a flexible logical hybrid Cloud or
        SHC by selectively associating ONPR, OFPR and enterprise sites with
        the SHC. It also shows intra-SHC direct reachability.</t>

        <t/>

        <t>Referring to Figure 1, a tenant T1 creates an SHC T1-SHC-1 and
        associates following components to the SHC:<list style="numbers">
            <t>ONPR-DB, which is not directly reachable from within T1-SHC-1
            (only via ONPR-App1-0), but accessible in the SHC.</t>

            <t>ONPR-App1-0, which is not directly reachable (only via
            ONPR-DMZ), but accessible in the SHC.</t>

            <t>ONPR-App-D-0, which is directly reachable.</t>

            <t>ONPR-DMZ, which is directly reachable.</t>

            <t>T1 Site 1 as a whole is not associated with the SHC. Hence
            other resources of Site 1 will not be accessible from within
            T1-SHC-1.</t>

            <t>T1 Site 5 is not associated with T1-SHC-1.</t>

            <t>T1 Site 7 is associated with T1-SHC-1. Hence all the resources
            in it will be accessible from within T1-SHC-1.</t>

            <t>T1 acquires OFPR-DMZ1 resources in public Cloud DC location
            DC-Loc1. These resources are directly reachable.</t>

            <t>T1 acquires OFPR-App1 resources (OFPR-App1-1) in public Cloud
            DC location DC-Loc1. These resources are not directly reachable,
            rather via ONPR-DMZ or OFPR-DMZ1. It is assumed that the DMZ
            web-servers are globally load-balanced to serve requests to
            instances of App1.</t>

            <t>T1 acquires OFPR-App-D resources (OFPR-App-D-1) in public Cloud
            DC location DC-Loc1. These resources are directly reachable.</t>

            <t>T1 acquires OFPR-App1 resources (OFPR-App1-2) in public Cloud
            DC location DC-Loc2. These resources are not directly
            reachable.</t>

            <t>T1 acquires OFPR-App-D resources (OFPR-App-D-2) in public Cloud
            DC location DC-Loc2. These resources are directly reachable.</t>
          </list></t>

        <t>The realization of T1-SHC-1 is as follows: <list style="symbols">
            <t>The T1-SHC-1 is mapped to an L3MV with a unique VPN ID (L3MV-1)
            that facilitates inter-SHC MTI. Each SHC component described above
            is mapped as follows:</t>

            <t><list style="numbers">
                <t>ONPR-DB is not mapped to an ECRT, that is, its routes will
                not be advertised in the L3MV-1.</t>

                <t>ONPR-App1-0 is not mapped to an ECRT, that is, its routes
                will not be advertised in the L3MV-1.</t>

                <t>ONPR-App-D-0 is mapped to an ECRT, that is, its routes will
                be advertised in the L3MV-1. The ECRT is exported by the
                PE-TS1 and imported by PE-TS2 (to be directly reachable from
                the Site 7), PE-CL1 (to be directly reachable from the OFPR
                resources in DC-Loc1) and PE-CL2 (to be directly reachable
                from the OFPR resources in DC-Loc2).</t>

                <t>ONPR-DMZ is mapped to an ECRT and exported by PE-TS1 and
                imported by PE-TS2, PE-CL1 and PE-CL2.</t>

                <t>T1 Site 1 is not mapped to an ECRT.</t>

                <t>T1 Site 5 is not mapped to an ECRT.</t>

                <t>T1 Site 7 is mapped to an ECRT, exported by PE-TS2 and
                imported by PE-TS1, PE-CL1 and PE-CL2.</t>

                <t>OFPR-DMZ1 is mapped to an ECRT, exported by PE-CL1 and
                imported by PE-TS1, PE-TS2 and PE-CL2.</t>

                <t>OFPR-App1-1 is not mapped to an ECRT.</t>

                <t>OFPR-App-D-1 is mapped to an ECRT, exported by PE-CL1 and
                imported by PE-TS1, PE-TS2 and PE-CL2.</t>

                <t>OFPR-App1-2 is not mapped to an ECRT.</t>

                <t>OFPR-App-D-2 is mapped to an ECRT, exported by PE-CL2 and
                imported by PE-TS1, PE-TS2 and PE-CL1.</t>
              </list></t>
          </list></t>
      </section>

      <section title="Use Case 2 - Multiple SHC">
        <t/>

        <t>This use case shows the case of inter-SHC connectivity, where two
        SHCs are connected in a controlled way. In this use case tenant at the
        Site 7 accesses App1 instances located on-premises in T1 Site 1 via
        load balancing through ONPR-DMZ or OFPR-DMZ1. Site 7 is associated
        with a (dedicated) SHC T1-SHC-7 and App1, DB and DMZ resources are
        grouped into a second SHC T1-SHC-2.</t>

        <t>Referring to Figure 3, a tenant T1 creates an SHC T1-SHC-7 and
        associates following components to the SHC:<list style="numbers">
            <t>T1 Site 7.</t>
          </list></t>

        <t>The realization of T1-SHC-7 is as follows: <list style="symbols">
            <t>The T1-SHC-7 is mapped to an L3MV with a unique VPN ID (L3MV-7)
            that facilitates inter-SHC MTI. Each SHC component described above
            is mapped as follows:</t>

            <t><list style="numbers">
                <t>T1 Site 7 is mapped to an ECRT ECRT7, that is, its routes
                will be advertised into the L3MV-7. The ECRT7 is exported by
                PE-TS2 (L3MV-7 VRF) and imported into L3MV-2 at PE-TS1 and
                PE-CL1 (since connectivity to T1-SHC-2 is allowed; see
                below).</t>
              </list></t>
          </list></t>

        <t>Referring to Figure 3, a tenant T1 creates an SHC T1-SHC-2, allows
        connectivity to T1-SHC-7, and associates following components to the
        SHC:<list style="numbers">
            <t>ONPR-DB, which is not directly reachable (only via
            ONPR-App1).</t>

            <t>ONPR-App1, which is not directly reachable (only via
            ONPR-DMZ).</t>

            <t>ONPR-DMZ, which is directly reachable from within T1-SHC-2 and
            T1-SHC-7.</t>

            <t>T1 acquires OFPR-DMZ1 resources in public Cloud DC location
            DC-Loc1. These resources are directly reachable from within
            T1-SHC-2 and T1-SHC-7.</t>
          </list></t>

        <t>The realization of T1-SHC-2 is as follows: <list style="symbols">
            <t>The T1-SHC-2 is mapped to an L3MV with a unique VPN ID (L3MV-2)
            that facilitates inter-SHC MTI. Each SHC component described above
            is mapped as follows:</t>

            <t><list style="numbers">
                <t>ONPR-DB is not mapped to an ECRT.</t>

                <t>ONPR-App1 is not mapped to an ECRT.</t>

                <t>ONPR-DMZ is mapped to an ECRT, exported by PE-TS1 and
                imported into L3MV-2 at PE-CL1 and into L3MV-7 at PE-TS2.</t>

                <t>OFPR-DMZ1 is mapped to an ECRT, exported by PE-CL1 and
                imported into L3MV-2 at PE-TS1 and L3MV-7 at PE-TS2.</t>
              </list></t>
          </list></t>

        <figure>
          <artwork><![CDATA[
------------------------- 
| O ONPR-DB             | T1 Site 1     FIGURE 3           
| |                     |                   
| O FW                  |
| |                     |   HSW: Hypervisor Switch  
| O ONPR-App1-0         |   VLB/FW: Virtual Load-balancer/Firewall
| |                     |
| O FW                  |                 
| |                     |                 
| O ONPR-DMZ            |
| |                     |                                 T1 Site 7
|---------------------- |                                ------------
||                    | |                                |  |       |
|---------------------- |                                |  |       |
|    |                  |                                |  |       |
|----O CE11-------------|                                |--O CE17--|
     |                                                      |
     -------------------------              -----------------
              |                                     |
              O PE-TS1------------------------------O PE-TS2
              |   SP Private (IP/MPLS) MAN/WAN      |
CSP           O PE-CL1------------------------------O PE-CL2
DC-Loc1       |                                             
|-------------O ER-CL1-------------------| 
|             |                          | 
|            -------------------------   | 
|            | CSP DC 1 Core/Aggr    |   | 
|            ---------O Access SW1----   | 
|                     |                  | 
|         ------------|                  | 
|         |                              | 
|      ---O HSW 1                        | 
|      |                                 | 
|      |                                 |       
|      |                                 | 
|      |                                 | 
| ---------                              | 
|  |                                     | 
|  O                                     | 
|  T1                                    | 
|  VM11                                  | 
|     OFPR-                              | 
|     DMZ1                               | 
------------------------------------------ 



]]></artwork>
        </figure>

        <t/>

        <t/>
      </section>
    </section>

    <section title="Discussion">
      <t/>

      <t>In this section we discuss various issues that needs future
      considerations.</t>

      <t/>

      <section title="Network Management">
        <t/>

        <t>The framework described in this document is a network management
        (NM) framework. Hence the framework can be used on any <spanx
        style="emph">existing network without any changes</spanx>. But NM
        frameworks typically are not built for on-demand operations, as
        required in a Cloud environment. As described above, creation or
        deletion of an SHC should result in creation or deletion of L3MV
        on-demand so that pay-per-use accounting are turned on or off
        on-demand. Similarly, association or disassociation of SHC components
        should result in creation or deletion and export or withdrawal of ECRT
        on-demand. Currently, these actions can be performed via on-demand
        application of configuration. But current network (CLI or even NetConf
        based) configuration/provisioning frameworks are cumbersome to use in
        an on-demand environment. Hence proper Cloud-ready NM framework and
        interfaces are needed.</t>

        <t/>
      </section>

      <section title="Protocol, Control Plane Features">
        <t/>

        <t>In current L3MV the import of ECRT in respective L3MV VRF can only
        be done via (static) pre-configuration, which is not suitable in an
        on-demand Cloud environment. This process can be automated, if an L3MV
        is identified by a unique VPN ID and the information is carried in
        MP-BGP ECRT update messages.</t>

        <t>As described above, the multitenant isolation (MTI) has to reach
        all the way to the OFPR. But currently E2E MTI (as required in a
        hybrid Cloud environment) can only be achieved by stitching together
        multiple isolation technologies (such as L3MV + VRF-Lite + VLAN or
        L3MV + VxLAN) with their own limitations. Homogenous E2E MTI
        technology is desirable. For example, L3MV all the way to a TOR switch
        (TS), where the TS can functions as a PE and the virtual access
        switches on hypervisors as L3MV multitenant CE. The L3MV technology
        handles the case of overlapping private IP addresses of multiple
        tenants. Hence bringing the technology all the way to the hypervisor
        will be useful.</t>

        <t/>
      </section>
    </section>

    <section title="Security Considerations">
      <t/>

      <t>Typical security considerations of L3MV configuration will apply. In
      an on-demand dynamic Cloud environment certain security issues may be
      amplified. For example, uncontrolled BGP updates as resources are CRUD
      very dynamically (by a rogue entity). The dynamic application of
      configuration may amplify the situation of mistaken route leaking from
      one SHC to another. Hence proper steps should be taken.</t>
    </section>

    <section title="IANA Considerations">
      <t/>

      <t>There is no IANA consideration.</t>

      <t/>
    </section>

    <section title="Conclusion">
      <t/>

      <t>We have discussed a framework for realizing inter-hybrid Cloud
      end-to-end multitenant isolation, intra-hybrid Cloud reachability and
      inter-Hybrid Cloud controlled connectivity. The framework allows
      creation of a logical hybrid Cloud, we call a seamless hybrid Cloud
      (SHC), consisting of tenant selected subset of enterprise sites,
      on-premises resources (resident in tenant network) and off-premises
      resources (acquired by the tenant on-demand in public Cloud DCs). An SHC
      is mapped to an L3 MPLS VPN (L3MV) to support inter-SHC multitenant
      isolation and SHC components are mapped to BGP extended community route
      targets (ECRT) so that route advertisements of SHC associated components
      can be controlled and isolated from any other Cloud or non-Cloud L3MV.
      The intra-SHC reachability and inter-SHC connectivity are also
      controlled via SHC-component to ECRT mapping and via proper
      import/export policies involving ECRTs. The framework is network
      management based allowing support of it on existing infrastructure. We
      have discussed few issues above (in the Discussion section), which
      should be addressed. We have not covered the cases A3-A5 discussed in
      the Introduction section, which also should be addressed.</t>

      <t/>
    </section>
  </middle>

  <back>
    <references/>

    <references title="Normative References">
      <reference anchor="RFC4364">
        <front>
          <title>BGP/MPLS IP Virtual Private Networks (VPNs)</title>

          <author fullname="E. Rosen" initials="E." surname="Rosen">
            <organization abbrev="ISI">Cisco Systems</organization>

            <address>
              <postal>
                <street/>

                <city/>

                <region>CA</region>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>
            </address>
          </author>

          <author fullname="Y. Rekhter" initials="Y." surname="Rekhter">
            <organization abbrev="JNPR">Juniper Networks</organization>

            <address>
              <postal>
                <street/>

                <city/>

                <region>CA</region>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>
            </address>
          </author>

          <date month="February" year="2006"/>
        </front>

        <seriesInfo name="RFC" value="4364"/>
      </reference>

      <reference anchor="RFC4360">
        <front>
          <title>BGP Extended Communities Attribute</title>

          <author fullname="S. Sangli" initials="S." surname="Sangli">
            <organization abbrev="ISI">Cisco Systems</organization>

            <address>
              <postal>
                <street/>

                <city/>

                <region>CA</region>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>
            </address>
          </author>

          <author fullname="D. Tappan" initials="D." surname="Tappan">
            <organization abbrev="ISI">Cisco Systems</organization>

            <address>
              <postal>
                <street/>

                <city/>

                <region>CA</region>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>
            </address>
          </author>

          <author fullname="Y. Rekhter" initials="Y." surname="Rekhter">
            <organization abbrev="JNPR">Juniper Networks</organization>

            <address>
              <postal>
                <street/>

                <city/>

                <region>CA</region>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>
            </address>
          </author>

          <date month="February" year="2006"/>
        </front>

        <seriesInfo name="RFC" value="4360"/>
      </reference>

      <!---->
    </references>

    <references title="Informative References">
      <reference anchor="NIST"
                 target="http://csrc.nist.gov/publications/nistpubs/800-145/SP800-145.pdf">
        <front>
          <title>The NIST Definition of Cloud Computing</title>

          <author fullname="Peter" initials="P" surname="Mell">
            <organization abbrev="W3C">World Wide Web
            Consortium</organization>

            <address>
              <postal>
                <street>MIT Laboratory for Computer Science</street>

                <street>545 Technology Square</street>

                <city>Cambridge</city>

                <region>MA</region>

                <code>02139</code>

                <country>US</country>
              </postal>

              <phone>+ 1 617 253 2613</phone>

              <facsimile>+ 1 617 258 5999</facsimile>

              <email>timbl@w3.org</email>

              <uri>http://www.w3c.org</uri>
            </address>
          </author>

          <author fullname="Timothy" initials="T" surname="Grance">
            <organization abbrev="W3C">World Wide Web
            Consortium</organization>

            <address>
              <postal>
                <street>MIT Laboratory for Computer Science</street>

                <street>545 Technology Square</street>

                <city>Cambridge</city>

                <region>MA</region>

                <code>02139</code>

                <country>US</country>
              </postal>

              <phone>+ 1 617 253 2613</phone>

              <facsimile>+ 1 617 258 5999</facsimile>

              <email>timbl@w3.org</email>

              <uri>http://www.w3c.org</uri>
            </address>
          </author>

          <date month="September" year="2011"/>
        </front>

        <seriesInfo name="800-145" value="NIST"/>
      </reference>

      <reference anchor="SHCA"
                 target="http://www.itu.int/dms_pub/itu-t/oth/29/05/T29050000160001PDFE.pdf">
        <front>
          <title>SEAMLESS CLOUD ABSTRACTION, MODEL AND INTERFACES</title>

          <author fullname="Masum Z. Hasan" initials="M." surname="Hasan">
            <organization abbrev="CSCO">Cisco Systems</organization>

            <address>
              <postal>
                <street/>

                <street/>

                <city/>

                <region/>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email>masum@cisco.com</email>

              <uri/>
            </address>
          </author>

          <author fullname="Monique Morrow" initials="M." surname="Morrow">
            <organization abbrev="CSCO">Cisco Systems</organization>

            <address>
              <postal>
                <street/>

                <street/>

                <city/>

                <region/>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri>Cisco</uri>
            </address>
          </author>

          <author fullname="Lew Tucker" initials="L." surname="Tucker">
            <organization abbrev="CSCO">Cisco Systems</organization>

            <address>
              <postal>
                <street/>

                <street/>

                <city/>

                <region/>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri/>
            </address>
          </author>

          <author fullname="Sree Lakshmi D. Gudreddi" initials="S."
                  surname="Gudreddi">
            <organization abbrev="SCU">Santa Clara University</organization>

            <address>
              <postal>
                <street/>

                <street/>

                <city/>

                <region/>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri/>
            </address>
          </author>

          <author fullname="Silvia Figueira " initials="S." surname="Figueira">
            <organization abbrev="SCU">Santa Clara University</organization>

            <address>
              <postal>
                <street/>

                <street/>

                <city/>

                <region/>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri/>
            </address>
          </author>

          <date month="December" year="2011"/>
        </front>

        <seriesInfo name=""
                    value="In Proc. ITU/IEEE Kaleidoscope Conference, December 2011, Cape Town, South Africa"/>
      </reference>

      <reference anchor="VXLN"
                 target="http://tools.ietf.org/html/draft-mahalingam-dutt-dcops-vxlan-00">
        <front>
          <title>VXLAN: A Framework for Overlaying Virtualized Layer 2
          Networks over Layer 3 Networks</title>

          <author fullname="M.Mahalingam" initials="M." surname="M.Mahalingam">
            <organization abbrev="CSCO">VMWare</organization>

            <address>
              <postal>
                <street/>

                <street/>

                <city/>

                <region/>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri/>
            </address>
          </author>

          <author fullname="et.al" initials="" surname="et.al">
            <organization abbrev="CSCO">Cisco Systems</organization>

            <address>
              <postal>
                <street/>

                <street/>

                <city/>

                <region/>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri>Cisco</uri>
            </address>
          </author>

          <date month="August" year="2011"/>
        </front>

        <seriesInfo name="" value="draft-mahalingam-dutt-dcops-vxlan-00.txt"/>
      </reference>

      <reference anchor="RFC2685" target="http://tools.ietf.org/html/rfc2685">
        <front>
          <title>Virtual Private Networks Identifier</title>

          <author fullname="B. Fox" initials="B." surname="Fox">
            <organization abbrev="LUC">Lucent</organization>

            <address>
              <postal>
                <street/>

                <street/>

                <city/>

                <region/>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri/>
            </address>
          </author>

          <author fullname="B. Gleeson" initials="B." surname="Gleeson">
            <organization abbrev="NOR">Nortel</organization>

            <address>
              <postal>
                <street/>

                <street/>

                <city/>

                <region/>

                <code/>

                <country>US</country>
              </postal>

              <phone/>

              <facsimile/>

              <email/>

              <uri>Cisco</uri>
            </address>
          </author>

          <date month="September" year="1999"/>
        </front>

        <seriesInfo name="RFC" value="2685"/>
      </reference>

      <!---->
    </references>
  </back>
</rfc>
