<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE rfc SYSTEM 'rfc3667.dtd' [      <!ENTITY rfc3667 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3667.xml'>    ]><?rfc toc='yes'?><?rfc tocdepth='4'?><?rfc compact="yes"?><!--rfc category="info" ipr="full3978"--><rfc category="std" ipr='trust200902'>	<front>		<title abbrev="SIP Recording Metadata">Session Initiation Protocol (SIP) Recording Metadata</title>		   <author initials="Ram Mohan" surname="Ravindranath" fullname="Ram Mohan Ravindranath">			<organization>Cisco Systems, Inc.</organization>			<address>				<postal>					<street>Cessna Business Park,</street>                              <street>Kadabeesanahalli Village, Varthur Hobli,</street>                              <street>Sarjapur-Marathahalli Outer Ring Road</street>					<city>Bangalore</city>					<region>Karnataka</region>					<code>560103</code>					<country>India</country>				</postal>				<email>rmohanr@cisco.com</email>			</address>		    </author>                <author initials="Parthasarathi" surname="Ravindran" fullname="Parthasarathi Ravindran">			<organization>Nokia Solutions and Networks</organization>			<address>				<postal>					<city>Bangalore</city>					<region>Karnataka</region>					<country>India</country>				</postal>				<email>partha@parthasarathi.co.in</email>			</address>		</author>		<author initials="Paul" surname="Kyzivat" fullname="Paul Kyzivat">			<organization>Huawei</organization>			<address>				<postal>					<region>Hudson, MA</region>					<country>USA</country>				</postal>				<email>pkyzivat@alum.mit.edu</email>			</address>		</author>		<date year="2013" />		<area>Transport</area>		<workgroup>SIPREC</workgroup>		<abstract>			<t>				Session recording is a critical requirement in many communications environments such as call centers and financial trading. In some of these environments, all calls must be recorded for regulatory, compliance, and consumer protection reasons.  Recording of a session is typically performed by sending a copy of a media stream to a recording device.  This document describes the metadata model as viewed by Session Recording Server(SRS) and the Recording metadata format.			</t>		</abstract>	</front>	<middle> <section title="Introduction">			<t>				Session recording is a critical requirement in many communications environments such as call centers and financial trading.  In some of these environments, all calls must be recorded for regulatory, compliance, and consumer protection reasons.  Recording of a session is typically performed by sending a copy of a media stream to a recording device. This document focuses on the Recording metadata which describes the communication session. The document describes a metadata model as viewed by Session Recording Server and the Recording metadata format, the requirements for which are described in <xref target="RFC6341"/> and the architecture for which is described in <xref target="I-D.ietf-siprec-architecture"/>.			</t>		</section>		<section title="Terminology" anchor="sec-term">			<t>				The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",				"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this				document are to be interpreted as described in <xref target="RFC2119"/>.  This				document only uses these key words when referencing normative				statements in existing RFCs."			</t>		</section>		<section title="Definitions">			<t>Metadata Model: An abstract representation of metadata using a Unified Modelling Language(UML) class diagram.</t>			<t>Metadata classes: Each block in the model represents a class. A class is a construct that is used as a blueprint to create instances(called objects) of itself.  The description of each class also has representation of its attributes in a second compartment below the class name.</t>			<t>Attributes: Attributes represents the attributes listed in each of the classes. The attributes of a class are listed in the second compartment below the class name. Each instance of class conveys values for these attributes which adds to the recording's Metadata.</t>			<t>Linkages: Linkages represents the relationship between the classes in the model. It represents the logical connections betweens classes(or objects) in  class diagrams/ object diagrams. The linkages used in the Metadata model of this document are associations. </t>		</section>		<section title ="Metadata Model">			<t>				Metadata is the information that describes recorded media and the CS to which they relate. Below diagram shows a model for Metadata as viewed by Session Recording Server (SRS).			</t>			<artwork>				<![CDATA[          +-------------------------------+          |    Recording Session (RS)     |          +-------------------------------+                |1..*           | 1..*                |               |                 |               | 0..*                |        +-----------------++------------+  |        | Communication   || CSRS       |  |        |  Session (CS)   || Association|--+        |    Group        ||            |  |        +-----------------+      +------------+  |              | 0..1                 |              |                  |0..*          | 1..*   +-------------------------------+ |   Communication Session (CS)  ||                               |+-------------------------------+      | 1..*                   |0..1+-----+                        |    |     | 0..*                   |0..* | +-------------+ receives +----------------+| | Participant |----------|  Media Streams || |             |0..*  0..*|                || |             |          |                || |             |          |                || |             |  sends   |                || |             |----------|                || |             |1.*   0..*|                || +-------------+          +----------------+|        |                        ||        |                        ||        +------------------------+------------+|                                              ||                                              ||           +------------------+    +----------------------+|           |ParticipantCS     |    |  ParticipantStream   |       +-----------|  Association     |    |    Association       |             |                  |    |                      |            +------------------+    +----------------------+            				 ]]></artwork><t>	The Metadata model is a class diagram in Unified Modelling Language(UML). The model describes the structure of a metadata in general by showing the classes, their attributes, and the relationships among the classes. Each block in the model above represents a class. The linkages between the classes represents the relationships which can be associations or Composition. 	The metadata is conveyed from SRC to SRS.</t>          <t>The model allows the capture of a snapshot of a recording's Metadata at a given instant in time. Metadata changes to reflect changes in what is being recorded. For example, if in a conference a participant joins SRC sends a snapshot of metadata having that participant information (with attributes like name/AoR pair and associate-time) to the SRS.</t>			<t>Some of the metadata is not required to be conveyed explicitly from the SRC to the SRS, if it can be obtained contextually by the SRS(e.g., from SIP or SDP signalling).</t></section>		<section title ="Recording Metadata Format">                 <t>					 This section gives an overview of Recording Metadata Format. Some data from the metadata model is assumed to be made available to the SRS through Session Description Protocol (SDP)<xref target="RFC4566"/>, and therefore this data is not represented in the XML document format specified in this document. SDP attributes describes about different media formats like audio, video. The other metadata attributes like participant details are represented in a new Recording specific XML document namely application/rs-metadata+xml. The SDP label attribute <xref target="RFC4574"/> provides an identifier by which a metadata XML document can refer to a specific media description in the SDP sent from the SRC to the SRS.                 </t>                 <t>					 The XML document format can be used to represent either the complete metadata or a partial update to the metadata. The latter includes only elements that have changed compared to the previously reported metadata.				 </t>                 <section title="XML data format">       			<t>Recording Metadata document is an XML document. recording element MUST be present in all recording metadata XML document. recording acts as container for all other elements in this XML document. 				</t> <t>Recording object is a XML document. It MUST have the XML declaration and it SHOULD contain an encoding declaration in the XML declaration, e.g., <![CDATA[ "<?xml version='1.0' encoding='UTF-8'?>". ]]> If the charset parameter of the MIME content type declaration is present and it is different from the encoding declaration, the charset parameter takes precedence.				</t>                         <t>Every application conforming to this specification MUST accept the UTF-8 character encoding to ensure the minimal interoperability.				</t>                        <t>Syntax and semantics error in recording XML document has to be informed to the originator using application specific mechanism.                        </t> <section title="Namespace">				<t>  The namespace URI for elements defined by this specification is a Uniform Resource Namespace (URN) <xref target="RFC2141"/>, using the namespace    identifier 'ietf' defined by <xref target="RFC2648"/> and extended by <xref target="RFC3688"/>.				</t>                        <t>The URN is as follows: urn:ietf:params:xml:ns:recording				</t>                    </section>                       <section title="recording">				<t>recording element MUST contain an xmlns namespace attribute with value as urn:ietf:params:xml:ns:recording. One recording element MUST be present in the all recording metadata XML document.				</t>	                 <t>dataMode element shows whether the XML document is complete document or partial update. The default value is complete.                       </t>                       </section>		</section>            </section>		<section title="Recording Metadata classes">			<t>				This section describes each class of the metadata model, and the attributes of each class. This section also describes how different classes are linked and the XML element for each of them.</t>			<section title="Recording Session">				<artwork>					<![CDATA[+-------------------------------+               | Recording Session (RS)        |               +-------------------------------+               |                               ||     Start/End Time            ||                               ||                               ||                               |+-------------------------------+       |1..*            | 1..*       |                |            |0..*            | 0..*  Communication    Communication  Session          Session Group(CS Group)					]]>				</artwork>				<t>Each instance of a Recording Session class (namely the Recording Session Object) represents a SIP session created between an SRC and SRS for the purpose of recording a Communication Session. </t>							<section title="Attributes">				<t> A Recording Session class has the following attributes:</t>				<list style='symbols'>					<t> Start/End Time - Represents the Start/End time of a Recording Session object. </t>				</list> 												</section>				<section title="Linkages">					<t>Each instance of Recording Session has:</t>					<t>						<list style='symbols'>							<t>Zero or more instances of  Communication Session Group. CSG may be zero because it is optional metadata object. Also the allowance of zero instances is to accommodate persistent recording, where there may be none.</t>							<t>Zero or more instances of Communication Session objects.</t>						</list>					</t>				</section>				<section title="XML element">					<t>Recording Session object is represented by recording XML element. That in turn relies on the SIP/SDP session with which the XML document is associated to provide some of the attributes of the Recording Session element. </t>					<t>Start and End time value are derivable from Date header(if present in SIP message) in RS. In cases where Date header is not present, Start/End time are derivable from the time at which SRS receives the notification of SIP message to setup RS / disconnect RS. </t>				</section>			</section>			<section title="Communication Session Group">				<artwork>					<![CDATA[ Recording Session (RS)           | 1..*           |            | 0..* +-------------------------------+               | Communication Session         ||     Group                     |               +-------------------------------+               |  Unique-ID                    ||  associate-time               ||  disassociate-time            ||                               |+-------------------------------+           | 0..1                                          |                                               | 1..*                                Communication Session (CS)					]]>				</artwork>							<t>					One instance of a Communication Session Group class (namely the Communication Session Group object) provides  association or linking of Communication Sessions.				</t>				<section title="Attributes">					<t> A CS Group has the following attributes: </t>					<list style='symbols'>						<t>Unique-ID - This Unique-ID is to group different CSs that are related. SRC (or SRS) is responsible for ensuring the uniqueness of Unique-ID in case multiple SRC interacts with the same SRS. The mechanism by which SRC groups the CS is outside the scope of SIPREC. </t>						<t>Associate-time - Associate-time for CS-Group shall be calculated by SRC  as the time when a grouping is formed. The rules that determine how a grouping of different Communication Session objects is done by SRC is outside the scope of SIPREC.</t>						<t>Disassociate-time - Disassociate-time for CS-Group shall be calculated by SRC as the time when the grouping ends</t>					</list>				</section>				<section title="Linkages">					<t>The linkages between Communication Session Group class and other classes is association. A communication Session Group is associated with RS and CS in the following manner:</t>					<t>						<list style='symbols'>							<t> There is one or more Recording Session objects per Communication Session Group. </t>							<t>Each Communication Session Group object has to be associated with one or more RS [Here each RS can be setup by the potentially different SRCs] </t>							<t> There is one or more Communication Sessions per CS Group [e.g. Consult Transfer]</t>						</list>					</t>				</section>                  	<section title="XML element">					 <t>					 Group element is an optional element provides the information about the communication session group					 </t>                               <t>Each communication session group (CSG)object is represented using one group element. Each group element has unique Base 64 URN UUID attribute which helps to uniquely identify CSG. 			        	</t>                        </section>			</section>			<section title="Communication Session">				<artwork>					<![CDATA[ Recording	       Communication Session            Session Group(CS Group)   |1..*                  | 0..1   |                      |    |0..*                  | 1..* +-------------------------------+|   Communication Session (CS)  | |                               |  +-------------------------------+ |   CS Identifier               | |   Termination Reason          ||   Start-time                  ||   Stop-time                   |+-------------------------------+   |                      |   | 0..*                 |0..1                 |                      |                     | 0..*                 |0..*              Participant              Media Stream					]]>				</artwork>				<t>A Communication Session class and its object in the metadata model represents Communication Session and its properties needed as seen by SRC. </t>								<section title="Attributes">					<t> A communication Session class has the following attributes:</t>					<t>						<list style='symbols'>							<t>Termination Reason - This represents the reason why a CS was terminated. The communication session MAY contain a Call Termination Reason. This MAY be derived from SIP Reason header <xref target="RFC3326"/> of CS.</t>							<t>CS Identifier - This attribute is used to uniquely identify a CS.</t>                                                        <t>Start-time - This optional attribute represents start time of CS as seen by SRC</t>                                                        <t>Stop-time - This optional attribute represents stop time of CS as seen by SRC</t>						</list>						</t>					<t>This document does not specify attributes relating to what should happen to a recording of a CS after it has been delivered to the SRS, e.g., how long to retain the recording, what access controls to apply. The SRS is assumed to behave in accordance with policy. The ability for the SRC to influence this policy is outside the scope of this document. However if there are implementations where SRC has enough information, this could be sent as Extension Data attached to CS</t>					</section>				<section title="Linkages">					<t>						A Communication Session is linked to CS-Group, Participant, Media Stream and Recording Session classes using the association relationship. Association between CS and Participant allows:					</t>					<t>						<list style='symbols'>							<t>CS to have atleast zero or more participants</t>							<t>Participant is associated with zero or more CSs. This includes participants who are not directly part of any CS. An example of such a case is participants in a premixed media stream. The SRC may have knowledge of such Participants, yet not have any signaling relationship with them. This might arise if one participant in CS is a conf focus. To summarize even if SRC does not have direct signalling relationships with all participants in a CS, it should nevertheless create a Participant object for each participant that it knows about. </t>							<t>The model also allows participants in CS that are not participants in the media. An example is the identity of a 3pcc controller that has initiated a CS to two or more participants of the CS. Another example is the identity of a conference focus. Of course a focus is probably in the media, but since it may only be there as a mixer, it may not report itself as a participant in any of the media streams.</t>						</list>					</t>					<t>Association between CS and Media Stream allows:</t>					<t>						<list style='symbols'>							<t>A CS to have zero or more Streams</t>							<t>								A stream can be associated with at most one CS. Stream in persistent RS is not required to be associated with any CS before CS is created and hence the zero association is allowed. </t>						</list>					</t>					<t>Association between CS and RS allows:</t>					<t>						<list style='symbols'>							<t>Each instance of RS has Zero or more instances of Communication Session objects.</t>							<t>Each CS has to be associated with one more RS [ Here each RS can be potentially setup by different SRCs]</t>						</list>					</t>				</section>                  	<section title="XML element">					 <t>					 Session element provides the information about the communication session					 </t>                               <t>Each communication session(CS) object is represented by one session element. Each session element has unique Base 64 URN UUID attribute which helps to uniquely identify CS. 				      </t>                              <t>The XML reason element MAY be included in metadata to represent a CS Termination Reason.  There MAY be multiple instances of the XML reason element inside a session element.  The reason XML element has 'protocol' as an attribute, which indicates the protocol from which the reason string is derived. The default value for protocol attribute is "SIP". </t>								  <t>group-ref element MAY exist to indicate the group where the mentioned session belongs.							  </t>                        </section>			</section>	<section title="CSRSAssociation">				<artwork>					<![CDATA[					                     1..*            0..*   Recording                             Communication      Session        ----------+---------- Session                             |                             |                             |                   +-------------------+                   | CSRSAssociation   |                   +-------------------+                   | Association-Time  |                   | Disassociaton-Time|                   +-------------------+					]]>				</artwork>				<t>A CSRS Association class and its objects has attributes of CS object which are attributes of association of a session to a RS.  </t>				<section title="Attributes">					<t>CSRS association class has the following attributes:</t>					<t>						<list style='symbols'>							<t>Associate-time - associate-time is calculated by SRC as the time it sees a CS is associated to a RS</t>							<t>Disassociate-time- Disassociate-time is calculated by SRC as the time it see a CS disassociate from a RS.</t>						</list>                                     It is possible that a given CS can have multiple associate/disassociate times within given RS. 					</t>				</section>				<section title="Linkages">					<t>CSRS association class is linked to CS and RS classes. There are no cardinalties for this linkage. </t>				</section>				<section title="XML element">					<t>sessionrecordingassoc is the XML element to represent CSRS association object. session URN UUID is used to uniquely identify this element and link with the specific session.  </t>				</section>			</section>			<section title="Participant">				<artwork>					<![CDATA[ Communication Session (CS)           | 0..*           |            | 0..* +-------------------------------+               |          Participant          ||                               |               +-------------------------------+               |  AoR / Name Pair list         ||                               ||                               |+-------------------------------+        | 0..*       1..*|                            receives|                |sends                            | 0..*       0..*|                                  Media Stream		  ]]>				</artwork>					<t>					A Participant class and its objects has information about a device that is part of a CS and/or contributes/consumes media stream(s) belonging to a CS.</t>				<section title="Attributes">					<t> Participant has attributes like:</t>					<t>						<list style='symbols'>							<t>AoR / Name pair list - This attribute is a list of Name/AoR tuple. An AoR MAY be SIP/SIPS/TEL URI. Name represents Participant name(SIP display name) or DN number ( in case it is known). There are cases where a participant can have more than one AoR [e.g. P-Asserted-identity header <xref target="RFC3325"/>  which can have both SIP and TEL URIs]</t>						</list>						<t>This document does not specify other attributes relating to participant e.g. Participant Role, Participant type. An SRC which has information of these attributes can indicate the same as part of extension data to Participant from SRC to SRS.</t>					</t>				</section>				<section title="Linkages">					<t>The participant class is linked to MS and CS class using association relationship. The association between participant and Media Stream allows:</t>					<t>					<list style='symbols'>						<t> Participant to receives zero or more media streams</t>						<t> Participant to send zero or more media streams. (Same participant provides multiple streams e.g. audio and video)</t>						<t>	Media stream to be received by zero or more participants. Its possible, though perhaps unlikely, that a stream is generated but sent only to the SRC and SRS, not to any participant. E.g. In conferencing where all participants are on hold and the SRC is collocated with the focus. Also a media stream may be received by multiple participants (e.g. Whisper calls, side conversations).</t>						<t>	Media stream to be sent by one or more participants (pre-mixed streams).</t>					</list>					<t>						Example of a case where a participant receives Zero or more streams - a Supervisor may have side conversation with Agent, while Agent converses with customer.					</t>					</t>				</section>      	            <section title="XML element">					 <t>						 A participant element represents a Participant object.					 </t>                                        <t>						 Participant MUST have a NameID complex element which contains AoR as attribute and Name as element. AOR element is SIP/SIPS URI FQDN or IP address which represents the user. name is an optional element to represent display name.					</t>                    <t>						Each participant element has unique ID (Base 64 URN UUID) attribute which helps to uniquely identify participant and session Base 64 URN UUID to associate participant with specific session element. Base 64 URN UUID of participant MUST used in the scope of CSG and no new Base 64 URN UUID has to be created for the same element (participant, stream) between different CS in the same CSG. In case Base 64 URN UUID has to be used permanent, careful usage of Base 64 URN UUID to original AoR has to be decided by the implementers and it is implementer's choice.					</t>                    </section>			</section>			<section title="ParticipantCSAssociation">				<artwork>					<![CDATA[					                     1..*            0..*   Communication    Session        ----------+---------- Participant                             |                             |                             |                   +-------------------+                   | ParticipantCS     |                   | Association       |                   +-------------------+                   | Capabilities      |                   | Association-Time  |                   | Disassociaton-Time|                   +-------------------+					]]>				</artwork>				<t>A participantCS Association class and its objects has attributes of participant object which are attributes of association of a participant to a Session.</t>				<section title="Attributes">					<t>ParticipantCS association class has the following attributes:</t>					<t>						<list style='symbols'>							<t>Associate-time - associate-time is calculated by SRC as the time it sees a participant is associated to CS</t>							<t>Disassociate-time- Disassociate-time is calculated by SRC as the time it see a participant disassociate from a CS. It is possible that a given participant can have multiple associate/disassociate times within given communication session. </t>							<t>Capabilities - A participant capabilities as defined in <xref target="RFC3840"/> which is an optional attribute that includes the capabilities of a participant in a CS. Each participant shall have Zero or more capabilities. A participant may use different capabilities depending on the role it plays at a particular instance. IOW if a participants moves across different CSs ( due to transfer e.t.c) OR is simultaneously present in different CSs its role may be different and hence the capability used.</t>						</list>					</t>				</section>				<section title="Linkages">					<t>The participantCS association class is linked to participant and CS classes. There are no cardinalties for this linkage. </t>				</section>				<section title="XML element">					<t>participantsessionassoc XML element represent participantCS association object. participant and session id is used to uniquely identify this element </t>					<t>NOTE: RFC 4235 encoding shall be used to represent capabilities attribute in XML. </t>				</section>			</section>			<section title="Media Stream">				<artwork>					<![CDATA[                                Participant                            | 0..*       1..*|                    receives|                |sends                            | 0..*       0..*|                         +-------------------------+                         |          Media Stream   |                         |                         |Communication 0..1  0..* +-------------------------+  Session    ------------|                         |                         |  Media Stream Reference |                         |  Content-type           |                         |                         |                         +-------------------------+					]]>				</artwork>				<t>A Media Stream class (and its objects) has the properties of media as seen by SRC and sent to SRS. Different snapshots of media stream object may be sent whenever there is a change in media (e.g. dir change like pause/resume and/or codec change and/or participant change.).</t>				<section title="Attributes">					<t>A Media Stream class has the the following attributes:</t>					<t>						<list style='symbols'>							<t>Media Stream Reference - In implementations this can reference to m-line </t>							<t>								Content - The content of an MS element will be described in terms of value from the <xref target="RFC4796"/> registry.							</t>						</list>					</t>						<t>The metadata model should include media streams that are not being delivered to the SRS. Examples include cases where SRC offered certain media types but SRS chooses to accept only a subset of them OR an SRC may not even offer a certain media type due it its restrictions to record</t>				</section>			<section title="Linkages">				<t>A Media Stream is linked to participant and CS classes using the association relationship. The details of association with the Participant are described in the Participant class section. The details of association with CS is mentioned in the CS section. </t>			</section>	            <section title="XML element">				 <t>				    stream element represents a Media Stream object. Stream element indicates SDP media lines associated with the session and participants.				 </t>                 <t>					 This element indicates the SDP m-line properties like label attributes. Label attribute is used to link m-line SDP body using label attribute in SDP m-line.  				</t>				<t>					Each stream element has unique Base 64 URN UUID attribute which helps to uniquely identify stream and session Base 64 URN UUID to associate stream with specific session element.</t>					<t>The content attribute if an SRC wishes to send is conveyed in RS SDP.</t>               </section>			</section>			<section title="ParticipantStream Association">				<artwork>					<![CDATA[+-------------------+| ParticipantSteam  || Association       |+-------------------+   +----------Participant| Association-Time  |   |       0..*| 1..*|| Disassociaton-Time|---+       recv|     |sends| Recv              |   |       0..*| 0..*|| Send              |   |           |     | +-------------------+   |           |     |                        +----------Media Stream				]]>				</artwork>				<t>A ParticipantStream association class and its object has attributes that are attributes of association of a Participant to a Stream.</t>				<section title="Attributes">					<t>A participantStream association class has the following attributes:</t>					<t>						<list style='symbols'>							<t>Associate-Time: This attributes indicates the time a Participant started contributing to a Media Stream</t>							<t>Disassociate-Time: This attribute indicates the time a Participant stopped contributing to a Media Stream</t>							<t>Recv: This attribute indicates whether a Participant is receiving a media stream or not. This attribute has a value which points to a stream represented by its Unique_id. The presence of this attribute indicates that a participant is receiving a stream represented by the Unique_id. If due to changes in CS(like hold) the participants stops receiving a stream, a snapshot MUST be sent from SRC to SRS with no Recv element for that stream.</t>							<t>Send: This attribute indicates whether a participant is contributing to a stream or not. This attribute has a value which points to stream represented by its unique_id. The presence of this attribute indicates that a participant is contributing to a  stream represented by the Unique_id. If due to changes in CS if a participant stops contributing to a stream, a snapshot MUST be sent from SRC to SRS with no Send element for that stream.</t>						</list>					</t>				</section>				<section title="Linkages">					<t>The participantStream association class is linked to participant and Stream classes. There are no cardinalties for this linkage. </t>				</section>				<section title="XML element">				 <t>The participantstreamassoc complex XML element represents the participant to stream association object. This XML element is used to represent a snapshot of a participant association with a stream. The send and recv XML elements MUST be used to indicate whether a participant is contributing to a stream or receiving a stream.  There MAY be multiple instances of the send and recv XML elements inside a particpantstreamassoc element.  If a metadata snapshot is sent with a participantstreamassoc that does not have any send and recv elements, it means that participant is neither contributing to any streams nor receiving any streams.</t>				</section>			</section> 		      <section title="associate-time/disassociate-time">				<t>					associate-time/disassociate-time contains a string indicating the date and time of the status change of this tuple.  The value of this element MUST follow the IMPP datetime format <xref target="RFC3339"/>.  Timestamps that contain 'T' or 'Z' MUST use the capitalized forms. At a time, any of the time tuple associate-time or disassociate-time MAY exist in the element namely group, session, participant and not both timestamp at the same time.				</t>                        <t>					As a security measure, the timestamp element SHOULD be included in all tuples unless the exact time of the status change cannot be determined.				</t>		       </section>			<section title="Unique ID format">				<t> Unique id is generated in two steps: </t>				<list style='symbols'>					<t>UUID is created using <xref target="RFC4122"/>) </t>					<t>UUID is encoded using base64 as defined in <xref target="RFC4648"/> </t>				</list>                       <t> The above mentioned unique-id mechanism SHOULD be used for each metadata element.  Multiple SRCs can refer to the same element/UUID (how each SRC learns the UUID here is out of scope of SIPREC)</t>			</section>			<section title="Metadata version Indicator">				<t> This section defines a version indicator for metadata XML.</t>                <t> This version value allows the SRS to know the exact metadata XML schema sent by the SRC. This document describes version 1.  The value '1' represent SIPREC metadata version. Implementations may not interoperate if the version implemented by the sender is not known by the receiver.  No negotiation of versions is provided.  There is no significance to the version number although documents which update or obsolete this document (possibly including drafts of such documents) should include a higher version number if the metadata XML schema changes. </t>			</section>		</section><section title="SIP Recording Metadata Example">	<section title="Complete SIP Recording Metadata Example">				<t>					The following example provides all the tuples involved in Recording Metadata XML body.				</t>				<figure title="SIP Recording Metadata Example XML body">					<artwork>						<![CDATA[ <?xml version="1.0" encoding="UTF-8"?>       <recording xmlns='urn:ietf:params:xml:ns:recording:1'>              <dataMode>complete</dataMode>          <group group_id="7+OTCyoxTmqmqyA/1weDAg==">            <associate-time>2010-12-16T23:41:07Z</associate-time>             <!-- Standardized extension -->            <call-center xmlns='urn:ietf:params:xml:ns:callcenter'>              <supervisor>sip:alice@atlanta.com</supervisor>                         </call-center>            <mydata xmlns='http://example.com/my'>              <structure>FOO!</structure>              <whatever>bar</whatever>            </mydata>          </group>          <session session_id="hVpd7YQgRW2nD22h7q60JQ==">            <group-ref>7+OTCyoxTmqmqyA/1weDAg==            </group-ref>                                      <!-- Standardized extension -->             <uniqueid>FaXHlc+3WruaroDaNE87am==</uniqueid>             <structure>FOO!</structure>            <whatever>bar</whatever>          </session>          <sessionrecordingassoc session_id="hVpd7YQgRW2nD22h7q60JQ==">          <associate-time>2010-12-16T23:41:07Z</associate-time>          </sessionrecordingassoc>           <participant             participant_id="srfBElmCRp2QB23b7Mpk0w==">             <nameID aor=sip:bob@biloxi.com>			   <name xml:lang="it">Bob B</name>			  </nameID>              <!-- Standardized extension -->            <structure>FOO!</structure>            <whatever>bar</whatever>          </participant>          <participantsessionassoc             participant_id="srfBElmCRp2QB23b7Mpk0w=="             session_id="hVpd7YQgRW2nD22h7q60JQ==">           <associate-time>2010-12-16T23:41:07Z</associate-time>          </participantsessionassoc>          <participantstreamassoc              participant_id="srfBElmCRp2QB23b7Mpk0w==">             <send>i1Pz3to5hGk8fuXl+PbwCw==</send>             <send>UAAMm5GRQKSCMVvLyl4rFw==</send>             <recv>8zc6e0lYTlWIINA6GR+3ag==</recv>             <recv>EiXGlc+4TruqqoDaNE76ag==</recv>          </participantstreamassoc>          <participant              participant_id="zSfPoSvdSDCmU3A3TRDxAw==">              <nameID aor=sip:Paul@biloxy.com>			   <name xml:lang="it">Paul</name>			  </nameID>              <!-- Standardized extension -->            <structure>FOO!</structure>            <whatever>bar</whatever>          </participant>          <participantsessionassoc              participant_id="zSfPoSvdSDCmU3A3TRDxAw=="              session_id="hVpd7YQgRW2nD22h7q60JQ==">              <associate-time>2010-12-16T23:41:07Z</associate-time>          </participantsessionassoc>          <participantstreamassoc               participant_id="zSfPoSvdSDCmU3A3TRDxAw==">              <send>8zc6e0lYTlWIINA6GR+3ag==</send>              <send>EiXGlc+4TruqqoDaNE76ag==</send>              <recv>UAAMm5GRQKSCMVvLyl4rFw==</recv>              <recv>i1Pz3to5hGk8fuXl+PbwCw==</recv>          </participantstreamassoc>          <stream stream_id="UAAMm5GRQKSCMVvLyl4rFw=="              session session_id="hVpd7YQgRW2nD22h7q60JQ==">              <label>96</label>          </stream>          <stream stream_id="i1Pz3to5hGk8fuXl+PbwCw=="              session_id="hVpd7YQgRW2nD22h7q60JQ==">              <label>97</label>          </stream>          <stream stream_id="8zc6e0lYTlWIINA6GR+3ag=="              session_id="hVpd7YQgRW2nD22h7q60JQ==">              <label>98</label>          </stream>          <stream stream_id="EiXGlc+4TruqqoDaNE76ag=="              session_id="hVpd7YQgRW2nD22h7q60JQ==">              <label>99</label>          </stream>     </recording>                           ]]>					</artwork>				</figure>			</section>			<section title="Partial Update of Recording metadata XML body">				<t>					The following example provides partial update in Recording Metadata XML body for the above example. The example has a snapshot that carries the disassociate-time for a participant from a session.				</t>				<figure title="Partial update of SIP Recording Example XML body">					<artwork>						<![CDATA[   <?xml version="1.0" encoding="UTF-8"?>     <recording xmlns='urn:ietf:params:xml:ns:recording:1'>       <dataMode>partial</dataMode>       <participant          participant_id="srfBElmCRp2QB23b7Mpk0w==">          <name ID=sip:bob@biloxi.com>		    <name xml:lang="it">Bob R</name>		  </nameID>                <structure>FOO!</structure>           <whatever>bar</whatever>       </participant>       <participantsessionassoc             participant_id="srfBElmCRp2QB23b7Mpk0w=="             session_id="hVpd7YQgRW2nD22h7q60JQ==">           <disassociate-time>2010-12-16T23:41:07Z</disassociate-time>        </participantsessionassoc>     </recording>                           ]]>					</artwork>				</figure>			</section>		</section>		<section title="XML Schema definition for Recording metadata"><t>This section defines XML schema for Recording metadata document</t>           <artwork> <![CDATA[		   <?xml version="1.0" encoding="UTF-8"?> <xs:schema targetNamespace="urn:ietf:params:xml:ns:recording:1"    xmlns:xs="http://www.w3.org/2001/XMLSchema"    xmlns:tns="urn:ietf:params:xml:ns:recording"    elementFormDefault="qualified"    attributeFormDefault="unqualified">   <!-- This import brings in the XML language attribute xml:lang-->   <xs:import namespace="http://www.w3.org/XML/1998/namespace"/>   <xs:element name="recording" type="tns:recording"/>   <xs:complexType name="recording">       <xs:sequence>           <xs:element name="datamode" type="tns:dataMode"                minOccurs="0"/>         <xs:element name="group" type="tns:group"                minOccurs="0" maxOccurs="unbounded"/>           <xs:element name="session" type="tns:session"                minOccurs="0" maxOccurs="unbounded"/>           <xs:element name="participant" type="tns:participant"                minOccurs="0" maxOccurs="unbounded"/>           <xs:element name="stream" type="tns:stream"               minOccurs="0" maxOccurs="unbounded"/>          <xs:element name="sessionrecordingassoc"               type="tns:sessionrecordingassoc"               minOccurs="0" maxOccurs="unbounded"/>          <xs:element name="participantsessionassoc"               type="tns:participantsessionassoc"               minOccurs="0" maxOccurs="unbounded"/>          <xs:element name="participantstreamassoc"               type="tns:participantstreamassoc"               minOccurs="0" maxOccurs="unbounded"/>          <xs:any namespace='##other'                   minOccurs='0'                   maxOccurs='unbounded'                   processContents='lax'/>       </xs:sequence>   </xs:complexType>   <xs:complexType name="group">       <xs:sequence>         <xs:element name="associate-time" type="xs:dateTime"            minOccurs="0"/>         <xs:element name="disassociate-time" type="xs:dateTime"            minOccurs="0"/>        <xs:any namespace='##other'                   minOccurs='0'                   maxOccurs='unbounded'                   processContents='lax'/>       </xs:sequence>       <xs:attribute name="group_id" type="xs:base64Binary"            use="required"/>   </xs:complexType>      <xs:complexType name="session">       <xs:sequence>         <xs:element name="reason" type="tns:reason" minOccurs="0"                 maxOccurs="unbounded"/>         <xs:element name="group-ref" type="xs:base64Binary"                minOccurs="0" maxOccurs="1"/>         <xs:element name="start-time" type="xs:dateTime"                minOccurs="0" maxOccurs="1"/>         <xs:element name="stop-time" type="xs:dateTime"                minOccurs="0" maxOccurs="1"/>            <xs:any namespace='##other'                   minOccurs='0'                   maxOccurs='unbounded'                   processContents='lax'/>       </xs:sequence>       <xs:attribute name="session_id" type="xs:base64Binary"            use="required"/>   </xs:complexType>   <xs:complexType name="sessionrecordingassoc">       <xs:sequence>         <xs:element name="associate-time" type="xs:dateTime"                minOccurs="0"/>         <xs:element name="disassociate-time" type="xs:dateTime"                minOccurs="0"/>         <xs:any namespace='##other'                   minOccurs='0'                   maxOccurs='unbounded'                   processContents='lax'/>       </xs:sequence>       <xs:attribute name="session_id" type="xs:base64Binary"            use="required"/>   </xs:complexType>   <xs:complexType name="participant">       <xs:sequence>           <xs:element name="nameID" type="tns:nameID"             maxOccurs="1"/>        <xs:any namespace='##other'                   minOccurs='0'                   maxOccurs='unbounded'                   processContents='lax'/>       </xs:sequence>       <xs:attribute name="participant_id" type="xs:base64Binary"            use="required"/></xs:complexType>   <xs:complexType name="participantsessionassoc">       <xs:sequence>       <xs:element name="associate-time" type="xs:dateTime"                minOccurs="0"/>       <xs:element name="disassociate-time" type="xs:dateTime"                minOccurs="0"/>         <xs:any namespace='##other'                   minOccurs='0'                   maxOccurs='unbounded'                   processContents='lax'/>       </xs:sequence>       <xs:attribute name="participant_id" type="xs:base64Binary"            use="required"/>       <xs:attribute name="session_id" type="xs:base64Binary"            use="required"/>   </xs:complexType>   <xs:complexType name="participantstreamassoc">       <xs:sequence>           <xs:element name="send" type="xs:base64Binary"             minOccurs="0" maxOccurs="unbounded"/>           <xs:element name="recv" type="xs:base64Binary"             minOccurs="0" maxOccurs="unbounded"/>             <xs:element name="associate-time" type="xs:dateTime"                minOccurs="0"/>          <xs:element name="disassociate-time" type="xs:dateTime"                minOccurs="0"/>             <xs:any namespace='##other'                   minOccurs='0'                   maxOccurs='unbounded'                   processContents='lax'/>       </xs:sequence>       <xs:attribute name="participant_id" type="xs:base64Binary"            use="required"/>   </xs:complexType>   <xs:complexType name="stream">       <xs:sequence>         <xs:element name="label" type="xs:string"             minOccurs="0" maxOccurs="1"/>          <xs:any namespace='##other'                   minOccurs='0'                   maxOccurs='unbounded'                   processContents='lax'/>       </xs:sequence>       <xs:attribute name="stream_id" type="xs:base64Binary"            use="required"/>       <xs:attribute name="session_id" type="xs:base64Binary"/>   </xs:complexType>     <xs:simpleType name="dataMode">         <xs:restriction base="xs:string">            <xs:enumeration value="complete"/>                    <xs:enumeration value="partial"/>         </xs:restriction>   </xs:simpleType>   <xs:complexType name="nameID">    <xs:sequence>       <xs:element name="name" type ="tns:name" minOccurs="0"                          maxOccurs="1"/>    </xs:sequence>    <xs:attribute name="aor" type="xs:anyURI" use="required"/>  </xs:complexType> <xs:complexType name="name">   <xs:simpleContent>        <xs:extension base="xs:string">         <xs:attribute ref="xml:lang" use="optional"/>        </xs:extension>       </xs:simpleContent>  </xs:complexType>  <xs:complexType name="reason">    <xs:simpleContent>     <xs:extension base="xs:string">        <xs:attribute type="xs:short" name="cause" use="required"/>        <xs:attribute type="xs:string" name="protocol" default="SIP"/>     </xs:extension>    </xs:simpleContent>  </xs:complexType></xs:schema>            ]]>	   </artwork>   </section>   <section title="Security Considerations">       <t>The metadata information sent from SRC to SRS MAY reveal sensitive information about different participants in a session.  For this reason, it is RECOMMENDED that a SRC use a strong means for authentication and metadata information protection and that it apply comprehensive authorization rules when using the metadata format defined in this document.  The below section discusses each of these aspects in more detail.</t>			<section title="Connection Security">				<t>It is RECOMMENDED that a SRC authenticate SRS using the normal SIP authentication mechanisms, such as Digest as defined in Section 22 of <xref target="RFC3261"/>. The mechanism used for conveying the metadata information MUST ensure integrity and SHOULD ensure confidentially of the information. In order to achieve these, an end-to-end SIP encryption mechanism, such as S/MIME described in <xref target="RFC3261"/>, SHOULD be used.</t>				<t>If a strong end-to-end security means (such as above) is not available, it is RECOMMENDED that a SRC use mutual hop-by-hop Transport Layer Security (TLS) authentication and encryption mechanisms described in "SIPS URI Scheme" and "Interdomain Requests" of <xref target="RFC3261"/>.</t>		</section>        </section>		<section title="IANA Considerations" anchor="sec.iana-considerations">	<t>This specification registers a new XML namespace, and a new XML schema. 			</t>           <section title="SIP recording metadata Schema Registration">                                         <t>         URI: urn:ietf:params:xml:ns:recording					</t>                                         <t>         Registrant Contact: IETF SIPREC working group, Ram mohan R(rmohanr@cisco.com)					</t>                                        <t>         XML: the XML schema to be registered is contained in Section 8.					</t>                                <t>         Its first line is <![CDATA[ <?xml version="1.0" encoding="UTF-8"?> ]]> and its last line is <![CDATA[ </xs:schema> ]]>					</t>		</section>            </section>		<section title="Acknowledgement">			<t>	We wish to thank John Elwell, Henry Lum, Leon Portman, De Villers, Andrew Hutton(Siemens-Enterprise), Deepanshu Gautam(Huawei),Charles Eckel(Cisco), Muthu Arul Mozhi (Cisco), Michael Benenson(Cisco), Hadriel Kaplan (ACME), Brian Rosen, Scott Orton(Broadsoft), Ofir Roth (NICE), Mary Barnes(Polycom), Ken Rehor(Cisco) for their valuable comments and inputs.			</t>             	<t> We wish to thank Joe Hildebrand(Cisco), Peter Saint-Andre(Cisco), Matt Miller(Cisco) for the valuable XML related guidance and Martin Thompson for validating the XML schema and providing comments on the same. </t>		</section>	</middle>	<back> 		<references title="Normative References">            <?rfc include="reference.RFC.2119"?>            <?rfc include="reference.RFC.2141"?>            <?rfc include="reference.RFC.3261"?>            <?rfc include="reference.RFC.3688"?>            <?rfc include="reference.RFC.3339"?>            <?rfc include="reference.RFC.4566"?>            <?rfc include="reference.RFC.4574"?>		<?rfc include="reference.RFC.4796"?>		<?rfc include="reference.RFC.3840"?>		<?rfc include="reference.RFC.4122"?>            <?rfc include="reference.RFC.4648"?>            </references>            <references title="Informative References">			  <?rfc include="reference.RFC.6341"?>			  <?rfc include="reference.I-D.ietf-siprec-architecture"?>                    <?rfc include="reference.RFC.2648"?>                    <?rfc include="reference.RFC.3326"?>                    <?rfc include="reference.RFC.3325"?>		</references>	</back></rfc>