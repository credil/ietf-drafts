
Network Working Group                             Seisho Yasukawa (NTT)
Internet Draft                                                   Editor
Category: Informational

Expiration Date: February 2005                           September 2004


   Requirements for Point to Multipoint Traffic Engineered MPLS LSPs
               <draft-ietf-mpls-p2mp-requirement-04.txt>



Status of this Memo

    By submitting this Internet-Draft, I certify that any applicable
    patent or other IPR claims of which I am aware have been disclosed,
    or will be disclosed, and any of which I become aware will be
    disclosed, in accordance with RFC 3668.

    Internet-Drafts are working documents of the Internet Engineering
    Task Force (IETF), its areas, and its working groups.  Note that
    other groups may also distribute working documents as Internet-
    Drafts.

    Internet-Drafts are draft documents valid for a maximum of six months
    and may be updated, replaced, or obsoleted by other documents at any
    time. It is inappropriate to use Internet-Drafts as reference
    material or to cite them other than as "work in progress."

    The list of current Internet-Drafts can be accessed at
    http://www.ietf.org/1id-abstracts.html

    The list of Internet-Draft Shadow Directories can be accessed at
    http://www.ietf.org/shadow.html.


Abstract

    This document presents a set of requirements for
    Point-to-Multipoint (P2MP) Traffic Engineered (TE) Multiprotocol
    Label Switching (MPLS) Label Switched Paths (LSPs). It specifies
    functional requirements for solutions in order to deliver P2MP
    applications over a MPLS TE infrastructure. It is intended that
    solutions that specify procedures for P2MP TE LSP setup satisfy
    these requirements.

    There is no intent to either specify solution specific details in
    this document or application specific requirements.



Yasukawa, et. al.                                               [Page 1]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    It is intended that the requirements presented in this document are
    not limited to the requirements of packet switched networks, but also
    encompass the requirements of L2SC, TDM, lambda and port switching
    networks managed by Generalized MPLS (GMPLS) protocols. Protocol
    solutions developed to meet the requirements set out in this document
    must attempt to be equally applicable to MPLS and GMPLS.













































Yasukawa, et. al.                                               [Page 2]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    Table of Contents

    1. Introduction .................................................. 04
    2. Definitions ................................................... 07
       2.1 Acronyms .................................................. 07
       2.2 Terminology ............................................... 07
       2.3 Conventions ............................................... 09
    3. Problem Statement ............................................. 09
       3.1 Motivation ................................................ 09
       3.2. Requirements Overview .................................... 10
    4. Examples of candidate applications that may require P2MP TE LSP 12
       4.1 P2MP TE LSP for IP multicast data ......................... 13
       4.2  P2MP TE backbone network for IP multicast network ........ 13
       4.3  Layer 2 Multicast Over MPLS .............................. 14
       4.4 VPN multicast network ..................................... 15
       4.5 GMPLS Networks ............................................ 16
    5. Detailed requirements for P2MP TE extensions .................. 16
       5.1 P2MP LSP tunnels .......................................... 16
       5.2 P2MP explicit routing ..................................... 17
       5.3 Explicit Path Loose Hops and Widely Scoped Abstract Nodes . 18
       5.4 P2MP TE LSP establishment, teardown, and modification mecha 19
       5.5 Fragmentation ............................................. 19
       5.6 Failure Reporting and Error Recovery ...................... 20
       5.7 Record route of P2MP TE LSP tunnels ....................... 21
       5.8 Call Admission Control (CAC) and QoS Control mechanism .... 21
       5.9 Variation of LSP Parameters ............................... 22
       5.10 Re-optimization of P2MP TE LSPs .......................... 22
       5.11 Tree Remerge ............................................. 23
       5.12 Data Duplication ......................................... 24
       5.13 IPv4/IPv6 support ........................................ 24
       5.14 P2MP MPLS Label .......................................... 24
       5.15 Routing advertisement of P2MP capability ................. 24
       5.16 Multi-Area/AS LSP ........................................ 25
       5.17 Multi-access LANs ........................................ 25
       5.18 P2MP MPLS OAM ............................................ 25
       5.19 Scalability .............................................. 26
       5.20 Backwards Compatibility .................................. 28
       5.21 GMPLS .................................................... 28
       5.22 Requirements for Hierarchical P2MP TE LSPs ............... 29
       5.23 P2MP Crankback routing ................................... 29
    6. Security Considerations ....................................... 29
    7. Acknowledgements .............................................. 30
    8. References .................................................... 30
       8.1 Normative References ...................................... 30
       8.2 Informational References .................................. 31
    9. Editor's Address .............................................. 32
    10. Authors' Addresses ........................................... 32
    11. Intellectual Property Consideration .......................... 34



Yasukawa, et. al.                                               [Page 3]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    12. Full Copyright Statement ..................................... 34


1. Introduction

    Existing MPLS Traffic Engineering (MPLS-TE) allows for strict QoS
    guarantees, resources optimization, and fast failure recovery, but is
    limited to P2P applications. There are P2MP applications like Content
    Distribution, Interactive Multimedia and VPN multicast that would
    also benefit from these TE capabilities. This clearly motivates
    enhancements of the base MPLS-TE tool box in order to support P2MP
    applications.

    [RFC2702] specifies requirements for traffic engineering over MPLS.
    It describes traffic engineering in some detail, and those
    definitions and objectives are equally applicable to traffic
    engineering in a point-to-multipoint service environment. They are
    not repeated here, but it is assumed that the reader is fully
    familiar with them.

    [RFC2702] also explains how MPLS is particularly suited to traffic
    engineering, and presents the following eight reason.

       1. Explicit label switched paths which are not constrained by
          the destination based forwarding paradigm can be easily created
          through manual administrative action or through automated
          action by the underlying protocols.
       2. LSPs can potentially be efficiently maintained.
       3. Traffic trunks can be instantiated and mapped onto LSPs.
       4. A set of attributes can be associated with traffic trunks
          which modulate their behavioral characteristics.
       5. A set of attributes can be associated with resources which
          constrain the placement of LSPs and traffic trunks across
          them.
       6. MPLS allows for both traffic aggregation and disaggregation
          whereas classical destination only based IP forwarding
          permits only aggregation.
       7. It is relatively easy to integrate a "constraint-based routing"
          framework with MPLS.
       8. A good implementation of MPLS can offer significantly lower
          overhead than competing alternatives for Traffic Engineering.

    These points are equally applicable to point-to-multipoint
    traffic engineering. Points 1. and 7. are particularly important.

    That is, the traffic flow for a point-to-multipoint LSP is not
    constrained to the path or paths that it would follow during
    multicast routing or shortest path destination-based routing, but



Yasukawa, et. al.                                               [Page 4]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    can be explicitly controlled through manual or automated action.

    Further, the explicit paths that are used may be computed using
    algorithms based on a variety of constraints to produce all manner of
    tree shapes. For example, an explicit path may be cost-based
    [STEINER], shortest path, QoS-based, or may use some fair-cost QoS
    algorithm. Such computations are potentially bound to be more complex
    and varied than anything available in the multicast forwarding
    paradigm.

    [RFC2702] also describes the functional capabilities required to
    fully support Traffic Engineering over MPLS in large networks.

      1. A set of attributes associated with traffic trunks which
         collectively specify their behavioral characteristics.

      2. A set of attributes associated with resources which constrain
         the placement of traffic trunks through them. These can also be
         viewed as topology attribute constraints.

      3. A "constraint-based routing" framework which is used to select
         paths for traffic trunks subject to constraints imposed by
         items 1) and 2) above. The constraint-based routing framework
         does not have to be part of MPLS. However, the two need to be
         tightly integrated together.

    These basic requirements also should be supported by
    point-to-multipoint traffic engineering.

    This document presents a set of requirements for
    Point-to-Multipoint(P2MP) Traffic Engineering (TE) extensions to
    Multiprotocol Label Switching (MPLS). It specifies functional
    requirements for solutions to deliver P2MP TE LSPs. For the sake of
    illustration, RSVP-TE [RFC3209] is one possible candidate to provide
    such a solution so as to deliver P2MP TE LSPs.

    It is intended that solutions that specify procedures for P2MP TE LSP
    setup satisfy these requirements. There is no intent to either
    specify solution specific details in this document or application
    specific requirements.

    It is intended that the requirements presented in this document are
    not limited to the requirements of packet switched networks, but
    also encompass the requirements of TDM, lambda and port switching
    networks managed by Generalized MPLS (GMPLS) protocols. Protocol
    solutions developed to meet the requirements set out in this
    document must attempt to be equally applicable to MPLS and GMPLS.




Yasukawa, et. al.                                               [Page 5]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    Content Distribution (CD), Interactive multi-media (IMM), and VPN
    multicast are applications that are best supported with multicast
    capabilities. For some of them , there is a requirement to use P2MP

    TE LSPs. One possible way to map P2MP flows onto LSPs in a MPLS
    network is to setup multiple P2P TE LSPs, one to each of the
    required egress LSRs. This requires replicating incoming packets to
    all the P2P LSPs at the ingress LSR to accommodate multipoint
    communication. This is sub-optimal as it places the replication
    burden on the ingress LSR and hence has very poor scaling
    characteristics. It also wastes bandwidth resources, memory and
    MPLS (e.g. label) resources in the network.

    Hence, to provide TE for a P2MP application in an efficient manner
    (that is, with scalable impact on signaling and protocol state) in
    a large-scale environment, P2MP TE mechanisms are required
    specifically to support P2MP TE LSPs. As of now, existing MPLS TE
    mechanisms such as [RFC3209] do not support P2MP TE LSPs so new
    mechanisms must be developed.

    This should be achieved without requiring the use of a multicast
    routing protocol in the network core, and with maximum re-use of the
    existing MPLS protocols: in particular, MPLS Traffic
    Engineering. That is, the separation between routing and signaling
    that exists in the P2P TE network should be maintained within the
    P2MP TE network, and the construction of the TEDB from which P2MP TE
    LSP paths are computed should not be constrained to use a multicast
    protocol.

    A P2MP TE LSP will be set up with TE constraints and will allow
    efficient packet or data replication at various branching points in
    the network. Note that the notion of "efficient" packet replication
    is relative and may have different meanings depending on the
    objectives (see section 5.2).

    For instance, RSVP-TE could be used for setting up a P2MP TE LSP
    with enhancements to existing P2P TE LSP procedures.

    P2MP TE LSP setup mechanisms MUST include the ability to add/remove
    receivers to/from an existing P2MP TE LSP.

    Note that with existing multicast routing mechanisms, multicast
    traffic cannot currently benefit from P2P TE LSPs. Hence, Call
    Admission Control for P2P TE LSP cannot take into account the
    bandwidth used for multicast traffic. P2MP TE will allow the
    bandwidth used by both the unicast and multicast traffics to be
    counted by means of CAC.




Yasukawa, et. al.                                               [Page 6]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    This document is organized as follows: Section 2 provides a set of
    definitions used throughout the document. The problem statement is
    then discussed in Section 3. for the sake of illustration, this
    document lists various applications that could make use P2MP TE
    LSP. Detailed application-specific requirements as far as P2MP TE LSP
    is concerned are out of the scope of this document.
    Detailed requirements for the support of applications that require
    P2MP MPLS TE LSPs are described in section 4.

    The requirement for Multipoint-to-Point and Multipoint-to-Multipoint
    TE LSPs are outside of the scope of this document.


2. Definitions

2.1 Acronyms

    P2P:

       Point-to-point

    P2MP:

       Point-to-multipoint

2.2 Terminology

    The reader is assumed to be familiar with the terminology in
    [RFC3031] and [RFC3209].

    P2MP TE LSP:

       A traffic engineered label switched path that has one unique
       ingress LSR (also referred to as the root) and one or more
       egress LSRs (also referred to as the leaf).

    P2MP tree:

       The ordered set of LSRs and links that comprise the path of a
       P2MP TE LSP from its ingress LSR to all of its egress LSRs.

    ingress LSR:

       The LSR that is responsible for initiating the signaling
       messages that set up the P2MP TE LSP.

    egress LSR:




Yasukawa, et. al.                                               [Page 7]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


       One of potentially many destinations of the P2MP TE LSP.
       Egress LSRs may also be referred to as leaf nodes or leaves.

    bud LSR:

      An LSR that is an egress, but also has one or more directly
      connected downstream LSRs.

    branch LSR:

       An LSR that has more than one directly connected downstream LSR.

    graft LSR:

       An LSR that is already a member of the P2MP tree and is in
       process of signaling a new sub-P2MP tree.

    prune LSR:

       An LSR that is a member of the P2MP tree and is in
       process of tearing down an existing sub-P2MP tree.

    P2MP-ID (Pid):

       A unique identifier of a P2MP TE LSP, that is constant for the
       whole LSP regardless of the number of branches and/or leaves.

2.2.1 Terminology for Partial LSPs

    It is convenient to sub-divide P2MP trees for functional and
    representational reasons. a tree may be divided in two dimensions:

    - A division may be made along the length of the tree. For example,
      the tree may be split into two components each running from the
      ingress LSR to a discrete set of egress LSRs
    - A tree may be divided at a branch LSR (or any transit LSR) to
      produce a component of the tree that runs from the branch (or
      transit) LSR to all downsetram egress LSRs.

    These two methods of splitting the P2MP tree can be combined, so it
    is useful to introduce some terminology to allow the partitioned
    trees to be clearly described.

    Use the following designations:
      Source (ingress) LSR - S
      Leaf (egress) LSR - L
      Branch LSR - B
      Transit LSR - X



Yasukawa, et. al.                                               [Page 8]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    Define three terms:

      Sub-LSP
        A component of the P2MP LSP that runs from one LSR to another
        without (or ignoring) any branches.

      Sub-tree
        A component of the P2MP LSP that runs from one LSR to more than
        one other LSR by branching.

      Tree
        A component of the P2MP LSP that runs from one LSR to all
        downstream LSRs.

    Using these new concepts we can define any combination or split of
    the P2MP tree. For example:

      S2L sub-LSP
        The path from the source to one specific leaf.

      S2L sub-tree
        The path from the source to a set of leaves.

      B2L tree
        The path from a branch LSR to all downstream leaves.

      X2X sub-LSP
        A component of the P2MP LSP that is a simple path with
        no branches.

2.3 Conventions

    The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
    "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in
    this document are to be interpreted as described in [RFC2119].


3. Problem Statement

3.1 Motivation

    Content Distribution (CD), Interactive multi-media (IMM), and VPN
    multicast are applications that are best supported with multicast
    capabilities.

    IP Multicast provides P2MP communication. However, there are no
    Traffic Engineering (TE) capabilities or QoS guarantees with
    existing IP multicast protocols. Note that Diff-serv



Yasukawa, et. al.                                               [Page 9]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    (see [RFC2475],[RFC2597] and [RFC3246]) combined with IP multicast
    routing may not be sufficient for P2MP applications for many of the
    same reasons that it is not sufficient for unicast applications.
    Note also that multicast trees provided by existing IP multicast
    routing protocols are not optimal from a bandwidth usage perspective,
    which may lead to significant bandwidth wasting.

    TE and Constraint Based Routing, including Call Admission
    Control(CAC), explicit source routing and bandwidth reservation, is
    required to enable efficient resource usage and strict QoS
    guarantees.

    Furthermore there are no existing P2MP mechanisms for carrying layer
    2 or SONET/SDH multicast traffic over MPLS. TE capabilities are
    desirable for both these applications; the related set of application
    requirements are outside of the scope of this document and might
    require special pseudowire encapsulation.

    One possible solution would be to setup multiple P2P TE LSPs, one to
    each of the required egress LSRs. This requires replicating incoming
    traffic to all the P2P LSPs at the ingress LSR to accommodate
    multipoint communication. This is clearly sub-optimal as it places
    the replication burden on the ingress LSR and hence has very poor
    scaling characteristics. It also wastes bandwidth resources, memory
    and MPLS(e.g. label) resources in the network.

    Hence, to provide MPLS TE [RFC2702] for a P2MP application in an
    efficient manner (that is, with scalable impact on signaling and
    protocol state) in a large scale environment, P2MP TE mechanisms
    are required. Existing MPLS P2P TE mechanisms have to be enhanced
    to support P2MP TE LSP.

3.2. Requirements Overview


    This document states basic requirements for the setup of P2MP TE
    LSPs and a solution SHOULD satisfy them without requiring that a
    multicast routing protocol is used, although such a protocol MUST NOT
    be prohibited. The mechanism used to construct the TED from which
    the paths of P2MP trees are computed is out of scope of this document
    although it is desirable to maximize the re-use of existing MPLS TE
    techniques and protocols. Note that the use of MPLS forwarding to
    carry the multicast traffic may also be useful in the context of some
    network designs where it might be desired to avoid running some
    multicast routing protocol like PIM [PIM-SM] or BGP (which might be
    required for the use of PIM).

    A P2MP TE LSP path will be computed taking into account various



Yasukawa, et. al.                                              [Page 10]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    constraints such as bandwidth, affinities, required level of
    protection and so on. The solution MUST allow for the computation
    of P2MP TE LSP paths satisfying constraints with the objective of
    supporting various optimization criteria such as delays, bandwidth
    consumption in the network, or any other combinations.

    This document does not restrict the choice of signaling protocol
    used to set up a P2MP TE LSP, but it should be noted that [RFC3468]
    states
      ... the consensus reached by the Multiprotocol Label Switching
    (MPLS) Working Group within the IETF to focus its efforts on
    "Resource Reservation Protocol (RSVP)-TE: Extensions to RSVP for
    Label-Switched Paths (LSP) Tunnels" (RFC 3209) as the MPLS signaling
    protocol for traffic engineering applications...

    The P2MP TE LSP setup mechanism MUST include the ability to
    add/remove egress LSRs to/from an existing P2MP TE LSP and MUST
    allow for the support of all the TE LSP management procedures
    already defined for P2P TE LSP such as the non disruptive rerouting
    (the so called "Make before break" procedure).

    The computation of P2MP TE trees is implementation dependent and is
    beyond the scope of the solutions that are built with this document
    as a guideline.

    A separate document(s) will specify how to build P2MP TE LSPs.
    The usage of those solutions will be application dependent and is
    out of the scope of this document. However, it is a requirement that
    those solutions attempt to be applicable to GMPLS as well as to MPLS
    so that only a single set of solutions are developed.

    Consider the following figure.

                          Source 1 (S1)
                                |
                              I-LSR1
                              |   |
                              |   |
             R2----E-LSR3--LSR1   LSR2---E-LSR2--Receiver 1 (R1)
                              |   :
                   R3----E-LSR4   E-LSR5
                              |   :
                              |   :
                             R4   R5


                            Figure 1




Yasukawa, et. al.                                              [Page 11]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    Figure 1 shows a single ingress (I-LSR1), and four egresses(E-LSR2,
    E-LSR3, E-LSR4 and E-LSR5). I-LSR1 is attached to a traffic source
    that is generating traffic for a P2MP application.
    Receivers R1, R2, R3 and R4 are attached to E-LSR2, E-LSR3 and
    E-LSR4.

    The following are the objectives of P2MP LSP establishment and use.

       a) A P2MP TE LSP tree which satisfies various constraints is
          pre-determined and supplied to ingress I-LSR1.

          Note that no assumption is made on whether the tree is
          provided to I-LSR1 or computed by I-LSR1. Note that the
          solution SHOULD also allow for the support of partial path by
          means of loose routing.

          Typical constraints are bandwidth requirements, resource class
          affinities, fast rerouting, preemption, to mention a few of
          them. There should not be any restriction on the possibility
          to support the set of constraints already defined for point to
          point TE LSPs. A new constraint may specify which LSRs should
          be used as branch points for the P2MP LSR in order to take
          into account some LSR capabilities or network constraints.

       b) A P2MP TE LSP is set up from I-LSR1 to E-LSR2, E-LSR3 and
          E-LSR4 using the tree information.

       c) In this case, the branch LSR1 should replicate incoming
          packets or data and send them to E-LSR3 and E-LSR4.

       d) If a new receiver (R5) expresses an interest in receiving
          traffic, a new tree is determined and a sub-P2MP tree from
          LSR2 to E-LSR5 is grafted onto the P2MP tree. LSR2 becomes a
          branch LSR.


4. Examples of candidate applications that may require P2MP TE LSP

    This section describes some of the candidate applications that P2MP
    MPLS TE is applicable to.

    The purpose of this section is not to mandate how P2MP TE LSPs must
    be used in certain application scenarios. Rather it is to illustrate
    some of the potential application scenarios so as to highlight the
    features and functions that any P2MP solution must provide in order
    to be of wide use and applicability. This section is not meant to be
    exhaustive, and P2MP is not limited to the described applications.




Yasukawa, et. al.                                              [Page 12]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


4.1 P2MP TE LSP for IP multicast data

    One typical scenario is to use P2MP TE LSPs as P2MP tunnels carrying
    multicast data traffic (e.g. IP mcast). In this scenario, a P2MP TE
    LSP is established between an ingress LSR which supports IP
    multicast source and several egress LSRs which support several IP
    multicast receivers. A P2MP TE LSP is established over the network
    and IP multicast data are tunneled from an ingress LSR node to
    multiple egress leaf LSRs with data replication at the branch LSRs
    in the network core. Figure 2 shows an example.

    Note that a P2MP TE LSP can be established over multiple areas/ASs
    and that the egress LSRs may deliver data into an IP multicast
    network.


                             Mcast Source
                                  |
               +---------------I-LSR0----------------+
               |                  |                  |
               |                LSR0            +----E-LSR2---R2
               |               /    \          /     |
     R1---E-LSR1---LSR2-----LSR1     LSR3----LSR4----E-LSR3---R3
               |             /        \        \     |
               |            /          \        +----E-LSR4---R4
               +-------B-LSR1---------B-LSR2---------+
               +-------- / ------++------ \ ---------+
               |         |       ||                  |
     R5---E-LSR5--------LSR5     || IPmcast Network  |
               |       /  \      ||                  |
               +-E-LSR6---E-LSR7-++----MR0--MR1------+
                   |        |           |    |
                   R6       R7          R8   R9


                              Figure 2


4.2  P2MP TE backbone network for IP multicast network

    P2MP TE LSPs are applicable in a backbone network to construct or
    support a multicast network(e.g. IPmcast network).

    The IP multicast access networks are interconnected by P2MP TE LSPs.
    A P2MP TE LSP is established from an ingress LSR which accommodates
    an IP multicast network that has a multicast source to multiple
    egress LSRs which each accommodate an IP multicast network.




Yasukawa, et. al.                                              [Page 13]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    In this scenario, ingress/egress LSRs placed at the edge of multicast
    network handle an IP multicast routing protocol.
    This means that the ingress/egress LSRs exchange IP multicast
    routing messages as neighbor routers. Figure 3 shows a network
    example of this scenario.

    A P2MP TE LSP is established from a I-LSR1 to E-LSR2, E-LSR3, E-LSR4
    and the ingress/egress LSR exchanges the multicast routing messages
    with each other.

    Though several schemes exist to handle this scenario, these are out
    of scope of this document. This document only describes requirements
    to setup a P2MP TE LSP.


                             Mcast Source
                                  |
                           +-----MR-----+
                           |      |     |
                           |     MR     |
                           +------|-----+
               +---------------I-LSR1----------------+
               |              // ||| \\              |
               |             //  |||  \\             |
               |            //  |LSR|  \\            |
               |        ___//____/|_____\\____       |
               |       /  //     |||     \\   \      |
               |       | //      |||      \\  |      |
               +-----E-LSR2----E-LSR3-----E-LSR4-----+
               +---- / ---++------|------++--- \ ----+
               |    |     ||      |      ||    |     |
          R1---MR---MR    ||      MR     ||    MR__  |
               |   /  \   ||     /  \    ||   /  \ \MR---R8
               +--MR--MR--++----MR--MR---++--MR--MR--+
                  |    |        |    |       |    |
                  R2   R3       R4   R5      R6   R7

                                 Figure 3

4.3  Layer 2 Multicast Over MPLS

    Existing layer 2 networks offer multicast video services. These are
    typically carried using layer 2 NBMA technology such as ATM or
    layer 2 Broadcast Access technology such as Ethernet. It may be
    desirable to deliver these layer 2 multicast services over
    a converged MPLS infrastructure where P2MP TE LSPs are used instead.

    For instance, several SPs provision P2MP ATM VCs for TV/ADSL



Yasukawa, et. al.                                              [Page 14]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    services. These P2MP VCs are setup between a video server and a set
    of ATM DSLAMs. Each channel is carried in a distinct P2MP VC. These
    VC maybe be routed independently, or may all be nested into a unique
    PVC, connecting the video sever to all DSLAMs.

    Such service could benefit from a P2MP MPLS-TE control plane. An
    option is to setup a permanent P2MP TE LSP between the video server
    and all DSLAMs, that would correspond to a PVC carrying all channel
    VCs. In this case each DSLAM receives all channels, even if there
    are no receivers that are registered for a given channel.
    This ensure fast zapping, but lead to significant bandwidth wasting.

    A second option is to setup a distinct P2MP TE LSP per channel. If a
    client, behind a DSLAM, zaps to a new channel, then the DSLAM has
    to be added to the P2MP TE LSP carrying this channel using a P2MP TE
    grafting procedure, if it is not already egress LSR for that LSP.
    Pruning procedure has to be used to remove a DSLAM from the P2MP TE
    LSP when there is no longer any client behind the DSLAM, watching
    the channel.

4.4 VPN multicast network

    In this scenario, P2MP TE LSPs could be utilized to construct a
    provider network which can deliver VPN multicast service(s) to its
    customers. It is, however, not a requirement that VPN multicast
    services be delivered using P2MP TE LSPs.

    A P2MP TE LSP is established between all the PE routers which
    accommodate the customer private network(s) that handle the IP
    multicast packets. Each PE router must handle a VPN instance.

    For example, in Layer3 VPNs like BGP/MPLS based IP VPNs
    [BGPMPLS-VPN], this means that each PE router must handle both
    private multicast VRF tables and common multicast routing and
    forwarding table.  And each PE router exchanges private multicast
    routing information between the corresponding PE routers. In case
    of high rate source, the need for P2MP TE LSP can be envisaged for
    Layer3 VPN data transmission.

    Another example is a Layer2 VPN that supports multipoint LAN
    connectivity service. In an Ethernet network environment, IP
    multicast data is flooded to the appropriate Ethernet port(s).

    An Ethernet multipoint Layer2 VPN service provided by MPLS, this
    function is achieved by switching MPLS encapsulated frames towards
    the relevant PE nodes. But if existing P2P TE LSPs are used as
    tunnels between PEs, any ingress PE must duplicate the frames and
    send them to the corresponding PEs. This means the data stream is



Yasukawa, et. al.                                              [Page 15]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    flooded just from the ingress PE, which will waste the provider's
    network resources.

    So, for Layer 2 VPNs that are required to support multicast traffic,
    it might be desirable that P2MP MPLS TE LSPs are used for data
    transmission with an appropriate layer 2 encapsulation technique
    (for example, pseudo wire) instead of P2P MPLS TE LSPs, contributing
    in turn to savings of network resources.

    This document does not set requirements for how multicast VPNs are
    provided, but it does set requirements for the function that must be
    available in P2MP MPLS solutions. Therefore, it is not a requirement
    that multicast VPNs utilize P2MP TE LSPs, but it is a requirement
    that P2MP MPLS solutions should be capable of supporting multicast
    VPNs.

    As already pointed out, application-specific requirements are out of
    the scope of this document.

4.5 GMPLS Networks

    GMPLS currently supports only P2P TE-LSPs just like MPLS. GMPLS
    enhances MPLS to support four new classes of interfaces: Layer-2
    Switch Capable (L2SC), Time-Division Multiplex (TDM), Lambda Switch
    Capable (LSC) and Fiber-Switch Capable (FSC) in addition to Packet
    Switch Capable (PSC) already supported by MPLS. All of these
    interface classes have so far been limited to P2P TE LSPs
    (see [RFC3473] and [RFC 3471]).

    The requirement for P2MP services for non-packet switch interfaces
    is similar to that for PSC interfaces. In particular, cable
    distribution services such as video distribution are prime candidates
    to use P2MP features. Therefore, it is a requirement that reasonable
    attempts must be made to make all the features/mechanisms
    (and protocol extensions) that will be defined to provide MPLS P2MP
    TE LSPs equally applicable to P2MP PSC and non-PSC TE-LSPs. If the
    requirements of non-PSC networks over-complicate the PSC solution a
    decision may be taken to separate the solutions. This decision must
    be taken in full consultation with the MPLS and CCAMP working groups.


5. Detailed requirements for P2MP TE extensions

5.1 P2MP LSP tunnels

    The P2MP TE extensions MUST be applicable to the signaling of LSPs
    of different traffic types. For example, it MUST be possible to
    signal a P2MP TE LSP to carry any kind of payload being packet or



Yasukawa, et. al.                                              [Page 16]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    non-packet based (including frame, cell, TDM un/structured, etc.)
    Carrying IP multicast or Ethernet traffic within a P2MP tunnel are
    typical examples.

    As with P2P MPLS technology [RFC3031], traffic is classified with a
    FEC in this extension. All packets which belong to a particular FEC
    and which travel from a particular node MUST follow the same P2MP
    tree.

    In order to scale to a large number of branches, P2MP TE LSPs SHOULD
    be identified by a unique identifier (the P2MP ID or Pid) that is
    constant for the whole LSP regardless of the number of branches
    and/or leaves. Therefore, the identification of the P2MP session by
    its destination addresses is not adequate.


5.2 P2MP explicit routing

    Various optimizations in P2MP tree formation need to be applied to
    meet various QoS requirements and operational constraints.

    Some P2MP applications may request a bandwidth guaranteed P2MP tree
    which satisfies end-to-end delay requirements. And some operators
    may want to set up a cost minimum P2MP tree by specifying branch
    LSRs explicitly.

    The P2MP TE solution therefore MUST provide a means of establishing
    arbitrary P2MP trees under the control of an external tree
    computation process or path configuration process or dynamic tree
    computation process located on the ingress LSR. Figure 4 shows two
    typical examples.


                A                                      A
                |                                    /   \
                B                                   B     C
                |                                  / \   / \
                C                                 D   E  F   G
                |                                / \ / \/ \ / \
    D--E*-F*-G*-H*-I*-J*-K*--L                  H  I J KL M N  O

         Steiner P2MP tree                        SPF P2MP tree


                 Figure 4 Examples of P2MP TE LSP topology


    One example is the Steiner P2MP tree (Cost minimum P2MP tree)



Yasukawa, et. al.                                              [Page 17]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    [STEINER]. This P2MP tree is suitable for constructing a cost
    minimum P2MP tree so as to minimize the bandwidth consumption in
    the core. To realize this P2MP tree, several intermediate LSRs must
    be both MPLS data terminating LSRs and transit LSRs (LSRs E, F, G,
    H, I, J and K in the figure 4). This means that the LSRs must perform
    both label swapping and popping at the same time. Therefore, the P2MP
    TE solution MUST support a mechanism that can setup this kind of bud
    LSR between an ingress LSR and egress LSRs. Note that this includes
    constrained Steiner trees that allow for the computation of a minimal
    cost trees with some other constraints such as a bounded delay
    between the source and every receiver.

    Another example is a CSPF (Constraint Shortest Path First) P2MP
    tree. By some metric (which can be set upon any specific criteria
    like the delay, bandwidth, a combination of those), one can
    calculate a shortest path P2MP tree. This P2MP tree is suitable for
    carrying real time traffic.

    The solution MUST allow the operator to make use of any tree
    computation technique. In the former case an efficient/optimal tree
    is defined as a minimal cost tree (Steiner tree) whereas in the
    later case it is defined as the tree that provides shortest path
    between the source and any receiver.

    To support explicit setup of any reasonable P2MP tree shape, a P2MP
    TE solution MUST support some form of explicit source-based control
    of the P2MP tree which can explicitly include particular LSRs as
    branch nodes. This can be used by the ingress LSR to setup the P2MP
    TE LSP.  For instance, a P2MP TE LSP can be simply represented as a
    whole tree or by its individual branches.


5.3 Explicit Path Loose Hops and Widely Scoped Abstract Nodes

    A P2MP tree is completely specified if all of the required branches
    and hops between a sender and leaf LSR are indicated.

    A P2MP tree is partially specified if only a subset of intermediate
    branches and hops are indicated. This may be achieved using loose
    hops in the explicit path, or using widely scoped abstract nodes
    such as IPv4 prefixes shorter than 32 bits, or AS numbers.
    A partially specified P2MP tree might be particularly useful in
    inter-area and inter-AS situations although P2MP requirements for
    inter-area and inter-AS are beyond the scope of this document.

    Protocol solutions SHOULD include a way to specify loose hops and
    widely scoped abstract nodes in the explicit source-based control
    of the P2MP tree as defined in the previous section. Where this



Yasukawa, et. al.                                              [Page 18]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    support is provided, protocol solutions MUST allow downstream LSRs
    to apply further explicit control to the P2MP tree to resolve a
    partially specified tree into a (more) completely specified tree.

    Protocol solutions MUST allow the P2MP tree to be completely
    specified at the ingress where sufficient information exists to
    allow the full tree to be computed.

    In all cases, the egress nodes of the P2MP TE LSP must be fully
    specified.

    In case of a tree being computed by some downstream LSRs (e.g. the
    case of hops specified as loose hops), the solution MUST provide
    the ability for the ingress LSR of the P2MP TE LSP to learn the full
    P2MP tree. Note that this requirement MAY be relaxed in some
    environments (e.g. Inter-AS) where confidentiality must be preserved.


5.4 P2MP TE LSP establishment, teardown, and modification mechanisms

    The P2MP TE solution MUST support establishment, maintenance and
    teardown of P2MP TE LSPs in a scalable manner. This MUST include
    both the existence of very many LSPs at once, and the existence of
    very many destinations for a single P2MP LSP.

    In addition to P2MP TE LSP establishment and teardown mechanism, it
    SHOULD implement partial P2MP tree modification mechanism.

    For the purpose of adding sub-P2MP TE LSPs to an existing P2MP TE
    LSP, the extensions SHOULD support a grafting mechanism. For the
    purpose of deleting a sub-P2MP TE LSPs from an existing P2MP TE LSP,
    the extensions SHOULD support a pruning mechanism.

    It is RECOMMENDED that these grafting and pruning operations do not
    cause any additional processing in nodes except along the path to
    the grafting and pruning node and its downstream nodes. Moreover,
    both grafting and pruning operations MUST not be traffic disruptive
    for the traffic currently forwarded along the P2MP tree.

5.5 Fragmentation

    The P2MP TE solution MUST handle the situation where a single
    protocol message cannot contain all of the information necessary to
    signal the establishment of the P2MP LSP. It MUST be possible to
    establish the LSP in these circumstances.

    This situation may arrise in either of the following circumstances.
      a. The ingress LSR cannot signal the whole tree in a single



Yasukawa, et. al.                                              [Page 19]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


         message.
      b. The information in a message expands to be too large (or is
         discovered to be too large) at some transit node. This may
         occur because of some increase in the information that needs
         to be signaled or because of a reduction in the size of
         signaling message that is supported.


    The solution to these problems SHOULD NOT rely on IP fragmentation,
    it is RECOMMENDED to rely on some protocol procedures specific to
    the signaling solution.

    It is NOT RECOMMENDED that fragmented protocol messages are
    re-combined at any downstream LSR.

5.6 Failure Reporting and Error Recovery

    Failure events may cause egress nodes or sub-P2MP LSPs to become
    detached from the P2MP TE LSP. These events MUST be reported
    upstream as for a P2P LSP.

    The solution SHOULD provide recovery techniques such as protection
    and restoration allowing recovery of any impacted sub-P2MP TE
    LSPs. In particular, a solution MUST provide fast protection
    mechanisms applicable to P2MP TE LSP similar to the solutions
    specified in [FRR] for P2P TE LSPs. Note also that no assumption is
    made on whether backup paths for P2MP TE LSPs should or should not
    be shared with P2P TE LSPs backup paths.

    Note that the functions specified in [FRR] are currently specific to
    packet environments and do not apply to non-packet environments.
    Thus, while solutions MUST provide fast protection mechanisms
    similar to those specified in [FRR], this requirement is limited to
    the subset of the solution space that applies to packet switched
    networks only.

    Note that other application-specific requirement documents may
    introduce even more stringent requirement such as non packet loss,
    at the cost of some increased bandwidth consumption.

    The solution SHOULD also support the ability to meet other network
    recovery requirements such as bandwidth protection and bounded
    propagation delay increase along the backup path during failure.

    A P2MP TE solution MUST support P2MP fast protection mechanism to
    handle P2MP applications sensitive to traffic disruption.

    The report of the failure of delivery to fewer than all of the



Yasukawa, et. al.                                              [Page 20]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    egress nodes SHOULD NOT cause automatic teardown of the P2MP TE LSP.
    That is, while some egress nodes remain connected to the P2MP tree
    it should be a matter of local policy at the ingress whether the
    P2MP LSP is retained.

    When all egress nodes downstream of a branch node have become
    disconnected from the P2MP tree, and the some branch node is unable
    to restore connectivity to any of them by means of some recovery or
    protection mechanisms, the branch node MAY remove itself from the
    P2MP tree provided that it is not also an egress LSR. Since the
    faults that severed the various downstream egress nodes from the
    P2MP tree may be disparate, the branch node MUST report all such
    errors to its upstream neighbor. The ingress node can then decide
    to re-compute the path to those particular egress nodes, around the
    failure point.

    Solutions MAY include the facility for transit LSRs and particularly
    branch nodes to recompute sub-P2MP trees to restore them after
    failures. In the event of successful repair, error notifications
    SHOULD NOT be reported to upstream nodes, but the new paths are
    reported if route recording is in use. Crankback requirements are
    discussed in Section 5.23.

5.7 Record route of P2MP TE LSP tunnels

    Being able to identify the established topology of P2MP TE LSP is
    very important for various purposes such as management and operation
    of some local recovery mechanisms like Fast Reroute [FRR]. A network
    operator uses this information to manage P2MP TE LSPs. Therefore,
    topology information MUST be collected and updated after P2MP TE LSP
    establishment and modification process.

    The P2MP TE solution MUST support a mechanism which can collect and
    update P2MP tree topology information after P2MP LSP establishment
    and modification process. For example, the P2P MPLS TE mechanism of
    route recording could be extended and used if RSVP-TE was used as
    the P2MP signaling protocol.

    It is RECOMMENDED that the information is collected in a data format
    by which the sender node can recognize the P2MP tree topology
    without involving some complicated data calculation process.

    The solution MUST support the recording of both outgoing interfaces
    and node-id [NODE-ID].

5.8 Call Admission Control (CAC) and QoS Control mechanism
     of P2MP TE LSPs




Yasukawa, et. al.                                              [Page 21]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    P2MP TE LSPs may share network resource with P2P TE LSPs. Therefore
    it is important to use CAC and QoS in the same way as P2P TE LSPs
    for easy and scalable operation.

    In particular, it should be highlighted that because Multicast
    traffic cannot make use of P2P TE LSP, multicast traffic cannot be
    easily taken into account by P2P TE LSPs when performing CAC.

    The use of P2MP TE LSP will now allow for an accounting of the
    unicast and multicast traffic for bandwidth reservation.

    P2MP TE solutions MUST support both resource sharing and exclusive
    resource utilization to facilitate co-existence with other LSPs to
    the same destination(s).

    P2MP TE solution MUST be applicable to DiffServ-enabled networks
    that can provide consistent QoS control in P2MP LSP traffic.

    Any solution SHOULD also satisfy the DS-TE requirements [RFC3564]
    and interoperate smoothly with current P2P DS-TE protocol
    specifications.

    Note that this requirement document does not make any assumption on
    the type of bandwidth pool used for P2MP TE LSPs which can either be
    shared with P2P TE LSP or be dedicated for P2MP use.

5.9 Variation of LSP Parameters

    Various parameters to an LSP (such as priority, bandwidth, etc.) are
    signaled along each branch of the LSP.

    Any solution MUST NOT allow for variance of these parameters. That
    is,
    - no attributes set and signaled by the ingress of a P2MP LSP may be
      varied by downstream LSRs
    - there MUST be homogenous QoS from the root to all leaves.

    THIS IS A PROVISIONAL REQUIREMENT STILL OPEN FOR DISCUSSION.

5.10 Re-optimization of P2MP TE LSPs

    The detection of a more optimal path (for example, one with a lower
    overall cost) is an example of a situation where P2MP TE LSP
    re-routing may be required. While re-routing is in progress, an
    important requirement is avoiding double bandwidth reservation
    (over the common parts between the old and new LSP) thorough the use
    of resource sharing.




Yasukawa, et. al.                                              [Page 22]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    Make-before-break MUST be supported for a P2MP TE LSP to ensure that
    there is minimal traffic disruption when the P2MP TE LSP is
    re-routed.

    It is possible to achieve make-before-break that only applies to a
    sub-P2MP tree without impacting the data on all of the other parts
    of the P2MP tree.

    The solution SHOULD allow for make-before-break re-optimization of
    any subdivision of the P2MP LSP (S2L sub-tree, S2X sub-LSP, S2L
    sub-LSP, X2L sub-tree, B2L sub-tree, X2L tree, or B2L tree) with no
    impact on the rest of the P2MP LSP (no label reallocation, no change
    in identifiers, etc.).

    The solution SHOULD also provide the ability for the ingress LSR to
    have a strict control on the re-optimization process.
    Such re-optimization MAY be initiated by the sub-tree root branch
    node (that is, the branch node MAY setup a new sub-tree, then splice
    traffic on the new subtree and delete the former sub-tree).

    THE REQUIREMENT FOR RE-OPTIMIZATION BY SUB-TREE ROOT BRANCH IS
    STILL OPEN FOR DISCUSSION

5.11 Tree Remerge

    It is possible for a single transit LSR to receive multiple
    signaling messages for the same P2MP LSP but for different
    sets of desinations. These messages may be received from the
    same or different upstream nodes and may need to be passed on
    to the same or different downstream nodes.

    This situation may arise as the result of the signaling solution
    definition or implementation options within the signaling
    solution. Further, it may happen during make-before-break
    reoptimization (section 5.9), or as a result of signaling
    message fragmentation (section 5.5).

    It is even possible that it is necessary to construct distinct
    upstream branches in order to achieve the correct label choices
    in certain switching technologies managed by GMPLS (for example,
    photonic cross-connects where the selection of a particular
    lambda for the downstream branches is only available on differnt
    upstream switches).

    The solution MUST handle the case where multiple signaling
    messages for the same P2MP LSP are received at a single transit
    LSR with the end result of all receivers being added to the
    P2MP LSP.



Yasukawa, et. al.                                              [Page 23]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    THIS REQUIREMENT IS STILL UNDER DISCUSSION

5.12 Data Duplication

    Data duplication refers to the receipt by any recipient of duplicate
    instances of the data. In a packet environment this means the
    receipt of duplicate packets - although this should be a benign (if
    inefficient) situation, it may be catastrophic in certain existing
    and deployed applications. In a non-packet environment this means
    the duplication in time of some part of the signal that may lead to
    the replication of data or to the scrambling of data.

    Data duplication may legitimately arrise in various scenarios
    including re-optimization of active LSPs as described in the
    previous section, and protection of LSPs. Thus, it is impractical to
    regulate against data duplication in this document.

    Instead, the solution MUST provide a mechanism to resolve, limit or
    avoid data duplication at either or both of:
    - the point at which the data path diverges
    - the point at which the data paths converge.

    THE EXTENT TO WHICH DATA DUPLICATION MAY BE TOLERATED (in time or in
    a count of bits or packets) IS FOR FURTHER STUDY.

5.13 IPv4/IPv6 support

    Any P2MP TE solution MUST be equally applicable to IPv4 and IPv6.

5.14 P2MP MPLS Label

    A P2MP TE solution MUST support establishment of both P2P and P2MP
    TE LSPs and MUST NOT impede the operation of P2P TE LSPs within the
    same network. A P2MP TE solution MUST be specified in such a way
    that it allows P2MP and P2P TE LSPs to be signaled on the same
    interface. Labels for P2MP TE LSPs and P2P TE LSPs MAY be assigned
    from shared or dedicated label space(s). Label space shareability is
    implementation specific.

5.15 Routing advertisement of P2MP capability

    Several high-level requirements have been identified to determine
    the capabilities of LSRs within a P2MP network. The aim of such
    information is to facilitate the computation of P2MP trees using TE
    constraints within a network that contains LSRs that do not all have
    the same capabilities levels with respect to P2MP signaling and data
    forwarding.




Yasukawa, et. al.                                              [Page 24]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    These capabilities include, but are not limited to:

    - the ability of an LSR to support branching.
    - the ability of an LSR to act as an egress and a branch for the
      same LSP.
    - the ability of an LSR to support P2MP MPLS-TE signalling.

    It is expected that it may be appropriate to gather this information
    through extensions to TE IGPs (see [RFC3630] and [IS-IS-TE]), but
    the precise requirements and mechanisms are out of the scope of this
    document. It is expected that a separate document will cover this
    requirement.

5.16 Multi-Area/AS LSP

    P2MP TE solutions SHOULD support multi-area/AS P2MP TE LSPs.

    The precise requirements in support of multi-area/AS P2MP TE LSPs is
    out of the scope of this document. It is expected that a separate
    document will cover this requirement.

5.17 Multi-access LANs

    P2MP MPLS TE may be used to traverse network segments that are
    provided by multi-access media such as Ethernet. In these cases, it
    is also possible that the entry point to the network segment is a
    branch point of the P2MP LSP.

    Two options clearly exist:

     - the branch point replicates the data and transmits multiple
       copies onto the segment
     - the branch point sends a single copy of the data to the segment
       and relies on the exit points to discriminate the reception of
       the data.

    The first option has a significant scaling issue since all
    replicated data must be sent through the same port and carried on
    the same segment. Thus, a solution SHOULD provide a mechanism for a
    branch node to send a single copy of the data onto a multi-access
    network and reach multiple (adjacent) downstrem nodes.

5.18 P2MP MPLS OAM

    Management of P2MP LSPs is as important as the management of P2P
    LSPs.

    The MPLS and GMPLS MIB modules MUST be enhanced to provide P2MP TE



Yasukawa, et. al.                                              [Page 25]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    LSP management.

    In order to facilitate correct management, P2MP TE LSPs MUST have
    unique identifiers.

    OAM facilities will have special demands in P2MP environments
    especially within the context of tracing the paths and connectivity
    of P2MP TE LSPs. The precise requirements and mechanisms for OAM are
    out of the scope of this document. It is expected that a separate
    document will cover these requirements.

5.19 Scalability

    Scalability is a key requirement in P2MP MPLS systems. Solutions
    MUST be designed to scale well with an increase in the number of any
    of the following:

    - the number of recipients
    - the number of branch points
    - the number of branches.

    Both scalability of performance and operation MUST be considered.

    Key considerations SHOULD include:
    - the amount of refresh processing associated with maintaining
      a P2MP TE LSP.
    - the amount of protocol state that must be maintained by ingress
      and transit LSRs along a P2MP tree.
    - the number of protocol messages required to set up or tear down a
      P2MP LSP as a function of the number of egress LSRs.
    - the number of protocol messages required to repair a P2MP LSP
      after failure or perform make-before-break.
    - the amount of protocol information transmitted to manage
      a P2MP TE LSP (i.e. the message size).
    - the amount of potential routing extensions.
    - the amount of control plane processing required by the ingress,
      transit and egress LSRs to add/delete a branch LSP to/from an
      existing P2MP LSP.

    It is expected that the applicability of each solution will be
    evaluated with regards to the aforementioned scalability criteria.

5.19.1 Absolute Limits

    THIS IS SECTION DESCRIBES PROVISIONAL REQUIREMENTS STILL OPEN FOR
    DISCUSSION.

    In order to achieve the best solution for the problem space it is



Yasukawa, et. al.                                              [Page 26]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    helpful to clarify the boundaries for P2MP TE LSPs.

    - Number of recipients.
      A P2MP TE LSP MUST reduce to similar scaling properties as a P2P
      LSP when the number of recipients reduces to one.
      It is important to classify the problem as a Traffic Engineering
      problem. It is anticipated that the initial deployments of P2MP TE
      LSPs may be limited to only several hundred recipients, but also
      that future deployments may require significantly larger numbers.
      An acceptable solution, therefore, is one that scales linearly
      with the number of recipients.

      Solutions that scale worse than linear (that is, exponential or
      polynomial) are not acceptable whatever the number of recipients
      they could support

    - Number of branch points.
      Solutions MUST support all possiblities from one extreme of a
      single branch point that forks to all leaves on a separate branch,
      to the greatest number of branch points which is (n-1) for n
      recipients. Assumptions MUST NOT be made in the solution regarding
      which topology is more common, and the solution MUST be designed
      to ensure scalability in all topologies.

    - Dynamics of P2MP tree.
      Recall that the mechanisms for determining which recipients should
      be added to an LSP, and for adding and removing recipients from
      that group are out of the scope of this document. Nevertheless, it
      is useful to understand the expected rates of arrival and
      departure of recipients since this can impact the selection of
      solution techniques.
      Again, it must be recall that this document is limited to Traffic
      Engineering, and in this model the rate of change of recipients
      may be expected to be lower than in an IP multicast group.
      Although the absolute number of recipients coming and going is the
      important element for determining the scalability of a solution,
      it may be noted that a percentage may be a more comprehensible
      measure but that this is not as significant for LSPs with a small
      number of recipients.
      A working figure for an established P2MP TE LSP is less than 10%
      churn per day. That is, a relatively slow rate of churn.
      We could say that a P2MP LSP would be shared by multiple multicast
      groups and dynamics of P2MP LSP would be relatively small.
      Considering applicability that P2MP LSP to use L2 multi-access
      path technology, we can consider stable P2MP L2 path even when we
      transfer IP multicast traffic over the path.

      Solutions MUST optimize around such relatively low rates of change



Yasukawa, et. al.                                              [Page 27]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


      and are NOT REQUIRED to optimize for significantly higher rates
      of change.

    - Rate of change within the network.
      It is also important to understand the scaling with regard to
      changes within the network. That is, one of the features of a
      P2MP TE LSP is that it can be robust or protected against network
      failures, and can be re-optimized to take advantage of newly
      available network resources.

      It is more important that a solution be optimized for scaling with
      respect to recovery and re-optimization of the LSP, than for change
      in the recipients, because P2MP is used as a TE tool.
      The solution MUST follow this distinction.


5.20 Backwards Compatibility

    It SHOULD be an aim of any P2MP solution to offer as much backward
    compatibility as possible. An ideal which is probably impossible to

    achieve would be to offer P2MP services across legacy MPLS networks
    without any change to any LSR in the network.

    If this ideal cannot be achieved, the aim SHOULD be to use legacy
    nodes as both transit non-branch LSRs and egress LSRs.

    It is a further requirement for the solution that any LSR that
    implements the solution SHALL NOT be prohibited by that act from
    supporting P2P TE LSPs using existing signaling mechanisms. That is,
    unless administratively prohibited, P2P TE LSPs MUST be supported
    through a P2MP network.

    Also, it is a requirement that P2MP TE LSPs MUST be able to co-exist
    with IP unicast and IP multicast networks.

5.21 GMPLS

    Solutions for MPLS P2MP TE-LSPs when applied to GMPLS P2MP PSC or
    non-PSC TE-LSPs MUST be backward and forward compatible with the
    other features of GMPLS including:

    - control and data plane separation (IF_ID RSVP_HOP and IF_ID
      ERROR_SPEC),
    - full support of numbered and unnumbered TE links (see [RFC 3477]
      and [GMPLS-ROUTE]),
    - use of the GENERALIZED_LABEL_REQUEST, the GENERALIZED_LABEL
      (C-Type 2 and 3), the SUGGESTED_LABEL and the RECOVERY_LABEL,



Yasukawa, et. al.                                              [Page 28]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


      in conjunction with the LABEL_SET and the ACCEPTABLE_LABEL_SET
      object,
    - processing of the ADMIN_STATUS object,
    - processing of the PROTECTION object,
    - support of Explicit Label Control,
    - processing of the Path_State_Removed Flag,
    - handling of Graceful Deletion procedures.
    - E2E and Segment Recovery procedures.
    - support of Graceful Restart

    In addition, since non-PSC TE-LSPs may have to be processed in
    environments where the "P2MP capability" could be limited, specific
    constraints may also apply during the P2MP TE Path computation.
    Being technology specific, these constraints are outside the scope
    of this document. However, technology independent constraints
    (i.e. constraints that are applicable independently of the LSP
    class) SHOULD be allowed during P2MP TE LSP message processing.
    It has to be emphasized that path computation and management
    techniques shall be as close as possible to those being used for
    PSC P2P TE LSPs and P2MP TE LSPs.

5.22 Requirements for Hierarchical P2MP TE LSPs

    [LSP-HIER] defines concepts and procedures for P2P LSP hierarchy.

    These procedures SHOULD be extended to support P2MP LSP hierarchy.

    The P2MP MPLS-TE solution SHOULD support the concept of region and
    region hierarchy (PSC1<PSC2<PSC3<PSC4<L2SC<TDM<LSC<FSC).

    Particularly it SHOULD allow a Region i P2MP TE LSP to be nested
    into a region j P2MP TE LSP or multiple region j P2P TE LSPs,
    providing that i<j.

    The precise requirements and mechanisms for this function are out of
    the scope of this document. It is expected that a separate document
    will cover these requirements.

5.23 P2MP Crankback routing

    P2MP solutions SHOULD support crankback requirements as defined in
    [CRANKBACK]. In particular, they SHOULD provide sufficient
    information to a branch LSR from downstream LSRs to allow the branch
    LSR to re-route a sub-tree around any failures or problems in the
    network.


6. Security Considerations



Yasukawa, et. al.                                              [Page 29]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    This requirements document does not define any protocol extensions
    and does not, therefore, make any changes to any security models.

    It should be noted that P2MP signaling mechanisms built on P2P
    RSVP-TE signaling are likely to inherit all of the security
    techniques and problems associated with RSVP-TE. These problems may
    be exacerbated in P2MP situations where security relationships may
    need to maintained between an ingress and multiple egresses. Such
    issues are similar to security issues for IP multicast.

    It is a requirement that documents offering solutions for P2MP LSPs
    MUST have detailed security sections.


7. Acknowledgements

    The authors would like to thank George Swallow, Ichiro Inoue, Dean
    Cheng, Lou Berger and Eric Rosen for their review and suggestions.


8. References

8.1 Normative References

    [RFC2119]     Bradner, S., "Key words for use in RFCs to Indicate
                  Requirement Levels", BCP 14, RFC 2119, March 1997.

    [RFC2475]     Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z.
                  and W. Weiss,  "An Architecture for Differentiated
                  Services", RFC 2475, December 1998.

    [RFC2597]     Heinanen, J., Baker, F., Weiss, W. and J. Wroclawski,
                  "Assured Forwarding PHB Group", RFC 2597, June 1999.

    [RFC2702]     D. Awduche, J. Malcolm, J. Agogbua, M. O'Dell, J.
                  McManus, "Requirements for Traffic Engineering Over
                  MPLS", RFC2702, September 1999.

    [RFC3031]     Rosen, E., Viswanathan, A. and R. Callon,
                  "Multiprotocol Label Switching Architecture", RFC 3031,
                  January 2001.

    [RFC3209]     Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan,
                  V. and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
                  Tunnels", RFC 3209, December 2001.

    [RFC3246]     Davie, B., Charny, A., Bennet, J.C.R., Benson, K., Le
                  Boudec, J.Y., Davari, S., Courtney, W., Firioiu, V. and



Yasukawa, et. al.                                              [Page 30]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


                  D. Stiliadis, "An Expedited Forwarding PHB (Per-Hop
                  Behavior)", RFC 3246, March 2002.

    [RFC3667]     Bradner, S., "IETF Rights in Contributions", BCP 78,
                  RFC 3667, February 2004.

    [RFC3668]     Bradner, S., Ed., "Intellectual Property Rights in IETF
                  Technology", BCP 79, RFC 3668, February 2004.

8.2 Informational References

    [RFC3471]     Berger, L., Editor, "Generalized Multi-Protocol Label
                  Switching (GMPLS) Signaling Functional Description",
                  RFC 3471, January 2003.

    [RFC3473]     Berger, L., Editor, "Generalized Multi-Protocol Label
                  Switching (GMPLS) Signaling - Resource ReserVation
                  Protocol-Traffic Engineering (RSVP-TE) Extensions",
                  RFC 3473, January 2003.

    [RFC3477]     K. Kompella, Y. Rekhter, "Signalling Unnumbered Links
                  in Resource ReSerVation Protocol -Traffic Engineering
                  (RSVP-TE)", RFC3477, January 2003.

    [RFC3564]     F. Le Faucheur, W. Lai, "Requirements for Support of
                  Differentiated Services-aware MPLS Traffic
                  Engineering", RFC 3564, July 2003.

    [RFC3630]     D. Katz, D. Yeung, K. Kompella, "Traffic Engineering
                  Extensions to OSPF Version 2", RFC 3630, September
                  2003.

    [PIM-SM]      B. Fenner, M. Hadley, H. Holbrook, I. Kouvelas,
                  "Protocol Independent Multicast - Sparse Mode (PIM-SM):
                  Protocol Specification (Revised)", draft-ietf-pim-sm-
                  v2-new-10.txt, July 2004.

    [BGPMPLS-VPN] E. Rosen, Y.Rekhter, Editor, "BGP/MPLS IP VPNs",
                  draft-ietf-l3vpn-rfc2547bis-02.txt, September 2004.

    [GMPLS-ROUTE] K. Kompella, Y. Rekhter,  Editor, "Routing Extensions
                  in Support of Generalized Multi-Protocol Label
                  Switching", draft-ietf-ccamp-gmpls-routing-08.txt,
                  October 2003.

    [STEINER]     H. Salama, et al., "Evaluation of Multicast Routing
                  Algorithm for Real-Time Communication on High-Speed
                  Networks," IEEE Journal on Selected Area in



Yasukawa, et. al.                                              [Page 31]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


                  Communications, pp.332-345, 1997.

    [FRR]         P. Pan, G. Swallow, A. Atlas, "Fast Reroute Extensions
                  to RSVP-TE for LSP Tunnels", draft-ietf-mpls-rsvp-lsp-
                  fastreroute-07.txt, August 2004.

    [IS-IS-TE]    Henk Smit, Tony Li, "Intermediate System to
                  Intermediate System (IS-IS) Extensions for Traffic
                  Engineering (TE)", RFC 3784, June 2004.

    [CRANKBACK]   A. Farrel, A. Satyanarayana, A. Iwata, N. Fujita, G.
                  Ash, S. Marshall, "Crankback Signaling Extensions for
                  MPLS Signaling", draft-ietf-ccamp-crankback-02.txt,
                  July 2004.

    [LSP-HIER]    K. Kompella, Y. Rekhter, "LSP Hierarchy with
                  Generalized MPLS TE", draft-ietf-mpls-lsp-hierarchy-
                  08.txt, September 2002.

    [NODE-ID]     Vasseur, Ali and Sivabalan, "Definition of an RRO node-
                  id subobject", draft-ietf-mpls-nodeid-subobject-01.txt,
                  June 2003.


9. Editor's Address

    Seisho Yasukawa
    NTT Corporation
    9-11, Midori-Cho 3-Chome
    Musashino-Shi, Tokyo 180-8585,
    Japan
    Phone: +81 422 59 4769
    Email: yasukawa.seisho@lab.ntt.co.jp


10. Authors' Addresses

    Dimitri Papadimitriou
    Alcatel
    Francis Wellensplein 1,
    B-2018 Antwerpen,
    Belgium
    Phone : +32 3 240 8491
    Email: dimitri.papadimitriou@alcatel.be







Yasukawa, et. al.                                              [Page 32]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    JP Vasseur
    Cisco Systems, Inc.
    300 Beaver Brook Road
    Boxborough, MA 01719,
    USA
    Email: jpv@cisco.com

    Yuji Kamite
    NTT Communications Corporation
    Tokyo Opera City Tower
    3-20-2 Nishi Shinjuku, Shinjuku-ku,
    Tokyo 163-1421,
    Japan
    Email: y.kamite@ntt.com

    Rahul Aggarwal
    Juniper Networks
    1194 North Mathilda Ave.
    Sunnyvale, CA 94089
    Email: rahul@juniper.net

    Alan Kullberg
    Motorola Computer Group
    120 Turnpike Rd.
    Southborough, MA 01772
    Email: alan.kullberg@motorola.com

    Adrian Farrel
    Old Dog Consulting
    Phone: +44 (0) 1978 860944
    Email: adrian@olddog.co.uk

    Markus Jork
    Avici Systems
    101 Billerica Avenue
    N. Billerica, MA 01862
    Phone: +1 978 964 2142
    Email: mjork@avici.com

    Andrew G. Malis
    Tellabs
    2730 Orchard Parkway
    San Jose, CA 95134
    Phone: +1 408 383 7223
    Email: andy.malis@tellabs.com






Yasukawa, et. al.                                              [Page 33]

Internet Draft   draft-ietf-mpls-p2mp-requirement-04.txt  September 2004


    Jean-Louis Le Roux
    France Telecom
    2, avenue Pierre-Marzin
    22307 Lannion Cedex
    France
    Email: jeanlouis.leroux@francetelecom.com


11. Intellectual Property Consideration

    The IETF takes no position regarding the validity or scope of any
    Intellectual Property Rights or other rights that might be claimed
    to pertain to the implementation or use of the technology
    described in this document or the extent to which any license
    under such rights might or might not be available; nor does it
    represent that it has made any independent effort to identify any
    such rights.  Information on the procedures with respect to rights
    in RFC documents can be found in BCP 78 and BCP 79.

    Copies of IPR disclosures made to the IETF Secretariat and any
    assurances of licenses to be made available, or the result of an
    attempt made to obtain a general license or permission for the use
    of such proprietary rights by implementers or users of this
    specification can be obtained from the IETF on-line IPR repository
    at http://www.ietf.org/ipr.

    The IETF invites any interested party to bring to its attention
    any copyrights, patents or patent applications, or other
    proprietary rights that may cover technology that may be required
    to implement this standard.  Please address the information to the
    IETF at ietf-ipr@ietf.org.


12. Full Copyright Statement

    Copyright (C) The Internet Society (2004).  This document is
    subject to the rights, licenses and restrictions contained in BCP
    78, and except as set forth therein, the authors retain all their
    rights.

    This document and the information contained herein are provided
    on an "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE
    REPRESENTS OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND
    THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
    THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR
    ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A
    PARTICULAR PURPOSE.



Yasukawa, et. al.                                              [Page 34]