<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
 <!ENTITY RFC4119 PUBLIC ''
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4119.xml'>
 <!ENTITY RFC4481 PUBLIC ''
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4481.xml'>
 <!ENTITY I-D.ietf-geopriv-pdif-lo-profile PUBLIC ''    
      'http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-geopriv-pdif-lo-profile.xml'>      
 <!ENTITY RFC3688 PUBLIC ''
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3688.xml'>
]>

<?rfc inline="yes"?>
<?rfc toc="yes" ?>
<?rfc symrefs="yes" ?>
<?rfc iprnotified="no" ?>
<?rfc strict="yes" ?>
<?rfc compact="yes" ?>
<?rfc sortrefs="yes" ?>
<?rfc colonspace='yes' ?>

<rfc category="exp" ipr="trust200902" docName="draft-singh-geopriv-pidf-lo-dynamic-05.txt">
  <front>
    <title abbrev="Dynamic Feature Extensions to PIDF-LO">Dynamic Feature Extensions to the Presence
      Information Data Format Location Object (PIDF-LO)</title>
    
    <author initials="H." surname="Schulzrinne" fullname="Henning Schulzrinne">
      <organization>Columbia University</organization>
      <address>
        <postal>
          <street>Department of Computer Science</street>
          <city>450 Computer Science Building</city>
          <region>New York, NY</region>
          <code>10027</code>
          <country>US</country>
        </postal>
        <phone>+1 212 939 7004</phone>
        <email>hgs@cs.columbia.edu</email>
        <uri>http://www.cs.columbia.edu</uri>
      </address>
    </author>
    <author initials="H." surname="Tschofenig" fullname="Hannes Tschofenig">
      <organization>Nokia Siemens Networks</organization>
      <address>
        <postal>
          <street>Linnoitustie 6</street>
          <city>Espoo</city>
          <code>02600</code>
          <country>Finland</country>
        </postal>
        <phone>+358 (50) 4871445</phone>
        <email>Hannes.Tschofenig@gmx.net</email>
        <uri>http://www.tschofenig.priv.at</uri>
      </address>
    </author>
    <author initials="M." surname="Thomson" fullname="Martin Thomson">
      <organization>Andrew Corporation</organization>
      <address>
        <postal>
          <street/>
          <code/>
          <city>Wollongong</city>
          <country>NSW Australia</country>
        </postal>
        <email>martin.thomson@andrew.com</email>
      </address>
    </author>
    <author initials="V." surname="Singh" fullname="Singh Vishal">
      <organization/>
      <address>
        <postal>
          <street/>
          <street/>
          <city/>
          <region/>
          <code/>
          <country/>
        </postal>
        <email>singh.vishal@gmail.com</email>
      </address>
    </author>    
    <date year="2009"/>
    <abstract>
      <t>The Geopriv Location Object introduced by the Presence Information Data Format - Location
        Object (PIDF-LO), RFC 4119, defines a basic XML format for carrying geographical information
        of a presentity. The PIDF-LO specification made a subset of the functionality offered by the
        Geography Markup Language (GML) standard 3.0 mandatory to implement. This document defines
        child elements to the &lt;location-info&gt; element specified in RFC 4119 to carry
        temporal feature elements useful for tracking moving objects. Elements are defined that
        enable expression of speed, heading, acceleration and facing of the presentity. </t>
    </abstract>
  </front>
  <middle>

    <!-- **************************************************************************************** -->

    <section title="Introduction">

      <t>The Presence Information Data Format - Location Object (PIDF-LO) (see RFC 4119 <xref
          target="RFC4119"/>) provides geographical location of a presentity. This corresponds to a
        physical location at a given instance of time. The PIDF-LO specification made a subset of
        the functionality offered by the Geography Markup Language (GML) standard 3.0 mandatory to
        implement. With the extensions defined in <xref target="I-D.ietf-geopriv-pdif-lo-profile"/>
        more guidelines to implementers are being provided with respect to a number of location
        shapes that have to be supported for usage within PIDF-LO.</t>
      <t> The addition of rate of change information to the PIDF-LO enables a range of use cases.
        These use cases either directly use dynamic information, or use that information for
        smoother tracking of a position over time. For example, an application that continuously
        tracks a presentity could use velocity information to extrapolate positions in between times
        location information is measured. A shipping company could directly use speed to monitor
        trucks speed to ensure speed limits are observed.</t>

    </section>


    <!-- **************************************************************************************** -->

    <section title="Terminology">
      <t>In this document, the key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as
        described in RFC 2119 <xref target="RFC2119"/>. </t>
    </section>

    <!-- **************************************************************************************** -->

    <section title="Dynamic Elements">
      <t> This document defines a new element, &lt;Dynamic&gt;, for the conveyance of dynamic
        information. 
        
        Dynamic information MAY be included without any other location information being present.  When dynamic information is associated with information about the instantaneous position of the presentity, the &lt;Dynamic&gt; element MUST be included in the same &lt;location-info&gt; element as the corresponding geodetic (or civic) location information.  
         Dynamic information can be ignored if a recipient does not 
        support this specification.   The &lt;Dynamic&gt; element MUST include an "srsName" attribute that it set to "urn:ogc:def:crs:EPSG::4979".   This document uses the application schema profile defined in <xref target="GeoShape"/> (reference the OGC shapes document) with the addition of "direction.xsd" (identified by the URN "urn:opengis:specification:gml:schema-xsd:direction:3.1.1").
      </t>
      <t> The &lt;Dynamic&gt; element contains the following components: </t>
      <t>
        <list style="hanging">
          <t hangText="speed:"><vspace blankLines="1"/> Speed is the time rate of change in position
            of a presentity without regard for direction. The value for the &lt;speed&gt; element MUST be defined in meters per
            second and the 'uom' attribute MUST be set to
            "urn:ietf:params:ns:geopriv:dynamic:uom#mps". <vspace blankLines="1"/>
          </t>
          <t hangText="acceleration:"><vspace blankLines="1"/>This element specifies the rate
            usually rapid at which something happens. The &lt;acceleration&gt; element also
            contains a 'uom' attribute that MUST be set to "urn:ietf:params:ns:geopriv:dynamic:uom#mps2".<vspace blankLines="1"/>
          </t>
          <t hangText="heading:"><vspace blankLines="1"/> Heading is defined as the horizontal
            direction of one terrestrial point from another, expressed as the angular distance from
            a reference direction. It is usually measured from 000 degrees at the reference
            direction clockwise through 360 degrees.
            <!-- <vspace blankLines="1"/> The
              &lt;heading&gt; element is of type gml:DirectionPropertyType, which has the following child elements:
              &lt;gml:DirectionVector&gt;, &lt;gml:CompassPoint&gt;, &lt;gml:DirectionKeyword&gt;, and &lt;gml:DirectionString&gt; 
              This document profiles the usage of this GML element and mandates applications using
              this document to make use of the &lt;DirectionVector&gt; element only. <vspace
              blankLines="1"/> The 'srsName' attribute used with the &lt;horizontalAngle&gt; element MUST be set to "urn:ogc:def:uom:EPSG::9102" and the &lt;verticalAngle&gt; element MUST
              be set to "urn:ogc:def:uom:EPSG::9101".<vspace blankLines="1"/>--> </t>
          <t hangText="orientation:">
            <vspace blankLines="1"/> The &lt;orientation&gt; element describes the orientation of
            the presentity; the direction that the object is pointing.
          </t>
        </list>
      </t>
      <t>
      The &lt;heading&gt; and &lt;orientation&gt; elements are of the type gml:DirectionPropertyType, which allows many variations.  For use in this document , the &lt;gml:DirectionVector&gt; element MUST be used with the &lt;gml:horizontalAngle&gt; and &lt;gml:verticalAngle&gt; child elements. The &lt;gml:horizontalAngle&gt; element indicates an angle in degrees from Northing to Easting; &lt;gml:verticalAngle&gt; indicates an angle above the horizontal plane.  Inclusion of a vertical angle is mandated by schema; setting the 'uom' attribute to "urn:ogc:def:uom:EPSG::9102" (unity) with a value of "0" indicates that the vertical angle is not known.
      </t>
      <t>
        The &lt;gml:horizontalAngle&gt; and &lt;gml:verticalAngle&gt; elements MUST include a "uom" attribute set to "urn:ogc:def:uom:EPSG::9102".
      </t>
    </section>

    <!-- **************************************************************************************** -->

    <section anchor="schema" title="XML Schema">

      <t>
        <figure>
          <artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema
    targetNamespace="urn:ietf:params:xml:ns:pidf:geopriv10:dynamic10"
    xmlns:gml="http://www.opengis.net/gml"
    xmlns:dyn="urn:ietf:params:xml:ns:pidf:geopriv10:dynamic10"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified"
    attributeFormDefault="unqualified">

  <xs:import namespace="http://www.opengis.net/gml"/>

  <xs:element name="Dynamic" type="dyn:dynType"
              substitutionGroup="gml:_Geometry"/>

  <xs:complexType name="dynType">
    <xs:complexContent>
      <xs:extension base="gml:AbstractGeometryType">
        <xs:sequence>
          <xs:element name="orientation" minOccurs="0"
                      type="gml:DirectionPropertyType"/>
          <xs:element name="speed" minOccurs="0"
                      type="gml:MeasureType"/>
          <xs:element name="heading" minOccurs="0"
                      type="gml:DirectionPropertyType"/>
          <xs:element name="acceleration" minOccurs="0"
                      type="gml:MeasureType"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

</xs:schema>
]]></artwork>
        </figure>
      </t>
    </section>


    <!-- **************************************************************************************** -->

    <section anchor="example" title="Example">


      
      <t>
        <figure anchor="example1" title="Example of a dynamic extension">
          <artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<dyn:Dynamic 
    xmlns:dyn="urn:ietf:params:xml:ns:pidf:geopriv10:dynamic10"
    xmlns:gml="http://www.opengis.net/gml" 
    srsName="urn:ogc:def:crs:EPSG::4979">
    
    <dyn:orientation>
        <gml:DirectionVector>
            <gml:horizontalAngle 
                uom="urn:ogc:def:uom:EPSG::9102">
                90
            </gml:horizontalAngle>
            <gml:verticalAngle 
                uom="urn:ogc:def:uom:EPSG::9102">
                5
            </gml:verticalAngle>
        </gml:DirectionVector>
    </dyn:orientation>
    <dyn:speed 
        uom="urn:ietf:params:ns:geopriv:dynamic:uom#mps"> 
        3.2 
    </dyn:speed>
    <dyn:heading>
        <gml:DirectionVector>
            <gml:horizontalAngle 
                uom="urn:ogc:def:uom:EPSG::9102">
                180
            </gml:horizontalAngle>
            <gml:verticalAngle 
                uom="urn:ogc:def:uom:EPSG::9202">
                0
            </gml:verticalAngle>
        </gml:DirectionVector>
    </dyn:heading>
    <dyn:acceleration 
        uom="urn:ietf:params:ns:geopriv:dynamic:uom#mps2">
        0 
    </dyn:acceleration>
</dyn:Dynamic>
]]></artwork>
        </figure>
      </t>
    </section>

    <!-- **************************************************************************************** -->

    <section title="Security Considerations">
      <t>This document defines additional location elements carried by PIDF-LO (see <xref
          target="RFC4119"/>). The security considerations of RFC 4119 <xref target="RFC4119"/> are
        applicable to this document. </t>
    </section>

    <!-- **************************************************************************************** -->

    <section title="IANA Considerations">

      <t>This section registers a new XML namespace (as described in <xref target="RFC3688"/>) and a
        new XML schema. </t>

      <section title="Dynamic Feature Extensions Namespace Registration">
        <t>
          <list style="hanging">
            <t hangText="URI:">urn:ietf:params:xml:ns:pidf:geopriv10:dynamic10"</t>

            <t hangText="Registrant Contact:">IETF Geopriv Working Group, Hannes Tschofenig
              (hannes.tschofenig@nsn.com).</t>

            <t hangText="XML:">
              <figure>
                <artwork><![CDATA[
BEGIN
<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
  "http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type"
        content="text/html;charset=iso-8859-1"/>
  <title>Dynamic Feature Extensions Namespace</title>
</head>
<body>
  <h1>Namespace for Dynamic Feature Extensions to PIDF-LO</h1>
  <h2>urn:ietf:params:xml:ns:pidf:geopriv10:dynamic10</h2>
<p>See <a href="[URL of published RFC]">RFCXXXX 
    [NOTE TO IANA/RFC-EDITOR: 
     Please replace XXXX with the RFC number of this
    specification.]</a>.</p>
</body>
</html>
END
]]></artwork>
              </figure>
            </t>
          </list>
        </t>
      </section>
      <section title="Dynamic Feature Extensions Schema Registration">
        <t>
          <list style="hanging">
            <t hangText="URI:">urn:ietf:params:xml:ns:pidf:geopriv10:dynamic10</t>

            <t hangText="Registrant Contact:">IETF Geopriv Working Group, Hannes Tschofenig
              (hannes.tschofenig@nsn.com).</t>

            <t hangText="XML:">The XML schema to be registered is contained in <xref target="schema"
              />. Its first line is <figure>
                <artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
]]></artwork>
              </figure> and its last line is<figure>
                <artwork><![CDATA[
</xs:schema>
]]></artwork>
              </figure></t>
          </list>
        </t>
      </section>
      
      <section title="Units of Measure Registration">
        <t>Placeholder for 
        - urn:ietf:params:ns:geopriv:dynamic:uom#mps
        - urn:ietf:params:ns:geopriv:dynamic:uom#mps2
          </t>
      </section>
      
    </section>

    <!-- **************************************************************************************** -->

    <section title="Acknowledgements">
      <t>We would like to thank Klaus Darilion, Cullen Jennings, Rohan Mahy, Carl Reed, and Brian Rosen
        for their comments.</t>
    </section>

    <!-- **************************************************************************************** -->

  </middle>
  <back>
    <references title="Normative References">
      <reference anchor="RFC2119">
        <front>
          <title abbrev="RFC Key Words">Key words for use in RFCs to Indicate Requirement Levels</title>
          <author fullname="Scott Bradner" initials="S." surname="Bradner">
            <organization>Harvard University</organization>
            <address>
                            <postal>
                                <street>1350 Mass. Ave.</street>
                                <street>Cambridge</street>
                                <street>MA 02138</street>
                            </postal>
                            <phone>- +1 617 495 3864</phone>
                            <email>-</email>
                        </address>
          </author>
          <date month="March" year="1997"/>
          <area>General</area>
          <keyword>keyword</keyword>
        </front>
        <seriesInfo name="RFC" value="2119"/>
        <seriesInfo name="BCP" value="14"/>
      </reference> &RFC4119; 
      
      
      <reference anchor="GML">
        <front>
          <title abbrev="">Geographic information - Geography Markup Language (GML), OpenGIS
            03-105r1, available at: http://portal.opengeospatial.org/files/?artifact_id=4700 </title>
          <author fullname="Cox, S.">
            <organization/>
          </author>
          <author fullname="Daisey, P.">
            <organization/>
          </author>
          <author fullname="Lake, R.">
            <organization/>
          </author>
          <author fullname="Portele, C.">
            <organization/>
          </author>
          <author fullname="Whiteside, A.">
            <organization/>
          </author>
          <date month="April" year="2004"/>
        </front>
      </reference> &RFC4481; &RFC3688; </references>
    <references title="Informative References"> &I-D.ietf-geopriv-pdif-lo-profile; 
    
      <reference anchor="GeoShape">
        <front>
          <title abbrev="Geo-Shape">GML 3.1.1 PIDF-LO Shape Application Schema for use by the
            Internet Engineering Task Force (IETF)</title>
          <author initials="M." surname="Thomson" fullname="Martin Thomson">
            <organization>Andrew Corporation</organization>
          </author>
          <author initials="C." surname="Reed" fullname="Carl Reed, PhD.">
            <organization>Open Geospatial Consortium Inc.</organization>
          </author>
          <date month="December" day="26" year="2006"/>
        </front>
        <seriesInfo name="Candidate OpenGIS Implementation Specification"
          value="06-142, Version: 0.0.9"/>
      </reference>
      
    </references>
  </back>
</rfc>
