<?xml version="1.0" encoding="US-ASCII"?>

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space 
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->


<rfc category="std" docName="draft-ietf-dkim-rfc4871-errata-00" ipr="trust200811">
  <front>
    <title abbrev="RFC4871 Errata">RFC 4871 DomainKeys Identified Mail (DKIM)
      Signatures -- Errata</title>

    <author fullname="D. Crocker" initials="D." role="editor"
      surname="Crocker">
      <organization>Brandenburg InternetWorking</organization>
      <address><phone>+1.408.246.8253</phone>
        <email>dcrocker@bbiw.net</email>
      </address>
    </author>

    <date month="January" year="2009"/>

    <area>Security</area>
    <workgroup>DKIM</workgroup>
    <keyword/>
    <abstract>
      <t>This documents and resolves errata for RFC 4871, DomainKeys
        Identified Mail (DKIM) Signatures. Specifically the document clarifies
        the nature, roles and relationship of the two DKIM identifier tag
        values that are candidates for payload delivery to a receiving
        processing module.</t>
    </abstract>

    <note title="Errata Contact Fields">
      <t>
        <list style="hanging">
          <t hangText="Name:  ">Dave Crocker</t>
          <t hangText="Email:  "> dcrocker@bbiw.net</t>
        </list>
      </t>
    </note>
    <note title="Type">
      <t>Technical
        <!--* Editorial - spelling, grammar, punctuation, or syntax error that does not affect the technical meaning
          * Technical - error in the technical content (Note that changes in the usage of RFC 2119 keywords are considered technical.) 
          Tip: If the type is not clear, select Technical, and add your concern to the Notes. --></t>
    </note>

  </front>



  <middle>

    <section title="Introduction">
      <t>About the purpose for DKIM, <xref target="RFC4871"/> states: <list>
          <t>The ultimate goal of this framework is to permit a signing domain
            to assert responsibility for a message, thus protecting message
            signer identity...</t>
        </list>Hence, DKIM has a signer, a validator and a consumer of the
        validated signing domain. In effect, the purpose of DKIM is to
        communicate that "responsible" domain name to a receive-side consuming
        module. For DKIM to be interoperable and useful, signer and consumer
        must share the same understanding of the details about the name.</t>

      <t>However the specification defines two, potentially different
        identifiers that are carried in the DKIM-Signature: header field and
        might be delivered to a receiving processing module that consumes
        validated payload. The DKIM specification fails to clearly define what
        is "payload" to be delivered to a consuming module, versus what is
        internal and merely in support of achieving payload delivery. </t>
      <t>This currently leaves signers and consumers with the potential for
        having differing -- and therefore non-interoperable -- interpretations
        of how DKIM operates.</t>

      <t>This erratum resolves this confusion. It defines new labels for the
        two values, clarifies their nature, and specifies and their
        relationship. </t>
    </section>

    <section title="Section 2.7 Identity Assessor">
      <t>
        <list style="hanging">
          <t hangText="Original Text:  ">(None. Additional text.)</t>

          <t hangText="Corrected Text:  "> The name of the module which
            consumes DKIM's primary payload, the responsible Signing Domain
            Identifier (SDID). It can optionally consume the User Agent
            Identifier (UAID) value, if provided to the module. Details of
            this module are outside the scope of the DKIM specification.</t>
        </list>
      </t>
    </section>

    <section title="Section 2.8 Signing Domain Identifier (SDID)">
      <t>
        <list style="hanging">
          <t hangText="Original Text:  ">(None. Additional text.)</t>

          <t hangText="Corrected Text:  ">A single, opaque value that is the
            mandatory payload output of DKIM and which refers to the identity
            claiming responsibility for the introduction of a message into the
            mail stream.</t>

        </list>
      </t>
    </section>

    <section title="Section 2.9 User Agent Identifier (UAID)">
      <t>
        <list style="hanging">
          <t hangText="Original Text:  ">(None. Additional text.)</t>

          <t hangText="Corrected Text:  ">A single, opaque value that is the
            optional, additional payload output of DKIM and which identifies
            the user or agent on behalf of whom the SDID has taken
            responsibility. </t>
        </list>
      </t>
    </section>

    <section title="Section 3.9 Relationship Between SDID and UAID">
      <t>
        <list style="hanging">
          <t hangText="Original Text:  ">(None. This is an addition.)</t>
          <t hangText="Corrected Text:  ">DKIM's primary task is to
            communicate from the Signer to a recipient-side Identity Assessor
            a single, responsible Signing Domain Identifier (SDID). The SDID
            MUST be the value of the d= tag. DKIM MAY optionally provide a
            single responsible User Agent Identifier (UAID); if the UAID is
            present, it MUST be the value of the i= tag.</t>
          <t> The SDID MUST correspond to a valid DNS name under which the
            DKIM key record is published.</t>
          <t> The UAID is specified as having the same syntax as an email
            address, but is not required to have the same semantics. Notably,
            the domain name is not required to be registered in the DNS -- so
            it might not resolve in a query -- and the Local-part MAY be drawn
            from a namespace that does not contain the user's mailbox. The
            details of the structure and semantics for the namespace are
            determined by -- and known only to -- the Signer. The Signer MAY
            choose to use the same namespace for its UAIDs as its users' email
            addresses, or MAY choose other means of representing its users.
            However, the signer SHOULD use the same UAID for each message
            intended to be evaluated as being within the same sphere of
            responsibility, if it wishes to offer receivers the option of
            using the UAID as a finer grained, stable identifier than the
            SDID. </t>
          <t> Hence, DKIM delivers to receive-side Identity Assessors
            responsible Identifiers that are individual, opaque values. Their
            sub-structures and particular semantics are not publicly defined
            and, therefore, cannot be assumed by an Identity Assessor.</t>
          <t> A receive-side DKIM validator MUST communicate the Signing
            Domain Identifier (d=) to a consuming Identity Assessor module and
            MAY communicate the User Agent Identifier (i=) if present. </t>
          <t> To the extent that a receiver chooses to attempt to interpret
            any structured semantics for either of the identifiers, this is a
            heuristic function that is outside the scope of DKIM's
            specification and semantics. Hence it is relegated to a
            higher-level service, such as a delivery handling filter that
            integrates a variety of inputs and performs heuristic analysis of
            them. </t>
        </list>
      </t>
    </section>

    <section title="Section 3.5 The DKIM-Signature Header Field">
      <t>
        <list style="hanging">
          <t hangText="Original Text:  "
            ><![CDATA[   d=  The domain of the signing entity.]]></t>

          <t hangText="Corrected Text:  "> d= Specifies the SDID claiming
            responsibility for the introduction of a message into the mail
            stream.</t>
        </list>
      </t>
    </section>

    <section title="Section 3.5 The DKIM-Signature Header Field">
      <t>
        <list style="hanging">
          <t hangText="Original Text:  "><![CDATA[i=  Identity of the user or agent (e.g., a mailing list manager) on
       behalf of which this message is signed ]]></t>

          <t hangText="Corrected Text:  "> i= The responsible User Agent
            Identifier (UAID) on behalf of which the SDID is taking
            responsibility.</t>
        </list>
      </t>
    </section>


    <section title="Section 3.8.  Signing by Parent Domains">
      <t>the section where the error appears
        <!--Tip: If the error appears throughout the text, enter GLOBAL for Section. 
          Tip: If the error appears outside of a numbered section (e.g., in the Abstract), 
          you can enter the location. Note that this will appear as "Section Abstract says" 
          until later corrected by the verifier. 
        --></t>
      <t>
        <list style="hanging">
          <t hangText="Original Text:  "><![CDATA[   e.g., a key record for the domain example.com can be used to verify
   messages where the signing identity ("i=" tag of the signature) is
   sub.example.com, or even sub1.sub2.example.com.  In order to limit
   the capability of such keys when this is not intended, the "s" flag
   may be set in the "t=" tag of the key record to constrain the
   validity of the record to exactly the domain of the signing identity.
   If the referenced key record contains the "s" flag as part of the
   "t=" tag, the domain of the signing identity ("i=" flag) MUST be the
   same as that of the d= domain.  If this flag is absent, the domain of
   the signing identity MUST be the same as, or a subdomain of, the d=

]]></t>

          <t hangText="Corrected Text:  "> For example, a key record for the
            domain example.com can be used to verify messages where the UAID
            ("i=" tag of the signature) is sub.example.com, or even
            sub1.sub2.example.com. In order to limit the capability of such
            keys when this is not intended, the "s" flag MAY be set in the
            "t=" tag of the key record, to constrain the validity of the
            domain of the UAID. If the referenced key record contains the "s"
            flag as part of the "t=" tag, the domain of the UAID ("i=" flag)
            MUST be the same as that of the SDID (d=) domain. If this flag is
            absent, the domain of the UAID MUST be the same as, or a subdomain
            of, the SDID. </t>
        </list>
      </t>
    </section>

    <section title="Section 6.3.  Interpret Results/Apply Local Policy">
      <t>
        <list style="hanging">
          <t hangText="Original Text:  "><![CDATA[It is beyond the scope of this specification to describe 
            what actions a verifier system should make, but an authenticated 
            email presents an opportunity to a receiving system that unauthenticated 
            email cannot. Specifically, an authenticated email creates a predictable 
            identifier by which other decisions can reliably be managed, such as 
            trust and reputation.]]></t>

          <t hangText="Corrected Text:  ">It is beyond the scope of this
            specification to describe what actions an Identity Assessor can
            make, but mail carrying a validated SDID presents an opportunity
            to an Identity Assessor that unauthenticated email does not
            Specifically, an authenticated email creates a predictable
            identifier by which other decisions can reliably be managed, such
            as trust and reputation.</t>
        </list>
      </t>
    </section>

    <section title="Section 6.3.  Interpret Results/Apply Local Policy">
      <t>
        <list style="hanging">
          <t hangText="Original Text:  "><![CDATA[   Once the signature has been verified, that information MUST be
   conveyed to higher-level systems (such as explicit allow/whitelists
   and reputation systems) and/or to the end user.  If the message is
   signed on behalf of any address other than that in the From: header
   field, the mail system SHOULD take pains to ensure that the actual
   signing identity is clear to the reader.
]]></t>

          <t hangText="Corrected Text:  "> Once the signature has been
            verified, that information MUST be conveyed to the Identity
            Assessor (such as an explicit allow/whitelist and reputation
            system) and/or to the end user. If the UAID is not the same as the
            address in the From: header field, the mail system SHOULD take
            pains to ensure that the actual UAID is clear to the reader. </t>


        </list>
      </t>
    </section>

    <section title="Appendix D.  MUA Considerations">
      <t>
        <list style="hanging">
          <t hangText="Original Text:  "><![CDATA[        The tendency
   is to have the MUA highlight the address associated with this signing
   identity in some way, in an attempt to show the user the address from
   which the mail was sent. ]]></t>

          <t hangText="Corrected Text:  "> The tendency is to have the MUA
            highlight the UAID, in an attempt to show the user the identity
            that is claiming responsibility for the message.</t>
        </list>
      </t>
    </section>

    <section title="Security Considerations">
      <t>This Errata document clarifies core details about DKIM's payload. As
        such it affects interoperability, semantic characterization, and the
        expectations for the identifiers carried with a DKIM signature.
        Clarification of these details is likely to limit misinterpretation of
        DKIM's semantics. Since DKIM is fundamentally a security protocol,
        this should improve its security characteristics.</t>
    </section>

  </middle>


  <back>
    <references title="Normative References">
      <reference anchor="RFC4871">
        <front>
          <title>DomainKeys Identified Mail (DKIM) Signatures</title>
          <author fullname="E. Allman" initials="" surname="">
            <organization>Sendmail, Inc.</organization>
          </author>
          <author fullname="J. Callas" initials="" surname="">
            <organization>PGP Corporation</organization>
          </author>
          <author fullname="M. Delany" initials="" surname="">
            <organization>Yahoo! Inc</organization>
          </author>
          <author fullname="M. Libbey" initials="" surname="">
            <organization>Yahoo! Inc</organization>
          </author>
          <author fullname="J. Fenton" initials="" surname="">
            <organization> Cisco Systems, Inc.</organization>
          </author>
          <author fullname=" M. Thomas" initials="" surname="">
            <organization> Cisco Systems, Inc.</organization>
          </author>
          <date month="May" year="2007"/>
        </front>
        <seriesInfo name="RFC" value="4871"/>
      </reference>

    </references>



    <section anchor="Acknowledgements" title="Acknowledgements">
      <t>This document was initially formulated by an ad hoc design team,
        comprising: Jon Callas, J D Falk, Jim Fenton, Tony Hansen, Murray
        Kucherawy, John Levine, Michael Hammer, Jeff Macdonald, Ellen Siegel,
        Wietse Venema. It represents a rough consensus of that effort,
        although the final wording of the submitted draft is the sole
        responsibility (d=) of the listed author. </t>

    </section>
  </back>
</rfc>
