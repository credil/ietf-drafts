


LEMONADE Working Group                                         E. Burger
Internet-Draft                                         BEA Systems, Inc.
Intended status: Informational                                G. Parsons
Expires: July 1, 2008                                    Nortel Networks
                                                       December 29, 2007


LEMONADE Architecture - Supporting OMA Mobile Email (MEM) using Internet
                                  Mail
                draft-ietf-lemonade-architecture-01.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on July 1, 2008.

Copyright Notice

   Copyright (C) The IETF Trust (2007).

Abstract

   This document specifies the architecture for mobile email, as
   described by the OMA, using Internet Mail protocols.  This
   architecture is the basis of the work of the LEMONADE WG and is a
   guideline for the LEMONADE Profile.





Burger & Parsons          Expires July 1, 2008                  [Page 1]

Internet-Draft            LEMONADE architecture            December 2007


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  OMA Mobile Email (MEM) . . . . . . . . . . . . . . . . . . . .  3
     2.1.  OMA MEM Requirements . . . . . . . . . . . . . . . . . . .  3
     2.2.  OMA MEM Architecture . . . . . . . . . . . . . . . . . . .  3
       2.2.1.  OMA MEM logical Architecture . . . . . . . . . . . . .  3
       2.2.2.  OMA MEM Deployment Issues  . . . . . . . . . . . . . .  5
     2.3.  OMA MEM Technical Specification  . . . . . . . . . . . . .  6
   3.  IETF LEMONADE Architecture . . . . . . . . . . . . . . . . . .  6
     3.1.  Relationship between the OMA MEM and LEMONADE logical
           architectures  . . . . . . . . . . . . . . . . . . . . . .  8
     3.2.  LEMONADE realization of OMA MEM with non-LEMONADE
           compliant servers  . . . . . . . . . . . . . . . . . . . .  9
       3.2.1.  LEMONADE realization of OMA MEM with non-LEMONADE
               IMAP servers . . . . . . . . . . . . . . . . . . . . .  9
       3.2.2.  LEMONADE realization of OMA MEM with non-IMAP
               servers  . . . . . . . . . . . . . . . . . . . . . . . 10
   4.  Filters and server to client notifications and LEMONADE  . . . 10
   5.  Security Considerations  . . . . . . . . . . . . . . . . . . . 11
   6.  IANA considerations  . . . . . . . . . . . . . . . . . . . . . 12
   7.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 12
   8.  Informative References . . . . . . . . . . . . . . . . . . . . 12
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 13
   Intellectual Property and Copyright Statements . . . . . . . . . . 14


























Burger & Parsons          Expires July 1, 2008                  [Page 2]

Internet-Draft            LEMONADE architecture            December 2007


1.  Introduction

   This document describes the architecture of OMA mobile email (MEM)
   using Internet Mail protocols defined by the IETF.  The LEMONADE work
   group has enhanced many of these protocols for use in the mobile
   environment and are summarized in the LEMONADE profile [4] and its
   revision LEMONADE profile bis [5].  This document shows how the OMA
   MEM Requirement document [2], OMA MEM Architecture [1], and OMA MEM
   Technical Specification [3] relate to the work of LEMONADE.


2.  OMA Mobile Email (MEM)

   The OMA Mobile Email (MEM) sub-working group has spent some time
   studying the requirements and architecture of mobile email.  IETF
   LEMONADE has been liaising with them and has based much of our
   Internet Mail enhancements based on their input.  This section
   summarizes the output of the OMA.

2.1.  OMA MEM Requirements

   The OMA MEM activity collected a set of use cases and derived
   requirements for a mobile email enabler (MEM).  The OMA MEM
   Requirements [2] summarizes this work.  Some requirements relates to
   email protocols, some involve other OMA technologies outside the
   scope of IETF and some relate to implementations and normative
   interoperability statements for clients and servers.

2.2.  OMA MEM Architecture

   This section introduces the OMA MEM Architecture.

2.2.1.  OMA MEM logical Architecture

   The OMA MEM activity has derived a logical architecture from the
   requirements and use cases described in [2].  A simplification for
   illustrative purposes is shown in Figure 1, where arrows indicate
   content flows.













Burger & Parsons          Expires July 1, 2008                  [Page 3]

Internet-Draft            LEMONADE architecture            December 2007


                       __________
                      | Other    |
                  +---| Mobile   |<--+
                  |   | Enablers |   |
                  |   |__________|   |
                  |ME-4              |ME-3
                 _v____           ___v____        ________
                |      |ME-1     |        |      |        |
                | MEM  |-------->|  MEM   |  I2  |  Email |
                |Client|     ME-2| Server |<---->| Server |
                |______|<--------|________|      |________|
                                     ^
                                     |ME-5
                                     |


               Figure 1: Basic OMA MEM logical architecture

   Figure 1 identifies the following elements:
   o  The MEM client that implements the client-side functionality of
      the OMA Mobile Email Enabler.  It is also responsible for
      providing the mobile email user experience and interface to the
      user and storing the email and data to be sent to the MEM server
      when not connected.
   o  The MEM server that implements the server-side functionality of
      the OMA Mobile Email Enabler (MEM).
   o  The MEM protocol between the MEM Client and MEM Server.  It is
      responsible for all the in-band data exchanges that take place
      between the MEM client and server in order to update the MEM
      client with email server changes, the email server with changes in
      the MEM client and to send new email from the email server.
   o  Other OMA enablers are needed to directly support the mobile email
      enabler.  They are out of scope of IETF but they may include
      support for:
      *  Client provisioning and management for over the air
         installation of the MEM client on the device, provisioning of
         its settings and revocation, and
      *  Messaging enablers for out-of-band notification, where out-of-
         band notifications that are server to client event exchanges
         not transported by the MEM protocol but via other channels.

   OMA identifies different interfaces:
   o  ME-1: MEM client interface to interact via the MEM protocol with
      the MEM server
   o  ME-2: Corresponding interface of the MEM server
   o  ME-3: Out-of-band MEM server interfaces, for example to support
      generation of server to client notifications.




Burger & Parsons          Expires July 1, 2008                  [Page 4]

Internet-Draft            LEMONADE architecture            December 2007


   o  ME-4: Out-of-band MEM client interfaces (e.g. to receive server to
      client notifications).
   o  ME-5: Interface for management of MEM enabler server settings,
      user preferences, and filters, globally and per account.

   The MEM server enables an email server.  In a particular
   implementation, the email server may be packaged with (internal to
   it) the MEM server or be a separate component.  In such cases,
   interfaces to the email server are out of scope of the OMA MEM
   specifications.  In the present document, we focus on the case where
   the backend consists of IETF IMAP and Submit servers.  However, we
   also discuss the relationship to other cases.  The I2 interface is an
   OMA notation to designate protocol / interfaces that are not
   specified by the MEM enabler but may be standardized elsewhere.

2.2.2.  OMA MEM Deployment Issues

   The OMA MEM Architecture document [1] further identifies deployment
   models.

2.2.2.1.  OMA MEM proxy

   The OMA MEM Architecture document [1] identifies OMA MEM server
   proxies as server components that may be deployed ahead of firewalls
   to facilitate firewall traversal.

2.2.2.2.  OMA MEM deployment cases

   OMA MEM identifies that each component (MEM client, MEM servers,
   other enablers, and the email server) may be deployed in different
   domains, possibly separated by firewalls and other network
   intermediaries.  MEM proxies may be involved in front of firewall
   that protects the MEM server domain.

   OMA MEM targets support of configurations where:
   o  All components are within a same domain, such as in a mobile
      operator
   o  MEM client and other enablers are in the mobile operator domain,
      there is a MEM proxy, and the MEM server and email server are in
      the domain of the email service provider
   o  MEM client and other enablers as well as a MEM proxy are in the
      mobile operator domain, MEM server and email server are in the
      domain of the email service provider
   o  MEM client and other enablers are in the mobile operator domain, a
      MEM proxy is in a third party service provider domain and MEM
      server and email server are in the domain of the email service
      provider




Burger & Parsons          Expires July 1, 2008                  [Page 5]

Internet-Draft            LEMONADE architecture            December 2007


   o  MEM client, other enabler and MEM server are in the mobile
      operator domain and email server is in the domain of the email
      service provider
   o  MEM client and other enablers are in the mobile operator domain,
      MEM server is in a third party service provider domain and the
      email server is in the domain of the email service provider

   The e-mail service provider can be either a third-party service
   provider, a network service provider, or an enterprise e-mail
   service.

2.3.  OMA MEM Technical Specification

   The OMA MEM activity will conclude with a specification for a mobile
   email enabler (MEM).  The ongoing work is in OMA MEM Technical
   Specification [3].  LEMONADE is a basis for the mechanism.  However,
   some additional details that are outside the scope of IETF will also
   be included.

   OMA provides ways to perform provisioning via OMA client provisioning
   and device management.  Other provisioning specifications are
   available (e.g., SMS based).

   OMA provides enablers to support out-of-band notification mechanisms,
   as well as filter specifications (such as XDM), remote device
   deactivation, and other, non-Internet activities.


3.  IETF LEMONADE Architecture

   This section introduces the LEMONADE Architecture.

   The IETF LEMONADE activity has derived a LEMONADE profile [4] with
   the logical architecture represented in Figure 2, where arrows
   indicate content flows.
















Burger & Parsons          Expires July 1, 2008                  [Page 6]

Internet-Draft            LEMONADE architecture            December 2007


                            ______________
                           |              |
                  _________| Notification |
                 |         | Mechanism    |
                 |         |______________|
                 |Notif.              ^
                 |Protocol            |
                 |                 ___|______
                 |                |          |                 _____
               __v__    IMAP      | LEMONADE |      ESMTP     |     |
              |     |<----------->| IMAP     |<---------------| MTA |
              | MUA |-            | Store    |                |_____|
              |_____| \           |__________|
                       \               |
                        \              |URLAUTH
                         \SUBMIT       |
                          \        ____v_____
                           \      |          |                 _____
                            \     | LEMONADE |      ESMTP     |     |
                             ---->| Submit   |--------------->| MTA |
                                  | Server   |                |_____|
                                  |__________|


                  Figure 2: LEMONADE logical architecture

   The LEMONADE profile [4] assumes:
   o  IMAP protocol [6] including LEMONADE profile extensions [4]
   o  SUBMIT protocol [8], including LEMONADE profile extensions
   o  LEMONADE profile compliant IMAP store connected to MTA (Mail
      Transfer Agent) via ESMTP [7]
   o  LEMONADE profile compliant Submit server connected to MTA via
      ESMTP
   o  Lemonade profile message store / submit server protocols (URLAUTH,
      BURL, CATENATE) (see lemonade Profile [4]).
   o  Out-of-band server to client notifications relying on external
      notification mechanisms (and notification protocols) that may be
      out of scope of the LEMONADE profile.
   o  A LEMONADE aware MUA (Mail User Agent).  While use of out-of-band
      notification is described in the LEMONADE profile, support for the
      underlying notifications mechanisms/protocols is out of scope of
      the LEMONADE specifications.

   Further details on the IETF email protocol stack and architecture can
   be found in [10]






Burger & Parsons          Expires July 1, 2008                  [Page 7]

Internet-Draft            LEMONADE architecture            December 2007


3.1.  Relationship between the OMA MEM and LEMONADE logical
      architectures

   Figure 3 illustrates the mapping of the IETF LEMONADE logical
   architecture on the OMA MEM logical architecture.
                          _____________________
                         | Other_Mob. Enablers |
                         | |--------------|    |
                  _________| Notification |    |
                 |       | | Mechanism    |    |
                 |       | |______________|    |
                 |Notif. |____________^________|
                 |Protocol      ______|__________
            ME-4 |             |   ___|_ME-3_    |
              ___|____         |  |          |   |         _____
             | __v__ |  IMAP   |  | LEMONADE |   |  ESMTP |     |
             ||     |<----------->| IMAP     |<-----------| MTA |
             || MUA ||   ME-2a |  | Store    |   |        |_____|
             ||_____||\ME-1    |  |__________|   |
             | MEM   | \       |       |         |
             | Client|  \      |       |URLAUTH  |
             |_______|   \SUBMIT       |         |
                          \    |   ____v_____    |
                           \   |  |          |   |         _____
                            \  |  | LEMONADE |   |  ESMTP |     |
                             ---->| Submit   |----------->| MTA |
                         ME-2b |  | Server   |   |        |_____|
                               |  |__________|   |
                               |MEM        Email |
                               |Server     Server|
                               |_________________|
                                        ^
                                        |ME-5
                                        |


    Figure 3: Mapping of LEMONADE logical architecture onto the OMA MEM
                           logical architecture

   As described in Section 3, the LEMONADE profile assumes LEMONADE
   profile compliant IMAP stores and Submit servers.  Because the
   LEMONADE profile extends the IMAP store and the submit server, the
   mobile enablement of email provided by the LEMONADE profile is
   directly provided in these servers.  Mapping to the OMA MEM logical
   architecture, for the case considered and specified by the LEMONADE
   profile, we logically combine the MEM server and email server.
   However, in lemonade we split them logically into a distinct LEMONADE
   message store and a LEMONADE submit server.  ME-2 consists of two



Burger & Parsons          Expires July 1, 2008                  [Page 8]

Internet-Draft            LEMONADE architecture            December 2007


   interfaces.  ME-2a is IMAP extended according to the LEMONADE
   profile.  ME-2b is SUBMIT extended according to the LEMONADE profile.

   The MUA is part of the MEM client.

   The external notifications mechanism is part of OMA enablers
   specified by the OMA.

3.2.  LEMONADE realization of OMA MEM with non-LEMONADE compliant
      servers

   The OMA MEM activity is not limited to enabling Lemonade compliant
   servers.  It explicitly identifies the need to support other back-
   ends.  This is, of course, outside the scope of the IETF Lemonade
   activity.

3.2.1.  LEMONADE realization of OMA MEM with non-LEMONADE IMAP servers

   Figure 4 illustrates the case of IMAP servers that are not LEMONADE
   compliant.  In such case, the I2 interface between the MEM server
   components and the IMAP store and submit server are IMAP and SUBMIT
   without Lemonade extensions.
                 ______________
                |              |
       _________| Notification |
      |         | Mechanism    |
      |         |______________|
      |Notif.            ^
      |Protocol          |
      |               ___|______          _____________
      |              | LEMONADE |        |             |        _____
    __v__    IMAP    | MEM      |  IMAP  |NON-LEMONADE | ESMTP |     |
   |     |<--------->|Enabler   |<------>|IMAP         |<----->| MTA |
   | MUA |\   ME-2a  | Server   |        |Store        |       |_____|
   |_____| \         |__________|        |_____________|
            \             |
             \            |URLAUTH
              \SUBMIT     |
               \      ____v_____          _____________
                \    |          |        |             |        _____
                 \   | LEMONADE | SUBMIT |NON-LEMONADE | ESMTP |     |
                  -->|  MEM     |        |Submit       |       |     |
                     | Enabler  |------->|Server       |------>| MTA |
              ME-2b  | Server   |        |             |       |_____|
                     |__________|        |_____________|


    Figure 4: Architecture to support non-LEMONADE IMAP servers with a



Burger & Parsons          Expires July 1, 2008                  [Page 9]

Internet-Draft            LEMONADE architecture            December 2007


                LEMONADE realization of an OMA MEM enabler

3.2.2.  LEMONADE realization of OMA MEM with non-IMAP servers

   Figure 5 illustrates the cases where the message store and submit
   servers are not IMAP store or submit servers.  They may be POP3
   servers or other proprietary message stores.
                 ______________
                |              |
       _________| Notification |
      |         | Mechanism    |
      |         |______________|
      |Notif.            ^
      |Protocol          |
      |               ___|______          _____________
      |              | LEMONADE |        |             |        _____
    __v__    IMAP    | MEM      |    I2  |Proprietary  | ESMTP |     |
   |     |<--------->|Enabler   |<------>|Message      |<----->| MTA |
   | MUA |\   ME-2a  | Server   |        |Store        |       |_____|
   |_____| \         |__________|        |_____________|
            \             |
             \            |URLAUTH
              \SUBMIT     |
               \      ____v_____          _____________
                \    |          |        |             |        _____
                 \   | LEMONADE |    I2  |Proprietary  | ESMTP |     |
                  -->| MEM      |        |Submit       |       |     |
                     | Enabler  |------->|Server       |------>| MTA |
              ME-2b  | Server   |        |             |       |_____|
                     |__________|        |_____________|


    Figure 5: Architecture to support non-IMAP servers with a LEMONADE
                      realization of OMA MEM enabler.

   I2 designates proprietary adapters to the back-ends.


4.  Filters and server to client notifications and LEMONADE

   OMA MEM RD [2] and AD [1] emphasize the need to provide mechanisms
   for server to client notifications of email events and filtering.
   Figure 6 illustrates how notification and filtering works in the
   LEMONADE profile [4].







Burger & Parsons          Expires July 1, 2008                 [Page 10]

Internet-Draft            LEMONADE architecture            December 2007


                   ______________
                  |              |
         _________| Notification |
        |         | Mechanism    |
        |         |______________|
        |Notif.              ^
        |Protocol -------\  _|__
        |   ______|    ___\>|NF|____
        |  |          |     ----    |                 _____
      __v__|   IMAP   |__  LEMONADE |___   ESMTP   __|     |
     |     |<-------->|VF| IMAP     |DF |<--------|AF| MTA |
     | MUA |\   ME-2a |--  Store    |---           --|_____|
     |_____| \        |_____________| ^
            \_\_______________|_______|
               \              |URLAUTH
                \SUBMIT       |
                 \        ____v_____
                  \      |          |                 _____
                   \     | LEMONADE |      ESMTP     |     |
                    ---->| Submit   |--------------->| MTA |
                ME-2b    | Server   |                |_____|
                         |__________|


      Figure 6: Filtering mechanism defined in LEMONADE architecture

   In Figure 6, we define four categories of filters:
   o  AF: Administrative Filters - The e-mail service provider usually
      sets administrative filters.  The user typically does not
      configure AF.  AF applies policies covering content filtering,
      virus protection, spam filtering, etc.
   o  DF: Deposit Filters - Filters that are executed on deposit of new
      emails.  They can be defined as SIEVE filters [9].  They can
      include vacation notices.
   o  VF: View Filters - Filters that define which emails are visible to
      the MUA.  View filters can be performed via IMAP using the
      facilities described in [5].
   o  NF: Notification Filters - Filters that define for what email
      server event an out-of-band notification is sent to the client, as
      described in [5].

   The MUA can manage the NF and DF filters using the SIEVE management
   protocol.


5.  Security Considerations

   We note there are security risks associated with:



Burger & Parsons          Expires July 1, 2008                 [Page 11]

Internet-Draft            LEMONADE architecture            December 2007


   o  Out-of-band notifications
   o  Server configuration by client
   o  Client configuration by server
   o  Presence of MEM proxy servers
   o  Presence of MEM servers as intermediaries
   o  Measures to address the need to traverse firewalls

   We refer the reader to the relevant Internet Mail, IMAP, SUBMIT, and
   Lemonade documents for how we address these issues.


6.  IANA considerations

   None.


7.  Acknowledgements

   The authors acknowledge and appreciate the work and comments of the
   IETF LEMONADE working group and the OMA MEM working group.  We
   extracted the contents of this document from sections of
   draft-ietf-lemonade-profile-bis-05.txt and
   draft-ietf-lemonade-notifications-04.txt.


8.  Informative References

   [1]   Open Mobile Alliance, "Mobile Email Architecture Document",
         June 2007, <http://member.openmobilealliance.org/ftp/
         public_documents/mwg/MEM/Permanent_documents/
         OMA-AD-Mobile_Email-V1_0_0-20070614-D.zip>.

   [2]   Open Mobile Alliance, "Mobile Email RequirementS Document",
         OMA http://www.openmobilealliance.org/, Oct 2005.

   [3]   Open Mobile Alliance, "Mobile Email Technical Specification",
         OMA (Work in Progress), http://www.openmobilealliance.org/,
         Oct 2007.

   [4]   Maes, S. and A. Melnikov, "Internet Email to Support Diverse
         Service Environments (Lemonade) Profile", RFC 4550, June 2006.

   [5]   Cridland, D., Melnikov, A., and S. Maes, "The Lemonade
         Profile", draft-ietf-lemonade-profile-bis-07 (work in
         progress), November 2007.

   [6]   Crispin, M., "INTERNET MESSAGE ACCESS PROTOCOL - VERSION
         4rev1", RFC 3501, March 2003.



Burger & Parsons          Expires July 1, 2008                 [Page 12]

Internet-Draft            LEMONADE architecture            December 2007


   [7]   Gwinn, R., "Simple Network Paging Protocol - Version 3 -Two-Way
         Enhanced", RFC 1861, October 1995.

   [8]   Gellens, R. and J. Klensin, "Message Submission for Mail",
         RFC 4409, April 2006.

   [9]   Guenther, P. and T. Showalter, "Seive: An Email Filtering
         Language", October 2007, <http://www.ietf.org/internet-drafts/
         draft-ietf-sieve-3028bis-13.txt>.

   [10]  Crocker, D., "Internet Mail Architecture",
         draft-crocker-email-arch-09 (work in progress), May 2007.


Authors' Addresses

   Eric W. Burger
   BEA Systems, Inc.
   4 Van de Graaf Dr.
   Burlington, MA  01803
   USA

   Phone: +1 781 993 7437
   Fax:
   Email: eric.burger@bea.com
   URI:   http://www.standardstrack.com


   Glenn Parsons
   Nortel Networks
   3500 Carling Avenue
   Ottawa, ON  K2H 8E9
   Canada

   Phone: +1 613 763 7582
   Email: gparsons@nortel.com















Burger & Parsons          Expires July 1, 2008                 [Page 13]

Internet-Draft            LEMONADE architecture            December 2007


Full Copyright Statement

   Copyright (C) The IETF Trust (2007).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Acknowledgment

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).





Burger & Parsons          Expires July 1, 2008                 [Page 14]


