<?xml version="1.0" encoding="us-ascii"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY rfc3410 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3410.xml">
<!ENTITY rfc6241 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6241.xml">
<!ENTITY rfc5101 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5101.xml">
<!ENTITY rfc5675 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5675.xml">
<!ENTITY id.draft-ietf-eman-framework SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-eman-framework-02.xml">
<!ENTITY id.draft-ietf-eman-requirements SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-eman-requirements-03.xml">
]>
<!--<?rfc strict="yes"?>-->
<?rfc toc="yes"?>
<?rfc tocdepth="4"?>
<?rfc tocompact="no"?>
<!--<?rfc footer="draft-quittek-eman-reference-model-02"?>-->
<?rfc compact="yes"?>
<!--<?rfc subcompact="compact"?>-->
<?rfc symrefs="yes"?>
<rfc category="info" docName="draft-quittek-eman-reference-model-02" ipr="trust200902">
  <front>
    <title>Reference Model for Energy Management</title>

    <author fullname="J&uuml;rgen Quittek" initials="J."
            surname="Quittek">
      <organization>NEC Europe Ltd.</organization>

      <address>
        <postal>
          <street>Network Research Division</street>

          <street>Kurfuersten-Anlage 36</street>

          <code>69115</code>

          <city>Heidelberg</city>

          <country>DE</country>
        </postal>

        <phone>+49 6221 4342-115</phone>

        <email>quittek@neclab.eu</email>
      </address>
    </author>

    <author fullname="Bruce Nordman" initials="B."
            surname="Nordman">
      <organization>Lawrence Berkeley National Laboratory</organization>

      <address>
        <postal>
          <street>1 Cyclotron Road</street>

          <code>94720</code>

          <city>Berkeley</city>

          <country>US</country>
        </postal>
        <phone>+1 510 486 7089</phone>

        <email>bnordman@lbl.gov</email>
      </address>
    </author>

    <date month="July" year="2011" />

    <abstract>
      <t>This memo proposes a reference model for energy consumption
      monitoring and control. It claims that the only basic extension 
      of conventional network management models is the concept of
      power interfaces of managed entities. Power interfaces can be 
      treated similarly to network interfaces. They have different 
      modes (outlet, inlet, probe) and their connections to transmission 
      media (lines) define a power supply topology among the involved
      managed entities. This memo elaborates an information model
      for power interfaces that meets the requirements for energy
      management.
      </t>
    </abstract>
  </front>


  <middle>
  
  <section title="Introduction">

    <t>Managing energy consumption of devices with network connections is
    different from several well understood network management functions
    because of the special nature of energy supply and consumption.</t> 
    
    <t>A simple example of energy management is a single device
    reporting information about its own energy status. It may have local
    energy control mechanisms, for example putting itself into a sleep mode when
    appropriate and it may receive energy control commands from a 
    management system. This and similar cases are well understood and
    can be handled with well established and standardized management
    procedures. The only missing components today are standardized ways
    for reporting energy consumption information, such as, for example, 
    specific MIB modules, and for controlling energy consumption, such as, 
    for example, a specific YANG model. The simple example is also likely 
    to be most common and cover most energy use for the foreseeable future.</t>
    
    <t>Energy management has some differences from other common
    network management tasks. This is caused by the nature of energy 
    supply and consumption and by the commonly deployed technologies:
    <list style="symbols">
      <t>Energy supply for powered devices is often controlled by
      other devices that we call power sources. Examples of power sources 
      are Power Distribution Units (PDUs) for AC power supply and Power over
      Ethernet (PoE) switches providing DC power over Ethernet cables. 
      Thus power supply control for a specific powered device is often
      conducted through interaction the corresponding power source and
      not with the particular device. Also
      monitoring of power supply for a specific device may include
      interaction with the corresponding power source.</t>
      <t>In many cases, energy consumption is not measured by the 
      powered device itself, but by a power meter located upstream 
      in the power distribution tree. An example is a power 
      distribution unit (PDU) that measures energy consumption of 
      attached devices and may report this to an energy management 
      system. Unlike many other management functions, the powered 
      device is not involved in this process.</t>
      <t>A power meter measuring at the outlet of a PDU or at a
      power supply line may measure the accumulated power of several
      powered devices supplied via the outlet or the power line.
      In such a case no separate power values can be measured for the
      individual powered devices, but only the sum of the power of
      all devices powered via the outlet or power line is available.</t>
    </list></t>

    <t>This memo aims to clarify roles of entities involved in
    energy monitoring and control and the relationships among them.
    This is achieved by defining a model for energy management that
    particularly covers the special issues of energy management 
    including, but not limited to the three issues listed above.</t>
    
    <t>Version -01 of this model presented in the previous version 
    of this draft was focusing on devices or entities involved in
    energy management. This version -02 is completely different. 
    It is based on the concept of a power interface. The result is
    much simpler and very close to the common concept of a network 
    interface. For comparison, version -01 of the model is appended
    to the end of this memo as 
    Appendices <xref format="counter" target="monitoring-model"/> 
    and <xref format="counter" target="control-model"/>.</t>

    <t>There is already a reference model defined in section 4 of <xref 
    target="I-D.ietf-eman-framework"/>. The intention of this
    memo is to refine this model based on recent discussions.</t>
<!--    
    <t>The reference model specification below describes several kinds 
    of entities and interactions between them. According to the current
    scope of the EMAN WG, only reporting to the energy management
    system are potential subjects of standardization in this WG.</t> 

    <t>The reference model is described in two stages. Stage one is an 
    energy monitoring model specified in <xref target="monitoring-model"/>.
    It covers only monitoring of power states and energy consumption. 
    On stage two the monitoring model is extended to a full energy 
    management reference model by adding control functions for power 
    supply and power states. see <xref target="control-model"/>.</t> 
-->
  </section>
  <section anchor="terms" title="Terminology">
      
    <t>This section defines terms used for the description of the
    energy management reference model. Terms specific to the reference 
    model are defined in <xref target="pi"/>.</t> 
    
    <section title="Energy Management">
      <t>To be agreed on in the EMAN WG.</t>
    </section>

    <section title="Power">
      <t>To be agreed on in the EMAN WG.</t>
    </section>

    <section title="Energy">
      <t>To be agreed on in the EMAN WG.</t>
    </section>

<!--
    <section title="Power Interface (PI)">
      <t>According to the IEEE standard for Power over Ethernet (PoE) 
      as defined in <xref target="IEEE-802.3af"/> and 
      <xref target="IEEE-802.3at"/>, the Power Interface (PI) is the 
      mechanical and electrical interface between a Power Sourcing 
      Equipment (PS) or Powered Device (PD) and a power transmission 
      medium.</t>
    </section>

    <section title="Power Source (PS)">
      <t>An entity that provides power to one or more PDs at one or
      more Power Interfaces (PIs). Note that this extends the term 
      PSE compared to it's use in the IEEE standard for 
      <xref target="IEEE-802.3at">Power over Ethernet (PoE)</xref>,
      where at a single PI the PSE proviced only power to a single PD.
      </t>
    </section>

    <section title="Powered Device (PD)">
      <t>An entity that has the capability of receiving power at
      a Power Interface (PI).</t>
    </section>

    <section title="Power Meter (PM)">
      <t>An entity that has the capability of measuring power at
      one or more of its Power Interfaces (PIs).
      </t>
    </section>
-->
  </section>
  
  <section anchor="reference-model" title="Energy Management Reference Model">

    <t>This section specifies a reference model for energy monitoring. 
    The basic extension that the model makes on top of existing network 
    management models is that it introduced the concept of power interfaces
    in addition to network interfaces of managed entities.</t>
    
    <section anchor="pi" title="Power Interface (PI)">
      <t>The term 'power interface' is not new. It is already used by the 
      IEEE standard for <xref target="IEEE-802.3at">Power over Ethernet (PoE)</xref>.
      There are some similarities between power interfaces and network 
      interfaces.  A network interface can be used in different modes, 
      such as sending or receiving on an attached line. A PI can have 
      the following modes:</t>
      <t><list style="symbols">
        <t>inlet: receiving power</t>
        <t>outlet: providing power</t>
      </list></t>
      <t>In addition, like a network interface, it can be monitoring
      the shared (power) transmission media and meter power and other 
      electric quantities on it. PIs with metering capability is called
      a meter PI.</t>
      
      <t>Physically, a power interface can be located at an AC power 
      socket, an AC power cord attached to a device, an 8P8C (RJ45) 
      PoE socket, a current clamp of an ammeter, etc.</t>

      <t>Derived from the terminology defined by the IEEE standard for 
      Power over Ethernet (PoE) in <xref target="IEEE-802.3af"/> and 
      <xref target="IEEE-802.3at"/> we define the following terms:</t>

      <section anchor="pd" title="Powered Entity (PE)">
        <t>An entity with one or more PIs in mode "inlet" 
        is called a Powered Entity (PE). This extends the term Powered
        Device (PD) used in <xref target="IEEE-802.3af"/> and 
        <xref target="IEEE-802.3at"/> to cover not only entities that 
        are individual devices, but also entities that are just
        components of devices.</t>
      </section>
        
      <section anchor="pse" title="Power Source (PS)">
        <t>An entity with one or more PIs in mode "outlet" 
        is called a Power Source (PS). Note that this 
        extends the term Power Source Equipment (PSE) used in the 
        IEEE PoE standards <xref target="IEEE-802.3af"/> and 
        <xref target="IEEE-802.3at"/> where at a single PI the PSE 
        provides power to a single PD only. Here a PS may supply
        arbitrary numbers of PEs at a single PI. Note further that most 
        PSs have also PIs in mode "inlet" and thus are also a PE.</t>
      </section>
        
      <section anchor="pm" title="Power Meter (PM)">
        <t>An entity with a meter PI is called a Power Meter 
        (PM) for this PI.</t>
      </section>
      
    </section>
    <section anchor="topology" title="Power supply topology">
      <t>Similar to network interfaces, power interface can be connected
      to each other. The most simple connection is a single outlet
      connected to a single inlet as shown in <xref target="simple"/>.</t>
      <figure anchor="simple" title="Simple one-to-one power supply topology">
        <artwork><![CDATA[
       +--------------------------+    +----------------+
       | Power Source             |    | Powered Entity |
       |              +---------+ |    | +---------+    |
       |              |    PI   | |    | |    PI   |    |
       |              | (outlet)########## (inlet) |    |
       |              +---------+ |    | +---------+    |
       +--------------------------+    +----------------+

                   ######## power supply line
        ]]></artwork>
      </figure>
      <t><xref target="complex"/> shows a more complex example. Here
      a PS has two power outlets, one of them with metering 
      capability. Note that because is has also a PI in mode "inlet"
      it is also a PE. At one outlet, the PE supplies two PEs. The 
      power supply line connected to this PI is also monitored by a
      PM. Note that the PM can only measure the accumulated power
      of the two supplied PEs. It cannot differentiate which part
      of the measured values relates to an individual PE.</t>

      <figure anchor="complex" title="More complex power supply topology">
        <artwork><![CDATA[
                                                   +----------------+
                                                   | Powered Entity |
                                                   | +------------+ |
                                +-------------+    | | PI (inlet, | |
                                | Power Meter |  #####     meter) | |
                                | +---------+ |  # | +------------+ |
                                | |   PI    | |  # +----------------+
  +--------------------------+  | | (meter) | |  #
  |           PS/PE          |  | +----#----+ |  # +----------------+
  |              +---------+ |  +------#------+  # | Powered Entity |
  |              |  PI #2  | |         #         # | +------------+ |
  |              | (outlet)########################### PI (inlet) | |
  | +---------+  +---------+ |                     | +------------+ |
  | |  PI #1  |              |                     +----------------+
##### (inlet) |              |
  | +---------+  +---------+ |                     +----------------+
  |              |  PI #3  | |                     | Powered Entity |
  |              | (outlet,| |                     | +------------+ |
  |              |  meter) | ########################### PI (inlet) |
  |              +---------+ |                     | +------------+ |
  +--------------------------+                     +----------------+

                   ######## power supply line
        ]]></artwork>
      </figure>
      
      <t><xref target="complex"/> shows an example in which the metering
      function is not within the PE being metered.  We see that for energy 
      management in this type of deployment it is important to monitor 
      power interfaces and as well to detect the energy supply topology 
      by finding out which PIs are connected with each other by power 
      supply lines.</t>
      
      <t>Also from the example scenario in <xref target="complex"/>
      we can identify the following issues for energy management:</t>

      <section anchor="instrumentation" title="Lack of instrumentation">
        <t>Many PEs and PSs are not sufficiently instrumented to monitor 
        their own power interface(s). If there is no other entity that 
        has capabilities to collect data on these interfaces, then this 
        information is not available for energy management.</t>
      </section>

      <section anchor="remotemeter" title="Remote power measurement">
        <t>In many cases PSs or PMs have the capability to provide power 
        measurements for other entities. Examples are a Power 
        Distribution Unit (PDU) and a Power over Ethernet (PoE) Power 
        Sourcing Equipment (PSE). These entities often have the 
        capability to measure power per power outlet. In such a case 
        an association between the measurement values and the 
        (potentially remote) entities that consume the measured power 
        needs to be established. the association is given by the
        power supply topology.</t>
        
        <t>There are two examples for this in <xref target="complex"/>. 
        The first one is PI #3 of the PS/PE that provides power 
        measurement for the PE connected to this PI. The second one 
        is the PM that provides power metering for PI #2 of
        the PS/PE which is an aggregated power measurement for
        the two PEs connected to this PI.</t>
      </section>

      <section anchor="aggregatedmeter" title="Aggregated power measurement">
        <t>An entity providing power at outlets may supply more than 
        one other entity with a single outlet. In such a case power 
        measurements conducted at the outlet are aggregated measurement 
        for all powered entities that have their power inlets connected 
        to this outlet. Separate values for the individual supplied 
        entities are not available in this case. Furthermore, for the 
        energy management system it would be highly desirable to receive 
        information on which entities are actually receiving the power 
        provided at the outlet.</t>

        <t>An examples for this is the PM in <xref target="complex"/>. 
        It provides an aggregated power measurement for the two PEs 
        connected to this PI. Only with additional power metering
        at the PI of one of the PEs power values for the individual
        PEs can be determined.</t>

        <t>Note that in some cases, some or all of the PEs attached to an 
        aggregated outlet will have their own metering capabilities.
        A typical AC mains circuit breaker is an example of an aggregated
        outlet with many devices powered off of a single supply point.</t>
      </section>

      <section anchor="remotecontrol" title="Remote power supply control">
        <t>There are three ways for an energy management system to change 
        the power state of a managed entity. First is for a management system
        to provide policy or other useful information (like the electricity
        price) to the PE for it to use in determining its power state.
        The second is sending the entity 
        a command to switch to another state. 
        The third is to utilize an upstream device (to the PE)
        that has capabilities 
        to switch on and off power at its outlet.
        Some entities do not 
        have capabilities for receiving commands or changing their power 
        states by themselves. Such devices may be controlled by switching 
        on and off the power supply for them and so have particular need
        for the third method.</t>
        
        <t>In <xref target="complex"/> the PS/PE can switch on and off
        power at its two PIs in outlet mode and thereby switch on and off
        power supply for the respective connected PEs.</t>
      </section>

      <section anchor="aggregatedcontrol" title="Aggregated power supply control">
        <t>The issue of supplying multiple PEs via a single power 
        outlet of a device is also relevant for power control. Here it 
        must be considered that by switching off power at such an outlet,
        multiple entities might be switched on or off simultaneously.</t>
        
        <t>The example for this in <xref target="complex"/> is PI #2 of
        the PS/PE. It cannot switch power separately for an individual
        PE. Every power switching action affects the two connected PEs
        in the same way.</t>
      </section>

    </section>
    
    <section anchor="functions" title="Basic functions of energy management">

      <t>Based on the concept of power interfaces and the implications of 
      potential power supply topologies discussed above, the basic 
      functions of energy management can be defined. For our energy 
      management reference model we consider five basic energy 
      management functions:
      <list style="numbers">
        <t>monitoring power states (on, off, sleep, etc.) of PEs</t>
        <t>controlling power states of PEs</t>
        <t>monitoring PIs (inlets, outlets, probes)</t>
        <t>controlling PIs</t>
        <t>detecting power supply topologies</t>
      </list></t>
      
      <t>Monitoring and controlling power states of PEs
      (functions 1. and 2.) has many similarities with conventional 
      network management functions. The reference model includes them 
      for completeness,
      but not many special arrangements are necessary for dealing
      with them. One special issue might be finding ways to monitor 
      and control entities that are in a sleep state or an off state,
      as these may lack the normal network interaction capabilities of
      entities that are fully on.
      A second issue that may occur is proxying power state information 
      for other entities, for example when the entities do not have 
      IP interfaces themselves, but can communicate with the Internet 
      only via gateways. But for proxying of information, sufficient
      conventional means are available.</t>

      <t>More challenging are functions 3. to 5. For monitoring
      PIs it may be difficult to determine where information
      on a PI is available. As shown in <xref target="complex"/> a
      PI in inlet mode (without metering capability) may receive power values 
      from a PM, or from a supplying PI in outlet mode. Vice versa, 
      a PI in outlet mode without a metering capability may receive 
      power values
      from one or more PMs and PIs in inlet mode. For controlling PIs
      it may be difficult to find out where control capabilities are
      available and which PEs would be affected by switching an PI
      in outlet mode at a PS.</t>

      <t>Most of these problems can be resolved by the availability of
      power supply topology information. The information model for PIs
      described in the following section reflects the need for topology 
      detection by offering information elements for each PI that identify
      other PEs that are connected to the same power transmission medium.
      How this information is obtained remains an open issue. In case of
      Power over Ethernet (PoE), devices may detect the device at the other
      end of the line via the coupled Ethernet connection. Other information
      may have been entered manually when setting up devices, or automatically
      determined through other means.</t>
    </section>

<!--
      <t>Issues arising from these scenarios can be summarized by
      <list style="numbers">
        <t>Detecting the power supply topology, i.e. finding out which 
        power interfaces are connected to the same shared power line.</t>
        <t>Dealing with incomplete or not precise energy-related information</t>
        <t>Dealing with aggregated energy-related information</t>
      </list></t>
-->      
      
    <section anchor="informationmodel" 
      title="Energy management information model">
      <t>This section specifies an information model for monitoring 
      entities and Power Interfaces (PIs). It addresses the issues discussed in the 
      previous sections and meets all the requirements for energy 
      management specified in <xref target="I-D.ietf-eman-requirements"/>.
      except for the reporting of time series of energy and power values.
      But these can easily be added.</t>
      
      <t>The model assumes that there is a given mechanism to identify 
      managed entities by a network management system and that this
      mechanism uses a sufficiently unique entity identifier (EID).
      Then the information model for PIs is specified by the diagram
      in <xref target="im"/>.</t>
      
      <figure anchor="im" title="Information model for energy management">
        <artwork><![CDATA[
     +---------------------------------+
     | ManagedEntity                   |      +-----------------+
     +---------------------------------+      | PowerState      |
     | EID                             |    1 +-----------------+
     | Type                            |    . | Number          |
     | Tags                            |    . | Description     |
     |                                 | 1  N | MaxPower        |
     | PowerStates                     |----- | AveragePower    |
     | ActualStateSet                  |      | TimeInState     |
     | ActualState                     |      | LastTimeInState |
     +---------------------------------+      | TimesEntered    |
           1 |                                | TotalEnergy     |
             |                                +-----------------+
        0..N |
     +---------------------------------+
     | PowerInterface                  |
     +---------------------------------+    
     | Index                           |    0 +-----------------+
     | Tags (for grouping)             |    . | PiId            |
     | Mode (inlet,outlet)             |    . +-----------------+
     | MeteringCapability              | 1  N | EID             |
     | ConnectedTo (PIs of others)     |------| PI Index        |
     | TypeOfCurrent (AC,DC)           |      +-----------------+
     | NominalVoltage                  |
     | NominalAcFrequency              |
     | NumberOfAcPhases                |
     | ControlCapability (switch)      |
     |                                 |      +-----------------+
     | PowerAvaialbility (on,off)      |      | Phase           |
     | InUse (current>0)               |      +-----------------+
     | RealPower                       |    1 | PowerFactor     |
     | PowerMeasurementInterval        |    . | ActualVoltage   |
     | PowerMeasurementConfidence      |    . | ActualFrequency |
     | PowerMeasurementAccuracy        | 1  3 | TotalHarmonic-  |
     | Phases                          |------|   Distortion    |
     |                                 |      | SupplyImpedance |
     | TotalEnergy                     |      +-----------------+
     +---------------------------------+      
        ]]></artwork>
      </figure>

      <t>We further assume that existing mechanisms for reporting values
      on behalf of other entities or devices are sufficient for meeting
      requirements in Sections 7 and 8 of 
      <xref target="I-D.ietf-eman-requirements"/>.</t>
      
      <t>The information model in <xref target="im"/> contains five
      kinds of objects. The ManagedEntity object contains attributes
      describing the monitored entity. Instances of class PowerState 
      describe a single power state of the managed entity. PIs are
      described by PowerInterface objects. Instances of class PiId
      identify PIs of other managed entities connected to the same 
      power transmission medium and can be used for describing the 
      power supply topology. Objects Phase are used for representing
      actual power quality values. For DC current only one object is 
      required per PI, for AC current up to three objects may be needed.
      </t>
      
    </section>

  </section>

  <section title="Security Considerations">
    <t>This memo currently does not impose any security considerations.</t>
  </section>

  <section title="IANA Considerations">
    <t>This memo has no actions for IANA..</t>
  </section>
    
  <section title="Acknowledgements">
    <t>This memo was inspired by discussions with Benoit Claise,
    John Parello, Mouli Chandramouli, Rolf Winter, Thomas Dietz, 
    Bill Mielke, and Chris Verges.</t>
  </section>

  <section title="Open Issues">

    <section title="Change mode from inlet to outlet?">
      <t>Is it needed to support a PI to be in mode "inlet" to be 
      able to change to mode "outlet" and back?</t>
    </section>

    <section title="Collector and Aggregator">
      <t>It looks like we need to extend the model by a collector function 
      and an aggregator function. A collector would collect energy-related 
      information on other devices and report for multiple of them. 
      An aggregator would use information from several devices and excecute
      operations on them, for example calculating a sum.</t>
    </section>

  </section>

  </middle>

  <back>
    <references title="Informative References">

      &id.draft-ietf-eman-requirements;
      
      &id.draft-ietf-eman-framework;
      
      &rfc3410;
      
      &rfc6241;
      
      &rfc5101;
      
      &rfc5675;
      
      <reference anchor="IEEE-802.3af">
      <front>
  			<title>IEEE Std 802.3af-2003 - IEEE Standard for Information
  			technology - Telecommunications and information exchange
  			between systems - Local and metropolitan area networks -
  			Specific requirements - Part 3: Carrier Sense Multiple
  			Access with Collision Detection (CSMA/CD) Access Method
  			and Physical Layer Specifications - Amendment: Data Terminal
  			Equipment (DTE) -  Power via Media Dependent Interface (MDI)</title> 
  			<author initials="" surname="IEEE 802.3 Working Group" 
  			  fullname="IEEE 802.3 Working Group"></author>
  			<date year="2003" month="July" /> 
  		</front>
      </reference>

      <reference anchor="IEEE-802.3at">
      <front>
  			<title>IEEE Std 802.3at-2009 - IEEE Standard for Information
  			technology - Telecommunications and information exchange
  			between systems - Local and metropolitan area networks -
  			Specific requirements - Part 3: Carrier Sense Multiple
  			Access with Collision Detection (CSMA/CD) Access Method
  			and Physical Layer Specifications - Amendment: Data Terminal
  			Equipment (DTE) -  Power via Media Dependent Interface (MDI)
  			Enhancements</title> 
  			<author initials="" surname="IEEE 802.3 Working Group" 
  			  fullname="IEEE 802.3 Working Group"></author>
  			<date year="2009" month="October" /> 
  		</front>
      </reference>

    </references>

  <section anchor="monitoring-model" 
           title="Energy Monitoring Reference Model Version -01">

    <t>This appendix specifies the previous version -01 of the reference model 
    for energy monitoring.  After introducing basic concepts of energy monitoring in 
    <xref target="monitoring-intro"/> it defines entities of the model and
    their interactions in <xref target="monitoring-entities"/>. Examples of 
    devices and scenarios are illustrated in 
    <xref target="monitoring-scenarios"/>. </t>

    <section anchor="monitoring-intro" title="Introduction to Energy Monitoring">

      <t> In this section we introduce basic concepts of energy monitoring
      starting with the most basic scenario and extending it stepwise to our
      full reference model.</t>
      
      <t>The main subject of energy monitoring is a powered device. An energy
      monitoring system collects information about powered devices, their 
      current power state (for example: on, sleep, off) and their
      actual power consumption. </t>
    
      <section title="Basic Energy Monitoring (local metering)">


        <t>The most basic interaction in an energy monitoring system
        is a powered device directly reporting its own energy-related information,
        with no other devices involved, as shown below.</t>

        <figure>
          <artwork><![CDATA[
                         energy monitoring 
                              system       
                                 ^
                                 |
                              device       
          ]]></artwork>
        </figure>

      </section>

      <section title="External Metering">

        <t>Reporting its current power state is a relatively easy task 
        for a powered device because usually information on the current 
        power state is locally available at the device and a reporting function 
        just needs some additional software to implement it.</t> 
    
        <t>Reporting the current power level of a
        device and its accumulated energy consumption is a 
        harder task, particularly if there are strict requirements for accuracy.
        Today very few devices are 
        instrumented with means for measuring their own energy consumption
        as that usually implies adding hardware for this purpose.
        </t>

        <t>This can be addressed by external meters, that is,
        dedicated probes that can meter energy consumption on a power 
        source (line). Some Power Distributions Units (PDUs) 
        and <xref target="IEEE-802.3af">Power over Ethernet (PoE)</xref> 
        switches integrate power source and power metering for 
        individual devices.</t>
    
        <t> For supporting scenarios with external meters we extend the 
        basic model from above by an external power meter and a power 
        source as shown below.</t>

        <figure>
          <artwork><![CDATA[
                      energy monitoring system                      
                        ^         ^         ^     
                        |         |         |     
                      power     power    powered      
                      source    meter    device       
                           ###############
   
           symbols ######### represent a power supply line
          ]]></artwork>
        </figure>

        <t>All three potentially report to the energy monitoring system. 
        The power meter may report the current power and accumulated 
        energy consumption and the power source may report if the power 
        supply for the device is switched on or if it is off.</t>
        
        <t>Implementation may be incomplete.  For example, an energy management
        system may have access to only one or two of these three types of data.</t>


      </section>
      
      <section title="Functions and Entities">
        <t>This reference model operates at two levels/layers. One is simple basic
        functions that are implemented. The second is how they are arranged in
        devices. A device in this model may implement only a single function, or
        may implement many.</t>
          
        <t>That is, having multiple entities does not require 
        that all of them need to be instantiated by individual devices. 
        For example, the power meter function may be co-located and integrated with 
        the powered device, with the power source, or it may be
        implemented by a separate device.</t>
      </section>

      <section title="Power Monitors">

        <t>In the models above, the powered device and other
        components deliver reports directly to an
        energy monitoring system. However, there are energy monitoring
        scenarios where this is not possible or not desirable.</t>

        <t>Extreme examples are energy consumers that do not have IP interfaces
        but can communicate by other means. 
        For delivering their reports to an IP-based energy 
        monitoring system, it may be required to use a gateway that can 
        communicate with the energy monitoring system.</t>
        
        <t>However, even if all involved devices (PDUs, power meters, and powered devices)
        can communicate via IP, it may be desirable to have mediation 
        functions in place between powered devices and the energy monitoring 
        system. An example, is an aggregating device that aggregates and 
        reports information on several powered devices.</t>
        
        <t>There are several further useful scenarios. To generalize the model
        (and to not exclude any kind of gateway, proxy, relay, mediator or other device)
        we define reporting entities called 'monitors'. 
        The figure below shows three monitors, each of which
        reports to the energy monitoring system.
        This figure is the most generic representation of the energy monitoring
        reference model described by this document.</t>
        
        <figure>
          <artwork><![CDATA[
                  Energy Monitoring Reference Model

+-------------------------------------------------------------------+
|                     energy monitoring system                      |
+-------------------------------------------------------------------+
          ^                       ^                       ^     
          |                       |                       |     
+-------------------+   +-------------------+   +-------------------+
|    power source   |   |    power usage    |   |    power state    |
|      monitor      |   |      monitor      |   |      monitor      |
+-------------------+   +-------------------+   +-------------------+
          |                       |                       |     
+-------------------+   +-------------------+   +-------------------+
|       power       |   |    power meter    |   |      powered      |
|       source      |   +-------------------+   |      device       |
+-------------------+###########################+-------------------+
   
           symbols ######### represent a power supply line
          ]]></artwork>
        </figure>

        <t>A monitor function reports directly to the energy monitoring
        system using the EMON protocol (an Internet protocol). 
        A monitor must have means to
        acquire the information it reports, but how this information
        is acquired is not relevant for our model.
        That is, only the interactions with a caret symbol in this and following
        diagrams is the subject of standardization.
        Those with only the vertical bar character are outside the scope of
        these documents; they may be IP or non-IP.</t>
        
        <t>The reference model defines the communication between 
        power monitors an the energy monitoring system. The communication
        lines between these entities are reference points of our model
        described in more detail in the following.</t>

      </section>

    </section>  

    <section anchor="monitoring-entities" title="Energy Monitoring Entities">

      <t>This section defines entities of the energy monitoring reference
      model and describes interactions between them. Examples scenarios are 
      illustrated in <xref target="monitoring-scenarios"/>. </t> 

      <section title="Powered Device">
        <t>A powered device is provided with energy (typically electrical)
        usuallly provided via power lines. Power state, 
        power and consumed energy of powered devices are subject to monitoring 
        and control functions of energy management.</t> 
      </section>

      <section title="Power Source">
        <t>A power source provides a powered device with energy, 
        typically via a power line.
		It may have means to switch on and off 
        the power for the powered device. A power source does not necessarily 
        generate power, but it may do so. It may be as simple as a power 
        switch or a power plug, but it may also be a battery or a power 
        generator. Regardless, the nature of the source does not affect
        energy monitoring.</t>
        
        <t>Note that an internal battery within a device, such as the battery
        of a notebook PC or of a mobile phone are not considered to be a power 
        source. When a device runs on battery only, there is n flow of energy 
        into the device and consequently the power to be reported for this 
        device is zero. On the other hand, when a device charges its battery,
        then the power supplied for charging needs to be accounted, even if the
        device is not operational.</t>
      </section>

      <section title="Power Meter">
        <t>A power meter measures power and/or consumed energy, and
        typically is electrically connected to power supply lines 
        for powered devices. However, many devices can also provide
        a reliable estimate of their power consumption based on internal
        status information without having dedicated metering hardware.
        Regardless, all metering information is qualified by an 
        indication of its accuracy.</t>
        
        <t>The meter function also includes integrating power consumption
        over time to provide a "meter reading" with a time stamp to
        enable an energy monitoring system to track energy consumption over time.</t>

      </section>

      <section title="Power Monitors">
        <t>A power monitor has access to energy-related information 
        concerning powered devices and is able to report this
        information to energy management systems.</t>

        <t>A power monitor may also provide information on identity 
        and properties of a powered device to the management system.</t>
        
        <t>A power monitor may store energy-related information and 
        process it, for example, for aggregating information or for 
        extracting statistics that are provided to an energy management 
        system.</t>
        
        <t>There are three power monitor functions 
        in the energy monitoring reference model: power state monitors,
        power source monitors, and power usage monitors.</t>
        
        <section title="Power State Monitor">
          <t>A power state monitor has access to the power state 
          of a powered device and is able to report this information to an
          energy monitoring system. For acquiring power state information 
          it may interact with powered devices.</t>
        </section>

        <section title="Power Source Monitor">
          <t>A power state monitor has access to information on the power supply 
          of powered devices and is able to report this information to an
          energy monitoring system. Typically, it will just report either 
          'on' or 'off'. In addition, it may report on power availability. 
          For acquiring power source information it may interact with the 
          power sources of powered devices. </t>
        </section>

        <section title="Power Usage Monitor">
          <t>A power usage monitor has access to information on
          energy consumption of powered devices and is able to report this
          information to energy management systems. For acquiring information
          on energy consumption it may interact with power meters.</t>
        </section>

      </section>

      <section title="Energy Monitoring System">
        <t>An energy monitoring system receives information
        from power monitors, such as: power states, power source states, 
        and energy consumption.
        An energy monitoring system may be centralized or distributed.
        In most of the example scenarios
        illustrated in <xref target="monitoring-scenarios"/> a centralized 
        energy monitoring system is shown but in all cases can be
        replaced by a distributed monitoring system.</t>
      </section>
    
    </section>

    <section anchor="monitoring-points" title="Standardization Scope">
        <t>The reference model specifies interactions of an 
        energy monitoring system with power monitors. They reference 
        points of the model are potential subjects of standardization 
        (in the EMAN working group). 
        Interactions of power monitors with other entities are
        currently not considered to be subject of standardization.</t>
    
        <t>It is argued in
        <xref target="I-D.ietf-eman-requirements"/> that
        for most of the relevant scenarios the best choice a management 
        protocol for the reference points is <xref target="RFC3410">SNMP</xref>.
        The reference model defined in this document does not assume a 
        specific protocol between energy monitoring system and power 
        monitors. It is also applicable if other protocols, such as, 
        for example, <xref target="RFC5675">Syslog</xref> or
        <xref target="RFC5101">IPFIX</xref> are used.</t>        
    </section>

    <section anchor="monitoring-relationships" title="Entity Relationships">
    
      <t>No restrictions on entity relationships have been identified for 
      interacting entities of the energy monitoring reference model specified 
      in this document. This means that all relationships between
      entities may be one-to-one, one-to-many, many-to-one, or many-to-many.
      For example, 
      <list style="symbols">
        <t>a single power state monitor may report the power state of
        multiples powered entities,</t>
        <t>a single powered entity may have its power states reported by< 
        multiple power state monitors,</t>
        <t>a single powered device may receive power from several power
        sources,</t>
        <t>a single power monitor may report to multiple energy monitoring 
        systems.</t>
      </list>
      A few of scenarios with multiple instances of units are illustrated 
      by the examples in the following <xref target="monitoring-scenarios"/>.
      </t>
    
    </section>

    <section anchor="monitoring-scenarios" title="Energy Monitoring Scenarios">
      <t>This section describes common example scenarios for energy
      monitoring and how they are modeled with the entities and interactions
      described in the previous sections.</t>

      <section title="Simple Device with Power Meter">
        <t>A very basic example is a powered device that has a built-in meter 
        for measuring its own energy consumption and that reports its power 
        state and power usage directly to the energy monitoring system.</t>

        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy monitoring system                      |
+-------------------------------------------------------------------+
                                            ^ 
                                            | 
                    +-----------------------------------------------+
                    |                       |                       |
                    |           +-----------+-----------+           |
                    |           |                       |           |
                    | +-------------------+   +-------------------+ |
                    | |    power usage    |   |    power state    | |
                    | |      monitor      |   |      monitor      | |
                    | +-------------------+   +-------------------+ |
                    |           |                       |           |
+-----------------+ | +-------------------+   +-------------------+ |
|      power      | | |    power meter    |   |      powered      | |
|      source     | | +---------#---------+   |      device       | |
+-----------------+#|#########################+-------------------+ |
                    |                                               |
                    | powered device with meter and power monitors  |
                    +-----------------------------------------------+

     Scenario 1: Powered device metering and self-reporting
          ]]></artwork>
        </figure>

        <t>Here four entities are combined in a single device: the 
        powered device, the power meter, and two power monitors.</t>

      </section>

      <section title="External Power Meter">
        <t>The second example shows a power meter that
        is attached to the power line of a powered device that does 
        not have means for measuring its own energy consumption.
        The meter is integrated with a power usage monitor that reports
        metered data. The powered device may report its own power state 
        by an integrated power state monitor.</t>
  
        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy monitoring system                      |
+-------------------------------------------------------------------+
                                 ^                  
                                 |                    
                     +-----------------------+  
                     |  external | meter     |
                     | +-------------------+ |  
                     | |    power usage    | |  
                     | |      monitor      | |  
                     | +-------------------+ | 
                     |           |           |  
                     | +-------------------+ | 
+-----------------+  | |    power meter    | |  +-------------------+
|      power      |  | +---------#---------+ |  |      powered      |
|      source     |  +-----------#-----------+  |      device       |
+-----------------+#############################+-------------------+

                  Scenario 2: An external meter
          ]]></artwork>
        </figure>

      </section>

      <section title="External Power Meter for Multiple Powered Devices">
        <t>Power meters may be located at a power line that provides 
        power for multiple powered devices. In scenario 3, a single
        power meter measures the accumulated power and energy consumption
        of multiple powered devices. In general, In this scenario it is  
        usually not possible to derive power values for the individual 
        powered devices from the accumulated measurement.</t>
  
        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy monitoring system                      |
+-------------------------------------------------------------------+
                                 ^                  
                                 |                    
                     +-----------------------+  
                     |  external | meter     |
                     | +-------------------+ |  
                     | |    power usage    | |     +----------------+
                     | |      monitor      | |     |    powered     | 
                     | +-------------------+ |     |    device      |
                     |           |           |  ###+----------------+ 
                     | +-------------------+ |  #
+-----------------+  | |    power meter    | |  #  +----------------+
|      power      |  | +---------#---------+ |  #  |    powered     |
|      source     |  +-----------#-----------+  #  |    device      |
+-----------------+################################+----------------+
                                                #
                                                #  +----------------+
                                                #  |    powered     |
                                                #  |    device      |
                                                ###+----------------+

       Scenario 3: An external meter for multiple powered devices
          ]]></artwork>
        </figure>

      </section>

<!--
      <section title="Device with Power Meter and Battery">
        <t>The powered device may be integrated with the power source.
        Scenario 4 shows a device with t built-in battery that is modeled
        as power source. In this case the power source monitor may also 
        send information about power availability, such as, for example,
        the remaining charge of the battery.</t>

        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy monitoring system                      |
+-------------------------------------------------------------------+
                                  ^                          
                                  |                                
+-------------------------------------------------------------------+
|                                 |                                 |
|           +---------------------+---------------------+           |
|           |                     |                     |           |
| +-------------------+ +-------------------+ +-------------------+ |
| |    power source   | |    power usage    | |    power state    | |
| |      monitor      | |      monitor      | |      monitor      | |
| +-------------------+ +-------------------+ +-------------------+ |
|           |                     |                     |           |
| +-------------------+ +-------------------+ +-------------------+ |
| |       power       | |    power meter    | |      powered      | |
| |       source      | +---------#---------+ |      device       | |
| +-------------------+#######################+-------------------+ |
|                                                                   |
| powered device with battery and meter                             |
+-------------------------------------------------------------------+

     Scenario 4: Powered device metering and reporting on its own
          ]]></artwork>
        </figure>

        <t>Here all entities of our monitoring reference model are 
        integrated at a single device. Only the energy monitoring 
        system is separated.</t>

      </section>
-->

      <section title="Powered Device with Dual Power Supply">
        <t>Some powered devices have dual power supply. It may
        be that one supply comes from a power grid and the other
        one from a battery. High-reliability devices may have two
        power sources from different power distribution networks,
        as shown in scenarios 4 and 5.</t>

        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy monitoring system                      |
+-------------------------------------------------------------------+
                                  ^  
                                  |  
             +-----------------------------------------+
             |                    |                    |
             | +-------------------------------------+ |  
             | |         power usage monitor         | |  
             | +-------------------------------------+ |  
             |      |                           |      |
             | +---------+  +-----------+  +---------+ |
+---------+  | |  power  |  |  powered  |  |  power  | |  +---------+    
|  power  |  | |  meter  |  |  device   |  |  meter  | |  |  power  |  
|  source |  | +----#----+  |           |  +----#----+ |  |  source |    
+---------+##|##############+-----------+##############|##+---------+
             |                                         |
             | powered device with dual power supply   |
             | and dual metering                       |
             +-----------------------------------------+

       Scenario 4: powered device with dual power supply
          ]]></artwork>
        </figure>

        <t>In scenario 4 the device uses two meters, one for each
        power line and reports from both to the energy monitoring system.
        If the two power sources belong to different power distribution
        domains, it may be necessary to report power and energy separately
        for each supply. 
        </t>

      </section>

      <section title="Two energy monitoring systems">
        <t>Scenario 5 is more complex. Both meters are individual 
        external devices and there are even two separate energy 
        monitoring systems involved, one for each
        power distribution tree.</t>
  
        <figure>
          <artwork><![CDATA[
+-------------------------------+   +-------------------------------+
|   energy monitoring system    |   |   energy monitoring system    |
+-------------------------------+   +-------------------------------+
                  ^                               ^
                  |                               |  
            +-----------+                   +-----------+
            |     |     |                   |     |     |
            | +-------+ |                   | +-------+ |  
            | |power  | |                   | |power  | |
            | |usage  | |                   | |usage  | |
            | |monitor| |                   | |monitor| |  
            | +-------+ |                   | +-------+ |  
            |     |     |                   |     |     |
            | +-------+ |                   | +-------+ |
            | | power | |                   | | power | |
+--------+  | | meter | |  +-------------+  | | meter | |  +--------+    
| power  |  | +---#---+ |  |   powered   |  | +---#---+ |  | power  |  
| source |  +-----#-----+  |   device    |  +-----#-----+  | source |    
+--------+#################+-------------+#################+--------+

          Scenario 5: powered device with dual power supply
               from different power distribution trees
          ]]></artwork>
        </figure>

      </section>

      <section title="Power over Ethernet Switch">
        <t>This example shows a <xref target="IEEE-802.3af">Power over 
        Ethernet (PoE)</xref> switch supplying a powered device. 
        The switch contains a power source and a meter for each of its
        ports. </t>

        <t>There typically are multiple instances of power sources 
        and power meters in a PoE switch, but the drawing below shows only a single 
        instance. The same applies to the powered devices that are 
        represented by a single instance only.</t>
        
        <t>Note that a typical PoE switch has also means to control 
        power supply for powered devices (not shown here).
        Control of power supply is a subject of <xref 
        target="control-model"/>.</t>

        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy monitoring system                      |
+-------------------------------------------------------------------+
                      ^                                             
                      |                                                  
+---------------------------------------------+
|                     |                       |
|          +----------+-----------+           |
|          |                      |           |     
| +-----------------+   +-------------------+ | 
| |   power source  |   |    power usage    | | 
| |     monitor     |   |      monitor      | | 
| +-----------------+   +-------------------+ | 
|          |                      |           |                
| +-----------------+   +-------------------+ | +-------------------+
| |      power      |   |    power meter    | | |      powered      |
| |      source     |   +---------#---------+ | |      device       |
| +-----------------+#########################|#+-------------------+
|                                             |
| Power over Ethernet switch                  |
| or Power Distribution Unit                  |
+---------------------------------------------+
  Scenarios 6 & 7: Power over Ethernet switch or Power Distribution 
  Unit reporting on power source and power usage of powered devices
          ]]></artwork>
        </figure>

        <t>In this scenario the identification of the powered device can
        be done by the PoE switch by observing MAC and IP addresses of 
        the powered devices. The switch can report them to the energy
        management system which then in turn can contact the devices
        directly to obtain further information.</t>
      </section>

      <section title="Power Distribution Unit">
        <t>The same figure as used for the PoE switch in the previous section 
        is be used for scenario 7 modeling a power distribution unit (PDU).
        A PDU with meters for every socket can report power for each.</t>

        <t>Identifying the powered devices can more difficult in this 
        scenario than in the previous one with the PoE switch, because
        the PDU does not necessarily communicate with the powered devices. 
        In this case the PDU or EMS needs to obtain this information by
        other means, for example by manual configuration.</t>
      </section>

      <section title="Aggregator">
        <t>Scenario 8 shows a power usage monitor acting as an aggregator.
        It collects power information from three powered devices and 
        delivers all of the information to the energy monitoring system.
        The aggregator 
        may deliver the full information or aggregated information, for
        example, just the sum of the power of all three powered devices.</t>
  
        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy monitoring system                      |
+-------------------------------------------------------------------+
                                  ^                          
                                  |
+-------------------------------------------------------------------+
|                        power usage monitor                        |
+-------------------------------------------------------------------+
     |                       |                       |          
+-------------------+   +-------------------+   +-------------------+
|    |              |   |    |              |   |    |              |
|+-------+ +-------+|   |+-------+ +-------+|   |+-------+ +-------+|
|| power | |powered||   || power | |powered||   || power | |powered||
|| meter | |device ||   || meter | |device ||   || meter | |device ||
|+-------##+-------+|   |+-------##+-------+|   |+-------##+-------+|
+--------#----------+   +--------#----------+   +--------#----------+
         #                       #                       #
+-------------------------------------------------------------------+
|                          power source                             |
+-------------------------------------------------------------------+

     Scenario 8: An aggregator collecting monitoring information 
                      from three powered devices
          ]]></artwork>
        </figure>

      </section>

      <section title="Energy Monitoring Gateway">
        <t>Some energy monitoring scenarios include
        a gateway between the monitored units and the
        energy monitoring system.  The powered device and the power 
        meter may use means of communication other than IP.</t>
 
        <t>The gateway is a relay and protocol converter that delivers
        energy information to a power monitor.
        A single device may implement logically independent gateways
        for multiple devices.</t>
        
        <t> Scenario 9 can easily extended to a gateway that also
        contains a power source monitor.</t>

        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy monitoring system                      |
+-------------------------------------------------------------------+
                                              ^               
                                              |                   
                      +---------------------------------------------+
                      |                       |                     |
                      |           +-----------+----------+          |
                      |           |                      |          |
                      | +-------------------+   +-----------------+ |
                      | |    power usage    |   |   power state   | |
                      | |      monitor      |   |     monitor     | |
                      | +-------------------+   +-----------------+ |
                      | gateway   |                      |          |
                      +---------------------------------------------+
                                  |                      |     
+-------------------+   +-------------------+   +-----------------+
|       power       |   |    power meter    |   |     powered     |
|       source      |   +---------#---------+   |     device      |
+-------------------+###########################+-----------------+
   
             Scenario 9: A gateway between monitored devices 
                      and energy monitoring system
          ]]></artwork>
        </figure>

        <t>Here again, the problem of identifying the powered device has 
        become very difficult, because neither can the power monitor 
        provide an IP address of the powered device to the energy management 
        system nor can the energy management system directly communicate with 
        the powered device. Identification must be provided by other means.
        The Proxy can have a gateway function and relay identification
        between powered device and energy management system or the energy
        management system needs to acquire information on powered devices
        by other means, such as manual configuration.</t>
      </section>

      <section title="Further Scenarios">
        <t>More scenarios may be added to future versions of this document.
        Particularly, scenarios with multiple instances of an entity have not
        been elaborated a lot.

        <xref target="control-scenarios"/> shows scenarios for energy control.
        They can also be considered as further monitoring scenarios if only
        their power monitors are considered and power controllers are ignored.
        </t>
      </section>

    </section>

  </section>

  <section anchor="control-model" 
           title="Energy Management Reference Model version -01">
    <t>This appendix specifies the previous version -01 of the reference model
    for energy management. It extends the energy monitoring reference model 
    specified in the previous <xref target="monitoring-model"/> by adding 
    power control functions. The resulting model is a complete energy 
    management reference model.</t>

    <t>As in <xref target="monitoring-model"/> we first discuss entities and
    their relationships and then illustrate the model with example scenarios.
    </t>
    
    <t> The extension from energy monitoring to energy management is straight
    forward. To achieve the required control functions the
    power source, power meter, and powered device have additional functions
    for control.
    For each power monitor a corresponding power controller is added 
    as shown below.</t>
    <figure>
      <artwork><![CDATA[
                  Energy Management Reference Model

+-------------------------------------------------------------------+
|                     energy management system                      |
+-------------------------------------------------------------------+
    ^          |            ^          |            ^          |
    |          v            |          v            |          v
+--------+ +--------+   +--------+ +--------+   +--------+ +--------+
| power  | | power  |   | power  | | power  |   | power  | | power  |
| source | | source |   | usage  | | meter  |   | state  | | state  |
| monitor| | ctrler |   | monitor| | ctrler |   | monitor| | ctrler |
+--------+ +--------+   +--------+ +--------+   +--------+ +--------+
    |          |            |          |            |          |
+-------------------+   +-------------------+   +-------------------+
|       power       |   |    power meter    |   |      powered      |
|       source      |   +-------------------+   |      device       |
+-------------------+###########################+-------------------+
   
           symbols ######### represent a power line
      ]]></artwork>
    </figure>

    <section anchor="control-entities" title="Energy Management Entities">

      <t>This section defines entities of the energy management reference
      model and describes interactions between them. Examples scenarios are 
      illustrated in <xref target="control-scenarios"/>. For entities already
      specified in <xref target="monitoring-entities"/> of the
      energy monitoring reference model, only their additional properties 
      are mentioned here. Power monitors are not discussed here again, 
      because their specification in the energy management reference model
      do not change.
      </t> 

      <section title="Powered Device">
        <t>A powered device may be capable of changing its own power state
        from a request from the energy management system. Some devices may
        not be able to power up from an off state based on EMS request.
        Most devices that are asleep will be able to wake on EMES request.</t> 
      </section>

      <section title="Power Source">
        <t>A power source may be capable of switching on and off power for
        powered devices.</t>
      </section>

      <section title="Power Meter">
        <t>A power meter may be switched on or off or have its metering
        parameters modified.</t>
      </section>

      <section title="Power Controllers">
        <t>A power controller receives commands from an energy management 
        system to change the status or parameters of power sources,
        power meters, or powered devices.</t>

        <t>There are three kinds of power controller entities: power state 
        controllers, power source controllers, and power meter controllers.</t>
        
        <section title="Power State Controller">
          <t>A power state controller can initiate a change in the power state
          of a powered device.</t>
        </section>

        <section title="Power Source Controller">
          <t>A power source controller can change the
          power supply of a powered device. Typically, it has means for
          switching power supply on and off. It may use these means without
          communicating with the affected powered device.</t>
        </section>

        <section title="Power Meter Controller">
          <t>A power meter controller has means for influencing the
          operation of a power meter. It may switch on and off the power 
          meters and change parameters of their operation. For this purpose 
          it may interact with power meters.</t>
        </section>

      </section>

      <section title="Energy Management System">
        <t>An energy management system is an energy monitoring system
        extended by control functions. It interacts with power monitors
        and power controllers in order to achieve objectives of energy 
        management. </t>

        <t>It sends commands to power controllers. To power state controllers
        it sends requested power states for powered devices. To power 
        source controllers it requests to switch on or off power for powered 
        devices. To power meter controllers it sends commands concerning
        the operation  of power meters.</t>      
      </section>
    
    </section>

    <section anchor="control-points" title="Reference Points">
        <t>Relevant for our reference model are interactions of the 
        energy management system with power monitors and power controllers. 
        They are reference points of our model and potential subjects of 
        standardization in the EMAN working group. Interactions of power 
        monitors and power controllers with other entities are
        currently not considered to be subject of standardization.</t>
    
        <t>Monitoring protocols have already been discussed in 
        <xref target="monitoring-points"/>. There are several choices 
        of control protocols to be used for energy management.
        Among them are <xref target="RFC3410">SNMP</xref> and
        <xref target="RFC6241">NETCONF</xref>.</t>                
    </section>

    <section anchor="control-relationships" title="Entity Relationships">
      <t>The considerations on entity relationships for the energy monitoring
      reference model described in  <xref target="monitoring-relationships"/>.
      apply as well to the energy management reference model: 
      No restrictions on entity relationships have been identified.</t>
    </section>

    <section anchor="control-scenarios" title="Energy Management Scenarios">
      <t>This section describes example scenarios for energy management
      and how they are modeled with the entities and interactions
      described above.</t>

      <section title="Simple Self-Managed Device">
        <t>The first two examples are expected to become very common 
        scenarios. Here, a powered device is managing its power state
        on its own based on input other than from the energy management system.
        The device may decide to change power state based on observation of
        its environment (no current load, high temperature, not sufficient 
        light, scheduled time for service interruption, etc.) or it may 
        receive external triggers, such as by a human-operated remote 
        control.</t>
        
        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy management system                      |
+-------------------------------------------------------------------+
                                                  ^          
                                                  |          
                                            +-----------------------+
                                            |     |                 |
                                            | +--------+ +--------+ |
                                            | | power  | | power  | |
                                            | | state  | | state  | |
                                            | | monitor| | ctrler | |
                                            | +--------+ +--------+ |
                                            |     |          |      |
+-----------------+                         | +-------------------+ |
|      power      |                         | |      powered      | |
|      source     |                         | |      device       | |
+-----------------+#|#########################+-------------------+ |
                                            |                       |
                                            | powered device with   |
                                            | power state control   |
                                            +-----------------------+

               Scenario 10: A self-managed powered device
          ]]></artwork>
        </figure>

        <t>In any way, it's power state control is independent of the 
        energy management system. The only interaction with the system
        is reporting of power state to the energy management system in
        scenario 10, and in addition reporting of its current power and/or 
        accumulated consumed energy in scenario 11.</t>
        
        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy management system                      |
+-------------------------------------------------------------------+
                                            ^          
                                            |          
                    +-----------------------------------------------+
                    |                       |                       |
                    |     +-----------------+-----+                 |
                    |     |                       |                 |
                    | +--------+ +--------+   +--------+ +--------+ |
                    | | power  | | power  |   | power  | | power  | |
                    | | usage  | | meter  |   | state  | | state  | |
                    | | monitor| | ctrler |   | monitor| | ctrler | |
                    | +--------+ +--------+   +--------+ +--------+ |
                    |     |          |            |          |      |
+-----------------+ | +-------------------+   +-------------------+ |
|      power      | | |    power meter    |   |      powered      | |
|      source     | | +---------#---------+   |      device       | |
+-----------------+#|#########################+-------------------+ |
                    |                                               |
                    | powered device with built-in meter            | 
                    | and autonomous control                        |
                    +-----------------------------------------------+

    Scenario 11: A self-managed powered device with built-in meter
          ]]></artwork>
        </figure>

        <t>In scenario 11 also the control of the power meter is handled
        by the device itself.</t>
      </section>
        
      <section title="Simple Managed Device">
        <t>In our model, the scenario does not change much if the
        powered devices are not self-managed but managed by the energy 
        management system. Scenarios 12 and 13 show that just an 
        interaction between the energy management system and the powered
        device is added that serves for sending commands concerning
        power states to the device.</t>
        
        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy management system                      |
+-------------------------------------------------------------------+
                                                  ^          |
                                                  |          |
                                            +-----------------------+
                                            |     |          v      |
                                            | +--------+ +--------+ |
                                            | | power  | | power  | |
                                            | | state  | | state  | |
                                            | | monitor| | ctrler | |
                                            | +--------+ +--------+ |
                                            |     |          |      |
+-----------------+                         | +-------------------+ |
|      power      |                         | |      powered      | |
|      source     |                         | |      device       | |
+-----------------+#########################|#+-------------------+ |
                                            |                       |
                                            | powered device with   |
                                            | power state control   |
                                            +-----------------------+

               Scenario 12: A managed powered device
          ]]></artwork>
        </figure>

        <t>Control of the power meter by the management system can
        easily added to scenario 13. It is not included here, because
        for built-in meters this seems not to be necessary in many
        common cases.</t>
        
        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy management system                      |
+-------------------------------------------------------------------+
                                            ^                |
                                            |                |
                    +-----------------------------------------------+
                    |                       |                |      |
                    |     +-----------------+-----+          |      |
                    |     |                       |          v      |
                    | +--------+ +--------+   +--------+ +--------+ |
                    | | power  | | power  |   | power  | | power  | |
                    | | usage  | | meter  |   | state  | | state  | |
                    | | monitor| | ctrler |   | monitor| | ctrler | |
                    | +--------+ +--------+   +--------+ +--------+ |
                    |     |          |            |          |      |
+-----------------+ | +-------------------+   +-------------------+ |
|      power      | | |    power meter    |   |      powered      | |
|      source     | | +---------#---------+   |      device       | |
+-----------------+#|#########################+-------------------+ |
                    |                                               | 
                    | powered device with built-in meter            |
                    | and autonomous control                        |
                    +-----------------------------------------------+

      Scenario 13: A managed powered device with built-in meter
          ]]></artwork>
        </figure>

      </section>
        
      <section title="Power over Ethernet Switch">
        <t>Scenario 14 adds control functions to the PoE switch of
        scenario 6 in <xref target="monitoring-scenarios"/>. Here the
        energy management system can explicitly request the power for
        a powered device to be switched on or off. It also can switch 
        on and off metering and reporting of energy consumption per 
        port of the switch</t> 
        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy management system                      |
+-------------------------------------------------------------------+
                |     ^               |            ^         
                |     |               |            |         
+-------------------------------------------+ +---------------------+
|               |     |               |     | |    |                |
|    +----------------+----+          |     | |    |                |
|    |          v          |          v     | |    |                |
|+--------+ +--------+ +--------+ +--------+| |+--------+ +--------+|
|| power  | | power  | | power  | | power  || || power  | | power  ||
|| source | | source | | usage  | | meter  || || state  | | state  ||
|| monitor| | ctrler | | monitor| | ctrler || || monitor| | ctrler ||
|+--------+ +--------+ +--------+ +--------+| |+--------+ +--------+|
|    |          |          |          |     | |    |          |     |
|+-------------------+ +-------------------+| |+-------------------+|
||       power       | |    power meter    || ||      powered      ||
||       source      | +---------#---------+| ||      device       ||
|+-------------------+######################|#|+-------------------+|
|                                           | |                     |
| Power over Ethernet switch                | | powered device with |
| or Power Distribution Unit                | | power state control |
+-------------------------------------------+ +---------------------+

            Scenario 14 & 15: Power over Ethernet switch 
                     or Power Distribution Unit 
           ]]></artwork>
        </figure>
        <t>Still, the powered device in this scenario is self-managed 
        controlling its power state on its own and just reporting it
        to the energy management system.</t> 
      </section>

      <section title="Power Distribution Unit">
        <t>Again, as in <xref target="monitoring-scenarios"/> the scenario 
        for a power distribution unit looks exactly the same in our 
        reference model as the scenario for a power distribution unit.</t>
      </section>

      <section title="Energy Management Gateway">
        <t>Starting from an energy monitoring gateway in 
        <xref target="monitoring-scenarios"/> the extension towards
        an energy management gateway is again straight forward.</t>
 
        <figure>
          <artwork><![CDATA[
+-------------------------------------------------------------------+
|                     energy management system                      |
+-------------------------------------------------------------------+
                                     |      ^                |
                                     |      |                |
                    +-----------------------------------------------+
                    |                |      |                |      | 
                    |     +-----------------+-----+          |      | 
                    |     | gateway  v            |          v      |
                    | +--------+ +--------+   +--------+ +--------+ |
                    | | power  | | power  |   | power  | | power  | |
                    | | usage  | | meter  |   | state  | | state  | |
                    | | monitor| | ctrler |   | monitor| | ctrler | |
                    | +--------+ +--------+   +--------+ +--------+ |
                    |     |          |            |          |      |
                    +-----------------------------------------------+
                          |          |            |          |
+-----------------+   +-------------------+   +-------------------+
|      power      |   |    power meter    |   |      powered      |
|      source     |   +---------#---------+   |      device       |
+-----------------+###########################+-------------------+

           Scenario 16: A gateway between powered devices 
                      and energy monitoring system
             ]]></artwork>
        </figure>

        <t>Here again, the problem of identifying the powered device has 
        become very difficult, because neither can the power monitor 
        provide an IP address of the powered device to the energy management 
        system nor can the energy management system directly communicate with 
        the powered device. Identification must be provided by other means.
        The Proxy can have a gateway function and relay identification
        between powered device and energy management system or the energy
        management system needs to acquire information on powered devices
        by other means, such as manual configuration.</t>

      </section>

      <section title="Further Scenarios">
        <t>More scenarios may be added to future versions of this document.
        Particularly, scenarios with multiple instances of an entity have not
        been elaborated, yet.
        <xref target="control-scenarios"/> shows scenarios for energy control.
        They can also be considered as further monitoring scenarios if only
        their power monitors are considered and power controllers are ignored.
        </t>
      </section>

    </section>

  </section>


  </back>
</rfc>
