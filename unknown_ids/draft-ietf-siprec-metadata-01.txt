SIPREC                                           Ram Mohan. Ravindranath
Internet-Draft                                  Parthasarathi. Ravindran
Intended status: Standards Track                           Paul. Kyzivat
Expires: December 22, 2011                           Cisco Systems, Inc.
                                                           June 20, 2011


          Session Initiation Protocol (SIP) Recording Metadata
                     draft-ietf-siprec-metadata-01

Abstract

   Session recording is a critical requirement in many communications
   environments such as call centers and financial trading.  In some of
   these environments, all calls must be recorded for regulatory,
   compliance, and consumer protection reasons.  Recording of a session
   is typically performed by sending a copy of a media stream to a
   recording device.  This document describes the metadata model as
   viewed by Session Recording Server(SRS).

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on December 22, 2011.

Copyright Notice

   Copyright (c) 2011 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must



Ravindranath, et al.    Expires December 22, 2011               [Page 1]

Internet-Draft           SIP Recording Metadata                June 2011


   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  3
   3.  Metadata Model . . . . . . . . . . . . . . . . . . . . . . . .  3
   4.  Recording Metadata elements  . . . . . . . . . . . . . . . . .  5
     4.1.  Recording Session  . . . . . . . . . . . . . . . . . . . .  5
       4.1.1.  Attributes . . . . . . . . . . . . . . . . . . . . . .  5
       4.1.2.  Associations . . . . . . . . . . . . . . . . . . . . .  6
     4.2.  Communication Session Group  . . . . . . . . . . . . . . .  6
       4.2.1.  Attributes . . . . . . . . . . . . . . . . . . . . . .  6
       4.2.2.  Associations . . . . . . . . . . . . . . . . . . . . .  7
     4.3.  Communication Session  . . . . . . . . . . . . . . . . . .  7
       4.3.1.  Attributes . . . . . . . . . . . . . . . . . . . . . .  8
       4.3.2.  Associations . . . . . . . . . . . . . . . . . . . . .  8
     4.4.  Participant  . . . . . . . . . . . . . . . . . . . . . . .  9
       4.4.1.  Attributes . . . . . . . . . . . . . . . . . . . . . .  9
       4.4.2.  Associations . . . . . . . . . . . . . . . . . . . . . 10
     4.5.  Media Stream . . . . . . . . . . . . . . . . . . . . . . . 10
       4.5.1.  Attributes . . . . . . . . . . . . . . . . . . . . . . 11
       4.5.2.  Associations . . . . . . . . . . . . . . . . . . . . . 11
     4.6.  Extension Data . . . . . . . . . . . . . . . . . . . . . . 11
   5.  Metadata Model Object Instances  . . . . . . . . . . . . . . . 11
     5.1.  Use case 1: Basic Call . . . . . . . . . . . . . . . . . . 11
     5.2.  Use case 2: Basic Call with hold/resume  . . . . . . . . . 12
     5.3.  Use case 3: Basic call with Transfer . . . . . . . . . . . 14
     5.4.  Conference Use Cases . . . . . . . . . . . . . . . . . . . 15
       5.4.1.  Case 1:  . . . . . . . . . . . . . . . . . . . . . . . 16
       5.4.2.  Case 2:  . . . . . . . . . . . . . . . . . . . . . . . 18
       5.4.3.  Case 3:  . . . . . . . . . . . . . . . . . . . . . . . 20
       5.4.4.  Case 4:  . . . . . . . . . . . . . . . . . . . . . . . 21
   6.  Security Considerations  . . . . . . . . . . . . . . . . . . . 22
   7.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 22
   8.  Acknowledgement  . . . . . . . . . . . . . . . . . . . . . . . 22
   9.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 22
     9.1.  Normative References . . . . . . . . . . . . . . . . . . . 22
     9.2.  Informative References . . . . . . . . . . . . . . . . . . 22
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 22








Ravindranath, et al.    Expires December 22, 2011               [Page 2]

Internet-Draft           SIP Recording Metadata                June 2011


1.  Introduction

   Session recording is a critical requirement in many communications
   environments such as call centers and financial trading.  In some of
   these environments, all calls must be recorded for regulatory,
   compliance, and consumer protection reasons.  Recording of a session
   is typically performed by sending a copy of a media stream to a
   recording device.  This document focuses on the Recording metadata
   which describes the communication session.  The document describes a
   metadata model as viewed by Session Recording Server, the
   requirements for which are described in [I-D.ietf-siprec-req] and the
   architecture for which is described in
   [I-D.ietf-siprec-architecture].


2.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].  This
   document only uses these key words when referencing normative
   statements in existing RFCs."


3.  Metadata Model

   Metadata is the information that describes recorded media and the CS
   to which they relate.  Below diagram shows a model for Metadata as
   viewed by Session Recording Server (SRS).






















Ravindranath, et al.    Expires December 22, 2011               [Page 3]

Internet-Draft           SIP Recording Metadata                June 2011


  +-------------------------------+       1
  | Recording Session (RS)        |---------------+
  +-------------------------------+               |
        |1..*           | 1..*                    |
        |               |                         |
        |               | 0..*                    |
        |        +-----------------+              |
        |        | Communication   |              |
        |        |  Session (CS)   |      1       |
        |        |    Group        |--------------|
        |        +-----------------+              |
        |              | 0..1                     |
        |              |                          |
        |0..*          | 1..*                     |
  +-------------------------------+               |
  |   Communication Session (CS)  |       1       |
  |                               |---------------|
  +-------------------------------+               |       +------------+
        | 1..*                 |1..*              |       |            |
        |                      |                  |  0..* |Extension   |
        | 2..*                 |0..*              |-------| Data       |
  +-------------+ receives +----------------+     |       |            |
  | Participant |----------|  Media Streams |     |       +------------+
  |             |0..*  0..*|                |     |
  |             |          |                |     |
  |             |          |                |     |
  |             |  sends   |                |     |
  |             |----------|                |     |
  |             |1.*   0..*|                |     |
  +-------------+          +----------------+     |
         |                         |              |
         |1                        |1             |
         |                         |              |
         +----------------------------------------+




   The mechanism MUST provide a means to convey every attribute
   mentioned in the metadata model.  Session Recording Client (SRC) MAY
   initiate the Recording Session.  Here, Recording Session is a
   completely independent from the Communication Session that is being
   recorded at both the SIP dialog level and at the session level.  The
   metadata MUST be conveyed from SRC to SRS.  The metadata MAY be
   conveyed within the Recording Session Dialog.

   Note that the metadata model captures changes that occur over the
   duration of the recording session.  For example, if the call is



Ravindranath, et al.    Expires December 22, 2011               [Page 4]

Internet-Draft           SIP Recording Metadata                June 2011


   transferred from one participant to another, then the SRC SHALL
   convey a change of participant and the properties of the new media
   stream to the SRS.

   Some of the data in the model may not be conveyed explicitly from the
   SRC to the SRS, if it can be obtained contextually by the SRS.  For
   instance, the timing of RS block changes(like Start / Stop time) may
   not be explicitly conveyed from the SRC to the SRS (The Date header
   in RS dialog SIP message MAY provide the timing, but it is optional).
   In such cases the time a change occurred may be assumed to be the
   same as the time when notification of the change is received by the
   SRS.


4.  Recording Metadata elements

   This section describes each element of the metadata model, and the
   attributes of each element.  This section also describes how
   different elements are associated.

4.1.  Recording Session


   +-------------------------------+
   | Recording Session (RS)        |
   +-------------------------------+
   |                               |            +-----------------+
   |     Start/End Time            |    1  0..* |                 |
   |                               |------------|Extension Data   |
   |                               |            |                 |
   |                               |            +-----------------+
   +-------------------------------+
         |1..*            | 1..*
         |                |
         |0..*            | 0..*
    Communication    Communication
    Session          Session Group(CS Group)


   A Recording Session element represents a SIP session created between
   an SRC and SRS for the purpose of recording a Communication Session.
   A SIP RS dialog SHALL be mapped to this element and hence there is no
   need for this element to be reflected in metadata XML.

4.1.1.  Attributes

   A Recording Session element MAY have attributes like:




Ravindranath, et al.    Expires December 22, 2011               [Page 5]

Internet-Draft           SIP Recording Metadata                June 2011


   o  Start/End Time - Start and End time value SHALL be derived from
      Date header(if present in SIP message) in RS.  In cases where Date
      header is not present, Start/End time SHALL be the time at which
      SRS receive the SIP message to setup RS / disconnect RS.

4.1.2.  Associations

   One instance of Recording Session SHALL have:

   o  Zero or more instances of Communication Session Group.  CSG may be
      zero because it is optional metadata block.  Also the allowance of
      zero instances is to accommodate persistent recording, where there
      may be none.
   o  Zero or more instances of Communication Session blocks.
   o  Each CS Group MUST be associated with one or more Recording
      Sessions [Here each RS can be setup by the potentially different
      SRCs.]

4.2.  Communication Session Group


    Recording Session (RS)
              | 1..*
              |
              | 0..*
   +-------------------------------+
   | Communication Session         |
   |     Group                     |
   +-------------------------------+
   |  Unique-ID                    |           +----------------+
   |                               |   1  0..* |                |
   |                               |-----------|Extension Data  |
   |                               |           |                |
   +-------------------------------+           +----------------+
              | 0..1
              |
              | 1..*
    Communication Session (CS)


   A Communication Session Group provides association or linking of
   Communication Sessions.

4.2.1.  Attributes

   A CS Group MUST have a Unique-ID attribute.  This Unique-ID is to
   group different CSs that are related.  SRC (or MAY be SRS) MUST
   ensure the uniqueness of Unique-ID in case multiple SRC interacts



Ravindranath, et al.    Expires December 22, 2011               [Page 6]

Internet-Draft           SIP Recording Metadata                June 2011


   with the same SRS.  The mechanism by which SRC groups the CS is
   outside the scope of SIPREC.

4.2.2.  Associations

   A communication Session Group SHALL be associated with RS and CS in
   the following manner:

   o  There can be one or more Recording Session elements per
      Communication Session Group.
   o  Each Communication Session Group MUST be associated with one or
      more RS [Here each RS can be setup by the potentially different
      SRCs]
   o  There MAY be one or more Communication Sessions per CS Group [e.g.
      Consult Transfer]
   o  Each CS MAY be associated to zero or one CS-Group

4.3.  Communication Session



   Recording              Communication
   Session            Session Group(CS Group)
      |1..*                  | 0..1
      |                      |
      |0..*                  | 1..*
   +-------------------------------+               +-----------------+
   |   Communication Session (CS)  |       1  0..* |                 |
   |                               |---------------|Extension Data   |
   +-------------------------------+               |                 |
   |   CS Identifier               |               +-----------------+
   |   Termination Reason          |
   |   Start Time                  |
   |   End Time                    |
   +-------------------------------+
      |                      |
      | 1..*                 |1..*
      |                      |
      | 2..*                 |0..*
   Participant              Media Stream



   A Communication Session block/element in the metadata model
   represents Communication Session and its properties needed as seen by
   SRC.





Ravindranath, et al.    Expires December 22, 2011               [Page 7]

Internet-Draft           SIP Recording Metadata                June 2011


4.3.1.  Attributes

   A communication Session block SHALL have the following attributes:

   o  Termination Reason - This represents the reason why a CS was
      terminated.  The communication session MAY contain a Call
      Termination Reason.  This MAY be derived from SIP Reason header of
      CS.
   o  CS Identifier - This attribute is used to uniquely identify a CS.
   o  Start Time - This optional attribute represents CS start time
   o  End Time - This optional attribute represents CS end time

   Attributes like Retention (represent the value/duration for which
   Media streams of the CS needs to be retained), Force Deletion, Access
   Information e.t.c that are primarily related to policy will not be
   passed in metadata from SRC to SRS.  However if there are
   implementations where SRC has enough information, this could be sent
   as Extension Data attached to CS

4.3.2.  Associations

   A Communication Session SHALL be associated to CS-Group, Participant,
   Media Stream and Recording Session blocks.  Cardinalities between CS
   and Participant allows:

   o  CS to have atleast two or more participants
   o  Participant SHALL be associated with one or more CS's.  This may
      even includes participants who are not directly part of any CS.
      An example of such a case is participants in a premixed media
      stream.  The SRC may have knowledge of such Participants, yet not
      have any signaling relationship with them.  This might arise if
      one participant in CS is a conf focus.  Another use case is if one
      UA in CS works in 3pcc mode to acquire an MoH media stream, this
      might be reflected as unique source for media stream without
      having a reported signaling relationship to it.  In all these
      cases if SRC can learn enough information about the Participant,
      they SHALL be associated with CS.
   o  The model also allows participants in CS that are not participants
      in the media.  An example is the identity of a 3pcc controller
      that has initiated a CS to two or more participants of the CS.
      Another example is the identity of a conference focus.  Of course
      a focus is probably in the media, but since it may only be there
      as a mixer, it may not report itself as a participant in any of
      the media streams.

   Cardinalities between CS and Media Stream allows:





Ravindranath, et al.    Expires December 22, 2011               [Page 8]

Internet-Draft           SIP Recording Metadata                June 2011


   o  A CS to have zero or more Streams
   o  A stream can be associated with 1 or more CS.  An example is
      multicast MoH stream which might be associated with many CSs.
      Also if we were to consider a B2BUA to have a separate CS on each
      "side" then they might share a stream.(Though more likely this
      would be treated as a single CS.)

   Cardinalities between CS and RS allows:

   o  One instance of RS SHALL have Zero or more instances of
      Communication Session blocks.
   o  Each CS SHALL be associated with one more RS [ Here each RS can be
      potentially setup by different SRCs]

4.4.  Participant


    Communication Session (CS)
              | 1..*
              |
              | 2..*
   +-------------------------------+
   |          Participant          |
   |                               |
   +-------------------------------+
   |  AoR list                     |            +-----------------+
   |  Name                         |    1  0..* |                 |
   |  Participant Type             |------------|Extension Data   |
   |                               |            |                 |
   +-------------------------------+            +-----------------+
           | 0..*       1..*|
   receives|                |sends
           | 0..*       0..*|
             Media Stream



   A Participant block has information about a device that is part of a
   CS and/or contributes/consumes media stream(s) belonging to a CS.

4.4.1.  Attributes

   Participant has attributes like:

   o  AoR list - Has list of AoRs.  An AoR MAY be SIP/SIPS/TEL URI.
      There MAY be cases where a participant can have more than one AoR
      [ e.g.  P-Asserted-ID which can have both SIP and TEL URIs]




Ravindranath, et al.    Expires December 22, 2011               [Page 9]

Internet-Draft           SIP Recording Metadata                June 2011


   o  Name - This attribute represents Participant name(SIP display
      name) or DN number ( in case it is known)

   Other attributes [ like Participant Role, Participant type ] MAY be
   carried as part of extension data to Participant from SRC to SRS.

4.4.2.  Associations

   Cardinalities between participant and Media Stream allows:

   o  Participant to receives zero or more media streams
   o  Participant to send zero or more media streams.  (Same participant
      provides multiple streams e.g. audio and video)
   o  Media stream to be received by zero or more participants.  Its
      possible, though perhaps unlikely, that a stream is generated but
      sent only to the SRC and SRS, not to any participant.  E.g.  In
      conferencing where all participants are on hold and the SRC is
      collocated with the focus.  Also a media stream may be received by
      multiple participants (e.g.  Whisper calls, side conversations).
   o  Media stream to be sent by one or more participants (pre-mixed
      streams).

   Example of a case where a participant may receive Zero or more
   streams - a Supervisor may have side conversation with Agent, while
   Agent converses with customer.

4.5.  Media Stream


                              Participant
                            | 0..*       1..*|
                    receives|                |sends
                            | 0..*       0..*|
                         +-------------------------+
                         |          Media Stream   |
                         |                         |
Communication 1..*  0..* +-------------------------+
  Session    ------------|  Start Time             |        +----------+
                         |  End Time               |1  0..* |          |
                         |  Media Stream Reference |--------|Extension |
                         |                         |        | Data     |
                         +-------------------------+        +----------+


   A Media Stream block SHALL have properties of media as seen by SRC
   and sent to SRS.  Different instances of Media Stream block would be
   created whenever there is a change in media (e.g. dir change like
   pause/resume and/or codec change and/or participant change.).



Ravindranath, et al.    Expires December 22, 2011              [Page 10]

Internet-Draft           SIP Recording Metadata                June 2011


4.5.1.  Attributes

   A Media Stream block SHALL have the following attributes:

   o  Start Time - Represents Media Start time at SRC.
   o  End Time - Represents Media End time at SRC.  This is an optional
      attribute and MAY be included after a stream ends
   o  Media Stream Reference - In implementations this can reference to
      m-line

   The metadata model should include media streams that are not being
   delivered to the SRS.  Examples include cases where SRC offered
   certain media types but SRS chooses to accept only a subset of them
   OR an SRC may not even offer a certain media type due it its
   restrictions to record

4.5.2.  Associations

   A Media Stream SHALL be associated with Participant and CS.  The
   details of association with the Participant are described in the
   Participant block section.  The details of association with CS is
   mentioned in the CS section.

4.6.  Extension Data

   A recording metadata object contains additional data not specified as
   part of siprec.  This is intended to accommodate future standards
   track extensions, as well as vendor and user specific extensions.
   The mechanism MUST provide a means of unambiguously distinguishing
   such extension data.


5.  Metadata Model Object Instances

   This section describes the metadata model object instances for
   different use cases of SIPREC.  For the sake of simplicity as the
   media streams sent by each of the participants is received by every
   other participant in these use cases, it is NOT shown in the object
   instance diagrams below.  Also for the sake of ease not all
   attributes of each block are shown in these instance diagrams.

5.1.  Use case 1: Basic Call

   Basic call between two Participants A and B. In this use case each
   participant sends one Media Stream.  For the sake of simplicity
   "receives" lines are not shown in this instance diagram.  Media
   Streams sent by each participant is received all other participants
   of that CS.



Ravindranath, et al.    Expires December 22, 2011              [Page 11]

Internet-Draft           SIP Recording Metadata                June 2011


   +-------------------------------+
   | Recording Session (RS)        |
   +-------------------------------+
              |
              |
              |
     +----------------+
     | Communication  |
     | Session (CS)   |
     +----------------+-----------------------+
     |  Start Time    |                       |
     +----------------+                       |
              |                               |
              |-------------------+           |
              |                   |           |
   +---------------+     +---------------+    |
   | ParticipantA  |     | ParticipantB  |    |
   |               |     |               |    |
   +---------------+     +---------------+    |
              |                  |            |
     sends    |                  |  sends     |
              |                  |            |
   +---------------+       +---------------+  |
   |Media Stream A1|       |Media Stream B1|  |
   +---------------+       +---------------+  |
   |MediaStream Ref|       |MediaStream Ref|  |
   |Start Time     |       |Start Time     |  |
   +---------------+       +---------------+  |
          |                       |           |
          +-----------------------------------+


5.2.  Use case 2: Basic Call with hold/resume

   Basic call between two Participants A and B and with Participant A or
   B doing a Hold/Resume.  In this use case each participant sends one
   Media Stream.  After Hold/Resume the properties of Media MAY change.
   For the sake of simplicity "receives" lines are not shown in this
   instance diagram.  Media Streams sent by each participant is received
   all other participants of that CS.


   +-------------------------------+
   | Recording Session (RS)        |
   +-------------------------------+
              |                   |
              |                   |
              |                   |



Ravindranath, et al.    Expires December 22, 2011              [Page 12]

Internet-Draft           SIP Recording Metadata                June 2011


              |                 +-------------------------------+
              |                 |   Communication Session (CS)  |
              |     +-----------|      Group(CSG)               |
              |     |           +-------------------------------+
              |     |           |   Unique-id1                  |
              |     |           +-------------------------------+
              |     |
              |     |
              |     |
     +----------------+
     | Communication  |
   +-| Session (CS)   |----------------------------------------------+
   | +----------------+                                              |
   | |                |                                              |
   | +----------------+                                              |
   |            |                                                    |
   |            |-------------------+                                |
   |            |                   |                                |
   | +---------------+     +---------------+                         |
   | | ParticipantA  |     | ParticipantB  |-----------+             |
   | |               |--+  |               |           |             |
   | +---------------+  |  +---------------+           |sends(After  |
   |       |       |    |       |         |            |     Resume) |
   |       |       |    |       |         |         +--------------+ |
   | sends |       |     +--+   |  sends  |         |MediaStream B3| |
   |       |       -----+   |   |          +-----+  +--------------+ |
   | +---------------+  |   |  +---------------+ |  |MediaStreamRef|-|
   | |Media Stream A1|  |   |  |Media Stream B1| |  | Start Time   | |
   | +---------------+  |   |  +---------------+ |  |              | |
   +-|MediaStreamref |  |   |  |MediaStreamRef | |  +--------------+ |
     |Start Time     |  |   |  |Start Time     |-|-------------------|
     +---------------+  |   |  +---------------+ |                   |
                        |   |                    |                   |
           +------------+   |sends               |sends (hold)       |
           | sends          |(Resume)            |                   |
           | (hold)         +-------+             +-------+          |
           |                        |                     |          |
     +---------------+       +---------------+   +--------------+    |
     |Media Stream A2|       |Media Stream A3|   |MediaStream B2|    |
     +---------------+       +---------------+   |              |    |
     |MediaStreamref |       |MediaStreamRef |   +--------------+    |
     |End Time       |       |Start Time     |   |Codec Params  |    |
     +---------------+       +---------------+   |end Time      |    |
              |                     |            |              |    |
              |                     |            +--------------+    |
              |                     |                  |             |
              +------------------------------------------------------+




Ravindranath, et al.    Expires December 22, 2011              [Page 13]

Internet-Draft           SIP Recording Metadata                June 2011


5.3.  Use case 3: Basic call with Transfer

   Basic call between two Participants A and B and with Participant A
   transfer(consult transfer) to Participant C. In this use case each
   participant sends one Media Stream.  After transfer the properties of
   Participant A Media MAY change.  For the sake of simplicity
   "receives" lines are not shown in this instance diagram.  Media
   Streams sent by each participant is received all other participants
   of that CS.


   +-------------------------------+
   | Recording Session (RS)        |-------+
   +-------------------------------+       |
              |                            |
              |                            |
              |                            |
   +-------------------------------+       |
   |   Communication Session (CS)  |       |
   |      Group(CSG)               |       |
   +-------------------------------+       |
   |   Unique-id1                  |       |
   +-------------------------------+       |
              |                            |
              |----------------------------+
              |
              |-----------------+
              |                 |
   +----------------+     +----------------+
   | Communication  |     | Communication  |
   | Session (CS)1  |     | Session (CS)2  |
   +----------------+     +----------------+-----------+
   |                |     |                |           |
   +----------------+     +----------------+           |
              |                                        |
              |-------------------+                    |
              |        |          |                    |
   +---------------+   | +---------------+             |
   | ParticipantA  |   | | ParticipantB  |             |
   |               |   | |               |             |
   +---------------+   | +---------------+             |
              |        |         |                     |
     sends    |        |         |  sends              |
              |        |         |                     |
   +---------------+   |   +---------------+           |
   |Media Stream A1|   |   |Media Stream B1|           |
   +---------------+   |   +---------------+           |
   |               |   |   |               |           |



Ravindranath, et al.    Expires December 22, 2011              [Page 14]

Internet-Draft           SIP Recording Metadata                June 2011


   |               |   |   | Media Stream  |           |
   | Media Stream  |---+---|  Ref          |           |
   | Ref           |       |               |           |
   +---------------+       +---------------+           |
                                                       |
                                                       |
                          +----------------------------|
                          |                            |
         +--------------------------------+            |
         |                                |            |
   +---------------+                +---------------+  |
   | Participant A |                | Participant C |  |
   |   (same)      |                |               |  |
   +---------------+                +---------------+  |
         |                                    |        |
         | sends (After transfer)             | sends  |
   +----------------+                +----------------+|
   | Media Stream A2|                | Media Stream C1||
   +----------------+                +----------------+|
   | Media StreamRef|                | Media StreamRef||
   |                |                |                ||
   |                |                |                ||
   +----------------+                +----------------+|
           |                                  |        |
           |                                  |        |
           |                                  |        |
           +-------------------------------------------+


5.4.  Conference Use Cases

   Depending on who act as SRC and the information that an SRC has there
   can be several ways to model conference use cases.  This section has
   instance diagrams for the following cases:

   o  A CS where one of the participant (which is also SRC) is a user in
      a conference
   o  A CS where one of the participant is focus ( which is also SRC)
   o  A CS where one of the participant is user and the SRC is a
      different entity like B2BUA
   o  A CS where one of the participant is focus and the SRC is a
      different entity like B2BUA

   NOTE: There MAY be other ways to model the same use cases depending
   on what information the SRC has.






Ravindranath, et al.    Expires December 22, 2011              [Page 15]

Internet-Draft           SIP Recording Metadata                June 2011


5.4.1.  Case 1:

   This is the usecase where there is a CS with one of the participant
   (who is also SRC) as a user in a conference.  For the sake of
   simplicity the receive lines for each of the participant is not
   shown.


   +---------------------------------------------------+
   |      Communication Session                        |
   | +-------------+              +--------------+     |
   | |             |              |              |     |
   | |Participant B|              | Participant A|     |
   | |  (User in   |--------------|              |     |
   | |  conf/SRC)  |              |              |     |
   | +-------------+              +--------------+     |
   |   |  |  |  |                                      |
   +---------------------------------------------------+
       |  |  |  |
       |  |  |  |
       D   E  F  G (Participants of Conference)


   Instance Diagram:

   +-------------------------------+
   | Recording Session (RS)        |--+
   +-------------------------------+  |
              |                       |
              |                       |
              |                       |
   +-------------------------------+  |
   |   Communication Session (CS)  |  |
   |      Group(CSG)               |  |
   +-------------------------------+  |
   |   Unique-id1                  |  |
   +-------------------------------+  |
              |                       |
              |-----------------------+
              |
     +----------------+
     | Communication  |
     | Session (CS)   |--+----------------+-----+
     +----------------+  |                |     |
     |                |  |                |     |
     +----------------+  |                |     |
              |          |                |     |
              |          |                |     |



Ravindranath, et al.    Expires December 22, 2011              [Page 16]

Internet-Draft           SIP Recording Metadata                June 2011


              |          |                |     |
   +---------------+     |                |     |
   | ParticipantA  |     |                |     |
   |               |     |                |     |
   +---------------+     |                |     |
              |          |                |     |
     sends    |          |                |     |
              |          |                |     |
   +---------------+     |                |     |
   |Media Stream A1|     |                |     |
   +---------------+     |                |     |
   |MediaStream Ref|-----|----------------+     |
   |               |     |                |     |
   +---------------+     |                |     |
                         |                |     |
                         |                |     |
           +-------------+                |     |
           |                              |     |
           |                              |     |
   +----------------+                     |     |
   | Participant B  |                     |     |
   |  (in conf)     |                     |     |
   +----------------+                     |     |
           |                              |     |
    sends  |                              |     |
           |                              |     |
   +----------------+                     |     |
   | Media Stream B1|---------------------+     |
   +----------------+        sends              |
   | MediaStream Ref|                           |
   |                |         +-----------------+
   +----------------+         |
              |               |
              |sends          |
              |               |
        +-----------------+-------------+------------+
        |                 |             |            |
        |                 |             |            |
   +------------+  +------------+ +------------+ +-------------+
   |participantD|  |ParticipantE| |ParticipantF| |Participant G|
   +------------+  +------------+ +------------+ +-------------+



   In this example we have two participants A and B who are part of a
   Communication Session(CS).  One of the participants B is part of a
   conference and also acts as SRC.There can be two cases here.  B can
   be a participant of the conference or B can be a focus.  In this



Ravindranath, et al.    Expires December 22, 2011              [Page 17]

Internet-Draft           SIP Recording Metadata                June 2011


   instance diagram Participant B is a user in a conference.  The SRC
   (Participant B) MAY subscribe to conference event package to get the
   details of other particiants.  Participant B(SRC) SHALL send the same
   through the metadata to SRS.  In this instance diagram the Media
   Stream(mixed stream) sent from Participant B SHALL have media streams
   contributed by conference participants (D,E,F and G).  For the sake
   of simplicity the "receives" line is not shown here.  In this example
   the media stream sent by each participant(A or B) of CS is received
   by all other participant(A or B).

5.4.2.  Case 2:

   This is the usecase where there is a CS where one of the participant
   is focus ( which is also SRC).



   +---------------------------------------------------+
   |      Communication Session                        |
   | +--------------+              +--------------+    |
   | |              |--------------|              |    |
   | |Participant C |              | Participant A|    |
   | |  (Focus in   |------+       |              |    |
   | | conf and SRC)|---+  |       +--------------+    |
   | +--------------+   |  |                           |
   |   |                |  +---------+                 |
   |   |                |            |                 |
   | +--------------+   |         +---------------+    |
   | | Participant B|   +---+     | Participant D |    |
   | |              |       |     |               |    |
   | +--------------+       |     +---------------+    |
   |                        |                          |
   |                   +--------------+                |
   |                   |Participant E |                |
   |                   |              |                |
   |                   +--------------+                |
   |                                                   |
   +---------------------------------------------------+

   Instance Diagram:

   +-------------------------------+
   | Recording Session (RS)        |
   +-------------------------------+
              |-------------------------+
              |                         |
              |                         |
   +-------------------------------+    |



Ravindranath, et al.    Expires December 22, 2011              [Page 18]

Internet-Draft           SIP Recording Metadata                June 2011


   |   Communication Session (CS)  |    |
   |      Group(CSG)               |    |
   +-------------------------------+    |
   |   Unique-id1                  |    |
   +-------------------------------+    |
              |                         |
              |-------------------------+
              |
     +----------------+
     | Communication  |
     | Session (CS)   |----------------------+
     +----------------+                      |
     |                |                      |
     +----------------+                      |
              |                              |
              |-------------------+          |
              |        |          |          |
   +---------------+   | +---------------+   |
   | ParticipantA  |   | | ParticipantB  |   |
   |               |   | |               |   |
   +---------------+   | +---------------+   |
              |        |         |           |
     sends    |        |         |  sends    |
              |        |         |           |
   +---------------+   |   +---------------+ |
   |Media Stream A1|   |   |Media Stream B1| |
   +---------------+   |   +---------------+ |
   |MediaStream Ref|   |   |MediaStream Ref| |
   |               |---+---|               | |
   +---------------+       +---------------+ |
                                             |
          +----------------------------------+
          |            |         |           |
          |            |         |           |
   +---------------+   | +---------------+   |
   | ParticipantD  |   | | ParticipantE  |   |
   |               |   | |               |   |
   +---------------+   | +---------------+   |
              |        |         |           |
     sends    |        |         |  sends    |
              |        |         |           |
   +---------------+   |   +---------------+ |
   |Media Stream D1|   |   |Media Stream E1| |
   +---------------+   |   +---------------+ |
   |MediaStream Ref|   |   |MediaStream Ref| |
   |               |---+---|               | |
   +---------------+       +---------------+ |
                                             |



Ravindranath, et al.    Expires December 22, 2011              [Page 19]

Internet-Draft           SIP Recording Metadata                June 2011


                                             |
                                  +----------+
                +-----------------|
                |                 |
                |                 |
               +----------------+ |
               | Participant C  | |
               |  (focus +src)  | |
               +----------------+ |
                       |          |
                Sends  |  +-------+
                       |  |
   "sends" OR          |  |
   contributed +----------------+
    by         | Media Stream C1|
   Participants+----------------+  "receives" by participants A,B,D,E
   A,B,D,E     | MediaStream Ref|------------------------------------
   ------------| Codec Params   |
               +----------------+



   In this example we have two participants A and B who are part of a
   Communication Session(CS).  One of the participants (C) is focus of a
   conference and also acts as SRC.  The SRC (Participant C) being the
   Focus of the conference SHALL have access to the details of other
   particiants.  SRC (Participant C) SHALL send the same through the
   metadata to SRS.  In this instance diagram the Media Stream(mixed
   stream) sent by C SHALL have media streams contributed by conference
   participants (A, B, D and E).  Participants A, B,D and E SHALL send
   Media Streams A1, B1, D1 and E1 respectively.  The media stream sent
   by Participant C(Focus) shall be received by all other participants
   of CS.  For the sake of simplicity the "receives" line is not shown
   linked to all other participants.

   NOTE: SRC ( Participant C) MAY send mixed stream or seperate streams
   to SRS

5.4.3.  Case 3:

   A CS where one of the participant is user and the SRC is a different
   entity like B2BUA.  In this case the SRC MAY not know that one of the
   user is part of conference.  Hence the instance diagram will not have
   information about the conference participants.







Ravindranath, et al.    Expires December 22, 2011              [Page 20]

Internet-Draft           SIP Recording Metadata                June 2011


   +---------------------------------------------------+
   |      Communication Session                        |
   | +-------------+  +------+    +--------------+     |
   | |             |  | (SRC)|    |              |     |
   | |Participant B|--|B2BUA |----| Participant A|     |
   | |  (User in   |  +------+    |              |     |
   | |  conf)      |              |              |     |
   | +-------------+              +--------------+     |
   |   |  |  |  |                                      |
   +---------------------------------------------------+
       |  |  |  |
       |  |  |  |
       D   E  F  G (Participants of Conference)


5.4.4.  Case 4:

   A CS where one of the participant is focus and the SRC is a different
   entity like B2BUA.  In this case the participant which is focus MAY
   send "isfocus" in SIP message to SRC.  The SRC MAY subscribe to
   conference event package on seeing this "isfocus".  SRC SHALL learn
   the details of other participants of conference from the conference
   package and send the same in metadata to SRS.  The instance diagram
   for this use case SHALL be same as Case 1.


              +--------------------------------+
              |   Conference Event Package     |
              |                                |
              +--------------------------------+
                         |
                         | subscribes
                         |
   +---------------------|-----------------------------+
   |      Communication  |Session                      |
   | +-------------+  +------+    +--------------+     |
   | |             |  | (SRC)|    |              |     |
   | |Participant B|--|B2BUA |----| Participant A|     |
   | |  (FOCUS in  |  +------+    |              |     |
   | |  conf)      |              |              |     |
   | +-------------+              +--------------+     |
   |   |  |  |  |                                      |
   +---------------------------------------------------+
       |  |  |  |
       |  |  |  |
       D   E  F  G (Participants of Conference)





Ravindranath, et al.    Expires December 22, 2011              [Page 21]

Internet-Draft           SIP Recording Metadata                June 2011


6.  Security Considerations

   The metadata information sent from SRC to SRS MAY reveal sensitive
   Information about different participants of CS.  For this reason, it
   is RECOMMENDED that a SRC use a strong means for authentication and
   metadata information protection and that it apply comprehensive
   authorization rules when using the metadata model defined in this
   document.  The security considerations for this SHALL be defined in
   the solution document.


7.  IANA Considerations

   Not Applicable


8.  Acknowledgement

   We wish to thank John Elwell, Henry Lum, Leon Portman, De Villers,
   Andrew Hutton, Deepanshu Gautam, Charles Eckel, Muthu Arul for their
   valuable comments.


9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

9.2.  Informative References

   [I-D.ietf-siprec-req]
              Rehor, K., Portman, L., Hutton, A., and R. Jain, "Use
              Cases and Requirements for SIP-based Media Recording
              (SIPREC)", draft-ietf-siprec-req-12 (work in progress),
              June 2011.

   [I-D.ietf-siprec-architecture]
              Hutton, A., Portman, L., Jain, R., and K. Rehor, "An
              Architecture for Media Recording using the Session
              Initiation Protocol", draft-ietf-siprec-architecture-02
              (work in progress), April 2011.








Ravindranath, et al.    Expires December 22, 2011              [Page 22]

Internet-Draft           SIP Recording Metadata                June 2011


Authors' Addresses

   Ram Mohan Ravindranath
   Cisco Systems, Inc.
   Cessna Business Park,
   Kadabeesanahalli Village, Varthur Hobli,
   Sarjapur-Marathahalli Outer Ring Road
   Bangalore, Karnataka  560103
   India

   Email: rmohanr@cisco.com


   Parthasarathi Ravindran
   Cisco Systems, Inc.
   Cessna Business Park,
   Kadabeesanahalli Village, Varthur Hobli,
   Sarjapur-Marathahalli Outer Ring Road
   Bangalore, Karnataka  560103
   India

   Email: partr@cisco.com


   Paul Kyzivat
   Cisco Systems, Inc.
   1414 Massachusetts Avenue
   Boxborough, MA  01719
   USA

   Email: pkyzivat@cisco.com




















Ravindranath, et al.    Expires December 22, 2011              [Page 23]

