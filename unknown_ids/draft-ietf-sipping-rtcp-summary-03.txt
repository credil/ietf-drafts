SIPPING Working Group                                      A. Pendleton   
Internet Draft                                                   Nortel   
                                                               A. Clark   
                                                              Telchemy  
                                                           A. Johnston          
                                                                 Avaya 
                                                          H. Sinnreich 
                                                                 Adobe 
Intended status: Informational                            July 12, 2008 
Expires: January 2008 
                                    
 
                                      
      Session Initiation Protocol Package for Voice Quality Reporting 
                                   Event  


                    draft-ietf-sipping-rtcp-summary-03 


Status of this Memo 

   By submitting this Internet-Draft, each author represents that       
   any applicable patent or other IPR claims of which he or she is       
   aware have been or will be disclosed, and any of which he or she       
   becomes aware will be disclosed, in accordance with Section 6 of       
   BCP 79. 

   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet-
   Drafts. 

   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 

   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt 

   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html 

   This Internet-Draft will expire on January 2009. 

Copyright Notice 

 
 
 
Pendleton               Expires January, 2009                  [Page 1] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

   Copyright (C) The IETF Trust (2008). 

Abstract 

   This document defines a SIP event package that enables the collection 
   and reporting of metrics that measure the quality for Voice over    
   Internet Protocol (VoIP) sessions. 

Table of Contents 

   1. Introduction...................................................3 
      1.1. Usage Scenarios...........................................3 
   2. Terminology....................................................5 
   3. SIP Events for Voice over IP Performance Reporting.............5 
      3.1. SUBSCRIBE/NOTIFY method...................................5 
      3.2. PUBLISH method............................................6 
      3.3. Multi-Party and Multi-Segment Calls.......................6 
      3.4. Overload Avoidance........................................6 
   4. Event Package Formal Definition................................7 
      4.1. Event Package Name........................................7 
      4.2. Event Package Parameters..................................7 
      4.3. SUBSCRIBE Bodies..........................................7 
      4.4. Subscription Duration.....................................7 
      4.5. NOTIFY and PUBLISH Bodies.................................7 
      4.6. Voice Quality Event Syntax and Semantics..................8 
         4.6.1. ABNF Syntax Definition...............................8 
         4.6.2. Parameter Definitions and Mappings..................23 
      4.7. Message Flow and Syntax Examples.........................31 
         4.7.1. End of Session Report using NOTIFY..................31 
         4.7.2. Mid Session Threshold Violation using NOTIFY........35 
         4.7.3. End of Session Report using PUBLISH.................40 
         4.7.4. Alert Report using PUBLISH..........................44 
      4.8. Configuration Dataset for vq-rtcpxr Events...............47 
   5. IANA Considerations...........................................49 
      5.1. SIP Event Package Registration...........................50 
      5.2. application/vq-rtcp-xr MIME Registration.................50 
   6. Security Considerations.......................................51 
   7. Contributors..................................................51 
   8. Normative References..........................................51 
   Author's Addresses...............................................52 
   Intellectual Property Statement..................................53 
   Disclaimer of Validity...........................................53 
    
    



 
 
Pendleton                Expires January 2009                  [Page 2] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

1. Introduction 

   Real time communications over IP networks use SIP for signaling with 
   RTP/RTCP for media transport and reporting respectively. These 
   protocols are very flexible and can support an extremely wide 
   spectrum of usage scenarios. For this reason, extensions to these 
   protocols must be specified in the context of a specific usage 
   scenario. In this memo, extensions to SIP are proposed to support the 
   reporting of RTCP XR VoIP metrics (RFC3611).  

1.1. Usage Scenarios 

   The usage scenarios addressed in this memo are situations where a SIP 
   user agent can easily report the voice quality since it communicates 
   with a small number of other endpoints: 

   1. Point-to-point VoIP conversations. These can include small 
      telephony type multiparty scenarios, such as when using call 
      transfer. 

   2. Conference calls using a central conferencing server when each 
      SIP can report on the quality of their leg to the central 
      conferencing server. 

   3. Multicast VoIP calls using source specific multicast (SSM). This 
      is somewhat similar to the central conferencing scenario. 

   Distributed conferences with audio mixing in the endpoints may 
   require reporting on too many call legs and may be therefore less 
   practical if there are more than 3-4 participants. 

   The usage scenarios 1, 2, and 3 provide voice quality reports that 
   are most closely related to the user experience, since the reporting 
   application resides in the endpoints, such as in SIP UAs (UA). Many 
   SIP UAs however may have limitations as to the footprint of the 
   software and as a result frugal reporting capabilities are 
   preferable. 

   RTCP reports are usually sent to other participating endpoints in a 
   session which can make collection of performance information by 
   administration or management systems more complex. In the usage 
   scenarios addressed in this memo, the data contained in RTCP XR VoIP 
   metrics reports (RFC3611) are forwarded to central collection server 
   systems using SIP. 

   Applications residing in the server or elsewhere can aid in network 
   management to alleviate bandwidth constraints and also to support 
 
 
Pendleton                Expires January 2009                  [Page 3] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

   customer service by identifying and acknowledging calls of poor 
   quality. Specifying such applications are however beyond the scope of 
   this paper. 

   Keeping it Simple 

   There are a large portfolio of quality parameters that can be 
   associated with VoIP, but only a minimal necessary number of 
   parameters are included on the RTCP-XR reports: 

       1. The codec type, as resulting from the SDP offer-answer 
          negotiation in SIP, 

       2. The burst gap loss density and max gap duration, since voice 
          cut-outs are the most annoying quality impairment in VoIP, 

       3. Round trip delay because it is critical to conversational 
          quality, 

       4. Conversational quality as a catch-all for other voice quality 
          impairments, such as random distributed packet loss, jitter, 
          annoying silent suppression effects, etc. 
       
   In specific usage scenarios where other parameters are required, 
   designers can include other parameters beyond the scope of this 
   paper. 

   RTCP reports are best effort only, and though very useful have a 
   number of limitations as discussed in [4]. This must be considered 
   when using RTCP reports in managed networks.  

   This document defines a new SIP event package, vq-rtcpxr, and a new    
   MIME type, application/vq-rtcpxr, that enable the collection and    
   reporting of metrics that measure quality for RTP [3] sessions. The    
   definitions of the metrics used in the event package are based on    
   RTCP Extended Reports [4] and RTCP [3]; a mapping between the SIP    
   event parameters and the parameters within the forementioned RFC's    
   is defined within this document in section 4.6.2.     

   Monitoring of voice quality is believed to be the highest priority    
   for usage of this mechanism and as such, the metrics in the event    
   package are largely tailored for voice quality measurements. The    
   event package is designed to be extensible. However the negotiation 
   of such extensions is not defined in this document. 

       

 
 
Pendleton                Expires January 2009                  [Page 4] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

   The event package supports reporting both the voice quality metrics 
   for both inbound and outbound directions.  Voice quality metrics for 
   the inbound direction can generally be computed locally by the 
   reporting endpoint however voice quality metrics for the outbound 
   direction are computed by the remote endpoint and sent to the 
   reporting endpoint using the RTCP Extended Reports [4]. 

   Configuration of usage of the event package is not covered in this    
   document. It is the recommendation of this document that the SIP    
   configuration framework [8] be used.  The authors have defined a 
   configuration dataset that would facilitate this support in section 
   5.8.  

   The event package SHOULD be used with the SUBSCRIBE/NOTIFY method 
   however MAY be used with the PUBLISH method for backward 
   compatibility with some existing implementations. Message flow 
   examples for both methods are provided in this document. 

2. Terminology 

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL       
   NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and      
   "OPTIONAL" in this document are to be interpreted as described in       
   RFC 2119 [1]. 

 
3. SIP Events for Voice over IP Performance Reporting 

      This document defines a SIP events package [5] for Voice over IP 
   performance reporting. A SIP UA can send these events to an entity 
   which can make the information available to other applications. For 
   purposes of illustration, the entities involved in SIP vq-rtcpxr 
   event reporting will be referred to as follows: 

   o REPORTER is an entity involved in the measurement and reporting    
     of media quality i.e. the SIP UA involved in a media session. 

   o COLLECTOR is an entity that receives SIP vq-rtcpxr events. A   
     COLLECTOR may be a proxy server or another entity that is capable    
     of supporting SIP vq-rtcpxr events. 

3.1. SUBSCRIBE/NOTIFY method 

   The REPORTER SHOULD send the voice quality metric reports using the    
   NOTIFY method.  The COLLECTOR SHALL send a SUBSCRIBE to the REPORTER 
   to explicitly establish the relationship. Configuration of an Address 
   of Resource (AOR) of the COLLECTOR is not needed. 
 
 
Pendleton                Expires January 2009                  [Page 5] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

   The REPORTER MUST NOT send any vq-rtcpxr events if a COLLECTOR AOR 
   has not been configured.            

   The REPORTER SHALL populate the Request-URI of the NOTIFY method    
   with the address of the resource (AOR) of the COLLECTOR.  

   The COLLECTOR MAY send a SUBSCRIBE to a SIP Proxy acting on behalf 
   ofthe reporting SIP UA's. 

3.2. PUBLISH method 

   A SIP UA that supports this specification MAY also send the service    
   quality metric reports using the PUBLISH method, however this 
   approach SHOULD NOT be used in unmanaged Internet services. The 
   Publish method MAY be supported for backward compatibility with 
   existing implementations. 

   The REPORTER MAY therefore populate the Request-URI of the PUBLISH 
   method with the AOR of the COLLECTOR. To ensure security of SIP 
   proxies and the COLLECTOR, the REPORTER must be configured with the 
   AOR of the COLLECTOR, preferably using the SIP UA configuration 
   framework [8], as described in section 5.8. 

   It is recommended that the REPORTER send an OPTIONS message to the    
   COLLECTOR to ensure support of the PUBLISH message. 

3.3. Multi-Party and Multi-Segment Calls 

   A voice quality metric report may be sent for each session 
   terminating at the REPORTER and may contain multiple report bodies. 
   For a multi-party call the report MAY contain report bodies for the 
   session between the reporting endpoint and each remote endpoint for    
   which there was an RTP session during the call. 

   Supplementary services such as call hold and call transfer can result 
   in the user participating in a series of concatenated sessions, 
   potentially with different choices of codec or sample rate, although    
   these may be perceived by the user as a single call.  A REPORTER MAY 
   send a voice quality metric report at the end of each session or MAY 
   send a single voice quality metric report containing a report body 
   for each segment of the call. 

3.4. Overload Avoidance 

   To avoid overload of SIP Proxies or COLLECTORS it is important to do   
   capacity planning and to minimize the number of reports that are 
   sent. 
 
 
Pendleton                Expires January 2009                  [Page 6] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      Approaches to avoiding overload include:  

      a. Send only one report at the end of each call 

      b. Use interval reports only on "problem" calls that are being 
        closely monitored 

   Limit the number of alerts that can be sent to a maximum of one per 
   call 

   Additionally, it is recommended that COLLECTORS that receive these    
   reports use the 503 ''Service Unavailable'' error response code to 
   limit unwanted reports and include the Retry-after header with an 
   appropriate time delay, depending on the needs of the COLLECTOR.      

4. Event Package Formal Definition 

4.1. Event Package Name 

   This document defines a SIP Event Package as defined in RFC 3265 [5]. 

4.2. Event Package Parameters 

   No event package parameters are defined. 

4.3. SUBSCRIBE Bodies 

   No SUBSCRIBE bodies are described by this specification. 

4.4. Subscription Duration 

   Subscriptions to this event package MAY range from minutes to weeks.    
   Subscriptions in hours or days are more typical and are RECOMMENDED. 
   The default subscription duration for this event package is one hour. 

4.5. NOTIFY and PUBLISH Bodies 

   There are three notify bodies: a session report, an interval session    
   report, and a alert report. 

   The session report is used for end of session reporting. This can be    
   generated when a voice media session terminates or when a media    
   change occurs, such as a codec change or a session forks. This report 
   is intended to allow cumulative metric reporting. The session reports 
   will populate the metrics with values that are measured over the 
   interval explicitly defined by the "start" and "stop" timestamps. 

 
 
Pendleton                Expires January 2009                  [Page 7] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

   The interval report is used for periodic or interval reporting. This    
   report is intended to capture short duration metric reporting.    
   Interval reports will populate the metrics with values that are    
   measured over the interval explicitly defined by the "start" and    
   "stop" timestamps. 

   The alert report is used when voice quality degrades during a 
   session.  The session report parameters are also included in the 
   alert report to provide all of the necessary diagnostic information. 
   Like the interval report, the metrics in the alert reports will be 
   populated with values that are measured over the interval explicitly 
   defined by the "start" and "stop" timestamps. 

   This specification defines a new MIME type application/vq-rtcpxr    
   which is a text encoding of the RTCP and RTCP-XR statistics, along    
   with some additional metrics and correlation information. 

4.6. Voice Quality Event Syntax and Semantics    

   This section describes the syntax extensions required for event   
   publication in SIP. The formal syntax definitions described in this 
   section are expressed in the Augmented BNF [6] format used in SIP 
   [2], and contains references to elements defined therein.  
   Additionally, the definition of the timestamp format is provided in 
   [7]. Note that most of the parameters are optional. In practice, most 
   implementations will send a subset of the parameters. It is not the    
   intention of this document to define what parameters may or may not    
   be useful for monitoring the quality of a voice session, but to    
   enable reporting of voice quality.  As such, the syntax allows the    
   implementer to choose which metrics are most appropriate for their    
   solution.  As there are no "invalid", "unknown", or "not applicable"    
   values in the syntax, the intention is to exclude any parameters for    
   which values are not available, not applicable, or unknown. 

   Additionally, the authors recognize that implementers may need to add 
   new parameter lines to the reports and new metrics to the existing 
   parameter lines. The extension tokens are intended to fulfill this 
   need. 

4.6.1.  ABNF Syntax Definition 

      VQReportEvent  =  AlertReport /  SessionReport / IntervalReport 

       

       

 
 
Pendleton                Expires January 2009                  [Page 8] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      SessionReport = "VQSessionReport" CRLF 

                  LocalMetrics [CRLF RemoteMetrics] 

                  [DialogID] 

      IntervalReport = "VQIntervalReport" CRLF 

                  LocalMetrics [CRLF RemoteMetrics] 

                  [DialogID]  

      LocalMetrics  = "LocalMetrics" COLON CRLF Metrics 

      RemoteMetrics = "RemoteMetrics" COLON CRLF Metrics   

      AlertReport   = "VQAlertReport" COLON 

            MetricType WSP Severity WSP Direction CRLF 

            "Metrics:" CRLF 

            Metrics 

            [CRLF "RemoteMetrics:" CRLF Metrics] 

            [DialogID]    

      Metrics = TimeStamps CRLF 

         [SessionDescription CRLF] 

         CallID CRLF 

         FromID CRLF 

         ToID CRLF 

         LocalAddr CRLF 

         RemoteAddr CRLF 

         [JitterBuffer CRLF] 

         [PacketLoss CRLF] 

         [BurstGapLoss CRLF] 
 
 
Pendleton                Expires January 2009                  [Page 9] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

         [Delay CRLF] 

         [Signal CRLF] 

         [QualityEstimates CRLF] 

         *(Extension CRLF)  

      ; Timestamps are provided in Coordinated Universal Time (UTC) 

      ; using the ABNF format provided in RFC3339, 

      ;  "Date and Time on the Internet: Timestamps" 

      ; These timestamps should reflect, as closely as 

      ; possible, the actual time during which the media session 

      ; was running to enable correlation to events occurring 

      ; in the network infrastructure and to accounting or billing 

      ; records 

      TimeStamps = "Timestamps" COLON StartTime WSP StopTime 

      StartTime  = "START" EQUAL date-time 

      StopTime   = "STOP" EQUAL date-time       

      ; SessionDescription provides a shortened version of the 

      ; session SDP but contains only the relevant parameters for 

      ; session quality reporting purposes 

      SessionDescription  = "SessionDesc" COLON 

         [PayloadType WSP] 

         [PayloadDesc WSP] 

         [SampleRate WSP] 

         [FrameDuration WSP] 

         [FrameOctets WSP] 
 
 
Pendleton                Expires January 2009                 [Page 10] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

         [FramesPerPacket WSP] 

         [PacketsPerSecond WSP] 

         [FmtpOptions WSP] 

         [PacketLossConcealment WSP] 

         [SilenceSuppressionState] 

         *(WSP Extension) 

      ; PayloadType provides the PT parameter used in the RTP packets 

      ; i.e. the codec used for decoding received RTP packets 

      ; It is recommended that IANA registered values are used 

      ; where possible. 

      PayloadType  = "PT" EQUAL (1*3DIGIT)  

      ; PayloadDesc provides a text description of the codec 

      ; It is recommended that the abbreviated Standard name for 

      ; the codec is used (for example "G.729A") 

      PayloadDesc  = "PD" EQUAL (word / DQUOTE word-plus DQUOTE) 

      ; SampleRate provides the rate at which voice was sampled 

      ; in the case of narrowband codecs, the value will typically be 
   8000. 

      ; For codecs that are able to change sample rates the lowest and 

      ; highest sample rates shall be reported (e.g. 8000;16000). 

      SampleRate = "SR" EQUAL (1*5DIGIT) *(SEMI (1*5DIGIT)) 

      ; FrameDuration can be combined with the FramesPerPacket to 
   determine 

      ; the packetization rate; the units for this are milliseconds. 

      FrameDuration = "FD" EQUAL (1*3DIGIT) 
 
 
Pendleton                Expires January 2009                 [Page 11] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      ; FrameOctets provides the number of octets in each frame 

      ; Used where FrameDuration is not available 

      FrameOctets  = "FO" EQUAL (1*4DIGIT) 

      ; FramesPerPacket provides the number of frames in each RTP packet 

      FramesPerPacket = "FPP" EQUAL (1*2DIGIT) 

      ; Packets per second provides the number of packets, including one 
   or 

      ; more frames within each, that are transmitted per second 

      PacketsPerSecond = "PPS" EQUAL (1*5DIGIT)   

      ; FMTP options from SDP.  Note that the parameter is deliniated 

      ; by " " to avoid parsing issues in transitioning between SDP and 

      ; SIP parsing 

      FmtpOptions = "FMTP" EQUAL DQUOTE word-plus DQUOTE 

      ; PacketLossConcealment indicates whether a PLC algorithm was 

      ; or is being used for the session.  The values follow the same 

      ; numbering convention as RFC 3611.  For more details, 

      ; please refer to RFC 3611, RTCP XR 

      ; 0 - unspecified 

      ; 1 - disabled 

      ; 2 - enhanced 

      ; 3 - standard 

      PacketLossConcealment  = "PLC" EQUAL ("0" / "1" / "2" / "3") 

      ; SilenceSuppressionState indicates whether silence suppression, 

      ; also known as Voice Activity Detection (VAD) is enabled. 

 
 
Pendleton                Expires January 2009                 [Page 12] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      SilenceSuppressionState  = "SSUP" EQUAL ("on" / "off")   

      ; CallId provides the call id from the SIP header 

      CallID  =  "CallID" COLON Call-ID-Parm 

      ; FromID provides the identification of the reporting endpoint 

      ; of the media session [2]. 

      FromID = "FromID" COLON from-spec 

      ; ToID provides the identification of the remote endpoint 

      ; of the media session [2]. 

      ToID = "ToID" COLON (name-addr/addr-spec)     

      ; LocalAddr provides the IP address, port and ssrc for the 

      ; session from the perspective of the endpoint/UA which is 

      ; generating the metrics. 

      LocalAddr   = "LocalAddr" COLON IPAddress WSP Port WSP Ssrc 

      ; RemoteAddr provides the IP address, port and ssrc for the 

      ; session from the perspective of the peer of the endpoint/UA 

      ; that is generating the metrics. 

      RemoteAddr  = "RemoteAddr" COLON IPAddress WSP Port WSP Ssrc 

      ; For clarification, the LocalAddr in the LocalMetrics report 

      ; would be the RemoteAddr in the RemoteMetrics report. 

      IPAddress   = "IP" EQUAL IPv6address / IPv4address 

      Port        = "PORT" EQUAL 1*DIGIT 

      Ssrc        = "SSRC" EQUAL ( ''0x'' 1*8HEXDIG) 

      JitterBuffer = "JitterBuffer" COLON 

         [JitterBufferAdaptive WSP] 
 
 
Pendleton                Expires January 2009                 [Page 13] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

         [JitterBufferRate WSP] 

         [JitterBufferNominal WSP] 

         [JitterBufferMax WSP] 

         [JitterBufferAbsMax] 

         *(WSP Extension)   

      ; JitterBufferAdaptive indicates whether the jitter buffer in the 

      ; endpoint is adaptive, static, or unknown. 

      ; The values follow the same numbering convention as RFC 3611. 

      ; For more details, please refer to that document. 

      ; 0 - unknown 

      ; 1 - reserved 

      ; 2 - non-adaptive 

      ; 3 - adaptive 

      JitterBufferAdaptive  = "JBA" EQUAL ("0" / "1" / "2" / "3") 

      ; JitterBuffer metric definitions are provided in RTCP XR, RFC 
   3611 

      JitterBufferRate      = "JBR" EQUAL (1*2DIGIT) ;0-15 

      JitterBufferNominal   = "JBN" EQUAL (1*5DIGIT) ;0-65535 

      JitterBufferMax       = "JBM" EQUAL (1*5DIGIT) ;0-65535 

      JitterBufferAbsMax    = "JBX" EQUAL (1*5DIGIT) ;0-65535 

      ; PacketLoss metric definitions are provided in RTCP XR, RFC 3611 

      PacketLoss = "PacketLoss" COLON 

                 [NetworkPacketLossRate WSP] 

                 [JitterBufferDiscardRate] 

 
 
Pendleton                Expires January 2009                 [Page 14] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

                 *(WSP Extension) 

      NetworkPacketLossRate = 

        "NLR" EQUAL (1*3DIGIT ["." 1*2DIGIT]) ;percentage 

      JitterBufferDiscardRate = 

        "JDR" EQUAL (1*3DIGIT ["." 1*2DIGIT]) ;percentage    

      ; BurstGapLoss metric definitions are provided in RTCP XR, RFC 
   3611 

      BurstGapLoss = "BurstGapLoss" COLON 

         [BurstLossDensity WSP] 

         [BurstDuration WSP] 

         [GapLossDensity WSP] 

         [GapDuration WSP] 

         [MinimumGapThreshold] 

         *(WSP Extension)    

      BurstLossDensity = 

       "BLD" EQUAL (1*3DIGIT ["." 1*2DIGIT]) ;percentage     

      BurstDuration = 

       "BD" EQUAL (1*7DIGIT) ;0-3,600,000 -- milliseconds  

      GapLossDensity = 

       "GLD" EQUAL (1*3DIGIT ["." 1*2DIGIT]) ;percentage  

      GapDuration = 

       "GD" EQUAL (1*7DIGIT) ;0-3,600,000 -- milliseconds  

      MinimumGapThreshold = 

       "GMIN" EQUAL (1*3DIGIT) ;1-255    

 
 
Pendleton                Expires January 2009                 [Page 15] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      Delay = "Delay" COLON 

         [RoundTripDelay WSP] 

         [EndSystemDelay WSP] 

         [OneWayDelay WSP] 

         [SymmOneWayDelay WSP] 

         [InterarrivalJitter WSP] 

         [MeanAbsoluteJitter] 

         *(WSP Extension) 

      ; RoundTripDelay is recommended to be measured as defined in 

      ; RTCP, RFC 3550. 

      RoundTripDelay = "RTD" EQUAL (1*5DIGIT) ;0-65535  

      ; EndSystemDelay metric is defined in RTCP XR, RFC 3611 

      EndSystemDelay = "ESD" EQUAL (1*5DIGIT) ;0-65535    

      ; OneWayDelay is defined in RFC2679 

      OneWayDelay = "OWD" EQUAL (1*5DIGIT) ;0-65535 

      ; SymmOneWayDelay is defined as half the sum of RoundTripDelay 

      ; and the EndSystemDelay values for both endpoints. 

      SymmOneWayDelay = ''SOWD'' EQUAL (1*5DIGIT); 0-65535    

      ; Interarrival Jitter is measured as defined RFC 3550 

      InterarrivalJitter = "IAJ" EQUAL (1*5DIGIT) ;0-65535    

      ; Mean Absolute Jitter is measured as defined 

      ; by ITU-T G.1020 where it is known as MAPDV 

      MeanAbsoluteJitter = "MAJ" EQUAL (1*5DIGIT);0-65535 

    
 
 
Pendleton                Expires January 2009                 [Page 16] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      ; Signal metrics definitions are provided in RTCP XR, RFC 3611 

      Signal = "Signal" COLON 

         [SignalLevel WSP] 

         [NoiseLevel WSP] 

         [ResidualEchoReturnLoss] 

         *(WSP Extension)   

      ; SignalLevel will normally be a negative value 

      ; the absence of the negative sign indicates a positive value 

      ; where the signal level is negative, the sign must be included. 

      ; This metric applies to the speech signal decoded from the 

      ; received packet stream. 

      SignalLevel = "SL" EQUAL (["-"] 1*2DIGIT)    

      ; NoiseLevel will normally be negative but to align with the 

      ; the encoding of SignalLevel, the sign must be explicitly 
   included. 

      ; The absence of a sign indicates a positive value 

      ; This metric applies to the speech signal decoded from the 

      ; received packet stream. 

      NoiseLevel  = "NL" EQUAL (["-"] 1*2DIGIT)    

      ; Residual Echo Return Loss (RERL) the ratio between  

      ; the original signal and the echo level as measured after  

      ; echo cancellation or suppression has been applied. 

      ; Expressed in decibels (dB). This is positive value, echo 

      ; return loss levels less than or equal to 0 dB shall be indicated 
   as 0 dB. 
 
 
Pendleton                Expires January 2009                 [Page 17] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      ; This metric relates to the proportion of the speech signal 

      ; decoded from the received packet stream that is reflected 

      ; back in the encoded speech signal output in the transmitted 

      ; packet stream. 

      ResidualEchoReturnLoss = "RERL" EQUAL (1*3DIGIT) 

      ; Voice Quality estimation metrics 

      ; The definition of these metrics are provided in RTCP XR and 

      ; the new High Resolution proposal, RTCP HR.    

      ; Each quality estmiate has an optional associated algorithm. 

      ; These fields permit the implementation to use a variety 

      ; of different calculation methods for each type of metric 

      QualityEstimates  = "QualityEst" COLON 

         [ListeningQualityR WSP] 

         [RLQEstAlg WSP] 

         [ConversationalQualityR WSP] 

         [RCQEstAlg WSP] 

         [ExternalR-In WSP] 

         [ExtRInEstAlg WSP] 

         [ExternalR-Out WSP] 

         [ExtROutEstAlg WSP] 

         [MOS-LQ WSP] 

         [MOSLQEstAlg WSP] 

         [MOS-CQ WSP] 

         [MOSCQEstAlg WSP] 
 
 
Pendleton                Expires January 2009                 [Page 18] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

         [QoEEstAlg] 

         *(WSP Extension) 

      ListeningQualityR = "RLQ" EQUAL (1*3DIGIT) ; 0 - 120 

      RLQEstAlg = "RLQEstAlg" EQUAL word ; "P.564", or other 

      ConversationalQualityR = "RCQ" EQUAL (1*3DIGIT) ; 0 - 120  

      RCQEstAlg = "RCQEstAlg" EQUAL word ; "P.564", or other   

      ; ExternalR-In is measured by the local endpoint for incoming 

      ; connection on "other" side of this endpoint 

      ;   e.g. PhoneA <---> Bridge <----> Phone B 

      ;   ListeningQualityR = quality for PhoneA ----> Bridge path 

      ;   ExternalR-In = quality for Bridge <---- PhoneB path   

      ExternalR-In = "EXTRI" EQUAL (1*3DIGIT) ; 0 - 120   

      ExtRInEstAlg = "ExtRIEstAlg" EQUAL word ; "P.564" or other  

      ; ExternalR-Out is copied from RTCP XR message received from the 

      ; remote endpoint on "other" side of this endpoint 

      ;   e.g. PhoneA <---> Bridge <----> Phone B 

      ;   ExternalR-Out = quality for Bridge -----> PhoneB path  

      ExternalR-Out = "EXTRO" EQUAL (1*3DIGIT) ; 0 - 120  

      ExtROutEstAlg = "ExtROEstAlg" EQUAL word ; "P.564" or other    

      MOS-LQ = "MOSLQ" EQUAL (DIGIT ["." 1*3DIGIT]) ; 0.0 - 4.9  

      MOSLQEstAlg = "MOSLQEstAlg" EQUAL word ; "P.564" or other 

      MOS-CQ = "MOSCQ" EQUAL (DIGIT ["." 1*3DIGIT])  ; 0.0 - 4.9 

      MOSCQEstAlg = "MOSCQEstAlg" EQUAL word ; "P.564" or other 

     
 
 
Pendleton                Expires January 2009                 [Page 19] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      ; alternative to the separate estimation algorithms 

      ; for use when the same algorithm is used for all measurements 

      QoEEstAlg = "QoEEstAlg" EQUAL word; "P.564" or other 

      ; DialogID provides the identification of the dialog with 

      ; which the media session is related.  This value is taken 

      ; from the SIP header. 

      DialogID  = "DialogID" COLON Call-ID-Parm *(SEMI did-parm) 

      did-parm  = to-tag / from-tag / word 

      to-tag    = "to-tag" EQUAL token 

      from-tag  = "from-tag" EQUAL token 

      ; MetricType provides the metric on which a notification of 

      ; threshold violation was based.  The more commonly used metrics 

      ; for alerting purposes are included here explicitly and the 

      ; token parameter allows for extension 

      MetricType = "Type" EQUAL "RLQ" / "RCQ" / "EXTR" / 

         "MOSLQ" / "MOSCQ" / 

         "BD" / "NLR" / "JDR" / 

         "RTD" / "ESD" / "IAJ" / 

         "RERL" / ''SL'' / ''NL / Extension 

      Direction = "Dir" EQUAL "local" / "remote" 

      Severity  = "Severity" EQUAL "Warning" / "Critical" / 

         "Clear" 

      Call-ID-Parm =  word [ "@" word ] 

    
 
 
Pendleton                Expires January 2009                 [Page 20] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      ; miscellaneous needs for ABNF 

      ; some of these are pulled out of RFC2234 or RFC3261 

      ; where this is the case, it is noted. 

      ; taken from RFC2234 

      CRLF =  %x0D.0A 

      DIGIT =  %x30-39 

      WSP   =  SP / HTAB ; white space 

      SP    =  " " 

      HTAB  =  %x09 ; horizontal tab 

      HEXDIG =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F" /  

                   "a" / "b" / "c" / "d" / "e" / "f" 

      DQUOTE  =  %x22 ; " (Double Quote)    

      ALPHA   =  %x41-5A / %x61-7A   ; A-Z / a-z     

      ; taken from RFC3261 

      alphanum  =  ALPHA / DIGIT 

      LWS  =  [*WSP CRLF] 1*WSP ; linear whitespace 

      SWS  =  [LWS] ; sep whitespace 

      SEMI =  SWS ";" SWS ; semicolon 

      EQUAL   =  SWS "=" SWS ; equal 

      COLON   =  SWS ":" SWS ; colon 

      token       =  1*(alphanum / "-" / "." / "!" / "%" / "*" 

                        / "_" / "+" / "`" / "'" / "~" )  

    

      IPv4address    =  1*3DIGIT "." 1*3DIGIT "." 1*3DIGIT "." 1*3DIGIT 
 
 
Pendleton                Expires January 2009                 [Page 21] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      IPv6address    =  hexpart [ ":" IPv4address ] 

      hexpart        =  hexseq / hexseq "::" [ hexseq ] / "::" [ hexseq 
   ] 

      hexseq         =  hex4 *( ":" hex4) 

      hex4           =  1*4HEXDIG  

      ; DATE-TIME format  

      ; taken from RFC3339, refer for more information 

      date-fullyear   = 4DIGIT ; e.g. 2006  

      date-month      = 2DIGIT ; e.g. 01 or 11 

      date-mday       = 2DIGIT ; e.g. 02 or 22  

      time-hour       = 2DIGIT ; e.g. 01 or 13  

      time-minute     = 2DIGIT ; e.g. 03 or 55  

      time-second     = 2DIGIT ; e.g. 01 or 59 

      time-secfrac    = "." 1*DIGIT 

      time-numoffset  = ("+" / "-") time-hour ":" time-minute 

      time-offset     = "Z" / time-numoffset 

      partial-time = time-hour ":" time-minute ":" time-second  

   [time-secfrac] 

      full-date    = date-fullyear "-" date-month "-" date-mday 

      full-time    = partial-time time-offset 

      date-time       = full-date "T" full-time 

      ; 

      ; Miscellaneous definitions for the syntax  

      ; 

 
 
Pendleton                Expires January 2009                 [Page 22] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

       

      Extension = word-plus 

      word  =  1*(alphanum / "-" / "." / "!" / "%" / "*" / 

         "_" / "+" / "`" / "'" / "~" / 

         "(" / ")" / "<" / ">" / 

         ":" / "\" / DQUOTE / 

         "/" / "[" / "]" / "?" ) 

      word-plus =  1*(alphanum /  "-"  /  "."  /  "!"  / "%" / "*" / 

         "_"  /  "+"  /  "`"  /  "'"  /  "~"  / 

         "("  /  ")"  /  "<"  /  ">"  /  ":"  / 

         "\"  /  "/"  /  "["  /  "]"  /  "?"  / 

         "{"  /  "}"  /  "="  /  " ") 

    

4.6.2. Parameter Definitions and Mappings 

4.6.2.1. General mapping percentages from 8 bit, fixed point numbers 

   RFC3611 uses an 8 bit, fixed point number with the binary point at 
   the left edge of the field.  This value is calculated by dividing the 
   total number of packets lost by the total number of packets expected 
   and multiplying the result by 256, and taking the integer part. 

   For any RTCP XR parameter in this format, to map into the equivalent 
   SIP vq-rtcpxr parameter, simply reverse the equation i.e. divide by 
   256 and taking the integer part.  
 
4.6.2.2. Timestamps  

   Following SIP and other IETF convention, timestamps are provided in 
   Coordinated Universal Time (UTC) using the ABNF format provided in 
   IETF RFC3339 [7]. These timestamps should reflect, as closely 
   aspossible, the actual time during which the media session was 


 
 
Pendleton                Expires January 2009                 [Page 23] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

   running to enable correlation to related events occurring in the 
   network and to accounting or billing records. 

    

4.6.2.3. SessionDescription 

   The parameters in this field provide a shortened version of the 
   session SDP(s), containing only the relevant parameters for session 
   quality reporting purposes. 

      Payload Type 

   This is the "payload type" parameter used in the RTP packets i.e. the 
   codec. This field can also be mapped from the SDP "rtpmap" attribute 
   field "payload type". IANA registered types SHOULD be used.     

      Payload Desc 

   This parameter provides a text name for the codec used in this 
   session.  

      Sample Rate 

   This parameter is mapped from the SDP "rtpmap"  attribute field 
   "clock rate". The field provides the rate at which voice was sampled, 
   measured in Hertz (Hz).    

      Frame Duration 

   This parameter is not contained in RTP or SDP but can usually be 
   obtained from the device codec. The field reflects the amount of 
   voice content in each frame within the RTP payload, measured in 
   milliseconds. Note this value can be combined with the 
   FramesPerPacket to determine the packetization rate.      

      Frame Octets  

   This parameter is not contained in RTP or SDP but is usually provided 
   by the device codec. The field provides the number of octets in each 
   frame within the RTP payload. This field is usually not provided when 
   FrameDuration is provided. 

      Frames Per Packet 

   This parameter is not contained in RTP or SDP but can usually be 
   obtained from the device codec.  This field provides the number of 
 
 
Pendleton                Expires January 2009                 [Page 24] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

   frames in each RTP packet. Note this value can be combined with the 
   FrameDuration to determine the packetization rate. 

      Packets Per Second 

   This parameter is not contained in RTP or SDP but can usually be 
   obtained from the device codec. Packets per second provides the 
   number of RTP packets that are transmitted per second. 

      FMTP  

   This parameter is taken directly from the SDP attribute "fmtp".   

       

      Silence Suppression State  

   This parameter does not correspond to SDP, RTP, or RTCP XR. It 
   indicates whether silence suppression, also known as Voice Activity 
   Detection (VAD) is enabled for the identified session. 

    

      Packet Loss Concealment 

   This value corresponds to "PLC" in RFC3611 in the VoIP Metrics Report 
   Block. The values defined by RFC3611 are reused by this 
   recommendation and therefore no mapping is required. 

4.6.2.4. LocalAddr 

   This field provides the IP address, port and synchronization source 
   (SSRC) for the session from the perspective of the endpoint that is 
   sending the event.  The IPAddress can be IPv4 or IPv6 format. The 
   SSRC is taken from SDP, RTCP, or RTCP XR input paramters. 

   In the presence of NAT, the MAPPED-ADDRESS as reported by the STUN 
   [9] server (RFC 3489) MUST be reported, since the internal IP address 
   is not visible to the network operator. 

4.6.2.5. RemoteAddr 

   This field provides the IP address, port and ssrc of the session peer 
   from the perspective of the remote endpoint sending the event. In the 
   presence of NAT, the MAPPED-ADDRESS as reported by the STUN [9] 
   server (RFC 3489bis) MUST be reported, since the internal IP address 
   is not visible to the network operator.  
 
 
Pendleton                Expires January 2009                 [Page 25] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

4.6.2.6. Jitter Buffer Parameters 

      Jitter Buffer Adaptive  

   This value corresponds to "JBA" in RFC3611 in the VoIP Metrics Report 
   Block. The values defined by RFC3611 are reused by this ecommendation 
   and therefore no mapping is required. 

      Jitter Buffer Rate       

   This value corresponds to "JB rate" in RFC3611 in the VoIP Metrics 
   Report Block. The parameter does not require any mapping alculations. 

      Jitter Buffer Nominal 

   This value corresponds to "JB nominal" in RFC3611 in the VoIP Metrics 
   Report Block. The parameter does not require any mapping 
   calculations. 

      Jitter Buffer Max 

   This value corresponds to "JB maximum" in RFC3611 in the VoIP Metrics 
   Report Block. The parameter does not require any conversion. 

      Jitter Buffer Abs Max    

   This value corresponds to "JB abs max" in RFC3611 in the VoIP Metrics 
   Report Block. The parameter does not require any conversion. 

4.6.2.7. Packet Loss Parameters  

      Network Packet Loss Rate  

   This value corresponds to "loss rate" in RFC3611 in the VoIP Metrics 
   Report Block. For conversion, see "General mapping percentages from 8 
   bit, fixed point numbers". 

      Jitter Buffer Discard Rate 

   This value corresponds to "discard rate" in RFC3611 in the VoIP 
   Metrics Report Block.  For conversion, see "General mapping 
   percentages from 8 bit, fixed point numbers". 

     



 
 
Pendleton                Expires January 2009                 [Page 26] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

4.6.2.8. Burst/Gap Parameters 

      Burst Loss Density 

   This value corresponds to "burst density" in RFC3611 in the VoIP 
   Metrics Report Block. For conversion, see "General mapping 
   percentages from 8 bit, fixed point numbers". 

      Burst Duration  

   This value corresponds to "burst duration" in RFC3611 in the VoIP 
   Metrics Report Block. This value requires no conversion; the exact 
   value sent in an RTCP XR VoIP Metrics Report Block can be included in 
   the SIP vq-rtcpxr parameter. 

      Gap Loss Density  

   This value corresponds to "gap density" in RFC3611 in the VoIP 
   metrics Report Block. 

   See "General mapping percentages from 8 bit, fixed point numbers".  

      Gap Duration  

   This value corresponds to "gap duration" in RFC3611 in the VoIP 
   Metrics Report Block.  This value requires no conversion; the exact 
   value sent in an RTCP XR VoIP Metrics Report Block can be included in 
   the SIP vq-rtcpxr parameter. 

      Minimum Gap Threshold 

   This value corresponds to "Gmin" in RFC3611 in the VoIP Metrics 
   Report Block. This value requires no conversion; the exact value sent 
   in an RTCP XR VoIP Metrics Report Block can be included in the SIP 
   vq-rtcpxr parameter. 

4.6.2.9. Delay Parameters 

      Round Trip Delay  

This value corresponds to "round trip delay" in RFC3611 in the VoIP 
Metrics Report Block and may be measured using the method defined in 
RFC3550. The parameter is expressed in milliseconds. 

      End System Delay  


 
 
Pendleton                Expires January 2009                 [Page 27] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

   This value corresponds to "end system delay" in RFC3611 in the    
   VoIP Metrics Report Block. This parameter does not require any 
   conversion. The parameter is expressed in milliseconds. 

      One Way Delay  

   This value SHOULD be measured using the methods defined in IETF    
   RFC2679. The parameter is expressed in milliseconds. 

      Interarrival Jitter  

   Inter-arrival jitter is defined in RFC 3550. The parameter is    
   expressed in milliseconds. 

      Mean Absolute Jitter  

   It is recommended that MAJ be measured as defined by ITU-T G.1020.    
   This parameter is often referred to as MAPDV. The parameter is    
   expressed in milliseconds. 

4.6.2.10. Signal-related Parameters 

    Signal Level  

   This field corresponds to "signal level" in RFC3611 in the VoIP 
   Metrics Report Block. This field provides the voice signal    
   relative level is defined as the ratio of the signal level to a 0 
   dBm0 reference, expressed in decibels. This value can be used 
   directly without extra conversion. 

      Noise Level  

   This field corresponds to "noise level" in RFC3611 in the VoIP 
   Metrics Report Block. This field provide the ratio of the silent 
   period background noise level to a 0 dBm0 reference, expressed in 
   secibels.  This value can be used directly without extra conversion.    

      Residual Echo Return Loss (RERL)  

   This field corresponds to "RERL" in RFC3611 in the VoIP Metrics    
   Report Block.  This field provides the ratio between the original 
   signal and the echo level in decibels, as measured after echo 
   cancellation or suppression has been applied. This value can be used 
   directly without extra conversion.  



 
 
Pendleton                Expires January 2009                 [Page 28] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

4.6.2.11. Quality Scores 

   ListeningQualityR  

   This field reports the listening quality expressed as an R factor 
   (per G.107).  This does not include the effects of echo or delay.  
   The range of R is 0-95 for narrowband calls and 0-120 for wideband 
   calls. Algorithms for computing this value SHOULD be compliant with 
   ITU-T Recommendation P.564. 

      RLQEstAlg  

   This field provides a text name for the algorithm used to estimate 
   ListeningQualityR however may report "P.564" for algorithms that have 
   been tested against ITU-T Recommendation P.564. 

      ConversationalQualityR  

   This field corresponds to "R factor" in RFC3611 in the VoIP Metrics 
   Report Block. This parameter provides a cumulative measurement of 
   voice quality from the start of the session to the reporting time.  
   The range of R is 0-95 for narrowband calls and 0-120 for wideband 
   calls. Algorithms for computing this value SHOULD be compliant with 
   ITU-T Recommendation P.564. Within RFC3611 a reported R factor of 127 
   indicates that this parameter is unavailable; in this case the 
   ConversationalQualityR parameter SHALL be omitted from the vq-rtcpxr 
   event. 

      RCQEstAlg  

   This field provides a text name for the algorithm used to estimate 
   ConversationalQualityR however may report "P.564" for algorithms that 
   have been tested against ITU-T Recommendation P.564. 

      ExternalR-In  

   This field corresponds to "ext. R factor" in RFC3611 in the VoIP 
   Metrics Report Block.  This parameter reflects voice quality as 
   measured by the local endpoint for incoming connection on "other" 
   side (refer to RFC3611 for a more detailed explanation). The range of 
   R is 0-95 for narrowband calls and 0-120 for wideband calls.  
   Algorithms for computing this value SHOULD be compliant with ITU-T 
   Recommendation P.564. Within RFC3611 a reported R factor of 127 
   indicates that this parameter is unavailable; in this case the 
   ConversationalQualityR parameter SHALL be omitted from the vq-rtcpxr 
   event. 

 
 
Pendleton                Expires January 2009                 [Page 29] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      ExtRInEstAlg 

   This field provides a text name for the algorithm used to estimate 
   ExternalR-In however may report "P.564" for algorithms that have been 
   tested against ITU-T Recommendation P.564. 

      ExternalR-Out  

   This field corresponds to "ext. R factor" in RFC3611 in the VoIP 
   Metrics Report Block.  Here, the value is copied from RTCP XR message 
   received from the remote endpoint on "other" side of this endpoint 
   refer to RFC3611 for a more detailed explanation). The range of R is 
   0-95 for narrowband calls and 0-120 for wideband calls.  Algorithms 
   for computing this value SHOULD be compliant with ITU-T 
   Recommendation P.564. Within RFC3611 a reported R factor of 127 
   indicates that this parameter is unavailable; in this case the 
   ConversationalQualityR parameter SHALL be omitted from the vq-rtcpxr 
   event. 

      ExtROutEstAlg 

   This field provides a text name for the algorithm used to estimate 
   ExternalR-Out however may report "P.564" for algorithms that have 
   been tested against ITU-T Recommendation P.564. 

      MOS-LQ  

   This field corresponds to "MOSLQ" in RFC3611 in the VoIP Metrics 
   Report Block.  This parameter is the estimated mean opinion score for 
   listening voice quality on a scale from 1 to 5, in which 5 represents 
   "Excellent" and 1 represents "Unacceptable". The RFC3611 format is 
   expressed as an integer in the range 10 to 50, corresponding to MOS x 
   10. Therefore the value should be divided by 10 to convert to vq-
   rtcpxr format. Additionally, a value of 127 in RFC3611 indicates    
   that the parameter is unavailable and SHOULD NOT be included in the 
   vq-rtcpxr event. 

      MOSLQEstAlg  

   This field provides a text name for the algorithm used to estimate 
   MOS-LQ however may report "P.564" for algorithms that have been 
   tested against ITU-T Recommendation P.564. 

      MOS-CQ  

   This field corresponds to "MOSCQ" in RFC3611 in the VoIP Metrics 
   Report Block.  This parameter is the estimated mean opinion score for 
 
 
Pendleton                Expires January 2009                 [Page 30] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

   conversation voice quality on a scale from 1 to 5, in which 5 
   represents excellent and 1 represents unacceptable. The RFC3611 
   format is expressed as an integer in the range 10 to 50, 
   corresponding to MOS x 10. Therefore the value SHALL be divided by 10 
   to convert to vq-rtcpxr format. Additionally, a value of 127 in 
   RFC3611 indicates that the parameter is unavailable and SHOULD NOT be 
   included in the vq-rtcpxr event. 

      MOSCQEstAlg  

   This field provides a text name for the algorithm used to estimate 
   MOS-CQ however may report "P.564" for algorithms that have been 
   tested against ITU-T Recommendation P.564. 

      QoEEstAlg  

   This field provides a text description of the algorithm used to 
   estimate all voice quality metrics. This parameter is provided as an 
   alternative to the separate estimation algorithms for use when the 
   same algorithm is used for all measurements. 

4.7. Message Flow and Syntax Examples 

   This section shows a number of message flow examples showing how the   
   event package works. 

4.7.1. End of Session Report using NOTIFY   

      Alice            Proxy/Registrar        Collector             Bob 

      |                    |                    |                    | 

      |                    |                    |                    | 

      | REGISTER Allow-Event:vq-rtcpxr F1       |                    | 

      |------------------->|                    |                    | 

      |      200 OK F2     |                    |                    | 

      |<-------------------|                    |                    | 

      |                    |  SUBSCRIBE Event:vq-rtcpxr F3           | 

      |                    |<-------------------|                    | 

      | SUBSCRIBE Event:vq-rtcpxr F4            |                    | 
 
 
Pendleton                Expires January 2009                 [Page 31] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      |<-------------------|                    |                    | 

      |     200 OK F5      |                    |                    | 

      |------------------->|                    |                    | 

      |                    |   200 OK F6        |                    | 

      |                    |------------------->|                    | 

      |      INVITE F7     |                    |                    | 

      |------------------->|                    |                    | 

      |                    |      INVITE F8     |                    | 

      |                    |---------------------------------------->| 

      |                    |      200 OK F9     |                    | 

      |                    |<----------------------------------------| 

      |     200 OK F10     |                    |                    | 

      |<-------------------|                    |                    | 

      |        ACK F11     |                    |                    | 

      |------------------->|                    |                    | 

      |                    |      ACK F12       |                    | 

      |                    |---------------------------------------->| 

      |        RTP         |                    |                    | 

      |<============================================================>| 

      |        RTCP, RTCP XR                    |                    | 

      |<============================================================>| 

      |                    |                    |                    | 

      |    BYE F13         |                    |                    | 

      |------------------->|      BYE F14       |                    | 
 
 
Pendleton                Expires January 2009                 [Page 32] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      |                    |---------------------------------------->| 

      |                    |     200 OK F15     |                    | 

      |                    |<----------------------------------------| 

      |     200 OK F16     |                    |                    | 

      |<-------------------|                    |                    | 

      |  NOTIFY Event:vq-rtcpxr F17             |                    | 

      |------------------->|                    |                    | 

      |                    | NOTIFY Event:vq-rtcpxr F18              | 

      |                    |------------------->|                    | 

      |                    |     200 OK F19     |                    | 

      |                    |<-------------------|                    | 

      |     200 OK F20     |                    |                    | 

      |<-------------------|                    |                    | 

    

   Figure 1. Summary report with NOTIFY sent after session termination. 

    

   In the call flow depicted in Figure 1, the following message format 
   is sent in F17: 

      NOTIFY sip:collector@example.org SIP/2.0 

      Via: SIP/2.0/UDP pc22.example.org;branch=z9hG4bK3343d7 

      Max-Forwards: 70 

      To: <sip:collector@example.org>;tag=43524545 

      From: Alice <sip:alice@example.org>;tag=a3343df32 

      Call-ID: 1890463548@alice.example.org 

 
 
Pendleton                Expires January 2009                 [Page 33] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      CSeq: 4321 NOTIFY 

      Contact: <sip:alice@pc22.example.org> 

      Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, 

      SUBSCRIBE, NOTIFY 

      Event: vq-rtcpxr 

      Accept: application/sdp, message/sipfrag 

      Subscription-State: active;expires=3600 

      Content-Type: application/vq-rtcpxr 

      Content-Length: ... 

    

      VQSessionReport 

      LocalMetrics: 

      Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z 

      SessionDesc:PT=0 PD=PCMU SR=8000 FD=20 FO=160 FPP=1 PPS=50 

                      PLC=3 SSUP=on 

      CallID:1890463548@alice.example.org 

      FromID: Alice <sip:alice@example.org> 

      ToID: Bill <sip:bill@elpmaxe.org> 

      LocalAddr:IP=10.10.1.100 PORT=5000 SSRC=1a3b5c7d 

      RemoteAddr:IP=11.1.1.150 PORT=5002 SSRC=2468abcd 

      JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120 

      PacketLoss:NLR=5.0 JDR=2.0 

      BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16 

      Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10 
 
 
Pendleton                Expires January 2009                 [Page 34] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      Signal:SL=2 NL=-10 RERL=55 

      QualityEst:RLQ=90 RCQ=85 EXTRI=90 MOSLQ=3.4 MOSCQ=3.3 
   QoEEstAlg=P.564 

      RemoteMetrics: 

      Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z 

      SessionDesc:PT=0 PD=PCMU SR=8000 FD=20 FO=160 FPP=1 PPS=50 

                      PLC=3 SSUP=on 

      CallID:1890463548@alice.example.org 

      LocalAddr:IP=11.1.1.150 PORT=5002 SSRC=2468abcd 

      RemoteAddr:IP=10.10.1.100 PORT=5000 SSRC=1a3b5c7d 

      JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120 

      PacketLoss:NLR=5.0 JDR=2.0 

      BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16 

      Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10 

      Signal:SL=2 NL=-10 RERL=55 

      QualityEst:RLQ=90 RCQ=85 EXTRI=90 MOSLQ=3.4 MOSCQ=3.3 
   QoEEstAlg=P.564 

      DialogID:1890463548@alice.example.org;to-tag=8472761;            
   from-tag=9123dh311 

4.7.2. Mid Session Threshold Violation using NOTIFY 

      Alice            Proxy/Registrar        Collector             Bob 

      |                    |                    |                    | 

      |                    |                    |                    | 

      | REGISTER Allow-Event:vq-rtcpxr F1       |                    | 

      |------------------->|                    |                    | 

 
 
Pendleton                Expires January 2009                 [Page 35] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      |      200 OK F2     |                    |                    | 

      |<-------------------|                    |                    | 

      |                    |  SUBSCRIBE Event:vq-rtcpxr F3           | 

      |                    |<-------------------|                    | 

      | SUBSCRIBE Event:vq-rtcpxr F4            |                    | 

      |<-------------------|                    |                    | 

      |     200 OK F5      |                    |                    | 

      |------------------->|                    |                    | 

      |                    |   200 OK F6        |                    | 

      |                    |------------------->|                    | 

      |      INVITE F7     |                    |                    | 

      |------------------->|                    |                    | 

      |                    |      INVITE F8     |                    | 

      |                    |---------------------------------------->| 

      |                    |      200 OK F9     |                    | 

      |                    |<----------------------------------------| 

      |     200 OK F10     |                    |                    | 

      |<-------------------|                    |                    | 

      |        ACK F11     |                    |                    | 

      |------------------->|                    |                    | 

      |                    |      ACK F12       |                    | 

      |                    |---------------------------------------->| 

      |        RTP         |                    |                    | 

      |<============================================================>| 
 
 
Pendleton                Expires January 2009                 [Page 36] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      |        RTCP, RTCP XR                    |                    | 

      |<============================================================>| 

      |  NOTIFY Event:vq-rtcpxr F17             |                    | 

      |------------------->|                    |                    | 

      |                    | NOTIFY Event:vq-rtcpxr F18              | 

      |                    |------------------->|                    | 

      |                    |     200 OK F19     |                    | 

      |                    |<-------------------|                    | 

      |     200 OK F20     |                    |                    | 

      |<-------------------|                    |                    | 

      |                    |                    |                    | 

      |    BYE F13         |                    |                    | 

      |------------------->|      BYE F14       |                    | 

      |                    |---------------------------------------->| 

      |                    |     200 OK F15     |                    | 

      |                    |<----------------------------------------| 

      |     200 OK F16     |                    |                    | 

      |<-------------------|                    |                    | 

      |  NOTIFY Event:vq-rtcpxr F17             |                    | 

      |------------------->|                    |                    | 

      |                    | NOTIFY Event:vq-rtcpxr F18              | 

      |                    |------------------->|                    | 

      |                    |     200 OK F19     |                    | 

      |                    |<-------------------|                    | 
 
 
Pendleton                Expires January 2009                 [Page 37] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      |     200 OK F20     |                    |                    | 

      |<-------------------|                    |                    | 

    

      Figure 2. Summary report sent during session with alert report.    

    

   In the call flow depicted in Figure 2, the following message format   
   is sent in F17: 

      NOTIFY sip:collector@example.org SIP/2.0 

      Via: SIP/2.0/UDP pc22.example.org;branch=z9hG4bK3343d7 

      Max-Forwards: 70 

      To: <sip:collector@example.org> 

      From: Alice <sip:alice@example.org>;tag=a3343df32 

      Call-ID: 1890463548@alice.example.org 

      CSeq: 4321 PUBLISH 

      Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, 

      SUBSCRIBE, NOTIFY 

      Event: vq-rtcpxr 

      Accept: application/sdp, message/sipfrag 

      Content-Type: application/vq-rtcpxr 

      Content-Length: ... 

    

      VQAlertReport: Type=RLQ Severity=Warning Dir=local 

      Metrics: 

      Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z 

 
 
Pendleton                Expires January 2009                 [Page 38] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      SessionDesc:PT=0 PD=PCMU SR=8000 FD=20 FO=160 FPP=1 PPS=50 

              PLC=3 SSUP=on 

      CallID:1890463548@alice.example.org 

      FromID: Alice <sip:alice@example.org> 

      ToID: Bill <sip:bill@elpmaxe.org> 

      LocalAddr:IP=10.10.1.100 PORT=5000 SSRC=1a3b5c7d 

      RemoteAddr:IP=11.1.1.150 PORT=5002 SSRC=2468abcd 

      JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120 

      PacketLoss:NLR=5.0 JDR=2.0 

      BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16 

      Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10 

      Signal:SL=2 NL=-10 RERL=55 

      QualityEst:RLQ=60 RCQ=55 EXTR=90 MOSLQ=2.4 MOSCQ=2.3 
   QoEEstAlg=P.564 

      RemoteMetrics: 

      Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z 

      SessionDesc:PT=0 PD=PCMU SR=8000 FD=20 FO=160 FPP=1 PPS=50 

                      PLC=3 SSUP=on 

      CallID:1890463548@alice.example.org 

      LocalAddr:IP=11.1.1.150 PORT=5002 SSRC=2468abcd 

      RemoteAddr:IP=10.10.1.100 PORT=5000 SSRC=1a3b5c7d 

      JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120 

      PacketLoss:NLR=5.0 JDR=2.0 

      BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=10 

 
 
Pendleton                Expires January 2009                 [Page 39] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10 

      Signal:SL=2 NL=-10 RERL=55 

      QualityEst:RLQ=90 RCQ=85 EXTRI=90 MOSLQ=3.4 MOSCQ=3.3 
   QoEEstAlg=P.564 

      DialogID:1890463548@alice.example.org;to-tag=8472761; 

              from-tag=9123dh31111 

4.7.3.  End of Session Report using PUBLISH 

      Alice            Proxy/Registrar        Collector             Bob 

      |                    |                    |                    | 

      |                    |                    |                    | 

      | REGISTER Allow-Event:vq-rtcpxr  F1      |                    | 

      |------------------->|                    |                    | 

      |      200 OK F2     |                    |                    | 

      |<-------------------|                    |                    | 

      |      INVITE F3     |                    |                    | 

      |------------------->|                    |                    | 

      |                    |      INVITE F4     |                    | 

      |                    |---------------------------------------->| 

      |                    |      200 OK F5     |                    | 

      |                    |<----------------------------------------| 

      |     200 OK F6      |                    |                    | 

      |<-------------------|                    |                    | 

      |        ACK F7      |                    |                    | 

      |------------------->|                    |                    | 

 
 
Pendleton                Expires January 2009                 [Page 40] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      |                    |      ACK F8        |                    | 

      |                    |---------------------------------------->| 

      |        RTP         |                    |                    | 

      |<============================================================>| 

      |        RTCP        |                    |                    | 

      |<============================================================>| 

      |                    |                    |                    | 

      |    BYE F9          |                    |                    | 

      |------------------->|      BYE F10       |                    | 

      |                    |---------------------------------------->| 

      |                    |     200 OK F11     |                    | 

      |                    |<----------------------------------------| 

      |     200 OK F12     |                    |                    | 

      |<-------------------|                    |                    | 

      |  PUBLISH Event:vq-rtcpxr F13            |                    | 

      |------------------->|                    |                    | 

      |                    | PUBLISH Event:vq-rtcpxr F14             | 

      |                    |------------------->|                    | 

      |                    |     200 OK F15     |                    | 

      |                    |<-------------------|                    | 

      |     200 OK F16     |                    |                    | 

      |<-------------------|                    |                    | 

    

    
 
 
Pendleton                Expires January 2009                 [Page 41] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      Figure 3. End of session report sent after session termination. 

    

   In the message flow depicted in Figure 3, the following message is 
   sent in F13. 

      PUBLISH sip:collector@example.org SIP/2.0 

      Via: SIP/2.0/UDP pc22.example.org;branch=z9hG4bK3343d7 

      Max-Forwards: 70 

      To: <sip:proxy@example.org> 

      From: Alice <sip:alice@example.org>;tag=a3343df32 

      Call-ID: 1890463548@alice.example.org 

      CSeq: 4331 PUBLISH 

      Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, 

      SUBSCRIBE, NOTIFY 

      Event: vq-rtcpxr 

      Accept: application/sdp, message/sipfrag 

      Content-Type: application/vq-rtcpxr 

      Content-Length: ... 

    

      VQSessionReport 

      LocalMetrics: 

      Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z 

      SessionDesc:PT=18 PD=G729 SR=8000 FD=20 FO=20 FPP=2 PPS=50 

                      FMTP="annexb=no" PLC=3 SSUP=on 

      CallID:1890463548@alice.example.org 

 
 
Pendleton                Expires January 2009                 [Page 42] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      FromID: Alice <sip:alice@example.org> 

      ToID: Bill <sip:bill@elpmaxe.org> 

      LocalAddr:IP=10.10.1.100 PORT=5000 SSRC=2468abcd 

      RemoteAddr:IP=11.1.1.150 PORT=5002 SSRC=1357efff 

      JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120 

      PacketLoss:NLR=5.0 JDR=2.0 

      BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16 

      Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10 

      Signal:SL=2 NL=-10 RERL=55 

      QualityEst:RLQ=90 RCQ=85 EXTRI=90 MOSLQ=3.4 MOSCQ=3.3 
   QoEEstAlg=P.564 

      RemoteMetrics: 

      Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z 

      SessionDesc:PT=18 PD=G729 SR=8000 FD=20 FO=20 FPP=2 PPS=50 

                      FMTP="annexb=no" PLC=3 SSUP=on 

      CallID:1890463548@alice.example.org 

      LocalAddr:IP=11.1.1.150 PORT=5002 SSRC=1357efff 

      RemoteAddr:IP=10.10.1.100 PORT=5000 SSRC=2468abcd 

      JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120 

      PacketLoss:NLR=5.0 JDR=2.0 

      BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16 

      Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10 

      Signal:SL=2 NL=-10 RERL=55 

      QualityEst:RLQ=90 RCQ=85 MOSLQ=3.4 MOSCQ=3.3 QoEEstAlg=P.564 

 
 
Pendleton                Expires January 2009                 [Page 43] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      DialogID:1890463548@alice.example.org;to-tag=8472761;                    
   from-tag=9123dh311 

4.7.4. Alert Report using PUBLISH 

      Alice            Proxy/Registrar        Collector             Bob 

      |                    |                    |                    | 

      |      INVITE F1     |                    |                    | 

      |------------------->|                    |                    | 

      |                    |      INVITE F2     |                    | 

      |                    |---------------------------------------->| 

      |                    |      200 OK F3     |                    | 

      |                    |<----------------------------------------| 

      |     200 OK F4      |                    |                    | 

      |<-------------------|                    |                    | 

      |        ACK F5      |                    |                    | 

      |------------------->|                    |                    | 

      |                    |      ACK F6        |                    | 

      |                    |---------------------------------------->| 

      |        RTP         |                    |                    | 

      |<============================================================>| 

      |        RTCP        |                    |                    | 

      |<============================================================>| 

      |  PUBLISH Event:vq-rtcpxr F7             |                    | 

      |------------------->|                    |                    | 

      |                    | PUBLISH Event:vq-rtcpxr F8              | 

 
 
Pendleton                Expires January 2009                 [Page 44] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      |                    |------------------->|                    | 

      |                    |     200 OK F9      |                    | 

      |                    |<-------------------|                    | 

      |     200 OK F10     |                    |                    | 

      |<-------------------|                    |                    | 

      |                    |                    |                    | 

      |      BYE F12       |                    |                    | 

      |------------------->|      BYE F13       |                    | 

      |                    |---------------------------------------->| 

      |                    |     200 OK F14     |                    | 

      |                    |<----------------------------------------| 

      |     200 OK F15     |                    |                    | 

      |<-------------------|                    |                    | 

    

      Figure 4. Alert report message flow 

   In the message flow depicted in Figure 4, the following message is 
   sent in F7: 

      PUBLISH sip:collector@example.org SIP/2.0 

      Via: SIP/2.0/UDP pc22.example.org;branch=z9hG4bK3343d7 

      Max-Forwards: 70 

      To: <sip:collector@example.org> 

      From: Alice <sip:alice@example.org>;tag=a3343df32 

      Call-ID: 1890463548@alice.example.org 

      CSeq: 4321 PUBLISH 

 
 
Pendleton                Expires January 2009                 [Page 45] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, 

      SUBSCRIBE, NOTIFY 

      Event: vq-rtcpxr 

      Accept: application/sdp, message/sipfrag 

      Content-Type: application/vq-rtcpxr 

      Content-Length: ... 

    

      VQAlertReport: Type=RLQ Severity=Warning Dir=local 

      Metrics: 

      Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z 

      SessionDesc:PT=0 PD=PCMU SR=8000 FD=20 FO=160 FPP=1 PPS=50 

                      PLC=3 SSUP=on 

      CallID:1890463548@alice.example.org 

      FromID: Alice <sip:alice@example.org> 

      ToID: Bill <sip:bill@elpmaxe.org> 

      LocalAddr:IP=10.10.1.100 PORT=5000 SSRC=2a4b6c8d 

      RemoteAddr:IP=11.1.1.150 PORT=5002 SSRC=9f7e5d3c 

      JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120 

      PacketLoss:NLR=5.0 JDR=2.0 

      BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16 

      Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10 

      Signal:SL=2 NL=-10 RERL=55 

      QualityEst:RLQ=60 RCQ=55 EXTR=90 MOSLQ=2.4 MOSCQ=2.3 
   QoEEstAlg=P.564 

 
 
Pendleton                Expires January 2009                 [Page 46] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      RemoteMetrics: 

      Timestamps:START=2004-10-10T18:23:43Z STOP=2004-10-01T18:26:02Z 

      SessionDesc:PT=0 PD=PCMU SR=8000 FD=20 FO=160 FPP=1 PPS=50 

                      PLC=3 SSUP=on 

      CallID:1890463548@alice.example.rog 

      LocalAddr:IP=11.1.1.150 PORT=5002 SSRC=9f7e5d3c 

      RemoteAddr:IP=10.10.1.100 PORT=5000 SSRC=2a4b6c8d 

      JitterBuffer:JBA=3 JBR=2 JBN=40 JBM=80 JBX=120 

      PacketLoss:NLR=5.0 JDR=2.0 

      BurstGapLoss:BLD=0 BD=0 GLD=2.0 GD=500 GMIN=16 

      Delay:RTD=200 ESD=140 SOWD=200 IAJ=2 MAJ=10 

      Signal:SL=2 NL=-10 RERL=55 

      QualityEst:RLQ=90 RCQ=85 EXTRI=90 MOSLQ=3.4 MOSCQ=3.3 
   QoEEstAlg=P.564 

      DialogID:1890463548@alice.example.org;to-tag=8472761; 

              from-tag=9123dh3111 

4.8.   Configuration Dataset for vq-rtcpxr Events 

   It is the suggestion of the authors that the SIP configuration 

   framework [8] be used to establish the necessary parameters for 

   usage of vq-rtcpxr events.  A dataset for this purpose is provided 

   below: 

    

   <?xml version="1.0" encoding="UTF-8"?> 

      <xs:schema 
   targetNamespace="urn:ietf:params:xml:ns:vqrtcpxrdataset" 
 
 
Pendleton                Expires January 2009                 [Page 47] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

            xmlns:tns="urn:ietf:params:xml:ns:vqrtcpxrdataset" 

            xmlns:xs="http://www.w3.org/2001/XMLSchema" 

    

        <xs:element name="rtcpxr-collector"> 

         <xs:complexType> 

                <xs:sequence>                      

                  <xs:element name="address" type=xs:string/> 

                  <xs:element name="port" type=xs:integer/> 

                </xs:sequence> 

           </xs:complexType>      

        </xs:element> 

    

      </xs:schema>      

          <xs:complexType>    

            <xs:sequence>            

              <xs:element name="threshold-parameter"> 

                <xs:sequence> 

                  <xs:element name="parameter-name" type=xs:string/> 

                  <xs:element name="warning-level" type=xs:integer/> 

                  <xs:element name="excessive-level" type=xs:integer/> 

                </xs:sequence> 

              </xs:element> 

              </xs:sequence>              

            </xs:complexType> 
 
 
Pendleton                Expires January 2009                 [Page 48] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

        </xs:element> 

    

        <xs:element name="session-report-settings"> 

          <xs:complexType> 

            <xs:sequence> 

              <xs:element name="enable" type=xs:boolean/> 

              <xs:element name="remote-report" type=xs:boolean/> 

            </xs:sequence> 

          </xs:complexType> 

        </xs:element> 

         

        <xs:element name="interval-report-settings"> 

          <xs:complexType> 

            <xs:sequence> 

              <xs:element name="enable" type=xs:boolean/> 

              <xs:element name="remote-report" type=xs:boolean/> 

              <xs:element name="timer" type=xs:integer/> 

            </xs:sequence> 

          </xs:complexType> 

        </xs:element>        

    

      </xs:schema> 

5. IANA Considerations  

   This document registers a new SIP Event Package and a new MIME type. 
 
 
Pendleton                Expires January 2009                 [Page 49] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

5.1. SIP Event Package Registration 

   Package name: vq-rtcpx 

   Type: package 

   Contact: Amy Pendleton <aspen@nortel.com> 

   Published Specification: This document 

5.2. application/vq-rtcp-xr MIME Registration 

   MIME media type name: application 

   MIME subtype name: vq-rtcpxr 

   Mandatory parameters: none 

   Optional parameters: none 

   Encoding considerations: text 

   Security considerations: See next section. 

   Interoperability considerations: none. 

   Published specification: This document. 

   Applications which use this media type: This document type is           
   being used in notifications of VoIP quality reports. 

   Additional Information: 

      Magic Number: None 

      File Extension: None 

      Macintosh file type code: "TEXT" 

   Personal and email address for further information: Amy Pendleton        
   <aspen@nortel.com> 

   Intended usage: COMMON 

   Author/Change controller: The IETF. 


 
 
Pendleton                Expires January 2009                 [Page 50] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

6. Security Considerations 

   RTCP reports can contain sensitive information since they can provide   
   information about the nature and duration of a session established   
   between two or more endpoints.  As a result, any third party wishing   
   to obtain this information SHOULD be properly authenticated by the   
   SIP UA using standard SIP mechanisms and according to the   
   recommendations in [5].  Additionally the event content MAY be   
   encrypted to ensure confidentiality; the mechanisms for providing   
   confidentiality are detailed in [2]. 

7. Contributors 

   The authors would like to thank Rajesh Kumar, Dave Oran, Tom    
   Redman and Shane Holthaus for their comments and input. 

8. Normative References  

   [1] Bradner, S., "Key words for use in RFCs to Indicate Requirement 
   Levels", BCP 14, RFC 2119, March 1997. 

   [2] Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A.,        
   Peterson, J., Sparks, R., Handley, M., and E. Schooler, "SIP:        
   Session Initiation Protocol", RFC 3261, June 2002. 

   [3] Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson,        
   "RTP: A Transport Protocol for Real-Time Applications", STD 64,        
   RFC 3550, July 2003. 

   [4] Friedman, T., Caceres, R., and A. Clark, "RTP Control Protocol        
   Extended Reports (RTCP XR)", RFC 3611, November 2003. 

   [5] Huitema, C., "Real Time Control Protocol (RTCP) attribute in        
   Session Description Protocol (SDP)", RFC 3605, October 2003. 

   [5] Roach, A., "Session Initiation Protocol (SIP)-Specific Event 

   Notification", RFC 3265, June 2002. 

   [6] Crocker, D., Ed. and P. Overell, "Augmented BNF for Syntax        
   Specifications: ABNF", RFC 5234, January 2008. 

   [7] Klyne, G. and C. Newman, "Date and Time on the Internet:       
   Timestamps", RFC 3339, July 2002. 



 
 
Pendleton                Expires January 2009                 [Page 51] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

   [8] Petrie, D., "A Framework for Session Initiation Protocol User  
   Agent Profile Delivery", draft-ietf-sipping-config-framework-15,         
   (work in progress), February 2008. 

   [9] Rosenberg, J., J. Weinberger, C. Huitema, and R. Mahy, "STUN -                                                                         - 
   Simple Traversal of User Datagram Protocol (UDP) Through Network 
   Address Translators (NATs)," RFC 3489, March 2003. 

    

   This document was prepared using 2-Word-v2.0.template.dot. 

Author's Addresses 

      Amy Pendleton 

      Nortel 

      2380 Performance Drive 

      Richardson, TX  75081, USA 

      Email: aspen@nortel.com 

    

      Alan Clark 

      Telchemy Incorporated 

      2905 Premiere Parkway, Suite 280 

      Duluth, GA 30097, USA 

      Email: alan@telchemy.com 

    

      Alan Johnston 

      Avaya 

      St. Louis, MO 63124, USA 

      Email: alan@sipstation.com 

    
 
 
Pendleton                Expires January 2009                 [Page 52] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

      Henry Sinnreich 

      Adobe Systems, Inc. 

      601 Townsend Street,San Francisco, CA 94103, USA 

      Email: henrys@adobe.com 

    

Intellectual Property Statement 

   The IETF takes no position regarding the validity or scope of any 
   Intellectual Property Rights or other rights that might be claimed to 
   pertain to the implementation or use of the technology described in 
   this document or the extent to which any license under such rights 
   might or might not be available; nor does it represent that it has 
   made any independent effort to identify any such rights.  Information 
   on the procedures with respect to rights in RFC documents can be 
   found in BCP 78 and BCP 79. 

   Copies of IPR disclosures made to the IETF Secretariat and any 
   assurances of licenses to be made available, or the result of an 
   attempt made to obtain a general license or permission for the use of 
   such proprietary rights by implementers or users of this 
   specification can be obtained from the IETF on-line IPR repository at 
   http://www.ietf.org/ipr. 

   The IETF invites any interested party to bring to its attention any 
   copyrights, patents or patent applications, or other proprietary 
   rights that may cover technology that may be required to implement 
   this standard.  Please address the information to the IETF at 
   ietf-ipr@ietf.org. 

Disclaimer of Validity 

   This document and the information contained herein are provided on an 
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS 
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND 
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS 
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF 
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED 
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 

Copyright Statement 

   Copyright (C) The IETF Trust (2008). 
 
 
Pendleton                Expires January 2009                 [Page 53] 

Internet-Draft    draft-ietf-sipping-rtcp-summary-03       July 5, 2008 
    

   This document is subject to the rights, licenses and restrictions 
   contained in BCP 78, and except as set forth therein, the authors 
   retain all their rights. 

Acknowledgment 

   Funding for the RFC Editor function is currently provided by the 
   Internet Society. 

    





































 
 
Pendleton                Expires January 2009                 [Page 54] 

