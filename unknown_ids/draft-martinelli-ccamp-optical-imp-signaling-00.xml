<?xml version="1.0" encoding="US-ASCII"?>
<!-- This template is for creating an Internet Draft using xml2rfc,
     which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!-- One method to get references from the online citation libraries.
     There has to be one entity for each item to be referenced. 
     An alternate method (rfc include) is described in the references. -->

<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC2205 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2205.xml">
<!ENTITY RFC3209 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3209.xml">
<!ENTITY RFC3945 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3945.xml">
<!ENTITY RFC3471 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3471.xml">
<!ENTITY RFC3473 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3473.xml">
<!ENTITY RFC4054 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4054.xml">
<!ENTITY RFC4420 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4420.xml">
<!ENTITY RFC4328 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4328.xml">

<!ENTITY I-D.bernstein-ccamp-wavelength-switched
SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.bernstein-ccamp-wavelength-switched.xml">
<!ENTITY I-D.otani-ccamp-gmpls-lambda-labels 
SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.otani-ccamp-gmpls-lambda-labels.xml">

<!ENTITY I-D.narten-iana-considerations-rfc2434bis SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.narten-iana-considerations-rfc2434bis.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs), 
     please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
     (Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space 
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="std"  docName="draft-martinelli-ccamp-optical-imp-signaling-00.txt" ipr="full3978">
  <!-- category values: std, bcp, info, exp, and historic
     ipr values: full3667, noModification3667, noDerivatives3667
     you can add the attributes updates="NNNN" and obsoletes="NNNN" 
     they will automatically be output with "(if approved)" -->

  <!-- ***** FRONT MATTER ***** -->

  <front>
    <!-- The abbreviated title is used in the page header - it is only necessary if the 
         full title is longer than 39 characters -->

    <title abbrev="Optical Impairment Signaling ">
    GMPLS
    Signaling Extensions for Optical Impairment Aware Lightpath Setup
    </title>

    <!-- add 'role="editor"' below for the editors if appropriate -->

    <!-- Another author who claims to be an editor -->

    <author fullname="Giovanni Martinelli" initials="G. M." role="editor" surname="Martinelli">
      <organization>Cisco Systems</organization>
      <address>
        <postal>
          <street>via Philips 12</street>
          <code>20052</code>
          <city>Monza</city>
          <country>Italy</country>
        </postal>
        <email>giomarti@cisco.com</email>
      </address>
    </author>

    <author fullname="Andrea Zanardi" initials="A. Z."  role="editor" surname="Zanardi">
      <organization>CREATE-NET</organization>
      <address>
        <postal>
          <street>via della Cascata 56c, Povo</street>
          <code>38100</code>
          <city>Trento</city>
          <country>Italy</country>
        </postal>
        <email>andrea.zanardi@create-net.org</email>
      </address>
    </author>


    <date day="8" month="November" year="2007" />

    <!-- If the month and year are both specified and are the current ones, xml2rfc will fill 
         in the current day for you. If only the current year is specified, xml2rfc will fill 
	 in the current day and month for you. If the year is not the current one, it is 
	 necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the 
	 purpose of calculating the expiry date).  With drafts it is normally sufficient to 
	 specify just the year. -->

    <!-- Meta-data Declarations -->

    <area>General</area>

    <workgroup>Internet Engineering Task Force</workgroup>

    <!-- WG name at the upperleft corner of the doc,
         IETF is fine for individual submissions.  
	 If this element is not present, the default is "Network Working Group",
         which is used by the RFC Editor as a nod to the history of the IETF. -->

    <keyword>kw1</keyword>

    <!-- Keywords will be incorporated into HTML output
         files in a meta tag but they have no effect on text or nroff
         output. If you submit your draft to the RFC Editor, the
         keywords will be used for the search engine. -->

    <abstract>
     <t>
     The problem of provisioning a light-path in a transparent dense wavelength 
     division multiplexing (DWDM) optical island requires the transmission of 
     optical impairment related parameters along the selected route. 
     In this draft we propose the GMPLS signaling protocol (RSVP/RSVP-TE) extensions 
     to transmit optical impairments to setup an optically feasible light-path.
     </t>
    </abstract>
  </front>

  <middle>

    <section title="Introduction">
    <t>
        The current Generalized Multi-Protocol Label Switching (GMPLS) specification
        <xref target="RFC3945"/> and the signalling related documents 
	(<xref target="RFC3471"/>, 
	 <xref target="RFC3473"/>,
	 <xref target="RFC4328"/>) 
	support optical interfaces with different switching capability to setup a light-path 
	while <xref target="RFC4054"/> defines routing optical constrains on routing. 

	<xref target="I-D.bernstein-ccamp-wavelength-switched"/>, 
	defines a framework for identifying key components and issues
	pertaining to wavelength switched optical networks (WSON).
	<xref target="I-D.otani-ccamp-gmpls-lambda-labels"/> 
	propose a global semantic for wavelength generalized labels 
	taking into account light-path specific needs.
    </t> 

    <t>
        In transparent optical networks, physical impairments incurred by  
	non-ideal optical transmission medium accumulate along an optical path.  
	Because of these impairments even if two nodes are connected through an
	optical path, there is no guarantee that the optical signal (light) reaches
	the end node with acceptable signal quality, for example in terms of 
	BER/OSNR/Q-factor limit. 
	For a successful light-path provisioning in a WSON, the set up process 
	must be aware of a set of physical impairments that has effect 
	on the light-path. 
	A complete set of physical impairments will include linear and non-linear impairments.
	This preliminary draft proposes a way to collect the optical path linear impairments 
        in the signaling phase
	by providing suitable extensions to signaling protocol (RSVP/RSVP-TE) assuming that 
	non-linear impairments effects are handled in the network design phase
        considering a bounded OSNR margin <xref target="RFC4054"/>.
    </t>

    <t>
        The management of physical impairments is done only in the 
	signalling process and it  does 
	not require any extension to the traffic engineering database. 
    </t>

    <t>
        The set of parameters carried by the signaling protocol is divided into 
	optical service parameters and optical path parameters:
        <list style="symbols">
        <t>
           The optical service parameters describe the requested signal type, 
           are related to the characteristics of the transponder 
           at source node and hence are not changed at transit nodes.   
        </t>
        <t>
           The optical path parameters describe the signal characteristics evolution along the path
           from source node to destination node, are
           related to the characteristics of the
           various links/subsystems and are updated at each transit node.
           They are divided into mandatory and optional parameters. 
           The mandatory parameters are related to feasibility constraints such as power and OSNR, 
           whereas the optional parameters are extendable linear impairments such as chromatic 
           dispersion (CD), polarization mode dispersion (PMD), crosstalk, etc. The optional 
           parameters can be used to evaluate the feasibility of a light-path more accurately
           as an alternate solution to the bounded OSNR margin evaluation.
           Parameter update methods might use appropriate 
           physical models and are out of scope of this document.

        </t>
        </list>
    </t>

    </section>
    <!--   ##################### END OF 'Introduction' ########################### -->



    <section title="Conventions Used in This Document">
        <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <xref
        target="RFC2119">RFC 2119</xref>.</t>
	<t>
       In additions this document will use terminology from  
       <xref target="RFC2205"/>, 
       <xref target="RFC3209"/>, 
       <xref target="RFC4054"/>, 
       and 
       <xref target="I-D.bernstein-ccamp-wavelength-switched"/>.
       </t>
    </section>



<section title="Optical Path Validation Procedure">

   <t>
      The signaling based validation of an optical path in downstream direction in a 
      transparent network (lambda switched LSP) is implemented 
      by the following procedure:
   </t>
   
   <t>
      <list style="symbols">
      <t>
         The source node signals in the Path message the supported signal types 
	 (FEC and modulation format) and wavelength set (encoded in the LABEL_SET Object)
	  depending on available local transponders.
      </t>
      <t>
         Transit nodes update the Path message pruning non cross-connectable wavelengths
	 (LABEL_SET Object) and computing or measuring the path optical characteristics up 
	 to the outgoing interface (optical impairments).
      </t>
      <t>
         Destination node selects the wavelength and the signal type based on the signaled
	 optical impairments and the available local transponders (supported wavelengths, 
	 sensitivity to optical impairments) and signals the selection in the Resv message.
      </t>
      <t>
         Intermediate nodes process the Resv message cross-connecting the selected 
	 wavelength in incoming and outgoing ports (wavelength continuity constraint).
      </t>
      <t>
         The source node cross-connects the selected wavelength to a local transponder 
	 supporting the selected signal type (FEC and modulation format).
      </t>
      </list>
   </t>

   <t>
      The unavailability of cross-connectable wavelength in intermediate nodes or of 
      transponders supporting the signal in the destination node causes the 
      request failure (PathErr message).
   </t>
   <t>
      The unavailability of the selected wavelength in intermediate nodes or 
      of transponders supporting the signal in the source node 
      (race condition in allocating resources) causes the 
      request failure (ResvErr message).
   </t>
   <t>
      In this document, only the encoding in the RSVP messages of the optical information 
      needed to support the described procedure is defined.
      The specific policies used to select the resources (wavelength and transponders), 
      the models to compute the optical impairments and the procedure to validate the signal
      with respect to the transponder sensitivity are not in the scope of this document.
   </t>


</section>





    <!--   ##################### SECTION ########################### -->
    <section anchor="phys_par_classification_sec" title="Physical Parameter Classification and top level TLV">
      <t>
	 The extensions required to RSVP/RSVP-TE to make them aware 
	 of optical impairments and to setup optically feasible light-paths 
	 requires the following information: 

         <list style="symbols">
         <t>Optical Service Parameters.
             <vspace blankLines="0" /> 
             The standard GENERALIZED_LABEL_REQUEST 
             and TSPEC/FLOW_SPEC objects support the encoding of the information related to 
             service type and service QoS. 
	     However for DWDM networks the end node of an LSP has to know a certain set of specific 
	     optical parameters related to transmitting interface. 
	     <xref target="service_optical_par"/> reports details of these parameters and their
	     encoding.
          </t>

          <t>Optical Path Parameters. 
              <vspace blankLines="0" /> 
	      These attributes are required to support transmission of physical
	      impairment parameters required for the optical path        
	      feasibility evaluation.  Details are presented in 
	      <xref target="optical_path_param_section"/>.
          </t>
        </list>
      </t>

      <t>
      This document defines how to encode the above information through new
      TLVs according to <xref target="RFC4420"></xref>.
      </t>
      <t>
      The proposed encoding scheme for the optical
      parameters defines a TLV (channel optical physical information) 
      associated to a wavelength and a set of sub-TLV for
      each set of service and path parameters.
      </t>

      <t>
      Additional set of parameters can be
      added without affecting the already defined encoding.
      </t>

      <t>
      A TLV sub-object for each available wavelength (PATH message) or selected 
      wavelength (RESV message) is encoded in an LSP_REQUIRED_ATTRIBUTES Object.
      </t>

      <t>
      The TLV sub-object encoding is defined in the next picture.
      </t>

      <figure align="center" anchor="tlv_top_level">
        <preamble></preamble>

        <artwork align="left"><![CDATA[
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             Type              |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Wavelength ID                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
//               Parameters Sub-TLV Sequence                   //
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
            ]]></artwork>

        <postamble></postamble>
      </figure>


      <t>
      Type: optical channel physical parameters info TLV type  (TBA).
      </t>
      <t>
      Length: length of the  TLV object in bytes without the 4 byte header.
      </t>
      <t>
      Wavelength ID: wavelength label identifier according to
      <xref target="I-D.otani-ccamp-gmpls-lambda-labels"/>.
      </t>
      <t>
      Parameters Sub-TLV Sequence: service and path parameters values.
      </t>

      <t>
      The Sub-TLV format is defined in the next picture

      <figure align="center" anchor="sub_tlv_format" >
        <preamble></preamble>

        <artwork align="left"><![CDATA[
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Type       |    Flags      |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
//               Value                                         //
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
            ]]></artwork>

        <postamble></postamble>
      </figure>
      </t>

      <t>
         <list style="empty">
            <t>Type: Sub-TLV type</t>
            <t>Flags: bit-mask defining the management of the Sub-TLV
               <list style="empty">
                  <t>bit 0: Mandatory if set, Optional if unset</t>
                  <t>bit 1: ToUpdate if set, Constant if unset</t>
                  <t>bit 2-7: to be assigned</t>
               </list>
            </t>
            <t>Length: Value field length in bytes</t>
            <t>Value: variable length Sub-TLV content</t>
         </list>
      </t>

      <t>
         The Flags field defines how intermediate nodes manage 
         unrecognized Sub-TLV:
         <list style="empty">
            <t>Unrecognized Constant sub-TLVs are forwarded as-is
            </t>
            <t>Unrecognized Mandatory and ToUpdate sub-TLVs cause
               the reject with a failure of the request
            </t>
            <t>Unrecognized Optional and ToUpdate sub-TLVs are
               silently dropped from the TLV (the value would be
               inaccurate)
            </t>
         </list>
      </t>


    </section>
    <!--   ##################### END OF SECTION ########################### -->


    <!--   ##################### SECTION ########################### -->
    <section anchor="service_optical_par" title="Optical Service Parameters sub-TLV">

      <t>
      The Optical Service Parameters defines the signal transmissions characteristics
      at the source node. This type of information is required at the destination node 
      to verify the
      optical signal compatibility.
      </t>


      <figure align="center" anchor="optical_service_enc">
        <preamble></preamble>
        <artwork align="left"><![CDATA[
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |    Flags      |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             FEC 1             |           Mod Format 1        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//                                                             //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             FEC n             |           Mod Format n        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
            ]]></artwork>
        <postamble></postamble>
      </figure>

      <t>
          <list  style="empty">
               <t>Type: sub-TLV type (=1)</t>
               <t>Flags: Mandatory, Constant</t>
               <t>Length: length of the sub-TLV value in bytes</t>
	       <t>FEC: supported Forward Error Correction Modes (see <xref target="fec_section"/> </t>
	       <t>
	          Mod Format: supported modulation formats (see <xref target="modformat_section"/>)
		  associated with the FEC.
	       </t>
          </list>
       </t>

      <t>
      This sub-TLV is used in the PATH message to signal 
      the full list of optical parameters associated with physical interfaces 
      (signal types and wavelengths) available at 
      the source node. 
      In the RESV message this information is associated to the selected receiving
      interface at the destination node. In the RESV message only one tuple
      (FEC, Mod Format) will be specified.
      </t>


      <section anchor="fec_section" title="Forward Error Correction (FEC)"> 
	<t>
	FEC (16 bits) field is the Forward Error Correction and has the following values:
          <list  style="empty">
               <t>0: no FEC</t>
               <t>1: standard FEC (according to <xref target="ITU.G709"/>)</t>
               <t>
	       2-9: super-FEC according to sub clauses from I.2 to I.9 of 
	       <xref target="ITU.G975.1"/>
	       </t>
	  </list>
        </t>
         <t>
	 Values of the format 1bbb.bbbb.bbbb.bbbb are left to represent
	 vendor specific or proprietary 
	 FEC encoding.
        </t>
       </section>

       <section  anchor="modformat_section"title="Modulation Format">
	<t>
	Mod Format (16 bits) is the available modulation format at the source node. 
	Currently the
	field takes the following values: 
          <list  style="empty">
               <t>0: NRZ</t>
               <t>1: Duo Binary</t>
               <t>2: DPSK</t>
	  </list>
	</t>
	<t>
	  Other values might be defined in the future as technology advance. Also here values with the
	  format 1bbb.bbbb.bbbb.bbbb are left to represent vendor specific or proprietary 
	  modulation formats.
        </t>
 
        </section>

    </section>



    <!--   ##################### SECTION ########################### -->
    <section anchor="optical_path_param_section" title="Optical Path Parameters sub-TLV(s)">
    
        <t> 
           For each available channel, this set of parameters has to be carried through
	   the PATH message
	   to allow the optical feasibility evaluation. 
	   At each hop, the optical node will
	   update these values according to information locally available at the
	   node (say internal amplifiers, wavelength cross connect, etc.). 
	   The way an optical node gets knowledge of this required information (e.g. 
	   through NMS, auto-discovery etc.) is out of the scope of this document.
	</t>

	<t> 
	   This document defines two groups of linear optical parameters. Each group will
	   have  its own sub-TLV.
           <list  style="hanging">

	      <t hangText="Mandatory Linear Optical Parameters"><vspace blankLines="0"/>
	      This set includes Optical Signal Power and the OSNR with
	      associated variances. It represents a minimum set to asses the 
	      feasibility of an optical path. This set
	      will be encoded using a mandatory sub-TLV.
	      </t>
	      
	      <t hangText="Optional Linear Optical Parameters"><vspace blankLines="0"/>
	      This set includes CD, PMD, XT with associated variances.
	      These parameters represent an additional set to
	      allow a more accurate  optical feasibility evaluation.  This set
	      will be encoded using an optional sub-TLV.
	      </t>
	   </list>
        </t>

	<t>
	   Separation between Mandatory and Optional  allows a rough optical feasibility
	   evaluation where network elements support at least the  Mandatory set.
	   Depending on how a WSON is designed, the usage of the mandatory set could be 
	   an operational choice not to overwhelm the control plane while
	   maintaining reliable feasibility estimation. 
	   Moreover it might happens that not all nodes in a networks support both sets of 
	   optical path parameters. With this separation, the light-path signalling still
	   continues to work with a less accurate evaluation.
	</t>

	<t>
	   The choice of optional set of parameters depends on several considerations.
	   They are among those reported by the <xref target="RFC4054"/> and provide
	   sufficient accuracy for the linear impairments evaluation. 
	</t>
	<t>
           For each parameter an error estimation is associated (variance);
           if no error estimation is provided the value MUST be zero.
	</t>


        <!-- ############ SUBSECTION ############## -->
        <section title="Mandatory Linear Optical Parameters">
	<t>
	 The Sub-TLV encode the values of the optical parameters of the
         channel (wavelength) associated to the TLV, measured at
         the node egress interface. 
	</t>

	<figure align="center" anchor="optical_param_encoding_1">
        <preamble></preamble>
        <artwork align="left"><![CDATA[
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |    Type       |    Flags      |           Length              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Signal Optical Power                                         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Signal Optical Power Variance                                |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  OSRN                                                         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  OSNR Variance                                                |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
            ]]></artwork>
        <postamble></postamble>
	</figure>

	<t>
	  <list style="empty">
	      <t>
	         Type: sub-TLV type (TBA).
	      </t>
	      <t>
	       Flags: Mandatory, ToUpdate.
	      </t>
	      <t>
	        Length: length of the sub-TLV value in bytes.
	      </t>
	      <t>
	       Signal Optical Power. 32-bit IEEE floating point number. Measurement Unit: dBm.
	      </t>
	      <t>
	       Signal Optical Power Variance. 32-bit IEEE floating point number.
	      </t>
	      <t>
	       OSNR. 32-bit IEEE floating point number. Measurement Unit: dB.
	      </t>
	      <t>
	       OSNR Variance. 32-bit IEEE floating point number.
	      </t>
	  </list>
	</t>

	</section>


    <!-- ############ SUBSECTION ############## -->

        <section title="Optional Linear Optical Parameters">

	<t>
	 The Sub-TLV encode the values of the optional optical parameters of the
         channel (wavelength) associated to the TLV, measured at
         the node egress interface.	
	 This Sub_TLV is defined 
	 as LSP_ATTRIBUTES. 
	</t>


	<figure align="center" anchor="optical_param_encoding_2">
	<preamble></preamble>
	<artwork align="left"><![CDATA[
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |    Type       |    Flags      |           Length              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  CD                                                           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  CD Variance                                                  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  PMD                                                          |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  PMD Variance                                                 |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  CrossTalk                                                    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  CrossTalk Variance                                           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
            ]]></artwork>
        <postamble></postamble>
	</figure>


	<t>
	  <list style="empty">
	      <t>
	         Type: sub-TLV type (TBA).
	      </t>
	      <t>
	       Flags: Optional, ToUpdate.
	      </t>
	      <t>
	        Length: length of the sub-TLV value in bytes.
	      </t>
	      <t>
	          CD, Chromatic Dispersion. 32-bit IEEE floating point number. Measurement Unit: ps/nm.
	      </t>
	      <t>
	          CD Variance. 32-bit IEEE floating point number.
	      </t>
	      <t>
	         PMD, Polarization Mode Dispersion. 32-bit IEEE floating point number. Measurement Unit: ps.
	      </t>
	      <t>
	          PMD Variance. 32-bit IEEE floating point number.
	      </t>
	      <t>
	         CrossTalk. 32-bit IEEE floating point number. Measurement Unit: dB.
	      </t>
	      <t>
	         CrossTalk Variance. 32-bit IEEE floating point number.
	      </t>
	  </list>
	</t>

      </section>


    </section>  <!-- END OF Opticat Path Parameters -->



    <!--   ##################### SECTION ########################### -->

<section anchor="message_fragmentation" title="Message Fragmentation">

    <t>
      In certain cases, the state information carried by the Path message 
      can be quite large. Size estimation for a  physical Optical Channel TLV 
      (see <xref target="tlv_top_level"/>) can be the following: 
      8 bytes for type, length and wavelength ID plus, 16 bytes for the
      Optical Service Parameters sub-TLV considering 3 FEC/modulation format
      combinations plus, 20 bytes for the Mandatory Linear Optical Path 
      parameters plus 28 bytes for the Optional Linear Optical Parameter sub-TLV.
      Total is 44 bytes for each wavelength by just considering mandatory sub-TLVs
      and 72 bytes by considering also the optional part.
      Given the number of wavelengths today available in  DWDM networks, 
      the size of the path message end up in large values. 
      For example to signal just 32 wavelengths the size required for the 
      physical optical parameters ranges at least from  1408 to 2304 bytes.  
    </t>

    <t>
      One possible option is to let the application layer requesting the 
      light-path setup to decide how many wavelengths to signal.
      So, for example, the application layer might ask to signal at most
      10 wavelengths at a time to make sure the path message will stay
      within the MTU limit for its network.
    </t>

    <t>
      A second solution proposed here allows the semantic fragmentation
      as suggested by <xref target="RFC2205">RSVP</xref>. 
      The proposed encoding extends the SENDER_TEMPLATE
      with  new ClassType (derived from the LSP_TUNNEL_IPv4 and  
      LSP_TUNNEL_IPv6  
      <xref target="RFC3209">RSVP-TE</xref>).
      The Object includes the information on the 
      "fragment id" and the requested policy at the destination
      node
    </t>

      <figure align="center" anchor="sender_template_ipv4">
        <preamble>
	Class = SENDER_TEMPLATE, FRAGREQ_LSP_TUNNEL_IPv4 C-Type = TBA
	</preamble>

        <artwork align="left"><![CDATA[
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                   IPv4 tunnel sender address                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       Reserved                |            LSP ID             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| TotalNo       |  MsgId        |  P    |  Timeout              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
            ]]></artwork>
      </figure>

      <figure align="center" anchor="sender_template_ipv6" >
        <preamble>
	Class = SENDER_TEMPLATE, FRAGREQ_LSP_TUNNEL_IPv6 C-Type = TBA
	</preamble>

        <artwork align="left"><![CDATA[
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                                                               +
|                   IPv6 tunnel sender address                  |
+                                                               +
|                            (16 bytes)                         |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       Reserved                |            LSP ID             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| TotalNo       |  MsgId        |  P    |  Timeout              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
            ]]></artwork>
      </figure>
      
      <t> 
      Besides fields already defined in the SENDER_TEMPLATE, the following  
      fields are defined here: 
          <list hangIndent="4" style="symbols">
             <t>
	     TotalNo: 8 bit integer representing the total number of Path messages 
	     issued by the
	     source node to setup a single light-path. When this values is equals to 1
	     all the other fields MUST be ignored.
	     </t>
             <t>
	     MsgId: 8 bit integer representing a sequential number of a 
	     single Path request. 
	     Its value must be between 1 and TotalNo, both inclusive. 
	     </t>
             <t>
	     P: Policy the destination node must apply upon receiving a fragmented path request:
               <list hangIndent="8" style="empty">
                   <t>1: Take the first message arrived and ignore the following ones.</t>
                   <t>2: After the first message arrived, wait for any messages within the
		    specified Timeout.</t>
                   <t>3: After the first message arrived, waits for all messages. 
		   Fail, if the timeout expires, and there's at least one message missing
		   </t>
	       </list>
               The Destination node should "reject" (PathERR) all
               the requests except for the selected one, even if it could 
               rely on the RSVP timeout to clear the unselected requests status
               in intermediate nodes.
	     </t>
             <t>
	     Timeout: 12 bits integer number representing the timeout value used by the policy. 
	     The value is in s/100 (hundreds of seconds)
	     All messages MUST have the same value. 
	     </t>
	  </list>
      </t>

      <t>
        This type of encoding is a  generic solution to manage the 
        semantic fragmentation and its not strictly related to 
	optical parameters encoding.
      </t>
   

</section>
<!--   ##################### END OF SECTION ########################### -->


<section anchor="backward_compat" title="Backward Compatibility">
    
    <t> 
    The TLV usage as defined by <xref target="RFC4420"/> will guarantee the 
    co-existence of nodes supporting normal RSVP-TE operations and node with optical 
    impairment signaling capability.
    </t>

    <t> 
    A service with the new feature (optical feasibility evaluation) can be setup 
    only if all the nodes in the path support the extensions. 
    Optical Path Parameters 
    are updated hop-by-hop and evaluated at destination node. 
    If an intermediate node does 
    not support the extensions the collected information is unreliable and the
    Path request MUST be rejected. 
    </t>

</section>

<section anchor="error_management" title="Error management">

    <t>
       No additional error code is introduced to manage requests
       failures; the behavior defined in <xref target="RFC4420"/>
       applies to the management of the LSP_REQUIRED_ATTRIBUTES
       Object.
    </t>

</section>

<!--  ############################## -->
<section anchor="Acknowledgements" title="Acknowledgements">
   <t> 
   </t>
</section>


<!--  ############################## -->
<section anchor="Contributors" title="Contributing Authors">

     <t> This document was the collective work of several authors.  The text
	 and content of this document was contributed by the editors and the
	 co-authors listed below (the contact information for the editors
	 appears in appropriate section and is not repeated below):
     </t>
 
<figure align="left">
   <artwork align="left"><![CDATA[
   Gabriele Maria Galimberti              Alberto Tanzi
   Cisco Systems                          Cisco Systems
   via Philips 12                         via Philips 12
   Monza  20052                           Monza  20052
   Italy                                  Italy    

   Email: ggalimbe@cisco.com              Email: atanzi@cisco.com

   Domenico La Fauci                      Stefano Piciaccia
   Cisco Systems                          Cisco Systems
   via Philips 12                         via Philips 12 
   Monza  20052                           Monza  20052                 
   Italy                                  Italy

   Email: dlafauci@cisco.com              Email: spiciacc@cisco.com


   Elio Salvadori                         Yabin  Ye 
   CREATE-NET                             CREATE-NET
   via della Cascata 56c, Povo            via della Cascata 56c, Povo
   Trento  38100                          Trento  38100
   Italy                                  Italy

   Email: elio.salvadori@create-net.org   Email: yabin.ye@create-net.org


   Chava Vijaya Saradhi
   CREATE-NET 
   via della Cascata 56c, Povo
   Trento  38100 
   Italy

   Email: saradhi.chava@create-net.org

   

  ]]></artwork>
</figure>

</section>



<section anchor="IANA" title="IANA Considerations">

      <t>This memo needs the follwing request to IANA
      <list style="empty">
      <t>TLV (see <xref target="tlv_top_level"/> in <xref target="phys_par_classification_sec"/>)</t>
      <t>New class type for sender template (see <xref target="message_fragmentation"/>) </t>
      </list>
      </t>

      <t>All drafts are required to have an IANA considerations section (see
      <xref target="I-D.narten-iana-considerations-rfc2434bis">the update of
      RFC 2434</xref> for a guide). If the draft does not require IANA to do
      anything, the section contains an explicit statement that this is the
      case (as above). If there are no requirements for IANA, the section will
      be removed during conversion into an RFC by the RFC Editor.</t>
    </section>

    <section anchor="Security" title="Security Considerations">
      <t>
      This document introduces no new security considerations to <xref target="RFC3473"/>. 
      GMPLS security is described in section 11 of <xref target="RFC3471"/> and refers to 
      <xref target="RFC3209"/> for RSVP-TE. 
      </t>
    </section>
  </middle>

  <!--  *****BACK MATTER ***** -->

  <back>
    <!-- References split into informative and normative -->

    <!-- There are 2 ways to insert reference entries from the citation libraries:
     1. define an ENTITY at the top, and use "ampersand character"RFC2629; here (as shown)
     2. simply use a PI "less than character"?rfc include="reference.RFC.2119.xml"?> here
        (for I-Ds: include="reference.I-D.narten-iana-considerations-rfc2434bis.xml")

     Both are cited textually in the same manner: by using xref elements.
     If you use the PI option, xml2rfc will, by default, try to find included files in the same
     directory as the including file. You can also define the XML_LIBRARY environment variable
     with a value containing a set of directories to search.  These can be either in the local
     filing system or remote ones accessed by http (http://domain/dir/... ).-->

    <references title="Normative References">
      <!--?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?-->

      &RFC2119;

      &RFC2205;
      &RFC3209;
      &RFC3471;
      &RFC3473;
      &RFC4420;

      &RFC4328;



      <reference anchor="ITU.G709">
	  <front>
	      <title>
	      Interface for the Optical Transport Network (OTN)
	      </title>
	      <author>
	      <organization>International Telecommunications Union</organization>
	      </author>
	      <date month="March" year="2003"/>
	  </front>
          <seriesInfo name="ITU-T" value="Recommendation G.709"/>
      </reference>

      <reference anchor="ITU.G975.1">
	  <front>
	      <title>
	      Forward Error Correction for high bit rate DWDM Submarine Systems		
	      </title>
	      <author>
	      <organization>International Telecommunications Union</organization>
	      </author>
	      <date month="February" year="2004"/>
	  </front>
          <seriesInfo name="ITU-T" value="Recommendation G.975"/>
      </reference>



    </references>

    <references title="Informative References">
      <!-- Here we use entities that we defined at the beginning. -->
      &RFC3945;

      &RFC4054;

      &I-D.bernstein-ccamp-wavelength-switched;

      &I-D.otani-ccamp-gmpls-lambda-labels;

      &I-D.narten-iana-considerations-rfc2434bis;

      <!-- A reference written by by an organization not a person. -->

    </references>

  </back>

</rfc>
