


Network Working Group                                    F. Templin, Ed.
Internet-Draft                                      Boeing Phantom Works
Intended status: Informational                          December 5, 2008
Expires: June 8, 2009


                   Virtual Enterprise Traversal (VET)
                   draft-templin-autoconf-dhcp-22.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on June 8, 2009.

Abstract

   Enterprise networks connect routers over various link types, and may
   also connect to provider networks and/or the global Internet.  Nodes
   in enterprise networks must have a way to automatically provision IP
   addresses/prefixes and other information, and must also support post-
   autoconfiguration operations even for highly-dynamic networks.  This
   document specifies a Virtual Enterprise Traversal (VET) abstraction
   for autoconfiguration and operation of nodes in enterprise networks.








Templin                   Expires June 8, 2009                  [Page 1]

Internet-Draft                     VET                     December 2008


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Enterprise Characteristics . . . . . . . . . . . . . . . . . .  7
   4.  Autoconfiguration  . . . . . . . . . . . . . . . . . . . . . .  8
     4.1.  Enterprise Interior Router (EIR) Autoconfiguration . . . .  9
     4.2.  Enterprise Border Router (EBR) Autoconfiguration . . . . . 10
       4.2.1.  VET Interface Autoconfiguration  . . . . . . . . . . . 10
       4.2.2.  Inner IP Address/Prefix Delegation and Maintenance . . 12
       4.2.3.  Portable Inner IP Addresses/Prefixes . . . . . . . . . 12
       4.2.4.  Enterprise-edge Interface Autoconfiguration  . . . . . 13
     4.3.  Enterprise Border Gateway (EBG) Autoconfiguration  . . . . 13
     4.4.  VET Host Autoconfiguration . . . . . . . . . . . . . . . . 13
   5.  Post-Autoconfiguration Operation . . . . . . . . . . . . . . . 14
     5.1.  Routing Protocol Participation . . . . . . . . . . . . . . 14
     5.2.  DHCP Prefix Delegation Maintenance . . . . . . . . . . . . 14
     5.3.  IPv6 Prefix Mapping  . . . . . . . . . . . . . . . . . . . 15
     5.4.  IPv6 EBR/EBG Router Discovery  . . . . . . . . . . . . . . 15
     5.5.  Forwarding Packets to Destinations Outside of the
           Enterprise . . . . . . . . . . . . . . . . . . . . . . . . 16
     5.6.  Source Address Verification  . . . . . . . . . . . . . . . 17
     5.7.  Enterprise-Local Communications  . . . . . . . . . . . . . 17
     5.8.  Multicast  . . . . . . . . . . . . . . . . . . . . . . . . 17
     5.9.  Service Discovery  . . . . . . . . . . . . . . . . . . . . 18
   6.  Enterprise Partitioning  . . . . . . . . . . . . . . . . . . . 18
   7.  Securing VET with SEAL . . . . . . . . . . . . . . . . . . . . 18
   8.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 19
   9.  Security Considerations  . . . . . . . . . . . . . . . . . . . 19
   10. Related Work . . . . . . . . . . . . . . . . . . . . . . . . . 20
   11. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 20
   12. Contributors . . . . . . . . . . . . . . . . . . . . . . . . . 20
   13. References . . . . . . . . . . . . . . . . . . . . . . . . . . 21
     13.1. Normative References . . . . . . . . . . . . . . . . . . . 21
     13.2. Informative References . . . . . . . . . . . . . . . . . . 22
   Appendix A.  Duplicate Address Detection (DAD) Considerations  . . 24
   Appendix B.  Change Log  . . . . . . . . . . . . . . . . . . . . . 25
   Author's Address . . . . . . . . . . . . . . . . . . . . . . . . . 28
   Intellectual Property and Copyright Statements . . . . . . . . . . 29












Templin                   Expires June 8, 2009                  [Page 2]

Internet-Draft                     VET                     December 2008


1.  Introduction

   Enterprise networks [RFC4852] connect routers over various link types
   (see: [RFC4861], Section 2.2).  Certain Mobile Ad-hoc Networks
   (MANETs) [RFC2501] can be considered as a challenging example of an
   enterprise network, in that their topologies may change dynamically
   over time and that they may employ little/no active management by a
   centralized network administrative authority.  These specialized
   characteristics for MANETs require careful consideration, but the
   same principles apply equally to other enterprise network scenarios.

   This document specifies a Virtual Enterprise Traversal (VET)
   abstraction for autoconfiguration and runtime operation of nodes in
   enterprises, where addresses of different scopes may be assigned on
   various types of interfaces with diverse properties.  Both IPv4
   [RFC0791] and IPv6 [RFC2460] are discussed within this context.  The
   use of standard DHCP [RFC2131][RFC3315] and neighbor discovery
   [RFC0826][RFC4861] mechanisms is assumed unless otherwise specified.

                             Provider-edge Interfaces
                                  x   x        x
                                  |   |        |
             +--------------------+---+--------+----------+    E
             |                    |   |        |          |    n
             |    I               |   |  ....  |          |    t
             |    n           +---+---+--------+---+      |    e
             |    t           |   +--------+      /|      |    r
             |    e  I   x----+   |  Host  |   I /*+------+--< p  I
             |    r  n        |   |Function|   n|**|      |    r  n
             |    n  t        |   +--------+   t|**|      |    i  t
             |    a  e   x----+              V e|**+------+--< s  e
             |    l  r      . |              E r|**|  .   |    e  r
             |       f      . |              T f|**|  .   |       f
             |    V  a      . |   +--------+   a|**|  .   |    I  a
             |    i  c      . |   | Router |   c|**|  .   |    n  c
             |    r  e   x----+   |Function|   e \*+------+--< t  e
             |    t  s        |   +--------+      \|      |    e  s
             |    u           +---+---+--------+---+      |    r
             |    a               |   |  ....  |          |    i
             |    l               |   |        |          |    o
             +--------------------+---+--------+----------+    r
                                  |   |        |
                                  x   x        x
                           Enterprise-edge Interfaces

                 Figure 1: Enterprise Router Architecture

   Figure 1 above depicts the architectural model for an enterprise



Templin                   Expires June 8, 2009                  [Page 3]

Internet-Draft                     VET                     December 2008


   router.  As shown in the figure, an enterprise router may have a
   variety of interface types including enterprise-edge, enterprise-
   interior, provider-edge, internal-virtual, as well as VET interfaces
   used for encapsulation of inner IP packets within outer IP headers.
   The different types of interfaces are defined, and the
   autoconfiguration mechanisms used for each type are specified.  This
   architecture applies equally for MANET routers, in which enterprise-
   interior interfaces correspond to the wireless multihop radio
   interfaces typically associated with MANETs.  Out of scope for this
   document is the autoconfiguration of provider interfaces, which must
   be coordinated in a manner specific to the service provider's
   network.

   The VET specification represents a functional superset of 6over4
   [RFC2529] and ISATAP [RFC5214], and further supports additional
   encapsulations such as IPsec [RFC4301], SEAL [I-D.templin-seal], etc.
   As a result, VET provides a map-and-encaps architecture using
   IP-in-IP tunneling based on both forwarding table and mapping service
   lookups (defined herein).

   The VET principles can be either directly or indirectly traced to the
   deliberations of the ROAD group in January 1992, and also to still
   earlier works including NIMROD [RFC1753], the Catenet model for
   internetworking [CATENET][IEN48][RFC2775], etc.  [RFC1955] captures
   the high-level architectural aspects of the ROAD group deliberations
   in a "New Scheme for Internet Routing and Addressing [ENCAPS] for
   IPNG".

   VET is related to the present-day activites of the IETF autoconf,
   dhc, ipv6, manet and v6ops working groups.


2.  Terminology

   The mechanisms within this document build upon the fundamental
   principles of IP-within-IP encapsulation.  The terms "inner" and
   "outer" are used throughout this document to respectively refer to
   the innermost IP {address, protocol, header, packet, etc.} *before*
   encapsulation, and the outermost IP {address, protocol, header,
   packet, etc.} *after* encapsulation.  VET also supports the inclusion
   of "mid-layer" encapsulations between the inner and outer layers,
   including IPSec [RFC4301], the Subnetwork Encapsulation and
   Adaptation Layer (SEAL) [I-D.templin-seal], etc.

   The terminology in the normative references apply; the following
   terms are defined within the scope of this document:





Templin                   Expires June 8, 2009                  [Page 4]

Internet-Draft                     VET                     December 2008


   subnetwork
      the same as defined in [RFC3819].

   enterprise
      the same as defined in [RFC4852].

   site
      a logical and/or physical grouping of interfaces that connect a
      topological area less than or equal to the enterprise in scope.  A
      site within an enterprise can be considered as an enterprise unto
      itself.

   Mobile Ad-hoc Network (MANET)
      a connected topology of mobile or fixed routers that maintain a
      routing structure among themselves over MANET link types
      [I-D.clausen-manet-linktype], where a wide variety of MANETs share
      common properties with enterprise networks.  Further information
      on MANETs can be found in [RFC2501].

   enterprise/site/MANET
      throughout the remainder of this document, the term "enterprise"
      is used to collectively refer to any of enterprise/site/MANET,
      i.e., the VET mechanisms and operational principles apply equally
      to enterprises, sites and MANETs.

   enterprise router
      an Enterprise Interior Router, Enterprise Border Router, or
      Enterprise Border Gateway.  As depicted in Figure 1, an enterprise
      router comprises a router function, a host function, one or more
      enterprise-interior interfaces and zero or more internal virtual,
      enterprise-edge, provider-edge and VET interfaces.

   Enterprise Interior Router (EIR)
      a fixed or mobile enterprise router that forwards packets over one
      or more sets of enterprise-interior interface; each set connected
      to a distinct enterprise.

   Enterprise Border Router (EBR)
      an EIR that connects edge networks to the enterprise, and/or
      connects multiple enterprises together.  An EBR configures a
      seperate VET interface over each set of enterprise-interior
      interfaces that connect the EBR to each distinct enterprise, i.e.,
      an EBR may configure mulitple VET interfaces - one for each
      distinct enterprise.  All EBRs are also EIRs.







Templin                   Expires June 8, 2009                  [Page 5]

Internet-Draft                     VET                     December 2008


   Enterprise Border Gateway (EBG)
      an EBR that either directly or indirectly connects the enterprise
      to provider networks and can delegate addresses/prefixes to other
      EBRs within the enterprise.  All EBGs are also EBRs.

   internal-virtual interface
      a virtual interface that is a special case of either an
      enterprise-edge or an enterprise-interior interface.  Internal-
      virtual interfaces that are also enterprise-edge interfaces are
      often loopback interfaces of some form.  Internal-virtual
      interfaces that are also enterprise-interior interfaces are often
      tunnel interfaces of some form configured over another enterprise-
      interior interface.

   enterprise-edge interface
      an EBR's attachment to a link (e.g., an ethernet, a wireless
      personal area network, etc.) on an arbitrarily-complex edge
      network that the EBR connects to an enterprise and/or to provider
      networks.

   provider-edge interface
      an EBR's attachment to the Internet, or to a provider network
      outside of the enterprise via which the Internet can be reached.

   enterprise-interior interface
      a EIR's attachment to a link within an enterprise.  An enterprise-
      interior interface is "neutral" in its orientation, i.e., it is
      inherently neither an enterprise-edge nor provider-edge interface.
      In particular, a packet may need to be forwarded over several
      enterprise-interior interfaces before it is forwarded via either
      an enterprise-edge or provider-edge interface.

   Enterprise Local Address (ELA)
      an enterprise-scoped IP address (e.g., an IPv6 Unique Local
      Address [RFC4193], an IPv4 privacy address [RFC1918], etc.) that
      is assigned to an enterprise-interior interface and unique within
      the enterprise.  ELAs are used as identifiers for operating the
      routing protocol and/or locators for packet forwarding within the
      scope of the enterprise; ELAs are also used as *outer* IP
      addresses during encapsulation.

   Virtual Enterprise Traversal (VET)
      an abstraction that uses IP-in-IP encapsulation to span a multi-
      link enterprise in a single (inner) IP hop.







Templin                   Expires June 8, 2009                  [Page 6]

Internet-Draft                     VET                     December 2008


   VET interface
      an EBR's Non-Broadcast, Multiple Access interface used for Virtual
      Enterprise Traversal.  The EBR configures a VET interface over a
      set of underlying enterprise-interior interface(s) belonging to
      the same enterprise.  When there are multiple distinct enterprises
      (each with their own distinct set of enterprise-interior
      interfaces), the EBR configures a separate VET interface over each
      set of enterprise-interior interfaces, i.e., the EBR configures
      multiple VET interfaces.

      The VET interface encapsulates each inner IP packet in any mid-
      layer headers plus an outer IP header then forwards it on an
      underlying enterprise-interior interface such that the TTL/Hop
      Limit in the inner header is not decremented as the packet
      traverses the enterprise.  The VET interface presents an automatic
      tunneling abstraction that represents the enterprise as a single
      IP hop.

   The following additional acronyms are used throughout the document:

   CGA - Cryptographically Generated Address
   DHCP[v4,v6] - the Dynamic Host Configuration Protocol
   FIB - Forwarding Information Base
   ISATAP - Intra-Site Automatic Tunnel Addressing Protocol
   ND - Neighbor Discovery
   PIO - Prefix Information Option
   PRL - Potential Router List
   RIO - Route Information Option
   RS/RA - IPv6 Neighbor Discovery Router Solicitation/Advertisement
   SEAL - Subnetwork Encapsulation and Adaptation Layer
   SLAAC - IPv6 StateLess Address AutoConfiguation


3.  Enterprise Characteristics

   Enterprises consist of links that are connected by enterprise routers
   as depicted in Figure 1.  All enterprise routers are also Enterprise
   Interior Routers (EIRs), and typically participate in a routing
   protocol over enterprise-interior interfaces to discover routes that
   may include multiple Layer-2 or Layer-3 forwarding hops.  Enterprise
   Border Routers (EBRs) are EIRs that connect edge networks and/or join
   multiple enterprises together, while Enterprise Border Gateways
   (EBGs) are EBRs that either directly or indirectly connect
   enterprises to provider networks.

   An enterprise may be as simple as a small collection of enterprise
   routers (and their attached edge networks); an enterprise may also
   contain other enterprises and/or be a subnetwork of a larger



Templin                   Expires June 8, 2009                  [Page 7]

Internet-Draft                     VET                     December 2008


   enterprise.  An enterprise may further encompass a set of branch
   offices and/or nomadic hosts connected to a home office over one or
   several service providers, e.g., through Virtual Private Network
   (VPN) tunnels.

   Enterprises that comprise link types with sufficiently similar
   properties (e.g., Layer-2 (L2) address formats, maximum transmission
   units (MTUs), etc.) can configure a sub-IP layer routing service such
   that IP sees the enterprise as an ordinary shared link the same as
   for a (bridged) campus LAN.  In that case, a single IP hop is
   sufficient to traverse the enterprise without IP layer encapsulation.

   Enterprises that comprise link types with diverse properties and/or
   configure multiple IP subnets must also provide a routing service
   that operates as an IP layer mechanism.  In that case, multiple IP
   hops may be necessary to traverse the enterprise such that specific
   autoconfiguration procedures are necessary to avoid multilink subnet
   issues [RFC4903].  In particular, we describe herein the use of IP-
   in-IP encapsulation to span the enterprise in a single (inner) IP hop
   in order to avoid the multilink subnet issues that arise when
   enterprise-interior interfaces are used directly by applications.

   Conceptually, an enterprise router (i.e, an EIR/EBR/EBG) embodies
   both a host function and router function.  The host function supports
   global-scoped communications over any of the enterprise router's non-
   enterprise-interior interfaces according to the weak end system model
   [RFC1122] and also supports enterprise-local-scoped communications
   over its enterprise-interior interfaces.  The router function
   connects the enterprise router's attached edge networks to the
   enterprise and/or connects the enterprise to other networks including
   the Internet (see: Figure 1).

   In addition to other interface types, EBRs configure VET interfaces
   that view all other EBRs in an enterprise as single-hop neighbors,
   where the enterprise can also appear as a single IP hop within
   another enterprise.  EBRs configure a separate VET interface for each
   distinct enterprise to which they connect, and discover a list of
   EBRs for each VET interface that can be used for forwarding packets
   to off-enterprise destinations.  The following sections present the
   Virtual Enterprise Traversal approach.


4.  Autoconfiguration

   EIRs configure enterprise-interior interfaces.  An EBR is an EIR that
   also configures enterprise-edge and VET interfaces.  An EBG is an EBR
   that also either directly or indirectly connects the enterprise to a
   provider network.  EIRs, EBRs and EBGs configure themselves for



Templin                   Expires June 8, 2009                  [Page 8]

Internet-Draft                     VET                     December 2008


   operation according to the following subsections:

4.1.  Enterprise Interior Router (EIR) Autoconfiguration

   EIRs configure enterprise-interior interfaces and engage in routing
   protocols over those interfaces.

   When an EIR joins an enterprise, it first configures a unique IPv6
   link-local address on each enterprise-interior interface that
   requires an IPv6 link-local capability and an IPv4 link-local address
   on each enterprise-interior interface that requires an IPv4 link-
   local capability.  IPv6 link-local address generation mechanisms that
   provide sufficient uniqueness include Cryptographically Generated
   Addresses (CGAs) [RFC3972], IPv6 Privacy Addresses [RFC4941],
   StateLess Address AutoConfiguration (SLAAC) using EUI-64 interface
   identifiers [RFC4862], etc.  The mechanisms specified in [RFC3927]
   provide an IPv4 link-local address generation capability.

   Next, the EIR configures an Enterprise Local Address (ELA) of the
   outer IP protocol version on each of its enterprise-interior
   interfaces and engages in any routing protocols on those interfaces.
   The EIR can configure an ELA via explicit management, DHCP
   autoconfiguration, pseudo-random self-generation from a suitably
   large address pool, or through an alternate autoconfiguration
   mechanism.  In some enterprise use cases (e.g., highly dynamic
   MANETs), assignment of ELAs as singleton addresses (i.e., as /32s for
   IPv4 and /128s for IPv6) may be necessary to avoid multilink subnet
   issues.

   EIRs that configure ELAs using DHCP may require relay support from
   other EIRs within the enterprise; the EIR can alternatively configure
   both a DHCP client and relay that are connected, e.g., via a pair of
   back-to-back connected ethernet interfaces, a tun/tap interface, a
   loopback interface, custom S/W coding, etc.  For DHCPv6, relays that
   do not already know the ELA of a server relay requests to the
   'All_DHCP_Servers' site-scoped IPv6 multicast group.  For DHCPv4,
   relays that do not already know the ELA of a server relay requests to
   the site-scoped IPv4 multicast group address TBD (see: Section 8).
   DHCPv4 servers that delegate ELAs join the TBD multicast group and
   service any DHCPv4 messages received for that group.

   Self-generation of ELAs for IPv6 can be from a large IPv6 local-use
   address range, e.g., IPv6 Unique Local Addresses [RFC4193].  Self-
   generation of ELAs for IPv4 can be from a large IPv4 private address
   range (e.g., [RFC1918]).  When self-generation is used alone, the EIR
   must continuously monitor the ELAs for uniqueness, e.g., by
   monitoring the routing protocol, but care must be taken in the
   interaction of this monitoring with existing mechanisms.



Templin                   Expires June 8, 2009                  [Page 9]

Internet-Draft                     VET                     December 2008


   A combined approach using both DHCP and self-generation is also
   possible in which the EIR first self-generates a temporary ELA used
   only for the purpose of procuring an actual ELA taken from a disjoint
   addressing range.  The EIR then assigns the temporary ELA to an
   enterprise-interior interface, engages in the routing protocol and
   performs a DHCP client/relay exchange using the temporary ELA as the
   address of the relay.  When the DHCP server delegates an actual ELA,
   the EIR abandons the temporary ELA, assigns the actual ELA to the
   enterprise-interior interface and re-engages in the routing protocol.

4.2.  Enterprise Border Router (EBR) Autoconfiguration

   EBRs are EIRs that configure enterprise-edge interfaces and also
   configure VET interfaces over sets of underlying enterprise-interior
   interfaces.  Note that an EBR may connect to multiple distinct
   enterprises, in which case it would configure multiple VET
   interfaces.  EBRs perform the following autoconfiguration operations:

4.2.1.  VET Interface Autoconfiguration

   VET interface autoconfiguration entails: 1) interface initialization,
   2) EBG discovery and enterprise identification, and 3) IPv6 stateless
   address autoconfiguration.  These functions are specified in the
   following sections:

4.2.1.1.  Interface Initialization

   EBRs configure a VET interface over a set of underlying enterprise-
   interior interfaces belonging to the same enterprise, where the VET
   interface presents a virtual view of all EBRs in the enterprise as
   single hop neighbors through the use of IP-in-IP encapsulation.

   When IPv6 and IPv4 are used as the inner/outer protocols
   (respectively), the EBR autoconfigures an ISATAP link-local address
   ([RFC5214], Section 6.2) on the VET interface to support packet
   forwarding and operation of the IPv6 neighbor discovery protocol.
   The ISATAP link-local address embeds an IPv4 ELA assigned to an
   underlying enterprise-interior interface, and need not be checked for
   uniqueness since the IPv4 ELA itself was already determined to be
   unique (see: Section 4.1).  Link-local address configuration for
   other inner/outer IP protocol combinations is through administrative
   configuration or through an unspecified alternate method.

   After the EBR configures a VET interface, it can communicate with
   other EBRs as single-hop neighbors from the viewpoint of the inner IP
   protocol (where discovery of other EBRs is discussed in Section 5.4).
   The EBR can also confirm reachability of other EBRs through Neighbor
   Discovery (ND) and/or DHCP exchanges over the VET interface, or



Templin                   Expires June 8, 2009                 [Page 10]

Internet-Draft                     VET                     December 2008


   through other means such as information conveyed in the routing
   protocol.

   The EBR must be able to detect and recover from the loss of VET
   interface neighbors due to, e.g., network partitions, node failures,
   etc.  Mechanisms specified outside of this document such as
   monitoring the routing protocol, ND beaconing/polling, DHCP renewals/
   leasequeries, upper layer protocol hints of forward progress,
   bidirectional forward detection, detection of network attachment,
   etc. can be used according to the particular deployment scenario.

4.2.1.2.  Enterprise Border Gateway Discovery and Enterprise
          Identification

   After the EBR configures its VET interfaces, it next discovers a list
   of EBGs for each distinct enterprise to which it connects.  The list
   can be discovered through information conveyed in the routing
   protocol and/or through the Potential Router List (PRL) discovery
   mechanisms outlined in [RFC5214], Section 8.3.2.

   In particular, whether or not routing information is available the
   EBR can discover the list of EBGs by resolving an identifying name
   for the enterprise using an enterprise local name resolution service
   (e.g., and enterprise-wide DNS service, LLMNR [RFC4759], etc.).  In
   the absence of other identifying names, the EBR can resolve either
   the hostname "6over4" or the FQDN "6over4.example.com" (i.e., if an
   enterprise specific suffix "example.com" is known) for multicast
   capable enterprises.  For non-multicast enterprises, the EBR can
   instead resolve the hostname "isatap" or the FQDN
   "isatap.example.com".

   Identifying names along with addresses of EBGs and/or the prefixes
   they aggregate serve as an identifier for the enterprise.

4.2.1.3.  IPv6 Stateless Address Autoconfiguration (SLAAC)

   When IPv6 is used as the inner protocol, the EBR sends unicast IPv6
   Router Solicitation (RS) messages over its VET interface(s) to
   receive Router Advertisements (RAs) from EBGs.  When the EBR receives
   an RA containing Prefix Information Options (PIOs) with the 'A' and
   'L' bits set to 1, it autoconfigures IPv6 addresses from the prefixes
   using SLAAC and assigns them to the VET interface.  (When IPv4 is
   used as the outer IP protocol, the addresses are autoconfigured and
   assigned as ISATAP addresses the same as specified in [RFC5214].)

   The use of DHCPv6 for address configuration on VET interfaces is
   undefined.




Templin                   Expires June 8, 2009                 [Page 11]

Internet-Draft                     VET                     December 2008


4.2.2.  Inner IP Address/Prefix Delegation and Maintenance

   EBRs acquire inner IP protocol addresses and/or prefix delegations
   through autoconfiguration exchanges via EBGs over VET interfaces, as
   discussed in the following sections:

4.2.2.1.  IPv4 Addresses/Prefix Delegation

   When IPv4 is used as the inner IP protocol, the EBR acquires IPv4
   prefixes for sub-delegation and/or assignment on its enterprise-edge
   interfaces.  This could be via an unspecified automated prefix
   delegation exchange, explicit management, etc.

4.2.2.2.  IPv6 Addresses/Prefix Delegation

   If the EBR receives an RA from an EBG that contains PIOs with the 'L'
   bit set to 0, it can use the PIOs as hints of prefixes a DHCPv6
   server reachable via the EBG may be willing to delegate (see:
   Section 5.4).  Whether or not such hints are available, the EBR
   (acting as a requesting router) can use DHCPv6 prefix delegation
   [RFC3633] over the VET interface to obtain IPv6 prefixes from the
   server (acting as a delegating router).  The EBR can then use the
   delegated prefixes for sub-delegation on enterprise-edge networks
   and/or assignment on its enterprise-edge interfaces.

   The EBR obtains prefixes using either a 2-message or 4-message DHCPv6
   exchange [RFC3315].  For example, to perform the 2-message exchange
   the EBR's DHCPv6 client forwards a Solicit message with an IA_PD
   option to its DHCPv6 relay, i.e., the EBR acts as a combined client/
   relay (see: Section 4.1).  The relay then forwards the message over
   the VET interface to the server via the EBG.  The forwarded Solicit
   message will elicit a Reply from the server containing IPv6 prefix
   delegations.

   The EBR can also propose a specific prefix to the DHCPv6 server per
   Section 7 of [RFC3633], e.g., if a prefix delegation hint is
   available.  The server will check the proposed prefix for consistency
   and uniqueness, then return it in the reply to the EBR if it was able
   to perform the delegation.  The EBR can use mechanisms such as CGAs
   [RFC3972], IPv6 privacy address [RFC4941], etc. to self-generate
   addresses in conjunction with prefix delegation.

4.2.3.  Portable Inner IP Addresses/Prefixes

   Independent of any inner IP address/prefix delegations (see:
   Section 4.2.2), an EBR can also use portable IP addresses/prefixes
   (e.g., taken from a home network) and/or self-configured IP
   addresses/prefixes (e.g., IPv6 Unique Local Addresses (ULAs)



Templin                   Expires June 8, 2009                 [Page 12]

Internet-Draft                     VET                     December 2008


   [RFC4193][I-D.ietf-ipv6-ula-central]).  Indeed, the mechanisms
   defined herein easily support portable addresses/prefixes for
   enterprises that choose to use them.

   The EBR can continue to use these addresses/prefixes as it travels
   between visited enterprise networks as long as it coordinates in some
   fashion with a mapping agent, prefix aggregation authority, etc.
   EBRs can also sub-delegate portable (and other self-configured)
   prefixes to requesting routers on networks connected on their
   enterprise-edge interfaces as well as to EBRs in other enterprises.

4.2.4.  Enterprise-edge Interface Autoconfiguration

   After the EBR receives inner IP address/prefix delegations (see:
   Section 4.2.2), it assigns them on enterprise-edge interfaces only;
   it does not assign them on provider-edge, VET, or enterprise-interior
   interfaces (see: [RFC3633], Section 12.1).

   Similarly, the EBR can assign portable and/or self-configured
   addresses/prefixes (see: Section 4.2.3) on enterprise-edge
   interfaces.

4.3.  Enterprise Border Gateway (EBG) Autoconfiguration

   EBGs are EBRs that connect an enterprise to a service provider either
   directly via provider-edge interfaces or indirectly via another
   enterprise.  EBGs configure provider-edge interfaces in a manner that
   is specific to its provider connections.  EBGs should also configure
   a DHCP relay/server that can service prefix delegation requests from
   EBRs.

   EBGs must arrange to add their enterprise-interior interface
   addresses to the PRL (see: Section 4.2.1.2), and must maintain these
   resource records in accordance with ([RFC5214], Section 9).

   EBGs add their enterprise-interior interface addresses to the
   hostname "isatap" and/or the FQDN "isatap.example.com"; EBGs that
   connect to multicast-capable enterprises additionally add these
   addresses to the hostname "6over4" and/or the FQDN
   "6over4.example.com".

4.4.  VET Host Autoconfiguration

   Non-routing hosts that cannot be attached via an EBR's enterprise-
   edge interface (e.g., nomadic laptops that connect to a home office
   via a Virtual Private Network (VPN)) can instead be configured for
   operation as a simple host connected to the VET interface.  Such VET
   hosts configure one or more VET interfaces over corresponding sets of



Templin                   Expires June 8, 2009                 [Page 13]

Internet-Draft                     VET                     December 2008


   enterprise-interior interfaces exactly as for EBRs, but they do not
   configure a router function nor provide packet forwarding services
   for nodes on enterprise-edge interfaces.  VET hosts can then send
   packets to other hosts on the VET interface, or to off-enterprise
   destinations via a next-hop EBR.


5.  Post-Autoconfiguration Operation

   The following sections discuss post-autoconfiguration operations:

5.1.  Routing Protocol Participation

   After an EIR has been autoconfigured, it participates in any routing
   protocols over enterprise-interior interfaces and forwards outer IP
   packets within the enterprise as for any ordinary router.

   EBRs can additionally engage in any inner IP routing protocols over
   enterprise-edge, provider-edge and VET interfaces, and can use those
   interfaces for forwarding inner IP packets to off-enterprise
   destinations.  Note that these inner IP routing protocols are
   separate and distinct from any enterprise-interior routing protocols.

5.2.  DHCP Prefix Delegation Maintenance

   When DHCP prefix delegation is used, the DHCP server ensures that the
   delegations are unique and that the EBG's router function will
   forward IP packets over the VET interface to the EBRs to which the
   prefixes were delegated.  The EBRs can then sub-delegate inner IP
   prefixes to requesting routers on networks connected on their
   enterprise-edge interfaces as well as to EBRs in other enterprises.

   The DHCP prefix delegations remain active as long as the EBR
   continues to issue renewals over the VET interface before lease
   lifetimes expire.  The lease lifetime also keeps the delegation state
   active even if communications between the EBR and DHCP server are
   disrupted for a period of time (e.g., due to an enterprise network
   partition) before being reestablished (e.g., due to an enterprise
   network merge).

   Since the DHCP client and relay are co-resident on the same EBR, no
   special coordination is necessary for the EBG to maintain routing
   information.  The EBG simply retains Forwarding Information Base
   (FIB) entries that identify the EBR as the next-hop toward the prefix
   over the VET interface.






Templin                   Expires June 8, 2009                 [Page 14]

Internet-Draft                     VET                     December 2008


5.3.  IPv6 Prefix Mapping

   EBRs in enterprises that are managed under a cooperative
   administrative authority should use the enterprise name service
   (e.g., the DNS [RFC1035]) as the IPv6 prefix mapping service.  EBRs
   in enterprises that are managed in a distributed fashion should
   implement their own distributed name resolution service (e.g., LLMNR
   [RFC4759]).

   For each /64 IPv6 prefix reachable via one of its enterprise edge
   interfaces, the EBR configures the IPv6 subnet router anycast address
   for the prefix [RFC4291], e.g., on a loopback interface.  The EBR
   then publishes the most-significant 64 bits of the prefix in the
   enterprise name service using the domain name suffix
   'isatap.example.com'.  The EBR publishes the prefix as a domain name
   containing a sequence of 16 nibbles in reverse order using a format
   corresponding to that specified in ([RFC3596], Section 2.5).  For
   example, the EBR publishes the prefix 2001:DB8::/64 as:
   '0.0.0.0.0.0.0.0.8.b.d.0.1.0.0.2.isatap.example.com'.  For
   publications within the interdomain global DNS itself, the domain
   name suffix 'isatap.net' is used instead of 'isatap.example.com'.

   The EBR includes in the publication IPv4 addresses (e.g., in DNS A
   records) taken from the EBR's enterprise interior interfaces, and an
   IPv6 link-local CGA address [RFC3972] (e.g., in DNS AAAA records)
   that other nodes can use to uniquely identify the EBR (or one of a
   group of redundant EBRs).  In enterprises with a cooperative
   administrative authority, EBRs coordinate their publications with an
   administrator and/or by using a secure automated name service update
   mechanism (e.g., [RFC3007]).  In enterprises that are managed in a
   distributed fashion, EBRs publish their /64 IPv6 prefixes through
   direct responses to distributed name resoultion service queries.

   In this way, the name service itself becomes an extension of the
   enterprise's PRL.

5.4.  IPv6 EBR/EBG Router Discovery

   EBGs follow the router and prefix discovery procedures specified in
   ([RFC5214], Section 8.2).  They send RAs over VET interfaces for
   which they are gateways with PIOs for SLAAC, with the 'M' flag set to
   0 and with the 'O' flag set to indicate whether "other" DHCP services
   are available.  EBGs can also include PIOs with the 'L' bit set to 0
   and with a prefix such as 2001:DB8::/48 as a hint of an aggregated
   prefix from which it is willing to delegate longer prefixes.

   VET hosts and EBRs follow the router and prefix discovery procedures
   specified in ([RFC5214], Section 8.3).  They discover EBGs by



Templin                   Expires June 8, 2009                 [Page 15]

Internet-Draft                     VET                     December 2008


   resolving the names "6over4.example.com" and/or "isatap.example.com";
   in some multicast-capable deployments, they can also derive hints of
   EBG reachability by listening for advertisements on the 'rasadv'
   [RASADV] IPv4 multicast group address.

   VET hosts and EBRs discover the EBRs for specific IPv6 prefixes by
   querying the name service for the /64 IPv6 prefix corresponding to a
   packet's destination address.  For example, for the IPv6 destination
   address 2001:DB8:1:2::1 the VET host/EBR queries the
   'isatap.example.com' domain for the domain name:
   '2.0.0.0.1.0.0.0.8.b.d.0.1.0.0.2.isatap.example.com'.  The name
   service query will return IPv4 addresses (e.g., in DNS A records)
   that correspond to an EBR's enterprise interior interfaces and an
   IPv6 link-local CGA address (e.g., in DNS AAAA records) that the VET
   host/EBR can use to verify EBR/EBG address ownership.

   VET hosts and EBRs discover default router lifetimes, default router
   preferences and more-specific routes [RFC4191] by sending an RS over
   the VET interface using the link-local CGA address of the EBR/EBG as
   the destination address.  The EBR/EBG returns an RA using Secure
   Neighbor Discovery (SEND) [RFC3971], with the CGA published in the
   name service as the IPv6 link-local source address and with an IPv4
   address taken from its enterprise interior addresses as the IPv4
   address in the outer header.  The VET host/EBR can then use SEND to
   verify that the RA came from the correct EBR/EBG.

   VET hosts and EBRs must only accept PIOs, M/O flag settings and
   default router preferences in RAs that are received from EBGs; they
   MUST NOT accept them from ordinary EBRs.

5.5.  Forwarding Packets to Destinations Outside of the Enterprise

   After default and/or more-specific routes are discovered, VET hosts
   and EBRs can forward IP packets to off-enterprise destinations by
   consulting the FIB to determine a specific EBR/EBG as the next-hop
   router on the VET interface.  When multiple next-hop routers are
   available, VET hosts and EBRs can use default router preferences,
   routing protocol information, traffic engineering configurations,
   etc. to select the best exit router.  When there is no FIB
   information available, VET hosts and EBRs can discover the next-hop
   EBR/EBG through the mechanisms specified in Section 5.4.

   VET interfaces encapsulate inner IP packets in any mid-layer headers
   followed by an outer IP header according to the specific
   encapsulation type (e.g., [RFC4301][RFC5214][I-D.templin-seal]); they
   next submit the encapsulated packet to the outer IP forwarding engine
   for transmission on an underlying enterprise-interior interface.  For
   forwarding to next-hop addresses over VET interfaces that use IPv6-



Templin                   Expires June 8, 2009                 [Page 16]

Internet-Draft                     VET                     December 2008


   in-IPv4 encapsulation, VET hosts and EBRs determine the outer
   destination address through static extraction of the IPv4 address
   embedded in the next-hop ISATAP address.  For other IP-in-IP
   encapsulations, determination of the outer destination address is
   through administrative configuration or through an unspecified
   alternate method.

   When a VET host/EBR forward packets to an EBG that has more
   comprehensive FIB information, the EBG can forward the packet and
   issue ordinary ICMP redirects over the VET interface as necessary.
   If the next-hop corresponds to a node outside the enterprise, the EBG
   decapulates the packet and forwards it the same as for an ordinary
   router.  If the next-hop corresponds to another node on the VET
   interface, however, the EBG forwards the packet without decapsulation
   by rewriting the outer IP destination address but leaving the outer
   IP source address intact.

5.6.  Source Address Verification

   VET hosts and EBRs must verify that the outer IP source address of a
   packet received on a VET interface is correct for the inner IP source
   address using the procedures specified in ([RFC5214], Section 7.3).

5.7.  Enterprise-Local Communications

   When permitted by policy, end systems that configure the endpoints of
   enterprise-local communications can avoid VET interface encapsulation
   by directly invoking the outer IP protocol using ELAs assigned to
   their enterprise-interior interfaces.  For example, when the outer
   protocol is IPv4, end systems can use IPv4 ELAs for enterprise-local
   communications over their enterprise-interior interfaces without
   using the VET interface.

5.8.  Multicast

   In multicast-capable deployments, EIRs provide an enterprise-wide
   multicasting service such as Simplified Multicast Forwarding (SMF)
   [I-D.ietf-manet-smf] over their enterprise-interior interfaces such
   that outer IP multicast messages of site- or greater scope will be
   propagated across the enterprise.  For such deployments, VET hosts
   and EBRs can also provide an inner IP multicast/broadcast capability
   over their VET interfaces through mapping of the inner IP multicast
   address space to the outer IP multicast address space.

   VET hosts and EBRs encapsulate inner IP multicast messages sent over
   the VET interface in any mid-layer headers (e.g., IPsec, SEAL, etc.)
   plus an outer IP header with a site-scoped outer IP multicast address
   as the destination.  For the case of IPv6 and IPv4 as the inner/outer



Templin                   Expires June 8, 2009                 [Page 17]

Internet-Draft                     VET                     December 2008


   protocols (respectively), [RFC2529] provides mappings from the IPv6
   multicast address space to the IPv4 multicast address space.  For
   other IP-in-IP encapsulations, mappings are established through
   administrative configuration or through an unspecified alternate
   method.

   For multicast-capable enterprises, use of the inner IP multicast
   service for operating the ND protocol over the VET interface is
   available but should be used sparingly to minimize enterprise-wide
   flooding.

5.9.  Service Discovery

   VET hosts and EBRs can peform enterprise-wide service discovery using
   a suitable name-to-address resolution service.  Examples of flooding-
   based services include the use of LLMNR [RFC4759] over the VET
   interface or mDNS [I-D.cheshire-dnsext-multicastdns] over an
   underlying enterprise-interior interface.  More scalable and
   efficient service discovery mechanisms are for further study.


6.  Enterprise Partitioning

   EBGs can physically partition an enterprise by configuring multiple
   VET interfaces over multiple distinct sets of underlying interfaces.
   In that case, each partition (i.e., each VET interface) must
   configure its own distinct PRL zone (e.g., 'zone1.example.com',
   'zone2.example.com', etc.).

   EBGs can logically partition an enterprise using a single VET
   interface by sending RAs with PIOs containing different IPv6 subnet
   prefixes to nodes in different logical partitions.  EBGs can identify
   partitions, e.g., by examining IPv4 prefixes, observing the
   interfaces over which RSs are received, etc.  In that case, a single
   PRL zone can cover all partitions.


7.  Securing VET with SEAL

   Enterprises for which use of IPsec is infeasible (or for which
   additional mechanisms are desired) can use SEAL encapsulation
   [I-D.templin-seal] in conjunction with VET to defend against rogue
   routers and source address spoofing.

   When an ingress EBR in an enterprise that uses SEAL encapsulation has
   an IPv6 packet to send but there is no matching FIB entry, it should
   first send an IPv6 RA using the IPv6 subnet router anycast address
   [RFC4291] corresponding to the destination as the RA's destination



Templin                   Expires June 8, 2009                 [Page 18]

Internet-Draft                     VET                     December 2008


   and using its published IPv6 CGA address as the RA's source.  The RA
   should contain SEND parameters and Route Information Options
   [RFC4191] corresponding to the ingress EBR's aggregated IPv6
   prefixes.  The ingress EBR should populate its FIB entries based on
   mapping lookups in parallel with sending the RA to the subnet router
   anycast address; it can optionally buffer the RA and subsequent
   packets while mapping lookups are performed, or it can forward the
   packets immediately via an EBG.

   Using this approach, the ingress EBR can optionally set the
   'Acknolwedgement Requested' bit in the SEAL header to receive L2
   confirmation that an egress EBR has received its RA, and can schedule
   retransmissions if no confirmation is received.  The ingress EBR also
   sets the SEAL_ID in the packet such that the egress EBR can discover
   the current encapsulation sequence number.

   When an egress EBR that configures the subnet router anycast address
   receives the RA, it can use SEND mechanisms to verify that the packet
   came from an authentic ingress EBR and can use the SEAL_ID to track
   the sequence of subsequent packets it receives from the ingress EBR.
   The egress EBR can therefore use the SEAL_ID to detect and discard
   potentially spoofed packets that have IDs outside of the current
   window, and can use the prefixes received from the ingress EBR for
   egress filtering to detect source address spoofing.  The egress EBR
   can also send an RS to elicit an RA from the ingress EBR to refresh
   prefix lifetimes, or at any time state synchronization must be
   reestablished.


8.  IANA Considerations

   A Site-Local Scope IPv4 multicast group (TBD) for DHCPv4 server
   discovery is requested.  The allocation should be taken from the
   239.255.000.000-239.255.255.255 Site-Local Scope range in the IANA
   'multicast-addresses' registry.


9.  Security Considerations

   Security considerations for MANETs are found in [RFC2501].

   Security considerations with tunneling that apply also to VET are
   found in [RFC2529][RFC5214].

   The securing methods specified in Section 7 provide additional
   mitigation against both rogue EBRs (via SEND) and source address
   spoofing (via the SEAL_ID and prefix-based egress filtering).  These
   mechanisms can further be fortifed and made more resiliant against



Templin                   Expires June 8, 2009                 [Page 19]

Internet-Draft                     VET                     December 2008


   DOS attacks when EIRs function as IPv6 RA-Guards
   [I-D.ietf-v6ops-ra-guard].


10.  Related Work

   The authors acknowledge the work done by Brian Carpenter and Cyndi
   Jung in [RFC2529] that introduced the concept of intra-site automatic
   tunneling.  This concept was later called: "Virtual Ethernet" and
   investigated by Quang Nguyen under the guidance of Dr. Lixia Zhang.
   As for this document, these architectural principles also follow from
   earlier works articulated by the ROAD group deliberations of 1992.

   Telcordia has proposed DHCP-related solutions for the CECOM MOSAIC
   program.  The Naval Research Lab (NRL) Information Technology
   Division uses DHCP in their MANET research testbeds.  Various
   proposals within the IETF have suggested similar mechanisms.

   [I-D.ietf-v6ops-tunnel-security-concerns] discusses security concerns
   regarding tunneling mechanisms that may subvert security through
   Network Address Translator (NAT) traversal.

   An automated IPv4 prefix delegation mechanism is proposed in
   [I-D.ietf-dhc-subnet-alloc].


11.  Acknowledgements

   The following individuals gave direct and/or indirect input that was
   essential to the work: Jari Arkko, Teco Boot, Emmanuel Bacelli, James
   Bound, Thomas Clausen, Joel Halpern, Bob Hinden, Joe Macker, Thomas
   Narten, Alexandru Petrescu, John Spence, Jinmei Tatuya, Dave Thaler,
   Ole Troan, Michaela Vanderveen and others in the IETF AUTOCONF and
   MANET working groups.  Many others have provided guidance over the
   course of many years.


12.  Contributors

   The following individuals have contributed to this document:

   Eric Fleischman (eric.fleischman@boeing.com)
   Thomas Henderson (thomas.r.henderson@boeing.com)
   Steven Russert (steven.w.russert@boeing.com)
   Seung Yi (seung.yi@boeing.com)

   Ian Chakeres (ian.chakeres@gmail.com) contributed to earlier versions
   of the document.



Templin                   Expires June 8, 2009                 [Page 20]

Internet-Draft                     VET                     December 2008


13.  References

13.1.  Normative References

   [RFC0791]  Postel, J., "Internet Protocol", STD 5, RFC 791,
              September 1981.

   [RFC0826]  Plummer, D., "Ethernet Address Resolution Protocol: Or
              converting network protocol addresses to 48.bit Ethernet
              address for transmission on Ethernet hardware", STD 37,
              RFC 826, November 1982.

   [RFC1035]  Mockapetris, P., "Domain names - implementation and
              specification", STD 13, RFC 1035, November 1987.

   [RFC2131]  Droms, R., "Dynamic Host Configuration Protocol",
              RFC 2131, March 1997.

   [RFC2460]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", RFC 2460, December 1998.

   [RFC3007]  Wellington, B., "Secure Domain Name System (DNS) Dynamic
              Update", RFC 3007, November 2000.

   [RFC3315]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C.,
              and M. Carney, "Dynamic Host Configuration Protocol for
              IPv6 (DHCPv6)", RFC 3315, July 2003.

   [RFC3596]  Thomson, S., Huitema, C., Ksinant, V., and M. Souissi,
              "DNS Extensions to Support IP Version 6", RFC 3596,
              October 2003.

   [RFC3633]  Troan, O. and R. Droms, "IPv6 Prefix Options for Dynamic
              Host Configuration Protocol (DHCP) version 6", RFC 3633,
              December 2003.

   [RFC3971]  Arkko, J., Kempf, J., Zill, B., and P. Nikander, "SEcure
              Neighbor Discovery (SEND)", RFC 3971, March 2005.

   [RFC3972]  Aura, T., "Cryptographically Generated Addresses (CGA)",
              RFC 3972, March 2005.

   [RFC4191]  Draves, R. and D. Thaler, "Default Router Preferences and
              More-Specific Routes", RFC 4191, November 2005.

   [RFC4291]  Hinden, R. and S. Deering, "IP Version 6 Addressing
              Architecture", RFC 4291, February 2006.




Templin                   Expires June 8, 2009                 [Page 21]

Internet-Draft                     VET                     December 2008


   [RFC4861]  Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
              "Neighbor Discovery for IP version 6 (IPv6)", RFC 4861,
              September 2007.

   [RFC4862]  Thomson, S., Narten, T., and T. Jinmei, "IPv6 Stateless
              Address Autoconfiguration", RFC 4862, September 2007.

   [RFC5214]  Templin, F., Gleeson, T., and D. Thaler, "Intra-Site
              Automatic Tunnel Addressing Protocol (ISATAP)", RFC 5214,
              March 2008.

13.2.  Informative References

   [CATENET]  Pouzin, L., "A Proposal for Interconnecting Packet
              Switching Networks", May 1974.

   [I-D.cheshire-dnsext-multicastdns]
              Cheshire, S. and M. Krochmal, "Multicast DNS",
              draft-cheshire-dnsext-multicastdns-07 (work in progress),
              September 2008.

   [I-D.clausen-manet-linktype]
              Clausen, T., "The MANET Link Type",
              draft-clausen-manet-linktype-00 (work in progress),
              October 2008.

   [I-D.ietf-autoconf-manetarch]
              Chakeres, I., Macker, J., and T. Clausen, "Mobile Ad hoc
              Network Architecture", draft-ietf-autoconf-manetarch-07
              (work in progress), November 2007.

   [I-D.ietf-dhc-subnet-alloc]
              Johnson, R., "Subnet Allocation Option",
              draft-ietf-dhc-subnet-alloc-07 (work in progress),
              July 2008.

   [I-D.ietf-ipv6-ula-central]
              Hinden, R., "Centrally Assigned Unique Local IPv6 Unicast
              Addresses", draft-ietf-ipv6-ula-central-02 (work in
              progress), June 2007.

   [I-D.ietf-manet-smf]
              Macker, J. and S. Team, "Simplified Multicast Forwarding
              for MANET", draft-ietf-manet-smf-08 (work in progress),
              November 2008.

   [I-D.ietf-v6ops-ra-guard]
              Levy-Abegnoli, E., Velde, G., Popoviciu, C., and J.



Templin                   Expires June 8, 2009                 [Page 22]

Internet-Draft                     VET                     December 2008


              Mohacsi, "IPv6 RA-Guard", draft-ietf-v6ops-ra-guard-01
              (work in progress), September 2008.

   [I-D.ietf-v6ops-tunnel-security-concerns]
              Hoagland, J., Krishnan, S., and D. Thaler, "Security
              Concerns With IP Tunneling",
              draft-ietf-v6ops-tunnel-security-concerns-01 (work in
              progress), October 2008.

   [I-D.templin-seal]
              Templin, F., "The Subnetwork Encapsulation and Adaptation
              Layer (SEAL)", draft-templin-seal-23 (work in progress),
              August 2008.

   [IEN48]    Cerf, V., "The Catenet Model for Internetworking",
              July 1978.

   [RASADV]   Microsoft, "Remote Access Server Advertisement (RASADV)
              Protocol Specification", October 2008.

   [RFC1122]  Braden, R., "Requirements for Internet Hosts -
              Communication Layers", STD 3, RFC 1122, October 1989.

   [RFC1753]  Chiappa, J., "IPng Technical Requirements Of the Nimrod
              Routing and Addressing Architecture", RFC 1753,
              December 1994.

   [RFC1918]  Rekhter, Y., Moskowitz, R., Karrenberg, D., Groot, G., and
              E. Lear, "Address Allocation for Private Internets",
              BCP 5, RFC 1918, February 1996.

   [RFC1955]  Hinden, R., "New Scheme for Internet Routing and
              Addressing (ENCAPS) for IPNG", RFC 1955, June 1996.

   [RFC2501]  Corson, M. and J. Macker, "Mobile Ad hoc Networking
              (MANET): Routing Protocol Performance Issues and
              Evaluation Considerations", RFC 2501, January 1999.

   [RFC2529]  Carpenter, B. and C. Jung, "Transmission of IPv6 over IPv4
              Domains without Explicit Tunnels", RFC 2529, March 1999.

   [RFC2775]  Carpenter, B., "Internet Transparency", RFC 2775,
              February 2000.

   [RFC3056]  Carpenter, B. and K. Moore, "Connection of IPv6 Domains
              via IPv4 Clouds", RFC 3056, February 2001.

   [RFC3753]  Manner, J. and M. Kojo, "Mobility Related Terminology",



Templin                   Expires June 8, 2009                 [Page 23]

Internet-Draft                     VET                     December 2008


              RFC 3753, June 2004.

   [RFC3819]  Karn, P., Bormann, C., Fairhurst, G., Grossman, D.,
              Ludwig, R., Mahdavi, J., Montenegro, G., Touch, J., and L.
              Wood, "Advice for Internet Subnetwork Designers", BCP 89,
              RFC 3819, July 2004.

   [RFC3927]  Cheshire, S., Aboba, B., and E. Guttman, "Dynamic
              Configuration of IPv4 Link-Local Addresses", RFC 3927,
              May 2005.

   [RFC4193]  Hinden, R. and B. Haberman, "Unique Local IPv6 Unicast
              Addresses", RFC 4193, October 2005.

   [RFC4301]  Kent, S. and K. Seo, "Security Architecture for the
              Internet Protocol", RFC 4301, December 2005.

   [RFC4759]  Stastny, R., Shockey, R., and L. Conroy, "The ENUM Dip
              Indicator Parameter for the "tel" URI", RFC 4759,
              December 2006.

   [RFC4852]  Bound, J., Pouffary, Y., Klynsma, S., Chown, T., and D.
              Green, "IPv6 Enterprise Network Analysis - IP Layer 3
              Focus", RFC 4852, April 2007.

   [RFC4903]  Thaler, D., "Multi-Link Subnet Issues", RFC 4903,
              June 2007.

   [RFC4941]  Narten, T., Draves, R., and S. Krishnan, "Privacy
              Extensions for Stateless Address Autoconfiguration in
              IPv6", RFC 4941, September 2007.


Appendix A.  Duplicate Address Detection (DAD) Considerations

   A-priori uniqueness determination (also known as "pre-service DAD")
   for an ELA assigned on an enterprise-interior interface (such as
   specified in [RFC4862]) would require either flooding the entire
   enterprise or somehow discovering a link in the enterprise on which a
   node that configures a duplicate address is attached and performing a
   localized DAD exchange on that link.  But, the control message
   overhead for such an enterprise-wide DAD would be substantial and
   prone to false-negatives due to packet loss and intermittent
   connectivity.  An alternative to pre-service DAD is to autoconfigure
   pseudo-random ELAs on enterprise-interior interfaces and employ a
   passive in-service DAD (e.g., one that monitors routing protocol
   messages for duplicate assignments).




Templin                   Expires June 8, 2009                 [Page 24]

Internet-Draft                     VET                     December 2008


   Pseudo-random IPv6 ELAs can be generated with mechanisms such as
   CGAs, IPv6 privacy addresses, etc. with very small probability of
   collision.  Pseudo-random IPv4 ELAs can be generated through random
   assignment from a suitably large IPv4 prefix space.

   Consistent operational practices can assure uniqueness for EBG-
   aggregated addresses/prefixes, while statistical properties for
   pseudo-random address self-generation can assure uniqueness for the
   ELAs assigned on an EIR's enterprise-interior interfaces.  Still, an
   ELA delegation authority should be used when available, while a
   passive in-service DAD mechanism should be used to detect ELA
   duplications when there is no ELA delegation authority.


Appendix B.  Change Log

   (Note to RFC editor - this section to be removed before publication
   as an RFC.)

   Changes from -21 to 22:

   o  Using SEAL to secure VET

   Changes from -20 to 21:

   o  Enterprise partitioning.

   o  Mapping and name service management.

   Changes from -18 to 20:

   o  Added support for simple hosts.

   o  Added EBG name service maintenace procedures

   o  Added router and prefix maintenace procedures

   Changes from -17 to 18:

   o  adjusted section headings to group autoconf operations under EIR/
      EBR/EBG.

   o  clarified M/O bits

   o  clarified EBG roles

   Changes from -15 to 17:




Templin                   Expires June 8, 2009                 [Page 25]

Internet-Draft                     VET                     December 2008


   o  title change to "Virtual Enterprise Traversal (VET)".

   o  changed document focus from MANET-centric to the much-broader
      Enterprise-centric, where "Enterprise" is understood to also cover
      a wide range of MANET types.

   Changes from -14 to 15:

   o  title change to "Virtual Enterprise Traversal (VET) for MANETs".

   o  Address review comments

   Changes from -12 to 14:

   o  title change to "The MANET Virtual Ethernet Abstraction".

   o  Minor section rearrangement.

   o  Clartifications on portable and self-configured prefixes.

   o  Clarifications on DHCPv6 prefix delegation procedures.

   Changes from -11 to 12:

   o  title change to "MANET Autoconfiguration using Virtual Ethernet".

   o  DHCP prefix delegation for both IPv4 and IPv6 as primary address
      delegation mechanism.

   o  IPv6 SLAAC for address autoconfiguration on the VET interface.

   o  fixed editorials based on comments received.

   Changes from -10 to 11:

   o  removed the transparent/opaque VET portal abstractions.

   o  removed routing header as an option for MANET exit router
      selection.

   o  included IPv6 SLAAC as an endorsed address configuration mechanism
      for the VET interface.

   Changes from -08 to -09:

   o  Introduced the term "VET".





Templin                   Expires June 8, 2009                 [Page 26]

Internet-Draft                     VET                     December 2008


   o  Changed address delegation language to speak of "MNBR-aggregated"
      instead of global/local.

   o  Updated figures 1-3.

   o  Explained why a MANET interface is "neutral".

   o  Removed DHCPv4 "MLA Address option".  Now, MNBRs can only be
      DHCPv4 servers; not relays.

   Changes from -07 to -08:

   o  changed terms "unenhanced" and "enhanced" to "transparent" and
      "opaque".

   o  revised MANET Router diagram.

   o  introduced RFC3753 terminology for Mobile Router; ingress/egress
      interface.

   o  changed abbreviations to "MNR" and "MNBR".

   o  added text on ULAs and ULA-Cs to "Self-Generated Addresses".

   o  rearranged Section 3.1.

   o  various minor text cleanups

   Changes from -06 to -07:

   o  added MANET Router diagram.

   o  added new references

   o  various minor text cleanups

   Changed from -05 to -06:

   o  Changed terms "raw" and "cooked" to "unenhanced" and "enhanced".

   o  minor changes to preserve generality

   Changed from -04 to -05:

   o  introduced conceptual "virtual ethernet" model.

   o  support "raw" and "cooked" modes as equivalent access methods on
      the virutal ethernet.



Templin                   Expires June 8, 2009                 [Page 27]

Internet-Draft                     VET                     December 2008


   Changed from -03 to -04:

   o  introduced conceptual "imaginary shared link" as a representation
      for a MANET.

   o  discussion of autonomous system and site abstractions for MANETs

   o  discussion of autoconfiguration of CGAs

   o  new appendix on IPv6 StateLess Address AutoConfiguration

   Changes from -02 to -03:

   o  updated terminology based on RFC2461 "asymmetric reachability"
      link type; IETF67 MANET Autoconf wg discussions.

   o  added new appendix on IPv6 Neighbor Discovery and Duplicate
      Address Detection

   o  relaxed DHCP server deployment considerations allow DHCP servers
      within the MANET itself

   Changes from -01 to -02:

   o  minor updates for consistency with recent developments

   Changes from -00 to -01:

   o  new text on DHCPv6 prefix delegation and multilink subnet
      considerations.

   o  various editorial changes


Author's Address

   Fred L. Templin (editor)
   Boeing Phantom Works
   P.O. Box 3707 MC 7L-49
   Seattle, WA  98124
   USA

   Email: fltemplin@acm.org








Templin                   Expires June 8, 2009                 [Page 28]

Internet-Draft                     VET                     December 2008


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.











Templin                   Expires June 8, 2009                 [Page 29]


