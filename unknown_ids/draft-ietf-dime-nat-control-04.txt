


Internet Engineering Task Force                             F. Brockners
Internet-Draft                                               S. Bhandari
Intended status: Standards Track                                   Cisco
Expires: April 19, 2011                                         V. Singh
                                                         Mavenir Systems
                                                              V. Fajardo
                                                  Telcordia Technologies
                                                        October 16, 2010


   Diameter Network Address and Port Translation Control Application
                     draft-ietf-dime-nat-control-04

Abstract

   This document describes the framework, messages, and procedures for
   the Diameter Network address and port translation Control
   Application.  This Diameter application allows per endpoint control
   of large scale Network Address Translators and Network Address and
   Port Translators, which are added to cope with IPv4-address space
   completion.  This Diameter application allows external devices to
   configure and manage a Network Address Translator device - expanding
   the existing Diameter-based AAA and policy control capabilities with
   a Network Address Translators and Network Address and Port
   Translators control component.  These external devices can be network
   elements in the data plane such as a Network Access Server, or can be
   more centralized control plane devices such as AAA-servers.  This
   Diameter application establishes a context to commonly identify and
   manage endpoints on a gateway or server, and a large scale Network
   Address Translator and Network Address and Port Translator device.
   This includes, for example, the control of the total number of
   Network Address Translator bindings allowed or the allocation of a
   specific Network Address Translator binding for a particular
   endpoint.  In addition, it allows large scale Network Address
   Translator devices to provide information relevant to accounting
   purposes.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months



Brockners, et al.        Expires April 19, 2011                 [Page 1]

Internet-Draft      Diameter NAT Control Application        October 2010


   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 19, 2011.

Copyright Notice

   Copyright (c) 2010 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.































Brockners, et al.        Expires April 19, 2011                 [Page 2]

Internet-Draft      Diameter NAT Control Application        October 2010


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  5
   2.  Conventions  . . . . . . . . . . . . . . . . . . . . . . . . .  6
   3.  Deployment Framework . . . . . . . . . . . . . . . . . . . . .  7
     3.1.  Deployment Scenario  . . . . . . . . . . . . . . . . . . .  7
     3.2.  Diameter NAPT Control Application Overview . . . . . . . .  8
     3.3.  Deployment Scenarios For DNCA  . . . . . . . . . . . . . .  9
   4.  DNCA Session Establishment and Management  . . . . . . . . . . 11
     4.1.  Parties Involved . . . . . . . . . . . . . . . . . . . . . 11
     4.2.  Session Establishment  . . . . . . . . . . . . . . . . . . 11
     4.3.  Session Re-Authorization . . . . . . . . . . . . . . . . . 13
     4.4.  Session and Binding Query  . . . . . . . . . . . . . . . . 15
     4.5.  Session Termination  . . . . . . . . . . . . . . . . . . . 17
     4.6.  DNCA Manager and Agent Failures  . . . . . . . . . . . . . 18
   5.  Use Of The Diameter Base Protocol  . . . . . . . . . . . . . . 18
     5.1.  Securing Diameter Messages . . . . . . . . . . . . . . . . 19
     5.2.  Accounting Functionality . . . . . . . . . . . . . . . . . 19
     5.3.  Use Of Sessions  . . . . . . . . . . . . . . . . . . . . . 19
     5.4.  Routing Considerations . . . . . . . . . . . . . . . . . . 19
     5.5.  Advertising Application Support  . . . . . . . . . . . . . 19
   6.  DNCA Commands  . . . . . . . . . . . . . . . . . . . . . . . . 20
     6.1.  NAT-Control Request (NCR) Command  . . . . . . . . . . . . 20
     6.2.  NAT-Control Answer (NCA) Command . . . . . . . . . . . . . 21
   7.  NAT Control Application Session State Machine  . . . . . . . . 22
   8.  DNCA AVPs  . . . . . . . . . . . . . . . . . . . . . . . . . . 25
     8.1.  Reused Base Protocol AVPs  . . . . . . . . . . . . . . . . 25
     8.2.  Additional Result-Code AVP Values  . . . . . . . . . . . . 26
       8.2.1.  Success  . . . . . . . . . . . . . . . . . . . . . . . 26
       8.2.2.  Transient Failures . . . . . . . . . . . . . . . . . . 26
       8.2.3.  Permanent Failures . . . . . . . . . . . . . . . . . . 27
     8.3.  Reused NASREQ Diameter Application AVPs  . . . . . . . . . 28
     8.4.  Reused from RFC 4675 . . . . . . . . . . . . . . . . . . . 28
     8.5.  Reused from Diameter QoS Application . . . . . . . . . . . 28
     8.6.  Reused from ETSI ES 283 034, e4 Diameter Application . . . 29
     8.7.  DNCA Defined AVPs  . . . . . . . . . . . . . . . . . . . . 30
       8.7.1.  NC-Request-Type AVP  . . . . . . . . . . . . . . . . . 30
       8.7.2.  NAT-Control-Install AVP  . . . . . . . . . . . . . . . 31
       8.7.3.  NAT-Control-Remove AVP . . . . . . . . . . . . . . . . 31
       8.7.4.  NAT-Control-Definition AVP . . . . . . . . . . . . . . 31
       8.7.5.  NAT-Internal-Address AVP . . . . . . . . . . . . . . . 32
       8.7.6.  NAT-External-Address AVP . . . . . . . . . . . . . . . 32
       8.7.7.  Max-NAT-Bindings . . . . . . . . . . . . . . . . . . . 33
       8.7.8.  NAT-Control-Binding-Rule AVP . . . . . . . . . . . . . 33
       8.7.9.  Duplicate-Session-Id AVP . . . . . . . . . . . . . . . 33
   9.  Accounting Commands  . . . . . . . . . . . . . . . . . . . . . 33
     9.1.  NAT Control Accounting Messages  . . . . . . . . . . . . . 34
     9.2.  NAT Control Accounting AVPs  . . . . . . . . . . . . . . . 34



Brockners, et al.        Expires April 19, 2011                 [Page 3]

Internet-Draft      Diameter NAT Control Application        October 2010


       9.2.1.  NAT-Control-Record . . . . . . . . . . . . . . . . . . 34
       9.2.2.  NAT-Control-Binding-Status . . . . . . . . . . . . . . 34
       9.2.3.  Current-NAT-Bindings . . . . . . . . . . . . . . . . . 35
   10. AVP Occurrence Table . . . . . . . . . . . . . . . . . . . . . 35
     10.1. DNCA AVP Table for NAT Control Initial and Update
           Requests . . . . . . . . . . . . . . . . . . . . . . . . . 35
     10.2. DNCA AVP Table for Session Query request . . . . . . . . . 36
     10.3. DNCA AVP Table for Accounting Message  . . . . . . . . . . 36
   11. IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 37
     11.1. Command Codes  . . . . . . . . . . . . . . . . . . . . . . 37
     11.2. AVP Codes  . . . . . . . . . . . . . . . . . . . . . . . . 37
     11.3. AVP Values . . . . . . . . . . . . . . . . . . . . . . . . 38
       11.3.1. Result-Code AVP Values . . . . . . . . . . . . . . . . 38
     11.4. Application IDs  . . . . . . . . . . . . . . . . . . . . . 39
   12. Security Considerations  . . . . . . . . . . . . . . . . . . . 39
   13. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 39
   14. Change History (to be removed prior to publication as an
       RFC) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
   15. References . . . . . . . . . . . . . . . . . . . . . . . . . . 41
     15.1. Normative References . . . . . . . . . . . . . . . . . . . 41
     15.2. Informative References . . . . . . . . . . . . . . . . . . 41
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 42





























Brockners, et al.        Expires April 19, 2011                 [Page 4]

Internet-Draft      Diameter NAT Control Application        October 2010


1.  Introduction

   Internet service providers have started to deploy Network Address
   Translators (NATs) and Network Address and Port Translators (NAPTs)
   at the edge of their networks to deal with the depletion of available
   public IPv4 addresses.  This document defines a Diameter application
   for providers deploying such NAT and NAPT devices.  The use of a
   Diameter application allows for simple integration into the existing
   AAA environment of a provider.

   The Diameter Network address and port translation Control Application
   (DNCA) offers the following capabilities:

   1.  Limits or defines the number of NAPT/NAT bindings made available
       to an individual subscriber or end point.

   2.  Supports the allocation of specific NAPT/NAT bindings.  Two types
       of specific bindings can be distinguished:

       *  Allocation of a pre-defined NAT binding: Both the internal and
          external IP address and port pair are specified within the
          request.  In some deployment cases, such as access to a web-
          server within a user's home network with IP address and port,
          benefit from statically configured bindings.

       *  Allocation of an external IP address for a given internal IP
          address: The allocated external IP address is reported back to
          the requestor.  In some deployment scenarios, the application
          requires immediate knowledge of the allocated binding for a
          given internal IP address but does not control the allocation
          of the external IP address; for example, SIP-proxy server
          deployments.

   3.  Defines the external address pool(s) to be used for allocating an
       external IP address: External address pools can either be pre-
       assigned at the NAPT/NAT, or specified within a request.  If pre-
       assigned address pools are used, a request needs to include a
       reference to identify the pool.  Otherwise, the request contains
       a description of the IP address pool(s) to be used; for example,
       list of IP-subnets.  Such External address pools can be used to
       select external IP address in NAPT/NAT bindings for multiple
       subscribers.

   4.  Generates reports and accounting records: Reports established
       bindings for a particular user.  The collected information is
       used by accounting systems for statistical purposes.





Brockners, et al.        Expires April 19, 2011                 [Page 5]

Internet-Draft      Diameter NAT Control Application        October 2010


   5.  Queries and retrieves details about bindings on demand: This
       feature complements the previously mentioned accounting
       functionality(see item 4).  The query functionality complements
       alternative information query mechanisms, such as SNMP-based
       mechanism, if available.

   6.  Identifies a subscriber or endpoint on multiple network devices
       (NAPT or NAT device, the AAA-server, or the Network Access Server
       (NAS)): Endpoint identification is facilitated through a Global
       Endpoint ID.  Endpoints are identified through a single or a set
       of classifiers, such as IP address, VLAN identifier, or interface
       identifier which uniquely identify the traffic associated with a
       particular global endpoint

   This document is structured as follows: Section 2 lists terminology,
   while Section 3 provides an introduction to the DNCA and its overall
   deployment framework.  Sections 4 to 8 cover the DNCA specifics, with
   Section 4 describing session management, Section 5 the use of the
   Diameter base protocol, Section 6 new commands, Section 7 AVPs used,
   and Section 8 accounting aspects.  Section 9 presents an AVP
   occurance table.  IANA and security considerations are addressed in
   Sections 10 and 11.


2.  Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

   Abbreviations used in this document:

      AAA: Authentication, Authorization, Accounting

      DNCA: Diameter Network address and port translation Control
      Application

      NAPT: Network Address and Port Translation

      NAT: Network Address Translation (NAT and NAPT are used in this
      document interchangeably)

      NAT Binding or Binding: Association of two IP address/port pairs
      (with one IP address typically being private and the other one
      public) to facilitate NAT

      NAS: Network Access Server




Brockners, et al.        Expires April 19, 2011                 [Page 6]

Internet-Draft      Diameter NAT Control Application        October 2010


      NCR:NAT Control Request

      NCA:NAT Control Answer


3.  Deployment Framework

3.1.  Deployment Scenario

   Figure 1 shows a typical network deployment for Internet access.  A
   user's IPv4 host gains access to the Internet though a NAS, which
   facilitates the authentication of the endpoint and configures the
   user's connection according to the authorization and configuration
   data received from the AAA-server upon successful authentication.
   Public IPv4 addresses are used throughout the network.
                         +---------+
                         |         |
                         |   AAA   |
                         |         |
                         +---------+
                              |
                              |
                              |
                              |
    +---------+          +---------+             +----------+
    |  IPv4   |          |         |             |  IPv4    |
    |  Host   |----------|   NAS   |-------------| Internet |
    |         |          |         |             |          |
    +---------+          +---------+             +----------+

    <-------------------- Public IPv4 ---------------------->

         Figure 1: Typical network deployment for internet access

   Figure 2 depicts the deployment scenario when a service provider
   introduces a NAT device to increase the efficiency of the global IPv4
   address pool utilization.  The objective is to provide the customer
   with connectivity to the public IPv4 Internet.  The NAT device
   performs network address and port (and optionally address family)
   translation, depending on whether the access network uses private
   IPv4 addresses or public IPv6 addresses, to public IPv4 addresses.
   If the NAT device would be put in place without any endpoint
   awareness, the service offerings of the service provider could be
   hampered.  Provisioning static NAT bindings for particular endpoints,
   using different public IP address pools for different set of
   endpoints; for example, residential or business customers, and
   reporting allocated bindings on a per endpoint basis is burdensome
   for a service provider if the NAT device is not aware of endpoints



Brockners, et al.        Expires April 19, 2011                 [Page 7]

Internet-Draft      Diameter NAT Control Application        October 2010


   and allows per endpoint control and management, which easily
   integrates with the already existing per endpoint management
   infrastructure of the service provider.
                   +---------+
                   |         |
                   |   AAA   |
                   |         |
                   +---------+
                        |
                        |
                        |
                        |
     +--------+    +---------+    +---------+    +----------+
     |  IPv4/ |    |         |    |         |    |  IPv4    |
     |  IPv6  |----|   NAS   |----|   NAT   |----| Internet |
     |  Host  |    |         |    |         |    |          |
     +--------+    +---------+    +---------+    +----------+
     <-------- Private IPv4 -----------><--- Public IPv4 --->
     <-------- Public  IPv6 -----------><--- Public IPv4 --->

               Figure 2: Access network deployment with LSN

3.2.  Diameter NAPT Control Application Overview

   The DNCA runs between a DNCA Agent on the NAT and the DNCA Manager.
   DNCA allows per endpoint control and management of NAT.  Based on
   Diameter, DNCA integrates well with the suite of Diameter
   applications deployed for per endpoint authentication, authorization,
   accounting, and policy control in service provider networks.

   DNCA offers:

   o  Request and answer commands to control the allowed number of NAT
      bindings per endpoint , to request the allocation of specific
      bindings for an endpoint, to define the address pool to be used
      for an endpoint.

   o  Provides per endpoint reporting of the allocated NAT bindings.

   o  Provides unique identification of an endpoint on NAT device, AAA-
      server and NAS, to simplify correlation of accounting data
      streams.

   DNCA allows controlling the behavior of a NAT device on a per
   endpoint basis during initial session establishment and at later
   stages by providing an update procedure for already established
   sessions.  Using DNCA, per endpoint NAT binding information can be
   retrieved either using accounting mechanisms or through an explicit



Brockners, et al.        Expires April 19, 2011                 [Page 8]

Internet-Draft      Diameter NAT Control Application        October 2010


   session query to the NAT.

3.3.  Deployment Scenarios For DNCA

   The role of the Diameter NAT Control Manager can be fulfilled by
   either the NAS or by an external server, such as AAA-server.  The two
   deployment scenarios are outlined in Figure 3 ("integrated
   deployment") and Figure 4 ("autonomous deployment").

   Within the figures (M) denotes the network element, which takes on
   the DNCA Manager role.  Similarly, (A) identifies the network
   element, which performs the DNCA Agent role.

   The integrated deployment approach hides the existence of the NAT
   device from external servers, such as the AAA-server as much as
   possible.  It is suited for environments where minimal changes to the
   existing AAA deployment are desired.  As DNCA Manager the NAS,
   initiates and manages session with the NAT device, exchanges NAT
   specific configuration information and handles reporting and
   accounting information.  The NAS receives reporting and accounting
   information from NAT device.  With this information, the NAS provides
   a single accounting record for the user.  This reduces the usage of
   an external accounting system for correlating the information
   received from multiple sources.

   An example network attachment for an integrated NAT deployment can be
   described as follows: An endpoint connects to the network, with the
   NAS being the point of attachment.  After successful authentication,
   NAS receives endpoint related authorization data from the AAA-server.
   A portion of the authorization data applies to per endpoint
   configuration on the NAS itself, another portion describes
   authorization and configuration information for NAT control aimed at
   the NAT device.  NAS will initiate a DNCA session to the NAT and send
   the relevant authorization and configuration information for the
   particular endpoint to the NAT device.  This can comprise NAT
   bindings, which have to be pre-established for the endpoint, or
   management related configuration, such as the maximum number of NAT
   bindings allowed for the endpoint or accounting requirements.  The
   NAT device sends its per endpoint accounting information to the NAS,
   which aggregates the accounting information received form the NAT
   device with its local accounting information for the endpoint into a
   single accounting stream towards the AAA-server.









Brockners, et al.        Expires April 19, 2011                 [Page 9]

Internet-Draft      Diameter NAT Control Application        October 2010


                   +---------+
                   |         |
                   |   AAA   |
                   |         |
                   +---------+
                        |
                        |
                        |
     +--------+    +---------+    +---------+    +----------+
     |  IPv4/ |    |   (M)   |    |   (A)   |    |  IPv4    |
     |  IPv6  |----|   NAS   |----|   NAT   |----| Internet |
     |  Host  |    |         |    |         |    |          |
     +--------+    +---------+    +---------+    +----------+
     <-------- Public  IPv6 ----------><--- Public IPv4 ---->
     <-------- Private IPv4 ----------><--- Public IPv4 ---->

          Figure 3: LSN Control deployment: Integrated deployment

   The autonomous deployment approach decouples user management on NAS
   and NAT device.  The AAA system performing the role of the DNCA
   Manager manages the connection to the NAT device, controls the per
   endpoint configuration, and also receives accounting and reporting
   information from the NAT device.  Different from the integrated
   deployment scenario, the autonomous deployment scenario does not
   "hide" the existence of the NAT device from the AAA infrastructure.
   Here two accounting streams are received by the AAA-server for one
   particular endpoint, one from the NAS, and one from the NAT device.
                     +---------+
                     |   (M)   |
                     |   AAA   |---------
                     |         |         |
                     +---------+         |
                          |              |
                          |              |
                          |              |
       +--------+    +---------+    +---------+    +----------+
       |  IPv4/ |    |         |    |   (A)   |    |  IPv4    |
       |  IPv6  |----|   NAS   |----|   NAT   |----| Internet |
       |  Host  |    |         |    |         |    |          |
       +--------+    +---------+    +---------+    +----------+
       <-------- Public  IPv6 ----------><---- Public IPv4 --->
       <-------- Private IPv4 ----------><---- Public IPv4 --->

          Figure 4: LSN Control deployment: Autonomous deployment







Brockners, et al.        Expires April 19, 2011                [Page 10]

Internet-Draft      Diameter NAT Control Application        October 2010


4.  DNCA Session Establishment and Management

   Note that this section forward references some of the commands and
   AVPs defined for the DNCA.  Please refer to Section 6 and Section 8
   for details.

4.1.  Parties Involved

   Authorization and control models supported by this application
   include the following parties:

   o  DNCA agent: The DNCA agent is part of the NAT device

   o  DNCA Manager

   The NAT control requesting entity is always the DNCA Manager.  The
   DNCA Manager always initiates, updates, or terminates the sessions.
   This mode of operation is sometimes also referred to as "push mode".

   The DNCA Manager can be NAS or AAA-server.  The DNCA Manager
   initiates a session with the DNCA agent when it learns about the
   subscriber.  The DNCA Manager may learn about a subscriber when it
   receives authentication, authorization, or accounting request for
   that subscriber or by some other means, such as on the box
   configuration to identify a subscriber with respect to his IP
   packets.

4.2.  Session Establishment

   The DNCA Manager establishes a session with the DNCA agent to control
   the behavior of the NAT device.  During session establishment, the
   DNCA Manager passes along configuration information to the DNCA
   agent.  The session configuration information comprises the maximum
   number of bindings allowed for the endpoint associated with this
   session, a set of pre-defined NAT bindings to be established for this
   endpoint, or a description of the address pool, external addresses to
   be allocated from.

   The DNCA Manager initiates the Diameter NAT Control session to the
   DNCA Agent.  The DNCA Manager generates a NAT-Control Request (NCR)
   message to the DNCA Agent with NC-Request-Type AVP set to
   INITIAL_REQUEST.  On receipt of NCR the DNCA Agent sets up a new
   session for the endpoint associated with the endpoint classifier(s)
   contained in the NCR.  The DNCA agent notifies the DNCA Manager about
   successful session setup using a NAT-Control Answer (NCA) message
   with Result-Code set to DIAMETER_SUCCESS.  Figure 5 shows the
   protocol interaction between the DNCA Manager and the DNCA Agent.




Brockners, et al.        Expires April 19, 2011                [Page 11]

Internet-Draft      Diameter NAT Control Application        October 2010


   The initial NAT-Control-Request may contain configuration information
   for the session, which specifies the behavior of the NAT device for
   the session.  The configuration information, which may be included,
   comprises:

   o  A list of NAT bindings, which should be pre-allocated for the
      session; for example, in case a subscriber requires a fixed
      external IP- address/port pair for one of the applications.

   o  The maximum number of NAT bindings allowed for an endpoint.

   o  A description of the external address pool(s) to be used for the
      session.

   o  A reference to a predefined binding rule on the DNCA Agent, which
      is applied to the session.  Such a predefined binding rule on the
      DNCA Agent may contain, for example, the name of the IP address
      pool that external IP addresses should be allocated from, maximum
      number of bindings permitted for the endpoint etc.

   In certain cases, the DNCA Agent may not be able to perform the tasks
   requested within the NCR.  These include the following:

   o  If a DNCA Agent receives a NCR from a DNCA Manager with NC-
      Request-Type AVP set to INITIAL_REQUEST that identifies an already
      existing session; that is, DNCA Manager and endpoint identifier
      match an already existing session, the DNCA Agent returns NCA with
      Result-Code set to SESSION_EXISTS, and provides the Session-Id of
      the existing session in Duplicate-Session-Id AVP.

   o  If a DNCA Agent receives an NCR from a DNCA Manager with NC-
      Request-Type AVP set to INITIAL_REQUEST that matches more than one
      of the already existing sessions; that is, DNCA Manager and
      endpoint identifier match already existing sessions, the DNCA
      Agent returns a NCA with Result-Code set to Insufficient-
      Classifiers.  In case a DNCA Manager receives NCA that reports
      Insufficient-Classifiers, it may choose to retry establishing a
      new session using additional or more specific classifiers.

   o  If the NCR contains a binding rule not defined on the NAT device,
      the DNCA Agent returns NCA with Result-Code AVP set to
      UNKNOWN_BINDING_RULE.

   o  In case the DNCA Agent is unable to establish all of the bindings
      requested in the NCR, it will return a NCA with Result-Code set to
      BINDING_FAILURE.  The DNCA Agent, that is NAT device, treats a NCR
      as an atomic operation; hence none of the requested bindings will
      be established by the NAT device.  Either all requested actions



Brockners, et al.        Expires April 19, 2011                [Page 12]

Internet-Draft      Diameter NAT Control Application        October 2010


      within a NCR are completed successfully, or the entire request
      fails.

   o  If DNCA Agent does not have sufficient resources to process a
      request, it returns NCA with Result-Code set to RESOURCE_FAILURE.

   o  In case Max-NAT-Binding and NAT-Control-Definition are included in
      the NCR along with a reference to a binding rule; that is, a
      predefined template on NAT device, and the values in Max-NAT-
      Binding and NAT-Control-Definition contradict those specified in
      the pre-defined binding rule, Max-NAT-Binding and NAT-Control-
      Definition override the values specified in the binding rule.

            DNCA Manager                             DNCA Agent
               |                                           |
               |                                           |
               |                                           |
            Trigger                                        |
               |                                           |
               |                   NCR                     |
               |------------------------------------------>|
               | (INITIAL_REQUEST, endpoint classifier,    |
               |     session id, NAT control config data)  |
               |                                           |
               |                                           |
               |                                  Create session state
               |                                           |
               |                                           |
               |                     NCA                   |
               |<------------------------------------------|
               |                 (result code)             |
               |                                           |
               |                                           |

      Figure 5: Initial NAT Control request and session establishment

4.3.  Session Re-Authorization

   Session re-authorization is performed if the DNCA Manager desires to
   change the behavior of the NAT for an existing session.  Re-
   authorization could be used, for example, to change the number of
   allowed bindings for a particular session, or establish or remove a
   pre-defined binding.

   The DNCA Manager generates a NC message to the DNCA Agent with NC-
   Request-Type AVP set to UPDATE_REQUEST upon receiving a trigger
   signal.  In case the session is updated successfully, the DNCA Agent
   notifies the DNCA Manager about successful session update using a



Brockners, et al.        Expires April 19, 2011                [Page 13]

Internet-Draft      Diameter NAT Control Application        October 2010


   NAT-Control Answer (NCA) message with Result-Code set to
   DIAMETER_SUCCESS.  Figure 6 shows the protocol interaction between
   the DNCA Manager and the DNCA Agent.

   In certain cases, the DNCA Agent may not be able to perfborm the
   tasks requested within the NCR.  These include the following:

   o  If DNCA Agent receives a NCR update or query request for a non-
      existent session, it sets Result-Code in the answer to
      DIAMETER_UNKNOWN_SESSION_ID.

   o  If the NCR contains a binding rule not defined on the NAT device,
      the DNCA Agent returns NCA with Result-Code AVP set to
      UNKNOWN_BINDING_RULE.

   o  If the DNCA Agent cannot establish the requested binding because
      the maximum number of allowed bindings has been reached for the
      Endpoint Classifier, it returns NCA with Result-Code AVP set to
      MAXIMUM_BINDINGS_REACHED_FOR_ENDPOINT.

   o  If the DNCA Agent cannot establish some or all of the bindings
      requested in a NCR, but has not yet reached the maximum number of
      allowed bindings for the subscriber, it returns a NCA with Result-
      Code set to BINDING_FAILURE.  The DNCA Agent (i.e., NAT device)
      treats a NCR as an atomic operation.  Hence none of the requested
      bindings will be established by NAT device.  Either all requested
      actions within a NCR are either successful or failed completely..

   o  If DNCA Agent does not have sufficient resources to process a
      request, it returns NCA with Result-Code set to RESOURCE_FAILURE.

   o  If a NCR redefines the maximum number of NAT bindings allowed for
      the endpoint, the new value will override any previously defined
      limit on NAT bindings.  It depends on the implementation of the
      NAT device on how the NAT device copes with a case where the new
      value is lower than the actual number of allocated bindings.
      Typically the NAT device refrains from enforcing the new limit
      immediately; that is, actively remove bindings, but rather
      disallow the establishment of new bindings until the current
      number of bindings is lower than the newly established maximum
      number of allowed bindings.

   o  If a NCR specifies a new binding rule, predefined on the DNCA
      agent, the binding rule overrides any previously defined rules for
      the session.

   o  If Max-NAT-Binding and NAT-Control-Definition AVPs are included in
      the NCR along with a reference to a binding rule (a predefined



Brockners, et al.        Expires April 19, 2011                [Page 14]

Internet-Draft      Diameter NAT Control Application        October 2010


      template on NAT device) and the values in Max-NAT-Binding and NAT-
      Control-Definition AVPs contradict those specified in the pre-
      defined binding rule, Max-NAT-Binding and NAT-Control-Definition
      AVPs override the values specified in the binding rule.

            DNCA Manager                             DNCA Agent
               |                                           |
               |                                           |
               |                                           |
        Change of session                                  |
           attributes                                      |
               |                                           |
               |                   NCR                     |
               |------------------------------------------>|
               |       (UPDATE_REQUEST session id,         |
               |         NAT control config data)          |
               |                                           |
               |                                           |
               |                                  Update session state
               |                                           |
               |                                           |
               |                     NCA                   |
               |<------------------------------------------|
               |                 (result code)             |
               |                                           |
               |                                           |

             Figure 6: NAT Control request for session update

4.4.  Session and Binding Query

   Session query can be used by the DNCA Manager to either retrieve
   information on the current bindings for a particular session at the
   NAT device or discover the session identifier for a particular
   external IP address/port pair.

   The DNCA Manager initiates a session query by sending a NCR message
   to the DNCA Agent with NC-Request-Type AVP set to QUERY_REQUEST.
   Figure 7 shows the protocol interaction between the DNCA Manager and
   the DNCA Agent.

   Two types of query requests exist.  The first type of query request
   uses the session ID as input parameter to the query.  It is to allow
   the DNCA Manager retrieve the current set of bindings for a specific
   session.  The second type of query request is used to retrieve the
   session identifiers, along with the associated bindings, matching a
   criteria.  This enables the DNCA Manager to find the sessions, which
   utilize a specific external IP address.



Brockners, et al.        Expires April 19, 2011                [Page 15]

Internet-Draft      Diameter NAT Control Application        October 2010


   1.  Request a list of currently allocated NAT bindings for a
       particular session: The DNCA Agent on receiving NCR, looks up
       session information for the session ID contained in the NCR, and
       reports all currently active NAT bindings for the session using
       NCA message with Result-Code set to DIAMETER_SUCCESS.  In this
       case the NCR MUST NOT contain a NAT-Control-Definition AVP.  Each
       NAT binding is reported in a NAT-Control-Definition AVP.  In case
       the session ID is unknown, the DNCA Agent returns NCA with
       Result-Code set to DIAMETER_UNKNOWN_SESSION_ID.

   2.  Retrieve session IDs and internal IP address/port pairs for one
       or multiple external IP address/port pairs: If the DNCA Manager
       wishes to retrieve the session ID(s) for one or multiple external
       IP address/port pairs, it MUST include the external IP address/
       port pair(s) as part of the NAT-Control-Definition AVP of the
       NCR.  The session ID used within the NCR is not meaningful for
       this type of a query.  The DNCA Agent reports the NAT bindings
       and associated session IDs corresponding to the external IP
       address/port pairs in a NCA message with Result-Code set to
       DIAMETER_SUCCESS with the same session ID, which is used in NCR.
       In case an external IP address/port pair has no associated
       existing NAT binding, the NAT-Control-Definition AVP contained in
       the reply just contains the NAT-External-Address AVP.

            DNCA Manager                             DNCA Agent
               |                                           |
               |                                           |
               |                                           |
     DNCA Session Established                              |
               |                                           |
               |                   NCR                     |
               |------------------------------------------>|
               |              (QUERY_REQUEST)              |
               |                                           |
               |                                           |
               |                                           |
               |                          Look up corresponding session
               |                            and associated NAT Bindings
               |                                           |
               |                   NCA                     |
               |<------------------------------------------|
               |              (Result-Code)                |
               |                                           |
               |                                           |

                          Figure 7: Session Query





Brockners, et al.        Expires April 19, 2011                [Page 16]

Internet-Draft      Diameter NAT Control Application        October 2010


4.5.  Session Termination

   The DNCA Manager generates a Session Terminate Request (STR) message
   to the DNCA Agent upon receiving a trigger signal.  The source of the
   trigger signal is outside the scope of this document.  The DNCA Agent
   sends accounting stop record reporting all the bindings and notifies
   the DNCA Manager about successful session termination using a Session
   Terminate Answer (STA) message with Result-Code set to
   DIAMETER_SUCCESS.  Figure 8 shows the protocol interaction between
   the DNCA Manager and the DNCA Agent.

   If a DNCA Agent receives STR from a DNCA Manager and fails to find a
   matching session, the DNCA Agent returns STA with Result-Code set to
   DIAMETER_UNKNOWN_SESSION_ID.

            DNCA Manager                             DNCA Agent
               |                                            |
               |                                            |
            Trigger                                         |
               |                                            |
               |                   STR                      |
               |------------------------------------------->|
               |               (session id)                 |
               |                                            |
               |                                            |
               |                                  Remove NAT bindings
               |                                       of session
               |                                            |
               |                                            |
               |           Send accounting stop             |
               |<-------------------------------------------|
               |           for all session bindings         |
               |                                            |
               |                                  Terminate Session /
               |                                 Remove session state
               |                                            |
               |                                            |
               |                                            |
               |                  STA                       |
               |<-------------------------------------------|
               |             (Result-Code)                  |
               |                                            |

                  Figure 8: Terminate NAT Control session







Brockners, et al.        Expires April 19, 2011                [Page 17]

Internet-Draft      Diameter NAT Control Application        October 2010


4.6.  DNCA Manager and Agent Failures

   This document does not cover details in case DNCA Manager and DNCA
   Agent are out of sync.  This happens when the DNCA Manager or DNCA
   Agent restart, (temporary) loss of network connectivity etc.  The
   DNCA relies on DNCA Manager and DNCA Agent to have builtin redundancy
   support to recover state in case of failure.

   Example failure cases include the following:

   o  The DNCA Manager loses session state (e.g. due to a restart).  In
      this case,

      *  The DNCA Agent may receive a NCR with NC-Request-Type AVP set
         to INITIAL_REQUEST that matches an existing session of DNCA
         agent.  The DNCA Agent returns an error that contains
         Duplicate-Session-Id AVP to report the Session-ID of existing
         session.  The DNCA Manager may send an explicit Sesstion
         Terminate Request(STR) for the older session, which was lost.

      *  The DNCA Manager may receive accounting records for a session
         that does not exist.  The DNCA Manager sends an accounting
         answer with Result-Code set to DIAMETER_UNKNOWN_SESSION_ID.  On
         receiving this, the DNCA Agent clears the session and removes
         the associated session state.

   o  The DNCA Agent loses session state.  In such a case, the DNCA
      Agent may receive a NCR with NC-Request-Type AVP set to
      UPDATE_REQUEST for a non-existent session.  The DNCA Agent returns
      NCA with Result-Code set to DIAMETER_UNKNOWN_SESSION_ID.

   o  The DNCA Manager is unreachable, for example detected by Diameter
      watchdog, or down and accounting request from the DNCA Agent fails
      to get a response.  The mechanism to ensure that a DNCA Manager no
      longer has associated state for a session being cleared by a DNCA
      Agent is beyond the scope of this document.

   o  The DNCA Agent is unreachable or down and NCR requests fail to get
      a response.  Handling of this case depends on the actual service
      offering of the service provider.  The service provider can choose
      to terminate the access session to the endpoint.


5.  Use Of The Diameter Base Protocol

   The Diameter Base Protocol defined by [RFC3588] applies with the
   clarifications listed in the present specification.




Brockners, et al.        Expires April 19, 2011                [Page 18]

Internet-Draft      Diameter NAT Control Application        October 2010


5.1.  Securing Diameter Messages

   For secure transport of Diameter messages, IPsec MAY be used.

   The DNCA Agent MAY verify the identity of the DNCA Manager during the
   Capabilities Exchange Request procedure.

   The DNCA Agent MAY verify if the DNCA Manager that issues a NCR
   command is allowed and it is based on:

   o  The identity of the DNCA Manager

   o  The type of NCR Command

   o  The content of the NCR Command

   o  Any combination of the above

5.2.  Accounting Functionality

   Accounting functionality (accounting session state machine, related
   command codes and AVPs) is defined in Section 9 below.

5.3.  Use Of Sessions

   Each DNCA session MUST have a globally unique Session-ID as defined
   in [RFC3588], which MUST NOT be changed during the lifetime of a DNCA
   session.  The Diameter Session-ID serves as the global endpoint
   identifier.  The DNCA Agent and DNCA Manager maintain state
   associated with the Session-ID.  This globally unique Session-ID is
   used for updating, accounting, and terminating the session.  The DNCA
   session MUST NOT have more than one outstanding request at any given
   instant.  The DNCA Agent sends an Abort-Session-Request as defined in
   [RFC3588] if it is unable to maintain sessions due to resource
   limitation.

5.4.  Routing Considerations

   It is assumed that the DNCA Manager knows the DiameterIdentity of the
   DNCA Agent for a given endpoint.  Both the Destination-Realm and
   Destination-Host AVPs are present in the request from the DNCA
   Manager to the DNCA Agent.

5.5.  Advertising Application Support

   Diameter applications conforming to this specification MUST advertise
   support by including the value of TBD in:




Brockners, et al.        Expires April 19, 2011                [Page 19]

Internet-Draft      Diameter NAT Control Application        October 2010


   o  Auth-Application-Id and Acct-Application-Id of Capabilities-
      Exchange-Request (CER)

   o  Auth-Application-Id of NC-request (NCR), NC-Answer (NCA), Abort-
      Session-Request(ASR), Abort-Session-Answer (ASA) messages

   o  Acct-Application-Id in Accounting-Request (ACR) and Accounting-
      Answer (ACA) messages.


6.  DNCA Commands

   The following commands are used to establish, maintain and query NAT
   bindings.

6.1.  NAT-Control Request (NCR) Command

   The NAT-Control Request (NCR) command, indicated by the command field
   set to TBD and the "R" bit set in the Command Flags field, is sent
   from the DNCA Manager to the DNCA Agent in order to install NAT
   bindings.

   User-Name, Logical-Access-Id, Physical-Access-ID, Framed-IP-Address,
   Framed-IPv6-Prefix , Framed-Interface-Id, EGRESS-VLANID, NAS-Port-ID,
   Address-Realm, Calling-Station-ID AVPs serve as identifiers for the
   subscriber.

   Message Format:























Brockners, et al.        Expires April 19, 2011                [Page 20]

Internet-Draft      Diameter NAT Control Application        October 2010


      < NC-Request > ::= < Diameter Header: TBD, REQ, PXY>

                       < Session-Id >
                       { Auth-Application-Id }
                       { Origin-Host }
                       { Origin-Realm }
                       { Destination-Realm }
                       { Destination-Host }
                       { NC-Request-Type }
                       [ Origin-State-Id ]
                     * [ NAT-Control-Remove ]
                     * [ NAT-Control-Install ]
                       [ User-Name ]
                       [ Logical-Access-Id ]
                       [ Physical-Access-ID ]
                       [ Framed-IP-Address ]
                       [ Framed-IPv6-Prefix ]
                       [ Framed-Interface-Id ]
                       [ EGRESS-VLANID]
                       [ NAS-Port-ID]
                       [ Address-Realm ]
                       [ Calling-Station-ID ]
                     * [ Proxy-Info ]
                     * [ Route-Record ]
                     * [ AVP ]

6.2.  NAT-Control Answer (NCA) Command

   The NAT-Control-Answer (NCA) command, indicated by the Command-Code
   field set to TBD and the "R" bit cleared in the Command Flags field,
   is sent by the DNCA Agent in response to NAT-Control-Request command.

   Message Format:


















Brockners, et al.        Expires April 19, 2011                [Page 21]

Internet-Draft      Diameter NAT Control Application        October 2010


      <NC-Answer> ::= < Diameter Header: TBD, PXY >
                      < Session-Id >
                      { Origin-Host }
                      { Origin-Realm }
                      { NC-Request-Type }
                      [ Result-Code ]
                    * [ NAT-Control-Definition ]
                      [ Current-NAT-Bindings   ]
                      [ Origin-State-Id ]
                      [ Error-Message ]
                      [ Error-Reporting-Host ]
                    * [ Failed-AVP ]
                    * [ Proxy-Info ]
                      [ Duplicate-Session-ID ]
                    * [ Redirect-Host]
                      [ Redirect-Host-Usage ]
                      [ Redirect-Max-Cache-Time ]
                    * [ Proxy-Info ]
                    * [ Route-Record ]
                    * [ Failed-AVP ]
                    * [ AVP ]
                    * [ AVP ]



7.  NAT Control Application Session State Machine

   This section contains a set of finite state machines, representing
   the life cycle of DNCA session, which MUST be observed by all
   implementations of the DNCA Diameter application.  DNCA Agent and
   Manager are stateful and the state machine maintained is similar to
   the stateful Client and Server authorization state machine described
   in RFC3588.  When a session is moved to the Idle state, any resources
   that were allocated for the particular session must be released.  Any
   event not listed in the state machines MUST be considered as an error
   condition, and an answer, if applicable, MUST be returned to the
   originator of the message.

   In the state table, the event 'Failure to send NCR' means that the
   DNCA Manager is unable to send command NCR to the desired
   destination.  This could be due to the peer being down, or due to the
   peer sending back a transient failure or temporary protocol error
   notification DIAMETER_TOO_BUSY or DIAMETER_LOOP_DETECTED in the
   Result-Code AVP of NCA.

   In the state table "FAILED NCA" means that the DNCA Agent was not
   able to honor corresponding NCR.  This can happen due to any of the
   transient and permanent error at DNCA Agent indicated by the



Brockners, et al.        Expires April 19, 2011                [Page 22]

Internet-Draft      Diameter NAT Control Application        October 2010


   following error Result-Code values - RESOURCE_FAILURE,
   UNKNOWN_BINDING_RULE_NAME, BINDING_FAILURE,
   MAXIMUM_BINDINGS_REACHED_FOR_ENDPOINT, SESSION_EXISTS,
   INSUFFICIENT_CLASSIFIERS

   The following state machine is observed by a DNCA Manager:
                              MANAGER
      State     Event                          Action     New State
      -------------------------------------------------------------
      Idle      New Host detected that         Send       Pending
                requires NAT Control           NCR
                                               Initial
                                               Request

      Idle      ASR Received                   Send ASA   Idle
                for unknown session            with
                                               Result-Code
                                               = UNKNOWN_
                                               SESSION_ID

      Pending   Successful NCA                 Setup      Open
                received                       complete

      Pending   Successful NCA                 Sent STR   Discon
                received
                but Agent unable to provide
                service

      Pending   Error processing successful    Sent STR   Discon
                NCA

      Pending   Failed                         Cleanup    Idle
                NCA received

      Open      NAT control                    Send       Open
                update required                NCR Update
                                               Request

      Open      Successful                                Open
                NCA received

      Open      Failed                         Cleanup    Idle
                NCA received.


      Open      Access Session end detected    Send STR   Discon





Brockners, et al.        Expires April 19, 2011                [Page 23]

Internet-Draft      Diameter NAT Control Application        October 2010


      Open      ASR Received,                  Send ASA   Discon
                client will comply with        with
                request to end the session     Result-Code
                                               = SUCCESS,
                                               Send STR.

      Open      ASR Received,                  Send ASA   Open
                client will not comply with    with
                request to end the session     Result-Code
                                               != SUCCESS

      Discon    ASR Received                   Send ASA   Idle

      Discon    STA Received                   Discon.    Idle
                                               user/device

   The following state machine is observed by a DNCA Agent:


































Brockners, et al.        Expires April 19, 2011                [Page 24]

Internet-Draft      Diameter NAT Control Application        October 2010


                             AGENT
      State     Event                          Action     New State
      -------------------------------------------------------------
      Idle      NCR request                    Send       Open
                received, and                  successful
                able to provide requested      NCA
                NAT control service

      Idle      NCR request                    Send       Idle
                received, and                  failed
                unable to provide requested    NCA
                NAT control service

      Open      NCR  request                    Send       Open
                received, and                   successful
                able to provide requested       NCA
                NAT control service

      Open      NCR request                    Send       Idle
                received, and                  failed
                unable to provide requested    NCA,
                NAT control service            Cleanup

      Open      Unable to continue             Send ASR   Discon
                providing requested
                NAT control service

      Discon    Failure to send ASR            Wait,      Discon
                                               resend ASR

      Discon    ASR successfully sent and      Cleanup    Idle
                ASA Received with Result-Code

      Not       ASA Received                   None       No Change.
      Discon

      Any       STR Received                   Send STA,  Idle
                                               Cleanup.


8.  DNCA AVPs

8.1.  Reused Base Protocol AVPs

   AVPs reused from Diameter Base Protocol [RFC3588] are listed below.






Brockners, et al.        Expires April 19, 2011                [Page 25]

Internet-Draft      Diameter NAT Control Application        October 2010


                                                   +-------------------+
                                                   |  AVP Flag rules   |
   +-----------------------------------------------|-----+---+---------+
   |                           AVP                 |     |   |   May   |
   | Attribute Name            Code     Data Type  |MUST |MAY| encrypt |
   +-----------------------------------------------+-----+---+---------+
   |Acct-Interim-Interval      85       Unsigned32 | M   | P |    Y    |
   |Auth-Application-Id        258      Unsigned32 | M   | P |    N    |
   |Destination-Host           293      DiamIdent  | M   | P |    N    |
   |Destination-Realm          283      DiamIdent  | M   | P |    N    |
   |Error-Message              281      UTF8String | M   | P |    N    |
   |Error-Reporting-Host       294      DiamIdent  | M   | P |    N    |
   |Failed-AVP                 279      Grouped    | M   | P |    N    |
   |Origin-Host                264      DiamIdent  | M   | P |    N    |
   |Origin-Realm               296      DiamIdent  | M   | P |    N    |
   |Origin-State-Id            278      Unsigned32 | M   | P |    N    |
   |Proxy-Info                 284      Grouped    | M   | P |    N    |
   |Result-Code                268      Unsigned32 | M   | P |    N    |
   |Route-Record               282      DiamIdent  | M   |   |    N    |
   |Session-Id                 263      UTF8String | M   | P |    Y    |
   |User-Name                  1        UTF8String | M   | P |    Y    |
   +-----------------------------------------------+-----+---+---------+
   |M - Mandatory bit. An AVP with "M" bit set and its value MUST be   |
   |    supported and recognized by a Diameter entity in order the     |
   |    message, which carries this AVP, to be accepted.               |
   |P - Indicates the need for encryption for end-to-end security.     |
   +-------------------------------------------------------------------+

              Figure 9: DIAMETER AVPs used from Diameter base

   The Auth-Application-Id AVP (AVP Code 258) is assigned by IANA to
   Diameter applications.  The value of the Auth-Application-Id for the
   Diameter NAT Control Application is TBD.

8.2.  Additional Result-Code AVP Values

   This section defines new values for the Result-Code AVP which SHALL
   be supported by all Diameter implementations that conform to the
   present document.

8.2.1.  Success

   No new Result-Code AVP value is defined within this category.

8.2.2.  Transient Failures

   Result-Code AVP values that fall within the transient failures
   category are those used to inform a peer that the request could not



Brockners, et al.        Expires April 19, 2011                [Page 26]

Internet-Draft      Diameter NAT Control Application        October 2010


   be satisfied at the time that it was received.  The request may be
   able to be satisfied in the future.

   The following new values of the Result-Code AVP are defined:

      RESOURCE_FAILURE (TBD)

         The DNCA Agent indicates that the binding could not be
         installed or a new session could not be created due to resource
         shortage.

8.2.3.  Permanent Failures

   The Result-Code AVP values, which fall within the permanent failures
   category are used to inform the peer that the request failed, and
   should not be attempted again.  The request may be able to be
   satisfied in the future.

   The following new values of the Result-Code AVP are defined:

      UNKNOWN_BINDING_RULE_NAME (TBD)

         The DNCA Agent indicates that the binding could not be
         installed or a new session could not be created due to resource
         shortage.

      BINDING_FAILURE (TBD)

         The DNCA indicates that the requested binding(s) could not be
         installed.

      MAXIMUM_BINDINGS_REACHED_FOR_ENDPOINT (TBD)

         The DNCA Agent denies the request because the maximum number of
         allowed bindings has been reached for the specified Endpoint
         Classifier.

      SESSION_EXISTS (TBD)

         The DNCA Agent denies request to initialize a new session, if
         it already has a DNCA session that uses the same set of
         classifiers as indicated by DNCA Manager in the new session
         initializationrequest.

      INSUFFICIENT_CLASSIFIERS (TBD)

         The DNCA Agent defines request to initialize a new session, if
         the classifiers in the request match more than one of the



Brockners, et al.        Expires April 19, 2011                [Page 27]

Internet-Draft      Diameter NAT Control Application        October 2010


         existing sessions on DNCA Agent.

8.3.  Reused NASREQ Diameter Application AVPs

   The following AVPs are reused from Diameter Network Access Server
   Application [RFC4005].
                                          +---------------------+
                                          |    AVP Flag rules   |
   +------------------+------+------------|----+-----+----+-----|----+
   |                  | AVP  |            |    |     |SHLD| MUST|    |
   | Attribute Name   | Code |  Value Type|MUST| MAY | NOT|  NOT|Encr|
   |------------------|------|------------|----+-----+----+-----|----|
   | NAS-Port         |   5  | Unsigned32 | M  |  P  |    |  V  | Y  |
   | NAS-Port-Id      |  87  | UTF8String | M  |  P  |    |  V  | Y  |
   | Calling-Station- |  31  | UTF8String | M  |  P  |    |  V  | Y  |
   |   Id             |      |            |    |     |    |     |    |
   | Framed-IP-Address|   8  | OctetString| M  |  P  |    |  V  | Y  |
   | Framed-Interface-|  96  | Unsigned64 | M  |  P  |    |  V  | Y  |
   |   ID             |      |            |    |     |    |     |    |
   | Framed-IPv6-     |  97  | OctetString| M  |  P  |    |  V  | Y  |
   |  Prefix          |      |            |    |     |    |     |    |
   +------------------+------+------------|----+-----+----+-----|----+

            Figure 10: Reused NASREQ Diameter application AVPs

8.4.  Reused from RFC 4675

   The following AVPs are reused from "RADIUS Attributes for Virtual LAN
   and Priority Support" specification [RFC4675].
                                          +---------------------+
                                          |    AVP Flag rules   |
   +------------------+------+------------|----+-----+----+-----|----+
   |                  | AVP  |            |    |     |SHLD| MUST|    |
   | Attribute Name   | Code |  Value Type|MUST| MAY | NOT|  NOT|Encr|
   |------------------|------|------------|----+-----+----+-----|----|
   | Egress-VLANID    |  56  | OctetString| M  |  P  |    |  V  | Y  |
   +------------------+------+------------|----+-----+----+-----|----+

                Figure 11: Reused attributes from RFC 4675

8.5.  Reused from Diameter QoS Application

   The following AVPs are reused from the Traffic Classification and
   Quality of Service (QoS) Attributes for Diameter [RFC5777].







Brockners, et al.        Expires April 19, 2011                [Page 28]

Internet-Draft      Diameter NAT Control Application        October 2010


                                                   +-------------------+
                                                   |  AVP Flag rules   |
   +-----------------------------------------------|-----+---+---------+
   |                           AVP                 |     |   |   May   |
   | Attribute Name            Code     Data Type  |MUST |MAY| encrypt |
   +-----------------------------------------------+-----+---+---------+
   |Port                       TBD     Integer32   |  M  | P |    Y    |
   |IP-Address-Mask            TBD     Grouped     |  M  | P |    Y    |
   |Protocol                   TBD     Enumerated  |  M  | P |    Y    |
   |Direction                  TBD     Enumerated  |  M  | P |    Y    |
   +-----------------------------------------------+-----+---+---------+
   |M - Mandatory bit. An AVP with "M" bit set and its value MUST be   |
   |    supported and recognized by a Diameter entity in order the     |
   |    message, which carries this AVP, to be accepted.               |
   |P - Indicates the need for encryption for end-to-end security.     |
   +-------------------------------------------------------------------+

                     Figure 12: Reused QoS-attributes

8.6.  Reused from ETSI ES 283 034, e4 Diameter Application

   The following AVPs are reused from the Diameter e4 Application
   [ETSIES283034].
                                                   +-------------------+
                                                   |  AVP Flag rules   |
   +-----------------------------------------------|-----+---+---------+
   |                           AVP                 |     |   |   May   |
   | Attribute Name            Code     Data Type  |MUST |MAY| encrypt |
   +-----------------------------------------------+-----+---+---------+
   |Address-Realm              301     OctetString | M,V |   |    Y    |
   |Logical-Access-Id          302     OctetString |   V | M |    Y    |
   |Physical-Access-ID         313     UTF8String  |   V | M |    Y    |
   +-----------------------------------------------+-----+---+---------+
   |M - Mandatory bit. An AVP with "M" bit set and its value MUST be   |
   |    supported and recognized by a Diameter entity in order the     |
   |    message, which carries this AVP, to be accepted.               |
   |P - Indicates the need for encryption for end-to-end security.     |
   |V - Indicates whether the optional Vendor-ID field is present      |
   |    in the AVP header. Vendor-Id header of all AVPs in             |
   |    this table will be set to ETSI (13019).                        |
   +-------------------------------------------------------------------+

            Figure 13: Reused AVPs from Diameter e4 application








Brockners, et al.        Expires April 19, 2011                [Page 29]

Internet-Draft      Diameter NAT Control Application        October 2010


8.7.  DNCA Defined AVPs

   The following table describes the new Diameter AVPs used in this
   document.
                                                   +-------------------+
                                                   |  AVP Flag rules   |
   +-----------------------------------------------|-----+---+---------+
   |                       AVP  Section            |     |   |   May   |
   | Attribute Name        Code Defined Data Type  |MUST |MAY| encrypt |
   +-----------------------------------------------+-----+---+---------+
   |NC-Request-Type        TBD  7.7.1   Enumerated | M   | P |    Y    |
   |NAT-Control-Install    TBD  7.7.2   Grouped    | M   | P |    Y    |
   |NAT-Control-Remove     TBD  7.7.3   Grouped    | M   | P |    Y    |
   |NAT-Control-Definition TBD  7.7.4   Grouped    | M   | P |    Y    |
   |NAT-Internal-Address   TBD  7.7.5   Grouped    | M   | P |    Y    |
   |NAT-External-Address   TBD  7.7.6   Grouped    | M   | P |    Y    |
   |Max-NAT-Bindings       TBD  7.7.7   Unsigned32 | M   | P |    Y    |
   |NAT-Control-           TBD  7.7.8   OctetString| M   | P |    Y    |
   | Binding-Rule                                  |     |   |         |
   |Duplicate-             TBD  7.7.9   UTF8String | M   | P |    Y    |
   | Session-ID                                    |     |   |         |
   |NAT-Control-Record     TBD  8.2.1   Grouped    | M   | P |    Y    |
   |NAT-Control-           TBD  8.2.2   Enumerated | M   | P |    Y    |
   | Binding-Status                                |     |   |         |
   |Current-NAT-Bindings   TBD  8.2.3   Unsigned32 | M   | P |    Y    |
   +-----------------------------------------------+-----+---+---------+
   |M - Mandatory bit. An AVP with "M" bit set and its value MUST be   |
   |    supported and recognized by a Diameter entity in order the     |
   |    message, which carries this AVP, to be accepted.               |
   |P - Indicates the need for encryption for end-to-end security.     |
   |V - Vendor specific bit that indicates whether the optional        |
   |    Vendor-ID field is present in the AVP header.                  |
   +-------------------------------------------------------------------+

                       Figure 14: New Diameter AVPs

8.7.1.  NC-Request-Type AVP

   The NC-Request-Type AVP (AVP Code TBD) is of type Enumerated and
   contains the reason for sending the NAT-Control-Request command.  It
   shall be present in all NAT-Control-Request messages.

   The following values are defined:

      INITIAL_REQUEST (1)

         An Initial Request is used to install binding at the DNCA Agent
         on a successful access session setup.



Brockners, et al.        Expires April 19, 2011                [Page 30]

Internet-Draft      Diameter NAT Control Application        October 2010


      UPDATE_REQUEST (2)

         An Update Request is used to update bindings previously
         installed on a given access session, to add new binding on a
         given access session, or to remove one or several binding(s)
         activated on a given access session.

      QUERY_REQUEST (4)

         Query Request is used to query the DNCA Agent about the
         currently installed bindings for an endpoint classifier.

8.7.2.  NAT-Control-Install AVP

   The NAT-Control AVP (AVP code TBD) is of type Grouped, and it is used
   to activate or install NAT bindings.  It also contains Max-NAT-
   Bindings that defines maximum number of NAT bindings to be allowed
   for a subscriber and NAT-Control-Binding-Rule that references
   predefined policy template on DNCA Agent that may contain static
   bindings, maximum number of bindings to be allowed, address pool from
   which external binding address should be allocated.

   AVP format:
     NAT-Control-Install ::= < AVP Header: TBD >
                              * [ NAT-Control-Definition ]
                                [ NAT-Control-Binding-Rule ]
                                [ Max-NAT-Bindings]
                              * [ AVP ]

8.7.3.  NAT-Control-Remove AVP

   The NAT-Control-Remove AVP (AVP code TBD) is of type Grouped, and it
   is used to deactivate or remove NAT bindings.

   AVP format:
     NAT-Control-Remove ::= < AVP Header: TBD >
                             * [ NAT-Control-Definition ]
                               [ NAT-Control-Binding-Rule ]
                             * [ AVP ]

8.7.4.  NAT-Control-Definition AVP

   The NAT-Control-Definition AVP (AVP code TBD) is of type Grouped, and
   it describes a binding.

   The NAT-Control-Definition AVP uniquely identifies the binding
   between the DNCA Agent and the DNCA Manager.




Brockners, et al.        Expires April 19, 2011                [Page 31]

Internet-Draft      Diameter NAT Control Application        October 2010


   If both the NAT-Internal-Address and NAT-External-Address AVP(s) are
   supplied, it is a pre-defined binding.

   The Protocol AVP describes the transport protocol for the binding.
   The NAT-Control-Definition AVP can contain either zero or one
   Protocol AVP.  If the Protocol AVP is omitted and if both internal
   and external address are specified then the binding reserves the
   addresses for all transport protocols.

   The Direction AVP is of type Enumerated.  It specifies the direction
   for the binding.  The values of the enumeration applicable in this
   context are: "IN","OUT".  If Direction AVP is OUT or absent, NAT-
   Internal-Address refers to the address of the subscriber device that
   needs to be translated.  If Direction AVP is "IN", NAT-Internal-
   Address is the destination address that has to be translated.

   AVP format:
     NAT-Control-Definition ::= < AVP Header: TBD >
                                 { NAT-Internal-Address }
                                 [ Protocol ]
                                 [ Direction ]
                                 [ NAT-External-Address ]
                                 [ Session-Id ]
                               * [ AVP ]

8.7.5.  NAT-Internal-Address AVP

   The NAT-Internal-Address AVP (AVP code TBD) is of type Grouped.  It
   describes the internal IP address and port for a binding.  Framed-
   IPV6-Prefix and Framed-IP-Address AVPs are mutually exclusive.

   AVP format:
     NAT-Internal-Address ::= < AVP Header: TBD >
                               [ Framed-IP-Address ]
                               [ Framed-IPv6-Prefix ]
                               [ Port]
                             * [ AVP ]

8.7.6.  NAT-External-Address AVP

   The NAT-External-Address AVP (AVP code TBD) is of type Grouped, and
   it describes the external IP address and port for a binding.  IP-
   Address-Mask AVP can only be specified when Framed-IP-Address AVP is
   present.  External IP address specified in this attribute can be
   reused for multiple subscribers by specifying the same address in the
   respective NAT-External-Address AVPs.

   AVP format:



Brockners, et al.        Expires April 19, 2011                [Page 32]

Internet-Draft      Diameter NAT Control Application        October 2010


     NAT-External-Address ::= < AVP Header: TBD >
                               [ Framed-IP-Address ]
                               [ IP-Address-Mask ]
                               [ Port ]
                             * [ AVP ]

8.7.7.  Max-NAT-Bindings

   The Max-NAT-Bindings AVP (AVP code TBD) is of type Unsigned32.  It
   indicates the maximum number of NAT bindings allowed.

8.7.8.  NAT-Control-Binding-Rule AVP

   The NAT-Control-Binding-Rule AVP (AVP code TBD) is of type
   OctetString.  It defines a name for a policy template that will be
   predefined at NAT.  Details on the contents and structure of the
   template and configuration are outside the scope of this document.
   The policy to which this AVP refers to may contain NAT bindings,
   address pool for external address allocation of NAT binding, and
   maximum allowed NAT bindings.  Such policy template can be reused by
   specifying same NAT-Control-Binding-Rule AVP in corresponding NAT-
   Control-Install AVPs of multiple subscribers.

8.7.9.  Duplicate-Session-Id AVP

   The Duplicate-Session-Id AVP (AVP Code TBD) is of type UTF8String.
   It is used to report error and contains the Session-Id of an existing
   session.


9.  Accounting Commands

   The DNCA reuses session based accounting as defined in Diameter Base
   Protocol,[RFC3588] to report the bindings per endpoint.  This
   reporting is achieved by sending Diameter Accounting Requests (ACR)
   [Start, Interim and Stop] from the DNCA Agent to DNCA Manager.

   The DNCA Agent sends an ACR Start on receiving an NCR with NC-
   Request-Type AVP set to INITIAL_REQUEST for a session or on creation
   of the first binding for a session requested in an earlier NCR.  The
   DNCA may send ACR Interim updates, if required, either due to a
   change in bindings resulting from a NCR with NC-Request-Type AVP set
   to UPDATE_REQUEST, or periodically as specified in Acct-Interim-
   Interval by the DNCA Manager, or when it creates or tears down
   bindings.  An ACR Stop is sent by the DNCA Agent on receiving STR.

   The function of correlating the multiple bindings used by an endpoint
   at any given time is relegated to the post processor.



Brockners, et al.        Expires April 19, 2011                [Page 33]

Internet-Draft      Diameter NAT Control Application        October 2010


   The DNCA Agent may trigger an interim accounting record when maximum
   number of bindings, if received in NCR, is reached.

9.1.  NAT Control Accounting Messages

   The ACR and ACA messages are reused as defined in Diameter Base
   Protocol [RFC3588] for exchanging endpoint NAT binding details
   between the DNCA Agent and DNCA Manager.  The DNCA Application ID is
   used in the accounting commands.  ACR contains one or more optional
   NAT-Control-Record AVP to report the bindings.  The DNCA Agent
   indicates the number of allocated NAT bindings to the DNCA Manager
   using the Current-NAT-Bindings AVP.  This number needs to match the
   number of bindings identified as active within the NAT-Control-Record
   AVP.

9.2.  NAT Control Accounting AVPs

   In addition to AVPs for ACR specified in [RFC3588], the DNCA Agent
   must add the NAT-Control-Record AVP.

9.2.1.  NAT-Control-Record

   The NAT-Control-Record AVP (AVP code TBD) is of type Grouped.  It
   describes a binding and its status.  If NAT-Control-Binding-Status is
   set to Created, Event-Timestamp indicates the binding creation time.
   If NAT-Control-Binding-Status is set to Removed, Event-Timestamp
   indicates the binding removal time.  If NAT-Control-Binding-Status is
   active, Event-Timestamp need not be present; if a value is present,
   it indicates that binding is active at the given time.
     NAT-Control-Record ::= < AVP Header: TBD >
                            { NAT-Control-Definition }
                            { NAT-Control-Binding-Status }
                            [ Event-Timestamp ]

9.2.2.  NAT-Control-Binding-Status

   The NAT-Control-Binding-Status AVP (AVP code TBD) is of type
   enumerated.  It indicates the status of the binding - created,
   removed, or active.

   The following values are defined:

      Created (1)

         NAT binding is created.






Brockners, et al.        Expires April 19, 2011                [Page 34]

Internet-Draft      Diameter NAT Control Application        October 2010


      Active (2)

         NAT binding is active.

      Removed (3)

         NAT binding was removed.

9.2.3.  Current-NAT-Bindings

   The Current-NAT-Bindings AVP (AVP code TBD) is of type Unsigned32.
   It indicates number of NAT bindings active on NAT device.


10.  AVP Occurrence Table

   The following sections presents the AVPs defined in this document and
   specifies the Diameter messages in which, they MAY be present.  Note:
   AVPs that can only be present within a Grouped AVP are not
   represented in this table.

   The table uses the following symbols:



      0         The AVP MUST NOT be present in the message.

      0+        Zero or more instances of the AVP MAY be present in the
                message.

      0-1       Zero or one instance of the AVP MAY be present in the
                message.  It is considered an error if there is more
                than one instance of the AVP.

      1         One instance of the AVP MUST be present in the message.

      1+        At least one instance of the AVP MUST be present in the
                message.

10.1.  DNCA AVP Table for NAT Control Initial and Update Requests

   The following table lists the DNCA specific AVPs that have to be
   present in NCR and NCA with NC-Request-Type set to INITIAL_REQUEST or
   UPDATE_REQUEST.







Brockners, et al.        Expires April 19, 2011                [Page 35]

Internet-Draft      Diameter NAT Control Application        October 2010


                                       +-------------------+
                                       |  Command Code     |
   +-----------------------------------+-------------------+
   | Attribute Name                        NCR    NCA      |
   +-------------------------------------------------------+
   |NC-Request-Type                         1      1       |
   |NAT-Control-Install                     0-1    0       |
   |NAT-Control-Remove                      0-1    0       |
   |NAT-Control-Definition                  0      0       |
   |NAT-Control-Record                      0      0       |
   |Current-NAT-Bindings                    0      0       |
   |Duplicate-Session-Id                    0      0-1     |
   +-------------------------------------------------------+

10.2.  DNCA AVP Table for Session Query request

   The following table lists the DNCA specific AVPs that have to be
   present in NCR and NCA with NC-Request-Type set to QUERY_REQUEST.
                                       +-------------------+
                                       |  Command Code     |
   +-----------------------------------+-------------------+
   | Attribute Name                        NCR    NCA      |
   +-------------------------------------------------------+
   |NC-Request-Type                         1      1       |
   |NAT-Control-Install                     0      0       |
   |NAT-Control-Remove                      0      0       |
   |NAT-Control-Definition                  0      0+      |
   |NAT-Control-Record                      0      0       |
   |Current-NAT-Bindings                    0      1       |
   |Duplicate-Session-Id                    0      0       |
   +-------------------------------------------------------+

10.3.  DNCA AVP Table for Accounting Message

   The following table lists the DNCA specific AVPs, which may or may
   not be present in ACR and ACA messages.















Brockners, et al.        Expires April 19, 2011                [Page 36]

Internet-Draft      Diameter NAT Control Application        October 2010


                                       +-------------------+
                                       |  Command Code     |
   +-----------------------------------+-------------------+
   | Attribute Name                        ACR    ACA      |
   +-------------------------------------------------------+
   |NC-Request-Type                         0      0       |
   |NAT-Control-Install                     0      0       |
   |NAT-Control-Remove                      0      0       |
   |NAT-Control-Definition                  0      0       |
   |NAT-Control-Record                      0+     0       |
   |Current-NAT-Bindings                    1      0       |
   |Duplicate-Session-Id                    0      0       |
   +-------------------------------------------------------+


11.  IANA Considerations

   This section contains the namespaces that have either been created in
   this specification or had their values assigned to existing
   namespaces managed by IANA.

11.1.  Command Codes

   IANA is requested to allocate command code values for the following.

   Registry:

            +----------------+---------------------------+-------------+
            | Code Value     | Name                      | Reference   |
            +----------------+---------------------------+-------------+
            | to be assigned | NAT-Control-Request (NCR) | Section 6.1 |
            | to be assigned | NAT-Control-Answer (NCA)  | Section 6.2 |
            +----------------+---------------------------+-------------+

                          Table 1: Command codes

11.2.  AVP Codes

   IANA is requested to allocate AVP codes for the following AVPs that
   are defined in this document.

   Registry:









Brockners, et al.        Expires April 19, 2011                [Page 37]

Internet-Draft      Diameter NAT Control Application        October 2010


         +----------------+----------------------------+---------------+
         | Code Value     | Name                       | Reference     |
         +----------------+----------------------------+---------------+
         | to be assigned | NC-Request-Type            | Section 8.7.1 |
         | to be assigned | NAT-Control-Install        | Section 8.7.2 |
         | to be assigned | NAT-Control-Remove         | Section 8.7.3 |
         | to be assigned | NAT-Control-Definition     | Section 8.7.4 |
         | to be assigned | NAT-Internal-Address       | Section 8.7.5 |
         | to be assigned | NAT-External-Address       | Section 8.7.6 |
         | to be assigned | Max-NAT-Bindings           | Section 8.7.7 |
         | to be assigned | NAT-Control-Binding-Rule   | Section 8.7.8 |
         | to be assigned | Duplicate-Session-Id       | Section 8.7.9 |
         | to be assigned | NAT-Control-Record         | Section 9.2.1 |
         | to be assigned | NAT-Control-Binding-Status | Section 9.2.2 |
         | to be assigned | Current-NAT-Bindings       | Section 9.2.3 |
         +----------------+----------------------------+---------------+

                            Table 2: AVP codes

11.3.  AVP Values

11.3.1.  Result-Code AVP Values

   Section 8.2 defines several new values for the Result-Code AVP for
   transient and permanent failures.  IANA is requested to allocate the
   corresponding values from the ranges for transient (4xxx) and
   permantent (5xxx) failures.

   +-----------+---------------------------------------+---------------+
   | Code      | Name                                  | Reference     |
   | Value     |                                       |               |
   +-----------+---------------------------------------+---------------+
   | to be     | RESOURCE_FAILURE                      | Section 8.2.2 |
   | assigned  |                                       |               |
   | (4xxx)    |                                       |               |
   | to be     | UNKNOWN_BINDING_RULE_NAME             | Section 8.2.3 |
   | assigned  |                                       |               |
   | (5xxx)    |                                       |               |
   | to be     | BINDING_FAILURE                       | Section 8.2.3 |
   | assigned  |                                       |               |
   | (5xxx)    |                                       |               |
   | to be     | MAXIMUM_BINDINGS_REACHED_FOR_ENDPOINT | Section 8.2.3 |
   | assigned  |                                       |               |
   | (5xxx)    |                                       |               |
   | to be     | SESSION_EXISTS                        | Section 8.2.3 |
   | assigned  |                                       |               |
   | (5xxx)    |                                       |               |




Brockners, et al.        Expires April 19, 2011                [Page 38]

Internet-Draft      Diameter NAT Control Application        October 2010


   | to be     | INSUFFICIENT_CLASSIFIERS              | Section 8.2.3 |
   | assigned  |                                       |               |
   | (5xxx)    |                                       |               |
   +-----------+---------------------------------------+---------------+

                      Table 3: Result Code AVP Values

11.4.  Application IDs

   IANA is requested to allocate the following application ID using the
   next value from the 7-16777215 range.

   Registry:

       +----------------+----------------------------------+-----------+
       | ID Value       | Name                             | Reference |
       +----------------+----------------------------------+-----------+
       | to be assigned | Diameter NAT Control Application | Section 4 |
       +----------------+----------------------------------+-----------+

                 Table 4:  Diameter Application ID values


12.  Security Considerations

   Similar to the impact of Diameter QoS application (see
   [I-D.ietf-dime-diameter-qos]) on authorization of QoS reservations,
   this document describes procedures for authorizing NAT related
   attributes and parameters by an entity, which is non-local to the
   device performing NAT.  The security considerations for the Diameter
   QoS application (see [I-D.ietf-dime-diameter-qos] section 11) apply
   in a similar way to the DNCA.  Securing the information exchange
   between the authorizing entity (the DNCA Manager) and the NAT device
   requires bilateral authentication of the involved parties,
   authorization of the involved parties to perform the required
   procedures and functions, and procedures to ensure integrity and
   confidentiality of the information exchange.  The DNCA makes use of
   the capabilities offered by Diameter and the underlying transport
   protocols to deliver these requirements (see Section 5.1 ).

   It is assumed that the DNCA Agent and DNCA Manager are in the same
   domain and have a mutual trust set up.  Authorization between the
   DNCA Agent and DNCA Manager is beyond the scope of this document.


13.  Acknowledgements

   The authors would like to thank Jouni Korhonen, Avi Lior, Chris Metz,



Brockners, et al.        Expires April 19, 2011                [Page 39]

Internet-Draft      Diameter NAT Control Application        October 2010


   Hannes Tschofenig, Greg Weber, and Glen Zorn for their input on this
   document.


14.  Change History (to be removed prior to publication as an RFC)

   Changes from -00 to -01

   a.  new values for Result-Code AVP used - instead of Experimental-
       Result AVP

   b.  added support for transport specific binding (UDP/TCP)

   c.  added support for twice-NAT

   d.  clarified the use of the two different types of query-requests

   Changes from -01 to -02

   a.  Reference to pull mode removed, session initiation event
       clarified in section 4.1

   b.  added Redirect-* AVPs in NCA command

   c.  Removed reference to Called-Station-Id AVP in NCR command

   d.  Editorial changes

   e.  added support for bindings providing AFT (NAT64)

   Changes from -02 to -03

   a.  Editorial changes

   Changes from -03 to -04

   a.  Editorial changes suggested in WG Lastcall review

   b.  Removed NCR Request type terminate and replaced with STR

   c.  All references to Auth-Session-State are removed and a new
       section to describe FSM for Manager and Agent has been added

   d.  Clarified reuse of External address and address pools among
       multiple subscribers


15.  References



Brockners, et al.        Expires April 19, 2011                [Page 40]

Internet-Draft      Diameter NAT Control Application        October 2010


15.1.  Normative References

   [ETSIES283034]
              ETSI, "Telecommunications and Internet Converged Services
              and Protocols for Advanced Networks (TISPAN),Network
              Attachment Sub-System (NASS),e4 interface based on the
              Diameter protocol.", September 2008.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC3588]  Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J.
              Arkko, "Diameter Base Protocol", RFC 3588, September 2003.

   [RFC4675]  Congdon, P., Sanchez, M., and B. Aboba, "RADIUS Attributes
              for Virtual LAN and Priority Support", RFC 4675,
              September 2006.

   [RFC5777]  Korhonen, J., Tschofenig, H., Arumaithurai, M., Jones, M.,
              and A. Lior, "Traffic Classification and Quality of
              Service (QoS) Attributes for Diameter", RFC 5777,
              February 2010.

15.2.  Informative References

   [I-D.ietf-dime-diameter-qos]
              Sun, D., McCann, P., Tschofenig, H., ZOU), T., Doria, A.,
              and G. Zorn, "Diameter Quality of Service Application",
              draft-ietf-dime-diameter-qos-14 (work in progress),
              February 2010.

   [I-D.nishitani-cgn]
              Nishitani, T., Yamagata, I., Miyakawa, S., Nakagawa, A.,
              and H. Ashida, "Common Functions of Large Scale NAT
              (LSN)", draft-nishitani-cgn-03 (work in progress),
              November 2009.

   [RFC4005]  Calhoun, P., Zorn, G., Spence, D., and D. Mitton,
              "Diameter Network Access Server Application", RFC 4005,
              August 2005.

   [TS32299]  "3rd Generation Partnership Project; Technical
              Specification Group Service and System Aspects;
              Telecommunication management; Charging management;
              "Diameter charging applications", 3GPP TS 32.299 Version
              6.3.0.2", 2008.





Brockners, et al.        Expires April 19, 2011                [Page 41]

Internet-Draft      Diameter NAT Control Application        October 2010


Authors' Addresses

   Frank Brockners
   Cisco
   Hansaallee 249, 3rd Floor
   DUESSELDORF, NORDRHEIN-WESTFALEN  40549
   Germany

   Email: fbrockne@cisco.com


   Shwetha Bhandari
   Cisco
   Cessna Business Park, Sarjapura Marathalli Outer Ring Road
   Bangalore, KARNATAKA 560 087
   India

   Email: shwethab@cisco.com


   Vaneeta Singh
   Mavenir Systems
   Sharda Towers, 56/13 Nandidurga Road
   Bangalore 560046
   India

   Email: vaneeta@mavenir.com


   Victor Fajardo
   Telcordia Technologies
   1 Telcordia Drive #1S-222
   Piscataway, NJ 08854
   USA

   Email: vf0213@gmail.com















Brockners, et al.        Expires April 19, 2011                [Page 42]


