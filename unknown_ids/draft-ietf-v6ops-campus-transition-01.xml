<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?rfc toc="yes"?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>

<!ENTITY rfc2080  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2080.xml'>
<!ENTITY rfc2453  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2453.xml'>
<!ENTITY rfc2462  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2462.xml'>
<!ENTITY rfc2766  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2766.xml'>
<!ENTITY rfc3041  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3041.xml'>
<!ENTITY rfc3053  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3053.xml'>
<!ENTITY rfc3056  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3056.xml'>
<!ENTITY rfc3171  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3171.xml'>
<!ENTITY rfc3306  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3306.xml'>
<!ENTITY rfc3307  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3307.xml'>
<!ENTITY rfc3315  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3315.xml'>
<!ENTITY rfc3484  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3484.xml'>
<!ENTITY rfc3542  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3542.xml'>
<!ENTITY rfc3618  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3618.xml'>
<!ENTITY rfc3736  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3736.xml'>
<!ENTITY rfc3775  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3775.xml'>
<!ENTITY rfc3904  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3904.xml'>
<!ENTITY rfc3956  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3956.xml'>
<!ENTITY rfc3964  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3964.xml'>
<!ENTITY rfc3974  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3974.xml'>
<!ENTITY rfc4029  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4029.xml'>
<!ENTITY rfc4038  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4038.xml'>
<!ENTITY rfc4057  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4057.xml'>
<!ENTITY rfc4192  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4192.xml'>
<!ENTITY rfc4193  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4193.xml'>
<!ENTITY rfc4214  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4214.xml'>
<!ENTITY rfc4215  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4215.xml'>
<!ENTITY rfc4291  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4291.xml'>
<!ENTITY rfc4380  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4380.xml'>
<!ENTITY rfc4477  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4477.xml'>
<!ENTITY rfc4541  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4541.xml'>
<!ENTITY rfc4554  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4554.xml'>
<!ENTITY rfc4601  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4601.xml'>
<!ENTITY rfc4632  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4632.xml'>
<!ENTITY rfc4798  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4798.xml'>

<!ENTITY addcon  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-v6ops-addcon.xml'>
<!ENTITY secoverview  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-v6ops-security-overview.xml'>
<!ENTITY entanalysis  PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-v6ops-ent-analysis.xml'>

<rfc ipr="full3978" category="info" docName="draft-ietf-v6ops-campus-transition-01">
	<front>
		<title abbrev="IPv6 Campus Transition">IPv6 Campus Transition Scenario Description and Analysis</title>
		<author fullname="Tim Chown" initials="T.J." surname="Chown">
			<organization> University of Southampton </organization>
			<address>
				<postal> 
					<street/>
					<street>School of Electronics and Computer Science</street>
					<city> Southampton </city>
					<code> SO17 1BJ </code>
					<region> Hampshire </region>
					<country> United Kingdom </country>
				</postal>
				<email> tjc@ecs.soton.ac.uk </email>
			</address>
		</author>
		<date month="March" year="2007"/>
		<area>Operations</area>
		<workgroup>IPv6 Operations</workgroup>
		<abstract>
			<t>
   In this document we consider and analyse the specific scenario
of IPv6 transition and deployment in a large department of a university
campus network.   The department is large enough to operate its own
instances of all the conventional university services including (for
example) web, DNS, email, filestore, interactive logins, and remote and 
wireless access.   The scenario is a dual-stack one, i.e. transition to IPv6
means deploying IPv6 in the first instance (and probably for some time)
alongside IPv4.  This analysis identifies the available components
for IPv6 transition, while validating the applicability of the
IPv6 Enterprise Network Scenarios informational text.   It focuses on the
network and associated service elements of the transition, rather than 
the application elements.
			</t>
		</abstract>
<!--
		<note title="Requirements Language">
			<t>The key words &quot;MUST&quot;, &quot;MUST NOT&quot;,
&quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
&quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;,
&quot;MAY&quot;, and &quot;OPTIONAL&quot; in this document are to be
interpreted as described in <xref target="RFC2119">RFC 2119</xref>.
</t>
		</note>
-->
	</front>
	<middle>

<section title="Introduction">
<t>
The scope of the enterprise network transition scenarios being
considered by the IETF is very large,
much more so than that of the other three IPv6 transition areas that
have been studied (<xref target="RFC4029">ISP</xref>, 
<xref target="RFC3904">unmanaged</xref>
and <xref target="RFC4215">3GPP</xref>).   However, an
<xref target="RFC4057">IPv6 Enterprise Network Scenarios</xref>
description has been produced.   In this case study document we present 
our experience in a specific area
for IPv6 transition, namely a large department (1,500 staff and students,
over 1,000 hosts) in an academic campus network.   The purpose of this
document is to both define and analyse the IPv6 
transition of such a network, but also to test and validate 
the applicability of the
IPv6 Enterprise Network Scenarios document to a specific example.
This document describes the transition focusing on the
network elements.
</t>
<t>
Our campus study falls under Scenario 1 of the 
<xref target="RFC4057">IPv6 Enterprise Network Scenarios</xref> document, 
i.e. the campus network is an existing IPv4 network, where IPv6 is to 
be deployed in conjunction with the IPv4 network.   
</t>
<t>
Scenario 1 has the assumption that the IPv4 network 
infrastructure used has an equivalent capability in IPv6.  This document
analyses that assumption.   The Scenario also has requirements, i.e.
that the existing IPv4 network infrastructure is not disrupted, and
that IPv6 should be equivalent or better than the network infrastructure 
in IPv4.   The Scenario also notes that it may also not be feasible to
deploy IPv6 on all parts of the network immediately.
</t>
<t>
These assumptions and requirements will be discussed later in this text.
An incremental deployment strategy may, for example, be a desirable
property.
</t>
<t>
It should also be noted why Scenarios 2 and 3 did not apply to this campus
transition scenario.   Scenario 2 talks of specific applications, but in
the campus case we wish to deploy IPv6 pervasively, in wired and wireless
networks, as an enabler for education and research, to encourage new
application development.   Scenario 3 focuses on using IPv6 as the basis
for most network communication, but in the campus we already have a significant
IPv4 deployment that will be utilised for the foreseeable future (Scenario 3
would perhaps  be more appropriate for a green field deployment).
</t>

<section title="Site Philosophy">
<t>
The site which is the subject of this study is a large departmental
network on a campus.   That network (prior to transition) is an IPv4 network 
with around 20 subnets, using a core network infrastructure that combines
switch-router functionality in central devices, with switches at
the network edge.  The main switching equipment is all VLAN (IEEE 802.1q)
capable.
There are around 1,000 networked nodes and 1,500 users, not including
transient (mainly wireless) visitors.
</t>
<t>
The site wishes to deploy IPv6 dual-stack to support its own users along
with its teaching and research needs.  The goal is to IPv6 enable
the network (on the wire) and services (DNS, SMTP, etc) such that the
whole operation is dual-stack.   This in due course would allow IPv6-only
devices to be deployed within the fully IPv6-capable environment.  Some
network links may become IPv6-only in a subsequent phase in the future.
</t>
<t>
This text has evolved over time.  When we began writing, the department
did not have IPv6 capability on its existing IPv4 routing equipment, thus
an interim deployment method 
was required until the next router procurement.  We discuss
that interim solution within this document, and present the discussion
from an initial point of an interim parallel IPv6 deployment prior to
unifying the IPv4 and IPv6 routing on a single platform.  Our
initial deployment plan used a separate IPv6 path into the department with
a parallel routing infrastructure for IPv6.   In practice this meant that
our initial deployment used a parallel IPv6 routing infrastructure, using
BSD routers, for over three years, prior to deployment of 
a unified solution on a commercial platform.
</t>
</section>

</section>

<section title="Discussion of Scenarios Network Infrastructure Components">
<t>
In this section, we look at the issues raised by following step by step the
questions and considerations in the
Scenarios Network Infrastructure Components of the 
<xref target="RFC4057">IPv6 Enterprise Network Scenarios</xref> document, section 3.2.   This section is written from the perspective of pre-transition
planning, although we are writing this document having undergone transition.
</t>
	<section title="Component 1: Enterprise Provider Requirements">
	<t>
The answers to the questions posed in this section of the IPv6 Enterprise 
Network Scenarios document are as follows:
</t>
<list style="symbols">
<t>There is external access to/from the campus network, regional MAN and National Research Network beyond.</t>
<t>There are needs for access by remote staff, student and researchers.</t>
<t>It is a single site, with four geographically close buildings.</t>
<t>There are no leased lines or wide-area VPNs between remote buildings.</t>
<t>The department has 12 IPv4 Class C's, the campus has a Class B, independent
from its provider (assigned prior to use of <xref target="RFC4632">CIDR</xref>).</t>
<t>The IPv4 and IPv6 provider is the National Research and Education Network
(JANET in the UK).  JANET provides a /48 IPv6 site prefix for the university.  The 
university offers a /52 prefix for the department.</t>
<t>The university and department make their own prefix allocations for subnets.</t>
<t>There is no multihoming, and thus no multihomed clients.  The regional
academic MAN supports network resilience measures.</t>
<t>The provider (JANET) offers an IPv6 <xref target="RFC3053">Tunnel Broker</xref> 
service and a
<xref target="RFC3056">6to4</xref> relay, though the campus is offered native
IPv6 connectivity via its regional MAN.</t>
<t>There is no external IPv6 routing protocol needed due to the use of static 
route configuration between the campus and the regional network.</t>
<t>There is no external data centre.</t>
<t>IPv6 will run over the same access links to campus as IPv4 does
(the JANET backbone uses true dual stack, the regional MAN uses 
<xref target="RFC4798">6PE</xref>).  On campus, the IPv4
traffic to the department is received through a commercial firewall
solution, while the
IPv6 traffic will initially be received through a BSD firewall.  Thus the 
access links into the department for IPv4 and IPv6 are different, though 
the goal in the longer term is to make them the same.</t>
</list>
	</section>

	<section title="Component 2: Enterprise Application Requirements">

<t>
The focus of this document is network transition and services, but the
answers to the next IPv6 Enterprise Network Scenarios section on
application aspects are as follows:
</t>

<list style="symbols">
<t>The application inventory is out of scope of this text.</t>
<t>We expect the first applications to be IPv6-enabled will be the support services, 
including DNS.   The first applications should be the common IPv4 applications, e.g. web, remote login and email, such that IPv6 offers as least an equivalent service to IPv4 for the core service applications.</t>
<t>The academic environment has a good mix of open source and commercial software, predominantly either Microsoft or Linux, but with a growing number of Mac OS/X users.  An exhaustive list of desktop, laptop and PDA platforms is out of
scope of this text.  Most open source applications have been upgraded to
allow IPv6 operation out of the box; others can be upgraded given time.</t>
<t>The general goal is for applications to support both IPv4 or IPv6 operation, i.e. to be IP agnostic.</t>
<t>There is no use of NAT in the department's network.  Home users, or users access into the network remotely from certain locations, may experience NAT at their client side.</t>
<t>NAT issues are relevant from the end-to-end perspective, for establishment of end-to-end security where desired, and in relation to IPv6 transition (remote access) methods that may need to be run through NATs.</t>
<t>There is a mix of internal and external applications.   Where limitations occur, it is mainly by policy not technology, with that policy typically implemented through firewall restrictions.</t>
</list>
	</section>

	<section title="Component 3: Enterprise IT Department Requirements">
<t>
Here we list responses to the
next IPv6 Enterprise Network Scenarios section on IT Department
Requirements.   Again, in this section we write our comments from a
pre-transition perspective.
</t>
<list style="symbols">
<t>Network and system ownership and support is all in-house.</t>
<t>Remote VPNs are supported.</t>
<t>No inter-site networking is required.</t>
<t>No IP mobility support is required at this point, though we expect to
use Mobile IPv6 between the department network and a local community
wireless network, on our wireless LAN deployment as it grows in size, 
and to pilot its use inter-campus.</t>
<t>The IPv6 address plan for the department requires a /52 prefix.</t>
<t>There is no detailed asset database, though one exists providing a
host inventory (for DNS and DHCP use).</t>
<t>There are no (significantly) geographically separate sites.</t>
<t>The internal IPv4 address assignment mechanism is DHCP for clients,
with manual configuration for servers.  We thus expect to use DHCPv6 for
at least some, if not all, IPv6 clients.  This will depend on availability of
DHCP client and server software.</t>
<t>Internal IPv4 routing is static or uses RIP.  We thus expect to use
RIPng internally.</t>
<t>We expect our IPv6 network management policy to be very similar to that
for IPv4.  Having coherent policies, and a consistent means to configure them,
should make network operation simpler.</t>
<t>There is no QoS provision at present, largely due to the ample campus
bandwidth (1Gbit/s uplink).</t>
<t>Security is applied through many technologies implementing our policies,
e.g. firewall, email scanning, IDS and wireless LAN access controls.   
We expect similar policies for IPv6, but need to analyse potential 
differences (e.g. considering use of RFC3041 privacy <xref target="RFC3041">addresses</xref>).</t>
<t>Training will be done in-house.</t>
<t>The impacted software service components are discussed in the next main
section.  Not all functions are upgradeable to IPv6; those that are not
are discussed in the analysis sections.   Some are, e.g. use of OpenLDAP
(IPv6 capable) as an interim step in place of MS Active Directory (not
IPv6 capable at the time of the analysis).  Our view is that if
components cannot be given immediate IPv6 equivalents, this functionality
will come in due course, and IPv4 transport can be used in the interim.
But the ultimate goal is to facilitate IPv6 capability.</t>
<t>The impacted hardware components are discussed in the next main
section.  Not all hardware is upgradeable, e.g. network printers.  There
are no load balancing systems in use.   There are wireless LAN hosts in
the network that are mobile, but currently the wireless network is a
single flat IPv4 subnet.  There may be nodes moving to external wireless 
networks (i.e. the local community wireless network).</t>
</list>
	</section>

	<section title="Component 4: Enterprise Network Management System">
	<t>
The responses to the next IPv6 Enterprise Network Scenarios section are 
as follows:
	</t>
<list style="symbols">
<t>No performance management is required.  Systems are monitored for
loading for purposes for future capacity planning.</t>
<t>There are a number of network management and monitoring tools in use,
which will need to be used in a dual stack or IPv6 mode, e.g. the nocol
availability monitoring tools, and SNMP-based management.</t>
<t>The configuration management may include use of tools to configure
services including DNS and email.   In-house DNS management tools are
used.</t>
<t>No policy management and enforcement tools are required.</t>
<t>No detailed security management is required, though we expect to manage
the implementations including firewalls and intrusion detection, and
here a consistent management interface for both protocols is desirable..</t>
<t>We may need to manage any specific deployed transition tools and 
mechanisms.</t>
<t>We need to analyse the considerations IPv6 creates for network management,
e.g. use (or not) of IPv6 privacy addresses.  The need for user privacy is
recognised, but the need for simplified management is also a strong
consideration.</t>
</list>
	</section>

	<section title="Component 5: Enterprise Network Interoperation and Coexistence">
	<t>
Answers to the final IPv6 Enterprise Network Scenarios section on Coexistence
are as follows:
	</t>
<list style="symbols">
<t>An exhaustive list of platforms that are required to be IPv6 capable 
is out of scope of this text.</t>
<t>There is only one network ingress and egress point to the site that needs
to be IPv6 capable; this is a Gigabit Ethernet interface.</t>
<t>The required transition mechanisms are discussed in the analysis section.
In the initial phase of deployment, with the existing IPv4 switch-router
equipment not supporting IPv6 routing, We expect to mainly use the 
<xref target="RFC4554">VLAN</xref> mechanism for internal 
IPv6 transport, with
a parallel IPv6 routing infrastructure based on BSD routers, until the
core infrastructure is able to support IPv6 (via upgrade or a new
procurement).</t>
<t>The transition to IPv6 will be enabled on the wire first, enabling clients,
with a phased introduction of service capability, as discussed below in the
analysis section.</t>
<t>The preferred mechanism for interoperation with legacy nodes is to use
dual-stack and thus IPv4 to communicate with IPv4 nodes and IPv6 to
communicate to IPv6 nodes.  We have not identified any in-house, 
non-upgradeable legacy software applications (most in-house applications 
are presented to users as web applications).</t>
</list>

	</section>

</section>

<section title="Discussion of Network Infrastructure Component Requirements">
<t>
In this section, we discuss the 
network infrastructure component requirements raised in the
<xref target="RFC4057">IPv6 Enterprise Network Scenarios</xref> document, in section 4.   We document current IPv4 practices, and how we see these being
facilitated when IPv6 is deployed and enabled.
</t>
	<section title="DNS">
	<t>
The open source package BIND (version 9) is used for our three internal 
name servers.  The
servers will be made dual stack, to be available for IPv6 transport for
local dual-stack or IPv6-only nodes.   The three servers will each be
listed with AAAA records, and AAAA glue added.
	</t>
	</section>

	<section title="Routing">
	<t>
Internal unicast 
routing is either statically configured or uses RIP.   We thus
expect to use RIPng for internal IPv6 routing.   The external routing
is statically configured for IPv4, and thus is likely to be statically
configured for IPv6.
	</t>
	</section>

	<section title="Configuration of Hosts">
	<t>
IPv4 clients use DHCP for address and other configuration options.  We
expect to use 
<xref target="RFC3315">Dynamic Host Configuration Protocol for IPv6 (DHCPv6)</xref>
for IPv6 clients.
This will require analysis of the
<xref target="RFC4477">IPv4 and IPv6 Dual-Stack Issues for DHCPv6</xref>.
We expect some clients, perhaps those in wireless LANs, to use
<xref target="RFC2462">IPv6 Stateless Autoconfiguration</xref>, and these
nodes will need support for
<xref target="RFC3736">Stateless Dynamic Host Configuration Protocol (DHCP) Service for IPv6</xref> for other configuration options, including the IPv6 address
of a local DNS resolver.
</t>
<t>
Although IPv6 offers Stateless Autoconfiguration, it is expected that the
managed environment will continue, driven from the asset database, for
some time.   The site administrators are comfortable with the use of DHCP
for IPv4, and wish to use it for IPv6, for global address and potentially
IPv6 Privacy Address assignment.   Thus DHCPv6 is required.   
Use of Stateless Autoconfiguration
implies a requirement for dynamic DNS updates for such nodes.   It is
not yet decided how to apply or enforce that plan; it may certainly be
flexible with time.
	</t>
	</section>

	<section title="Security">
	<t>
We need to identify new IPv6 related security considerations, and those
associated with
<xref target="I-D.ietf-v6ops-security-overview">transition mechanisms</xref>.
Site policies may need to be updated as a result.
	</t>
	</section>

	<section title="Applications">
	<t>
Discussion of applications is out of scope of this document.   However,
the
<xref target="RFC4038">Application Aspects of IPv6 Transition</xref> document describes best porting practice for applications.    A new Advanced Sockets
API for <xref target="RFC3542">IPv6</xref> defines the IP version independent
API that is now widely supported.    Recent versions of Java support IPv4
and IPv6 operation.
There should also be consideration for making any required application 
proxies dual-stack.
	</t>
	</section>

	<section title="Network Management">
	<t>
The network management and monitoring systems will need to support IPv6,
and the management and monitoring of any transition mechanisms used to 
deploy IPv6.   Monitoring includes
usage tracking (e.g. via open source packages such as MRTG) and availability 
monitoring (e.g. via the Nagios package).
	</t>
	</section>

	<section title="Address Planning">
	<t>
The department has been allocated 12 Class C prefixes for IPv4 use, and 
uses only globally routable addresses internally.   No IPv4 NAT is used.
The IPv4 address space for the
campus was obtained prior to CIDR, but the IPv6 address space is 
allocated from the UK National Research Network (JANET) address space.
The university receives a /48 prefix, and the department has a /52 
allocation within this block.
	</t>
	<t>
Given that global IPv4 addresses are in use throughout our network, we
plan to use global IPv6 addresses as well.   Since we also do not expect
to renumber (our IPv6 provider is expected to be JANET indefinitely)
and our connectivity is expected to be stable
we do not see any real need to deploy Unique Local 
<xref target="RFC4193">Addresses (ULAs)</xref>.
Doing so would require full support for Default Address 
<xref target="RFC3484">Selection</xref> (so that ULA source addresses
are used for ULA destinations, and global source addresses for
global destinations)
and running a two-faced DNS (with ULAs advertised only internally),
which we do not currently do for IPv4.
	</t>
	<t>
IPv6 address assignment planning for a campus-style enterprise is 
discussed separately in more detail 
in the <xref target="I-D.ietf-v6ops-addcon">IPv6 Unicast Address 
Assignment Considerations</xref> text.
	</t>
	</section>


	<section title="Multicast">
	<t>
IPv4 multicast is used for a number of applications, including
AccessGrid multi-party videoconferencing.
Connectivity is provided via the local campus and regional network.
We expect to use <xref target="RFC4601">PIM-SM</xref> for IPv6, initially
as Any Source Multicast (ASM).
We also plan to make use of Source Specific Multicast (SSM) more
heavily in IPv6, bringing IPv6 and SSM together in one deployment cycle.
	</t>
	<t>
The use of IPv6 multicast makes it much simpler for our site to generate its
own globally unique multicast group addresses than is the case for IPv4, 
where we need
to use GLOP <xref target="RFC3171">space</xref>
from an upstream provider.  For IPv6, you can generate
your own unique multicast group address for 
regular <xref target="RFC3306">groups</xref> 
or Embedded-RP <xref target="RFC3956">groups</xref> based on
your unicast prefix (typically /48 or /64).   
	</t>
	<t>
Since there is no <xref target="RFC3618">MSDP</xref> equivalent for IPv6,
we only expect to use regular unicast prefix based group 
<xref target="RFC3306">addresses</xref> within our own organisational
scope.   For wider scope multicast
we expect to use Embedded-RP
where possible, running our own IPv6 Rendezvous Point(s) to support our 
own content.   In terms of the IPv6 address 
<xref target="RFC4291">architecture</xref>,
we plan to use a site scope (ff05) for our department,
with the university having organisational scope (ff08).   Locally assigned
group IDs would honour the guidelines of <xref target="RFC3307">RFC3307</xref>.
	</t>
	</section>

	<section title="Multihoming">
	<t>
The site is not multihomed for IPv4, and thus will not be for IPv6.
This is typical for UK academic networks, where resilience is provisioned
through the regional MAN links.
	</t>
	</section>

</section>

<section title="Specific Scenario Component Review">
<t>

Here we describe specific technology in use now in the department.
Later in this section we discuss any items not included in the above 
section, i.e. those not explicitly mentioned in the
IPv6 Enterprise Network Scenarios document. 
Note that not all applications and services have at the time of
writing been made IPv6 capable; in general open source packages are
IPv6 capable out of the box, but discussion of specific applications
is outside the scope of this text (this text aims to be a stable
description of the processes and thinking followed during our campus
transition).
</t>

<section title="Network Components">

	<section title="Physical connectivity (Layer 2)">
	<t>
<list style="symbols">
<t>Switched Ethernet</t>
<t>Gigabit Ethernet</t>
<t>Wireless networking (802.11a/b/g)</t>
</list>
	</t>
	</section>

	<section title="Routing and Logical subnets (Layer 3)">
	<t>
The hybrid Layer 2/3 routing equipment has approximately 20 internal IPv4 subnets (in effect, routed VLANs).   The only specific internal routing protocol used is <xref target="RFC2453">RIP</xref>.    There is a static route via the site firewall to the main upstream provider (academic) running at 1Gbit/s.   We would expect to use <xref target="RFC2080">RIPng</xref> for IPv6 internally.
	</t>
	</section>

	<section title="Firewall">
	<t>
The firewall is currently one running on a commercial hardware platform without IPv6 support.   There is one internal facing interface, one external facing interface, and two DMZ interfaces, one for wired hosts and one for the Wireless LAN provision.   We expect the topology to remain the same, with the DMZ(s) becoming dual-stack.
	</t>
	</section>

	<section title="Intrusion Detection System">
	<t>
The Snort open source package is used locally for IPv4 IDS.   Work on IPv6 capability for Snort is ongoing, but needs to consider both similar (e.g. application transport) issues as IPv4 as well as IPv6-specific issues (e.g. excessive use of Hop-by-Hop options).
	</t>
	</section>

	<section title="Management">
	<t>
Some network management is performed by SNMP; there is no specific package for this (scripts used are in-house).   
	</t>
	</section>

	<section title="Monitoring">
	<t>
A number of open source tools are used, to monitor network usage as well as systems availability, e.g. Nagios and MRTG.    The network testing tools include iperf, rude and crude.
	</t>
	</section>

	<section title="Remote access">
	<t>
	</t>
<list style="symbols">
<t>RADIUS servers (our current RADIUS package supports IPv6)</t>
<t>VPN servers</t>
</list>
	</section>

	<section title="IPv6 External Access">
	<t>
<list style="symbols">
<t>IPv6 connectivity will come via our regional MAN (which runs 6PE)
through trunked (unrouted) VLANs across campus to our departmental
network.  Because the existing IP firewall pre-transition does not support
IPv6, IPv6 will need to be transported into the departmental network via
a separate parallel IPv6 capable firewall (e.g. a BSD system using a
package such as pf).</t>
</list>
	</t>
	</section>

</section>

<section title="Address Allocation Components">
<t>
The department receives its IPv4 and IPv6 address allocations from the University.   For IPv4, the University has a Class B allocation which is not aggregated under the JANET NREN address space post-CIDR.  For IPv6, the University receives its allocation from JANET. 
</t>

	<section title="IPv6 network prefix allocation">
	<t>
For IPv6, JANET currently has a /32 prefix from RIPE-NCC, as the national academic ISP in the UK.   The university has been allocated a /48 from this block by JANET.  The department IPv6 deployment will be allocated a /52 size prefix from the university allocation.
</t>
<t>
In the initial deployment, we expect that IPv4 and IPv6 subnets will be congruent (and share the same VLANs).    This is because the existing subnet divisions
are made for geographic or administrative reasons that are not IP version
dependent (e.g. by building location or research group membership).
</t>
<t>
One advantage of IPv6 is that subnets will not need to be resized to conserve or efficiently utilise address space as is the case currently for IPv4 (as subnet host counts rise and fall for administrative or research group growth/decline reasons).

	</t>
	</section>

	<section title="IPv6 Address allocation">
	<t>
It is expected that the network devices will use a combination of address allocation mechanisms:
</t>
<list style="symbols">
<t>Manually configured addresses (in some servers)</t>
<t>Stateful DHCPv6 (probably in fixed, wired devices and some servers)</t>
<t>Stateless address autoconfiguration (probably in wireless and mobile devices)</t>
<t>RFC3041 privacy addresses (in some client devices)</t>
</list>
<t>
For devices using stateless or RFC3041 mechanisms, at least a Stateless DHCPv6 
<xref target="RFC3736">service</xref> will be required for other (non-address) configuration options, e.g. DNS and NTP servers.   It is likely that a full DHCPv6 service would provide this function however.
	</t>
	<t>
As discussed above, due to current experience with DHCP for IPv4, where all addresses are managed centrally, we expect that use of DHCPv6 for address allocation and management will be preferred (once implementations are mature).
	</t>
	</section>

</section>

<section title="Core Services">
<t>

	<section title="Email">
	<t>
There are three MX hosts for inbound email, and two main internal mail servers.   Sendmail is the MTA.   
MailScanner is used for anti-spam/anti-virus.   This uses external services including various RBLs for part of its spam checking.
Successful reverse DNS lookup is required for sendmail to accept internal SMTP connections for delivery. 
Email access is provided by a variety of open source and commercial 
client and server applications (including a web front end) 
the details of which are outside the scope of this document.
	</t>
	<t>
We expect to continue to use sendmail for MX and MTA functions, as it supports IPv6 out of the box.   Each of our MX servers will be made dual stack, noting the considerations in <xref target="RFC3974">RFC3974</xref>.
	</t>
	</section>

	<section title="Web Hosting">
	<t>
Web content hosting is provided either with Apache 2.x (open source) or in some cases commercial equivalents.   Common components used to build systems with are MySQL, PHP and Perl; these enable local tools such as Wikis to be run.   Apache 2.x has support for IPv6 included.
	</t>
	</section>

	<section title="Directory Services">
<t>
The following directory services are used:
</t>
<list style="symbols">
<t>NIS (being phased out)</t>
<t>LDAP (OpenLDAP has IPv6 support)</t>
<t>Active Directory</t>
<t>RADIUS (Our current RADIUS package has IPv6 support)</t>
</list>
	</section>

	<section title="DNS">
	<t>
The three DNS servers are running BIND9.   A DNS secondary is held at another UK university site.   While we will make our three DNS servers dual-stack, our DNS secondary would remain IPv4-only since it is out of our administrative control.
	</t>
	</section>

	<section title="NTP">
	<t>
The JANET NREN offers a stratum 1 NTP server.   The department also has a GPS-based NTP server built-in to its own RIPE NCC test traffic server and an NTP
device from a commercial provider.   Both support IPv6 operation and transport.
	</t>
	</section>

	<section title="Multicast">
	<t>
PIM-SM IPv4 multicast is facilitated via a dedicated commercial router, using a Rendezvous Point operated by our regional network.    This supports applications including the IPv4 AccessGrid conferencing system.    A number of bugs in the existing IPv4 routing equipment prevent heavy use of IPv4 Multicast within the department network (another reason that an IPv6 Multicast solution is desirable).   An IPv4 Multicast beacon is used for monitoring Multicast.  Our IPv6 multicast deployment plans are discussed in Section 3.8 above.
	</t>
	</section>

</t>
</section>

<section title="Hard-coded address points">
<t>
Usage of IPv4 hard-coded addresses is interesting for at least two
reasons.  One is that it illustrates where IPv6 hard-coded addresses may
appear, and thus secondly it is useful to analyse which hard-coded
addresses may be barriers to smooth IPv6 renumbering.
A procedure for renumbering has been described in
<xref target="RFC4192">Procedures for Renumbering an IPv6 Network without a Flag Day</xref>.

A non-exhaustive list of instances of such addresses includes:
</t>
<list style="symbols">
<t>Provider based prefix(es)</t>
<t>Names resolved to IP addresses in firewall at startup time</t>
<t>IP addresses in remote firewalls allowing access to remote services</t>
<t>IP-based authentication in remote systems allowing access to online bibliographic resources</t>
<t>IP address of both tunnel end points for IPv6 in IPv4 tunnel</t>
<t>Hard-coded IP subnet configuration information</t>
<t>IP addresses for static route targets</t>
<t>Blocked SMTP server IP list (spam sources)</t>
<t>Web .htaccess and remote access controls</t>
<t>Apache .Listen. directive on given IP address</t>
<t>Configured multicast rendezvous point</t>
<t>TCP wrapper files</t>
<t>Samba configuration files</t>
<t>DNS resolv.conf on Unix</t>
<t>Nocol monitoring tool</t>
<t>NIS/ypbind via the hosts file</t>
<t>Some interface configurations</t>
<t>Unix portmap security masks</t>
<t>NIS security masks</t>
</list>
</section>

</section>

<section title="IPv6 Enterprise Deployment Procedure">

<t>
In this section we document (retrospectively) the procedure
we went through in deploying IPv6 within our campus site.
</t>
<t>
The work described in this document has also been fed into the
<xref target="I-D.ietf-v6ops-ent-analysis">IPv6 Enterprise Analysis</xref>.
The reader is referred in particular to Section 4 ("Wide-Scale Dual-Stack 
Deployment") and Section 7 ("General issues and applicability for all 
Scenarios") which were directly contributed from the work here.
</t>
<t>
As described in the 
<xref target="I-D.ietf-v6ops-ent-analysis">IPv6 Enterprise Analysis</xref>
document, the scenario here is one of wide-scale dual-stack deployment.
The plan for deployment follows the general guidelines of Section 7
of that document, though we have expanded that description here from
subsequent experience.
</t>
<t>
Note that our analysis does not include issues relating to
deployment of new IPv6-specific technology, 
e.g. <xref target="RFC3775">MIPv6</xref>.   The focus of our deployment
has been deploying dual-stack pervasively on the wire, with core network
oriented services being IPv6 enabled.
</t>

<section title="Advanced Planning">
<t>
A first phase for deployment includes the following actions.
</t>

<list style="symbols">
<t>Include IPv6 requirements in all future tenders.  Consult to understand IPv6 specification requirements for tenders; this may prove particularly valuable
where new IPv6 specific technology is desirable, e.g. Embedded-RP support
for Multicast.</t>
<t>Identify your IPv6 ISP.  This will most likely be your IPv4 ISP also, but
in some cases it may not be.</t>
<t>Speak to your IPv6 ISP to acquire IPv6 address space (a /48 prefix) for your site; you will need this at some point, so may as well acquire the space sooner rather than later.  This will include delegation of IPv6 forward and reverse DNS for your site.
Our campus address space is a /48 prefix allocated by JANET.</t>
<t>Establish IPv6 training for operational staff, for administration of host and router platforms.</t>
<t>Investigate how to deploy basic IPv6 network services: DNS, routing, host configuration.</t>
<t>Encourage operational staff to get some IPv6 familiarity by trying IPv6 through services such as a public or ISP-supported IPv6 <xref target="RFC3053">tunnel broker</xref>.</t>
<t>Review IPv6 security issues.  IPv6 is enabled by default on many host platforms; this should be considered when enforcing security policies on systems and networks.</t>
</list>
<t>
Following these action points should allow sites or networks to be ready for a trial or pilot IPv6 deployment, and to have confidence they understand and have control of their current - perhaps unwitting - usage of IPv6 (from systems which have it enabled by default).
</t>

</section>

<section title="Testbed/Trial Deployment">
<t>
In this stage a site is validating IPv6 for deployment, and will thus take actions including the following:
</t>

<list style="symbols">
<t>Assign and deploy an IPv6-capable router and (we recommend) a firewall or filtering device.</t>
<t>Establish IPv6 connectivity to the IPv6 ISP.   Sites might use a tunnelled service, or check for any native IPv6 offering.
In our case, the connectivity is
native IPv6 from JANET, via the regional MAN 
(using <xref target="RFC4798">6PE</xref>) and the
campus (using a VLAN to carry IPv6 natively).</t>
<t>Connect testbed host systems on the internal router interface, using one subnet prefix (a /64) from the site's allocated IPv6 /48 prefix. At this stage your trial network may be standalone (disconnected from other internal networks) or, as we did, it may be that you dual-stack your existing IPv4 DMZ(s) for the pilot phase.</t>
<t>Enable IPv6 on the host systems, and test IPv6 functions on services and applications (e.g. BIND for DNS, Apache for Web, sendmail or exim for mail transport).</t>
</list>
<t>
In parallel, other preparation can be undertaken for a production deployment:
</t>

<list style="symbols">
<t>Survey systems, applications and services for IPv6 capability, including management, monitoring and access control devices and systems.  The Enterprise Scenarios text as evaluated earlier in this document is a good basis to undertake this task from.</t>
<t>Formulate an IPv6 address plan for your site/network.
Our campus has allocated the
department network a /56 prefix that can grow into a /52 prefix, i.e.
the department can in theory create up to 256 IPv6 subnets initially.  We
discuss address planning issues in a separate document on IPv6
<xref target="I-D.ietf-v6ops-addcon">addressing considerations</xref>.</t>
<t>Discuss and document IPv6-related policies (e.g. use of Privacy Addresses, and of stateless or stateful address assignment).</t>

</list>
<t>
Once the site is satisfied in the testbed deployment, then a production deployment can be considered, enabling IPv6 for appropriate links and services.
</t>

</section>

<section title="Production Deployment">
<t>
A production deployment includes the following action points:
</t>

<list style="symbols">
<t>Plan which parts of the network will be IPv6-enabled first, and which existing subnets will be IPv6-enabled (made dual-stack).   This may be certain server subnets, a DMZ, or a Wireless LAN network, for example.</t>
<t>Determine how your production IPv6 connectivity will be handled; it can (ideally) be via a single dual-stack entry point, or through separate IPv4 and IPv6 links.</t>
<t>Enable IPv6, and IPv6 routing, such that IPv6 is on the wire, prior to
host system activation.   Ensure filtering and firewall policies are implemented
as required.</t>
<t>Add IPv6 address configuration to your DNS systems, and configure them to respond over IPv4 or IPv6 transport.  Do not advertise AAAA records for a node until it is IPv6-reachable.   Be aware that multiple services may run on a node,  all of which may need to be IPv6-enabled before a AAAA record for the node is published.</t>
<t>Deploy IPv6 support in appropriate management and monitoring tools.</t>
<t>Enable IPv6 in selected production services and applications (e.g. Apache or IIS for web servers).   In our case, we focused initially on DNS (bind), mail/MX (sendmail) and web services (Apache) in dual-stack mode.</t>
<t>Include IPv6 transport in all ongoing security audit/penetration tests.</t>
<t>Support IPv4-IPv6 interworking.   As there are not (yet) any IPv6-only 
links on our site, interworking methods are not required.   Should IPv6-only 
devices be deployed on the dual-stack infrastructure, we anticipate using 
proxy tools (web cache, SMTP relay, etc) to support their access to legacy 
IPv4 services, rather than deploying translation-based tools.</t>
<t>Supporting remote users.  These may connect via an IPv4 VPN and then
use an IPv6 connection over that VPN, or use the remote IPv6 services
of your ISP (e.g. our ISP, JANET, runs a tunnel broker and a 6to4 relay).</t>
</list>
<t>
The depth of the IPv6 deployment may vary from site to site.   By enabling key services you make your site ready for a fuller deployment, and gain confidence and experience in the technology, which is good for your support staff, your students, staff and researchers.
</t>

</section>
</section>

<section title="Analysis: Dual-Stack Deployment - Transition toolbox">
<t>
Within our network we initially deployed IPv6 such that it was
routed in parallel to IPv4, but with data running on the same end-host links,
using a VLAN-based method as cited below.  This allowed us to pilot IPv6 
without risking adverse impact on our existing IPv4 platforms.  This method
was used for over two years.  Towards the end of its use, the BSD platforms
used to facilitate this were showing signs of strain under the load,
in terms of pure unicast and multicast forwarding requirements
under heavier traffic bursts.
We have since deployed a unified IPv4 and IPv6 commercial 
routing platform from a
single vendor, which met all our IPv4 and IPv6 procurement requirements
for IPv4 and IPv6 unicast and multicast functions, including but not
limited to:
<list style="symbols">
<t>IPv6 unicast routing protocols;</t>
<t>IPv6 multicast routing protocols (PIM-SM including SSM);</t>
<t>IPv6 multicast Embedded-RP support;</t>
<t>IPv6 multicast MLD(v1 and v2) snooping (see <xref target="RFC4541">RFC4541</xref>).</t>
</list>
</t>
<t>
We have used the following mechanisms in our department's transition 
process:
</t>
<list style="symbols">
<t><xref target="RFC4554">VLANs</xref> in an initial phase to distribute
IPv6 connectivity over the non-dual-stack capable network infrastructure.
This VLAN solution was an interim step until full dual protocol capable 
equipment
was deployed during 2005;</t>
<t>A <xref target="RFC3053">Tunnel broker</xref> for remote access, 
provided by our IPv6 ISP (JANET).  We initially deployed our own tunnel broker,
but now refer our home and roaming users to the JANET solution.   This
is only used for remote access to our network, not within our network;</t>
<t>A <xref target="RFC3056">6to4</xref> relay for remote access, provided
by our IPv6 ISP.  Again, we used to run our own relay, but the relay operated
by our IPv6 ISP is perfectly adequate at this time for communicating 
with 6to4 sites.  We do not believe 6to4 is an acceptable solution as 
a campus connectivity method (because we do not then use our own IPv6
address space as allocated by JANET, and 6to4 itself is prone to failure and
<xref target="RFC3964">abuse</xref>).</t>
</list>
<t>We do NOT currently see a requirement for:</t>
<list style="symbols">
<t><xref target="RFC2766">NAT-PT</xref>, because we are dual-stack with
no IPv6-only networks (yet), and as we introduce such networks, or IPv6-only
nodes in the dual-stack networks, we expect to use application layer 
gateways and proxies for legacy IPv4 access.   Where dual-stack nodes
may in future be used on IPv6-only links, the Dual Stack Transition Mechanism 
(DSTM) may be of value, but preference would be given to use IPv6 transport
where possible;</t>
<t><xref target="RFC4214">ISATAP</xref>, because we prefer
to use a structured internal IPv6 deployment, and are doing so in a 
pervasive fashion (i.e. not as a sparse deployment).   ISATAP may be useful
for sparse deployment of IPv6 in sites who are happy to IPv6 pilot in a less
structured fashion.   We do not wish to see arbitrary automatic tunnels
being used between links on our network;</t>
<t><xref target="RFC4380">Teredo</xref> - we considered deploying 
servers/relays 
to support home users behind NATs, but chose not to do so since our ISP's
tunnel broker service supports NAT traversal, and we feel it offers better
management and monitoring facilities.   This decision may be reviewed 
if we see a rise in demand for Teredo service support.</t>
</list>

</section>

<section title="Analysis: Considerations beyond the Scenarios Document">
<t>
Here we mention issues or scenario components that were not explicitly
listed in the IPv6 Enterprise Network Scenarios document.   Due to the scope,
that document could not embrace all details.  We mention here components
that other sites may also wish to consider:
</t>
<list style="symbols">
<t>Support for WLAN and other access control.  Most sites tend to use 
a web-redirection portal to authenticate users, but these invariably do
not detect or support use of IPv6.  One solution is to use 802.1x
which is IP-agnostic as a Layer 2 port control mechanism.</t>
<t>Consideration for hard-coded addresses.</t>
</list>
<t>
The brevity of this list shows that the IPv6 Enterprise Network Scenarios text
includes very good coverage of the issues and considerations 
faced by our enterprise site.
</t>
</section>


<section title="Summary">
<t>
In this document we have analysed the specific campus transition scenario 
for the author's site, and reported the analysis for the benefit of others
who may be in a similar scenario, or for whom parts of the scenario may be
relevant.   
</t>
<t>
In our case transition does not mean from IPv4 only to IPv6 only, rather
from IPv4 only to a dual-stack environment that could support IPv6 only
nodes at a later date.   We would probably best describe the process as dual 
stack integration.
</t>
<t>
We have described how a phased approach to transition can be adopted at
a campus site (or part thereof), from a planning stage through a pilot
to a fuller deployment.   During our transition we initially ran a
parallel IPv6 routing infrastructure, then in 2005 unified the routing to
a single platform, for unicast and multicast IPv6.   We enabled key services
for dual-stack operation from the outset (DNS, web and mail/MX) and have
enabled other services as and when they have become available.
The VLAN-based interim step was useful for two years until a dual-protocol 
routing solution could be procured.
</t>
<t>
We do not discuss detailed availability of IPv6 capability in the services
described in Section 4 above in this text, and we leave application support
as an issue out of scope (though we observe that open source support for
IPv6 is in general very good).  For the
purposes of our network-oriented transition, we are happy that the path 
taken and current solution is stable and complete.
</t>
<t>
The deployment has now been in
full dual-stack operation for over two years, with key services enabled 
(including public-facing DNS, SMTP, web) without any significant 
adverse effects on
the IPv4 service.   The author welcomes discussion with other sites that
are undergoing or have undergone a similar transition or integration process.
</t>

</section>

<section title="Acknowledgements">
<t>
Discussions with fellow participants on the 6NET and Euro6IX projects
have been valuable.   Input from the IETF IPv6 Operations WG list have
also been welcomed.
</t>
</section>

		<section anchor="IANA" title="IANA Considerations">
			<t>
The document contains no IANA considerations.</t>
		</section>

		<section anchor="Security" title="Security Considerations">
			<t>
There are no specific new considerations from this scenario description
and analysis.
</t>
		</section>
<!--
		<section anchor="Acknowledgements" title="Acknowledgements">
			<t>
</t>
		</section>
-->
<!--
                <section title="Change Log">

                <section title="Version 01">

<list style="symbols">
<t></t>
</list>

                </section>
                </section>

-->
	</middle>
	<back>
	        <references title="Informative References">

	&rfc2080;
	&rfc2453;
	&rfc2462;
	&rfc2766;
	&rfc3041;
	&rfc3053;
	&rfc3056;
	&rfc3171;
	&rfc3306;
	&rfc3307;
	&rfc3315;
	&rfc3484;
	&rfc3542;
	&rfc3618;
	&rfc3736;
	&rfc3775;
	&rfc3904;
	&rfc3956;
	&rfc3964;
	&rfc3974;
	&rfc4029;
	&rfc4038;
	&rfc4057;
	&rfc4192;
	&rfc4193;
	&rfc4214;
	&rfc4215;
	&rfc4291;
	&rfc4380;
	&rfc4477;
	&rfc4541;
	&rfc4554;
	&rfc4601;
	&rfc4632;
	&rfc4798;

	&addcon;
	&secoverview;
	&entanalysis;

		</references>
		<!--		<references title="Normative References">
		</references>
		-->
	</back>
</rfc>
