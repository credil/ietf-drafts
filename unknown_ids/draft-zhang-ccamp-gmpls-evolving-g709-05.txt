Network Working Group                                        Fatai Zhang 
Internet Draft                                                    Huawei 
Category: Standards Track                                  Guoying Zhang 
                                                                    CATR 
                                                          Sergio Belotti 
                                                          Alcatel-Lucent 
                                                           D. Ceccarelli 
                                                                Ericsson 
Expires: January 2011                                       July 9, 2010 
                                    
                                    
      Generalized Multi-Protocol Label Switching (GMPLS) Signaling 
  Extensions for the evolving G.709 Optical Transport Networks Control 
                                    
                                    
               draft-zhang-ccamp-gmpls-evolving-g709-05.txt 


Status of this Memo 

   This Internet-Draft is submitted to IETF in full conformance with   
   the provisions of BCP 78 and BCP 79. 

   Internet-Drafts are working documents of the Internet Engineering   
   Task Force (IETF), its areas, and its working groups.  Note that   
   other groups may also distribute working documents as Internet-   
   Drafts. 

   Internet-Drafts are draft documents valid for a maximum of six months   
   and may be updated, replaced, or obsoleted by other documents at any   
   time.  It is inappropriate to use Internet-Drafts as reference   
   material or to cite them other than as "work in progress." 

   The list of current Internet-Drafts can be accessed at   
   http://www.ietf.org/ietf/1id-abstracts.txt. 

   The list of Internet-Draft Shadow Directories can be accessed at   
   http://www.ietf.org/shadow.html. 

   This Internet-Draft will expire on January 9, 2011. 

    

Abstract 
 
   Recent progress in ITU-T Recommendation G.709 standardization has 
   introduced new ODU containers (ODU0, ODU4, ODU2e and ODUflex) and 
   enhanced Optical Transport Networking (OTN) flexibility. Several 

 
 
 
<Zhang>                 Expires January 2011                   [Page 1] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


   recent documents have proposed ways to modify GMPLS signaling 
   protocols to support these new OTN features.  

   It is important that a single solution is developed for use in GMPLS 
   signaling and routing protocols. This solution must support ODUk 
   multiplexing capabilities, address all of the new features, be 
   acceptable to all equipment vendors, and be extensible considering 
   continued OTN evolution.  

   This document describes the extensions to the Generalized Multi-
   Protocol Label Switching (GMPLS) signaling to control the evolving 
   Optical Transport Networks (OTN) addressing ODUk multiplexing and new 
   features including ODU0, ODU4, ODU2e and ODUflex. 

Conventions used in this document 

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in [RFC2119]. 

Table of Contents 

    
   1. Introduction..................................................3 
   2. Terminology...................................................4 
   3. GMPLS Extensions for the Evolving G.709 - Overview............4 
   4. Extensions for Traffic Parameters for the Evolving G.709......5 
      4.1. Usage of ODUflex Traffic Parameter.......................6 
      4.2. Example of ODUflex Traffic Parameter.....................7 
   5. Generalized Label.............................................8 
      5.1. New definition of ODUk Label.............................9 
      5.2. Examples................................................10 
      5.3. Label Distribution Procedure............................12 
      5.4. Backward Compatibility Considerations...................13 
         5.4.1. Control Plane Backward Compatibility Considerations13 
         5.4.2. Data Plane Backward Compatibility Considerations...14 
   6. Tributary Port Number Assignment.............................15 
      6.1. TPN Object..............................................15 
      6.2. Procedure of TPN Assignment.............................16 
         6.2.1. Downstream Node Assignment by Control Plane........16 
         6.2.2. Upstream Node Assignment by Control Plane..........16 
      6.3. Collision Management....................................17 
   7. Security Considerations......................................17 
   8. IANA Considerations..........................................17 
   9. References...................................................18 
      9.1. Normative References....................................18 
      9.2. Informative References..................................19 
 
 
Zhang                   Expires January 2011                   [Page 2] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


   10. Authors' Addresses..........................................19 
   Acknowledgment..................................................21 
 
 
1. Introduction 

   Generalized Multi-Protocol Label Switching (GMPLS) [RFC3945] extends 
   MPLS to include Layer-2 Switching (L2SC), Time-Division Multiplex 
   (e.g., SONET/SDH, PDH, and ODU), Wavelength (OCh, Lambdas) Switching, 
   and Spatial Switching (e.g., incoming port or fiber to outgoing port 
   or fiber). [RFC3471] presents a functional description of the 
   extensions to Multi-Protocol Label Switching (MPLS) signaling 
   required to support Generalized MPLS.  RSVP-TE-specific formats and 
   mechanisms and technology specific details are defined in [RFC3473]. 

   With the evolution and deployment of G.709 technology, it is 
   necessary that appropriate enhanced control technology support be 
   provided for G.709. [RFC4328] describes the control technology 
   details that are specific to foundation G.709 Optical Transport 
   Networks (OTN), as specified in the ITU-T Recommendation G.709[G709-
   V1], for ODUk deployments without multiplexing. 

   In addition to increasing need to support ODUk multiplexing, the 
   evolution of OTN has introduced additional containers and new 
   flexibility. For example, ODU0, ODU2e, ODU4 containers and ODUflex 
   are developed in [G709-V3]. 

   In addition, the following issues require consideration: 

      -  Support for hitless adjustment of ODUflex, which is to be 
         specified in ITU-T G.hao. 

      -  Support for Tributary Port Number. The Tributary Port Number 
         has to be negotiated on each link for flexible assignment of 
         tributary ports to tributary slots in case of LO-ODU over HO-
         ODU (e.g., ODU2 into ODU3).  

   Therefore, it is clear that [RFC4328] has to be updated or superceded 
   in order to support ODUk multiplexing, as well as other ODU 
   enhancements introduced by evolution of OTN standards.  

   This document updates RFC4328 extending the G.709 ODUk traffic 
   parameters and also presents a new OTN label format which is very 
   flexible and scalable. 



 
 
Zhang                   Expires January 2011                   [Page 3] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


2. Terminology 

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",   
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this   
   document are to be interpreted as described in [RFC2119]. 

    

3. GMPLS Extensions for the Evolving G.709 - Overview 

   New features for the evolving OTN, for example, new ODU0, ODU2e, ODU4 
   and ODUflex containers are specified in [G709-V3].  The corresponding 
   new signal types are summarized below: 

      -  Optical Channel Transport Unit (OTUk): 
         .  OTU4 

      -  Optical Channel Data Unit (ODUk): 
         .  ODU0 
         .  ODU2e 
         .  ODU4 
         .  ODUflex 

   A new Tributary Slot (TS) granularity (i.e., 1.25 Gbps) is also 
   described in [G709-V3]. Thus, there are now two TS granularities for 
   the foundation OTN ODU1, ODU2 and ODU3 containers. The TS granularity 
   at 2.5 Gbps is used on legacy interfaces while the new 1.25 Gbps will 
   be used for the new interfaces. 

   In addition to the support of ODUk mapping into OTUk (k = 1, 2, 3, 4), 
   the evolving OTN [G.709-V3] encompasses the multiplexing of ODUj (j = 
   0, 1, 2, 2e, 3, flex) into an ODUk (k > j) as follows: 

      -  ODU0 into ODU1 multiplexing (with 1.25Gbps TS granularity) 

      -  ODU0, ODU1, ODUflex into ODU2 multiplexing (with 1.25Gbps TS 
         granularity) 

      -  ODU1 into ODU2 multiplexing (with 2.5Gbps TS granularity) 

      -  ODU0, ODU1, ODU2, ODU2e and ODUflex into ODU3 multiplexing 
         (with 1.25Gbps TS granularity) 

      -  ODU1, ODU2 into ODU3 multiplexing (with 2.5Gbps TS granularity) 

      -  ODU0, ODU1, ODU2, ODU2e, ODU3 and ODUflex into ODU4 
         multiplexing (with 1.25Gbps TS granularity) 
 
 
Zhang                   Expires January 2011                   [Page 4] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


   [RFC4328] describes GMPLS signaling extensions to support the control 
   for G.709 Optical Transport Networks (OTN) [G709-V1]. However, 
   [RFC4328] needs to be updated because it does not provide the means 
   to signal all the new signal types and related mapping and 
   multiplexing functionalities. Moreover, it supports only the 
   deprecated auto-MSI mode which assumes that the Tributary Port Number 
   is automatically assigned in the transmit direction and not checked 
   in the receive direction. 

   This document extends the G.709 traffic parameters described in 
   [RFC4328] and presents a new OTN label format which is very flexible 
   and scalable. Additionally, procedures about Tributary Port Number 
   assignment through control plane are also provided in this document. 

    

4. Extensions for Traffic Parameters for the Evolving G.709 

   The traffic parameters for G.709 are defined as follows: 

      0                   1                   2                   3 
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     |  Signal Type  |   Tolerance   |              NMC              | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     |              NVC              |        Multiplier (MT)        | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     |                            Bit_Rate                           | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    

   The Signal Type should be extended to cover the new Signal Type 
   introduced by the evolving OTN. The new Signal Type is extended as 
   follows: 

      Value    Type 
      -----    ---- 
      0        Not significant 
      1        ODU1 (i.e., 2.5 Gbps) 
      2        ODU2 (i.e., 10 Gbps) 
      3        ODU3 (i.e., 40 Gbps) 
      4        ODU4 (i.e., 100 Gbps) 
      5        Reserved (for future use) 
      6        OCh at 2.5 Gbps 
      7        OCh at 10 Gbps 

 
 
Zhang                   Expires January 2011                   [Page 5] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


      8        OCh at 40 Gbps 
      9        OCh at 100 Gbps 
      10~19    Reserved (for future use) 
      20       ODU0 (i.e., 1.25 Gbps) 
      21~30    Reserved (for future use) 
      31       ODU2e (i.e., 10Gbps for FC1200 and GE LAN) 
      32       ODUflex (i.e., 1.25*N Gbps) 
      33~255   Reserved (for future use) 

    

   In case of ODUflex(CBR), the Bit_Rate and Tolerance fields are used 
   together to represent the actual bandwidth of ODUflex, where: 

   -  The Bit_Rate field indicates the nominal bit rate of ODUflex(CBR) 
      encoded as a 32-bit IEEE single-precision floating-point number 
      (referring to [RFC4506] and [IEEE]). 

   -  The Tolerance field indicates the bit rate tolerance (part per 
      million, ppm) of the ODUflex(CBR) encoded as an unsigned integer.  

   For example, for an ODUflex(CBR) service with Bit_Rate = 2.5Gbps and 
   Tolerance = 50ppm, the actual bandwidth of the ODUflex is: 

               2.5Gbps * (1 - 50ppm) ~ 2.5Gbps * (1 + 50ppm) 

   In case of other ODUk signal types, the Bit_Rate and Tolerance fields 
   are not necessary and MUST be filled with 0. 

4.1. Usage of ODUflex Traffic Parameter 

   In case of ODUflex(CBR), the information of Bit_Rate and Tolerance in 
   the ODUflex traffic parameter is used to determine the total number 
   of tributary slots N in the HO ODUk link to be reserved. Here:  

         N = Ceiling of 

   ODUflex(CBR) nominal bit rate * (1 + ODUflex(CBR) bit rate tolerance) 
   --------------------------------------------------------------------- 
       ODTUk.ts nominal bit rate * (1 - HO OPUk bit rate tolerance) 

    
   Therefore, a node receiving a Path message containing ODUflex(CBR) 
   traffic parameter can allocate precise number of tributary slots and 
   set up the cross-connection for the ODUflex service. 

 
 
Zhang                   Expires January 2011                   [Page 6] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


   The table below shows the actual bandwidth of the tributary slot of 
   ODUk (in Gbps), referring to [G709-V3]. 

      ODUk       Minimum          Nominal          Maximum 
      ------------------------------------------------------- 
      ODU2    1.249 384 632    1.249 409 620    1.249 434 608 
      ODU3    1.254 678 635    1.254 703 729    1.254 728 823 
      ODU4    1.301 683 217    1.301 709 251    1.301 735 285 

      Note that: 

      Minimum bandwidth of ODUTk.ts =  
         ODTUk.ts nominal bit rate * (1 - HO OPUk bit rate tolerance) 

      Maximum bandwidth of ODTUk.ts =  
         ODTUk.ts nominal bit rate * (1 + HO OPUk bit rate tolerance) 

      Where: HO OPUk bit rate tolerance = 20ppm 

   For different ODUk, the bandwidths of the tributary slot are 
   different, and so the total number of tributary slots to be reserved 
   for the ODUflex(CBR) may not be the same on different HO ODUk links. 
   This is why the traffic parameter should bring the actual bandwidth 
   information other than the NMC field. 

   [Editors note] In case of ODUflex(GFP), the calculation of the total 
   number of tributary slots to be reserved along the path is now under 
   discussion in ITU-T. Therefore, the traffic parameters for 
   ODUflex(GFP) is for further study. 

    

4.2. Example of ODUflex Traffic Parameter 

   This section gives an example to illustrate the usage of ODUflex(CBR) 
   traffic parameter. 

   Assume there is an ODUflex(CBR) service requesting a bandwidth of 
   (2.5Gbps, +/-20ppm) from node A to node C. In other words, the 
   ODUflex traffic parameter indicates that Signal Type is 32 (ODUflex), 
   Bit_Rate is 2.5Gbps and Tolerance is 20ppm. 

    

    

    
 
 
Zhang                   Expires January 2011                   [Page 7] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


     +-----+             +---------+             +-----+ 
     |     +-------------+ +-----+ +-------------+     | 
     |     ===============\| ODU |/===============     | 
     |     ===============/| flex+-===============     | 
     |     +-------------+ |     |\===============     | 
     |     +-------------+ +-----+ +-------------+     | 
     |     |             |         |             |     | 
     |     |   .......   |         |   .......   |     | 
     |  A  +-------------+    B    +-------------+  C  | 
     +-----+   HO ODU4   +---------+   HO ODU2   +-----+ 
    
       =========: TS occupied by ODUflex 
       ---------: free TS 
    

   -  On the HO ODU4 link between node A and B: 

      The maximum bandwidth of the ODUflex equals 2.5Gbps * (1 + 20ppm), 
      and the minimum bandwidth of the tributary slot of ODU4 equals 
      1.301 683 217Gbps, so the total number of tributary slots N1 to 
      be reserved on this link is: 

      N1 = ceiling (2.5Gbps * (1 + 20ppm) / 1.301 683 217) = 2 

   -  On the HO ODU2 link between node B and C: 

      The maximum bandwidth of the ODUflex equals 2.5Gbps * (1 + 20ppm), 
      and the minimum bandwidth of the tributary slot of ODU2 equals 
      1.249 384 632Gbps, so the total number of tributary slots N2 to 
      be reserved on this link is: 

      N2 = ceiling (2.5Gbps * (1 + 20ppm) / 1.249 384 632) = 3 

5. Generalized Label 

   [RFC3471] has defined the Generalized Label which extends the 
   traditional label by allowing the representation of not only labels 
   which travel in-band with associated data packets, but also labels 
   which identify time-slots, wavelengths, or space division multiplexed 
   positions. The format of the corresponding RSVP-TE Generalized Label   
   object is defined in the Section 2.3 of [RFC3473]. 

   However, for different technologies, we usually need use specific 
   label rather than the Generalized Label. For example, the label 
   format described in [RFC4606] could be used for SDH/SONET, the label 
   format in [RFC4328] for G.709. 

 
 
Zhang                   Expires January 2011                   [Page 8] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


   According to the ODUk label format defined in [RFC4328], it could be 
   updated to support new signal types defined in [G709-V3] but would 
   hardly be further enhanced to support possible new signal types. 
   Furthermore such label format can face large problems related to 
   scalability issues due to the high number of labels needed. For 
   example, when ODU3 is mapped into ODU4 with 1.25G tributary slots, it 
   will need thirty-one labels (31*4*8=992 bits) to be allocated for one 
   ODU3 connection. For ODUflex into ODU4, it may need up to eighty 
   labels (80*4*8=2560 bits) to be allocated for one ODUflex connection. 

   In this document, a new ODUk label format is defined. The new ODUk 
   label format is very flexible and scalable. 

5.1. New definition of ODUk Label  

   In order to be compatible with new types of ODU signal and new types 
   of tributary slot, the following new ODUk label format is defined: 

    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   | ODUj  |OD(T)Uk| T | Reserved  |           Bit Map             | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |                           .........                           | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    
   ODUj and OD(T)Uk (4 bits respectively): indicate that LO ODUj is 
   multiplexed into HO ODUk(k>j), or LO ODUj is mapped into OTUk (j=k). 

   ODUj field    Signal type 
   ----------    ----------- 
      0          LO ODU0 
      1          LO ODU1 
      2          LO ODU2 
      3          LO ODU3 
      4          LO ODU4 
      5          LO ODU2e 
      6          LO ODUflex 
      7-15       Reserved (for future use) 
    

   OD(T)Uk field   Signal type 
   -------------   ----------- 
      0            Reserved (for future use) 
      1            HO ODU1 / OTU1 
 
 
Zhang                   Expires January 2011                   [Page 9] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


      2            HO ODU2 / OTU2 
      3            HO ODU3 / OTU3 
      4            HO ODU4 / OTU4 
      5-15         Reserved (for future use) 
    

   T (2 bits): indicates the type of tributary slot of HO ODUk. 
   Currently, two types of tributary slot are defined in [G709-V3], the 
   1.25Gbps tributary slot and the 2.5Gbps tributary slot. 

   T field      TS type 
   -------      -------        
     0          1.25Gbps TS granularity 
     1          2.5Gbps TS granularity 
     2-3        Reserved (for future use) 
    

   Bit Map (variable): indicates which tributary slots in HO ODUk that 
   the LO ODUj will be multiplexed into. The sequence of the Bit Map is 
   consistent with the sequence of the tributary slots in HO ODUk. Each 
   bit in the bit map represents the corresponding tributary slot in HO 
   ODUk with a value of 1 or 0 indicating whether the tributary slot 
   will be used by LO ODUj or not. 

   The size of the bit map equals to the total number of the tributary 
   slots of HO ODUk. 

   In case of an ODUk mapped into OTUk, it's no need to indicate which 
   tributary slots will be used, so the size of Bit Map is 0. 

   Padded bits are added behind the Bit Map to make the whole label a 
   multiple of four bytes if necessary. Padded bit MUST be set to 0 and 
   MUST be ignored. 

    

5.2. Examples  

   The following examples are given in order to illustrate the label 
   format described in the previous sections of this document. 

   (1) ODUk into OTUk mapping:  

   In such conditions, the downstream node along an LSP returns a label 
   indicating that the ODU1 (ODU2 or ODU3 or ODU4) is directly mapped 
 
 
Zhang                   Expires January 2011                  [Page 10] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


   into the corresponding OTU1 (OTU2 or OTU3 or ODU4). The following 
   example label indicates an ODU1 mapped into OTU1. 

    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |0 0 0 1|0 0 0 1|0 1| Reserved  |        Padded Bits (0)        | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 

   (2) ODUj into ODUk multiplexing:  

   In such conditions, this label indicates that an ODUj is multiplexed 
   into several tributary slots of OPUk and then mapped into OTUk. Some 
   instances are shown as follow: 

   -  ODU0 into ODU2 Multiplexing: 

    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |0 0 0 0|0 0 1 0|0 0| Reserved  |0 1 0 0 0 0 0 0|Padded Bits (0)| 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 

   This above label indicates an ODU0 multiplexed into the second 
   tributary slot of ODU2, wherein the type of the tributary slot is 
   1.25Gbps. 

   -  ODU1 into ODU2 Multiplexing with 1.25Gbps TS granularity: 

    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |0 0 0 1|0 0 1 0|0 0| Reserved  |0 1 0 1 0 0 0 0|Padded Bits (0)| 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 

   This above label indicates an ODU1 multiplexed into the 2nd and the 
   4th tributary slot of ODU2, wherein the type of the tributary slot is 
   1.25Gbps. 

   -  ODU2 into ODU3 Multiplexing with 2.5Gbps TS granularity: 

    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |0 0 1 0|0 0 1 1|0 1| Reserved  |0 1 1 0 1 0 1 0 0 0 0 0 0 0 0 0| 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 

 
 
Zhang                   Expires January 2011                  [Page 11] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


   This above label indicates an ODU2 multiplexed into the 2nd, 3rd, 5th 
   and 7th tributary slot of ODU3, wherein the type of the tributary 
   slot is 2.5Gbps. 

5.3. Label Distribution Procedure 

   This document does not change the existing label distribution 
   procedures [RFC4328] for GMPLS except that the new ODUk label should 
   be processed as follows. 

   When a node receives a generalized label request for setting up an 
   ODUj LSP from its upstream neighbor node, the node should generate an 
   ODU label according to the signal type of the requested LSP and the 
   free resources (i.e., free tributary slots of ODUk) that will be 
   reserved for the LSP, and send the label to its upstream neighbor 
   node. Note that these labels can also be specified by the source node 
   of the connection.  

   In case of ODUj to ODUk multiplexing, the node should firstly 
   determine the size of the Bit Map field according to the signal type 
   and the tributary slot type of ODUk, and then set the bits to 1 in 
   the Bit Map field corresponding to the reserved tributary slots. 

   In case of ODUk to OTUk mapping, the node only needs to fill the ODUj 
   and the ODUk fields with corresponding values in the label. Other 
   bits are reserved and MUST be set to 0. 

   When receiving an ODU label from its downstream neighbor node, the 
   node should learn which ODU signal type is multiplexed or mapped into 
   which ODU signal type by analyzing the ODUj and the ODUk fields.  

   In case of ODUj to ODUk multiplexing, the node should firstly 
   determine the size of the Bit Map field according to the signal type 
   and the tributary slot type of ODUk, and then obtain which tributary 
   slots in ODUk are reserved by its downstream neighbor node according 
   to the position of the bits that are set to 1 in the Bit Map field, 
   so that the node can multiplex the ODUj into the reserved tributary 
   slots of ODUk after the LSP is established.  

   In case of ODUk to OTUk mapping, the size of Bit Map field is 0 and 
   no additional procedure is needed. 






 
 
Zhang                   Expires January 2011                  [Page 12] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


5.4. Backward Compatibility Considerations 

5.4.1. Control Plane Backward Compatibility Considerations 

   Since the [RFC4328] has been deployed in the network for the nodes 
   that support [G709-V1] (herein we call them "legacy nodes"), backward 
   compatibility SHOULD be taken into consideration when the new nodes 
   (i.e., nodes that support [G709-V3]) and the legacy nodes are 
   interworking. 

   For backward compatibility consideration, the new node SHOULD have 
   the ability to generate and parse legacy labels. 

   o  For the legacy node, it always generates and sends legacy label to 
      its upstream node, no matter the upstream node is new or legacy, 
      as described in [RFC4328]. 

   o  For the new node, it will generate and send legacy label if its 
      upstream node is a legacy one, and generate and send new label if 
      its upstream node is a new one. 

   One backwards compatibility example is shown below: 

           Path          Path           Path           Path 
   +-----+ ----> +-----+ ----> +------+ ----> +------+ ----> +-----+ 
   |     |       |     |       |      |       |      |       |     | 
   |  A  +-------+  B  +-------+   C  +-------+   D  +-------+  E  | 
   | new |       | new |       |legacy|       |legacy|       | new | 
   +-----+ <---- +-----+ <---- +------+ <---- +------+ <---- +-----+ 
            Resv          Resv           Resv           Resv 
        (new label)  (legacy label) (legacy label)  (legacy label) 

   As described above, for backward compatibility considerations, it is 
   necessary for a new node to know whether the neighbor node is new or 
   legacy. 

   One optional method is manual configuration. But it is recommended to 
   use LMP to discover the capability of the neighbor node automatically, 
   as described in [OTN-LMP].  

   When performing the HO ODU link capability negotiation: 

   o  If the neighbor node only support the 2.5Gbps TS and only support 
      ODU1/ODU2/ODU3, the neighbor node should be treated as a legacy 
      node. 


 
 
Zhang                   Expires January 2011                  [Page 13] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


   o  If the neighbor node can support the 1.25Gbps TS, or can support 
      other LO ODU types defined in [G709-V3]), the neighbor node should 
      be treated as new node. 

   o  If the neighbor node returns a LinkSummaryNack message including 
      an ERROR_CODE indicating nonsupport of HO ODU link capability 
      negotiation, the neighbor node should be treated as a legacy node. 

5.4.2. Data Plane Backward Compatibility Considerations 

   As described in chapter 3.1 and 4.1 of [OTN-LMP], the node supporting 
   1.25Gbps TS can interwork with the other nodes that supporting 
   2.5Gbps TS by combining Specific TSs together in data plane. The 
   control plane MUST support this TS combination. 

   Take the following figure as an example. Assume that there is an ODU2 
   link between node A and B, where node A only supports the 2.5Gbps TS 
   while node B supports the 1.25Gbps TS. In this case, the TS#i and 
   TS#i+4 (where i<=4) of node B are combined together. When creating an 
   ODU1 service in this ODU2 link, node B reserves the TS#i and TS#i+4 
   with the granularity of 1.25Gbps. But in the label sent from B to A, 
   it is indicated that the TS#i with the granularity of 2.5Gbps is 
   reserved. 

                             Path 
         +----------+   ------------>    +----------+ 
         |     TS1==|===========\--------+--TS1     | 
         |     TS2==|=========\--\-------+--TS2     | 
         |     TS3==|=======\--\--\------+--TS3     | 
         |     TS4==|=====\--\--\--\-----+--TS4     | 
         |          |      \  \  \  \----+--TS5     | 
         |          |       \  \  \------+--TS6     | 
         |          |        \  \--------+--TS7     | 
         |          |         \----------+--TS8     | 
         +----------+   <------------    +----------+ 
            node A           Resv           node B 

    

   In the contrary direction, when receiving a label from node A 
   indicating that the TS#i with the granularity of 2.5Gbps is reserved, 
   node B will reserved the TS#i and TS#i+4 with the granularity of 
   1.25Gbps in its control plane. 

    


 
 
Zhang                   Expires January 2011                  [Page 14] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


6. Tributary Port Number Assignment 

   As described in [G709-V3] and [G798-V3], the OPUk overhead in an OTUk 
   frame contains n (n = the total number of TSs of the ODUk) MSI 
   (Multiplex Structure Identifier) bytes (in the form of multi-frame), 
   each of which is used to indicate the multiplex structure of one TS, 
   respectively. 

   When an LO ODUj is multiplexed into HO ODUk occupying one or more TSs, 
   a Tributary Port Number (TPN) is configured at the two end of the HO 
   ODUk link and is put into the related MSI byte(s) in the OPUk 
   overhead at the (traffic) ingress end of the link, so that the other 
   end of the link can learn which TS(s) is/are used by the LO ODUj in 
   the data plane. 

   For HO ODU2 or ODU3 link, the TPN value (6 bits) MUST be different 
   from each other for one type of LO ODU. For HO ODU4 link, the TPN 
   value (7 bits) MUST be different from each other for all types of LO 
   ODUj. 

   TPN needs to be assigned by management plane or control plane. For 
   the latter case, the RSVP-TE signaling is necessary to be extended to 
   support the TPN assignment function. 

6.1. TPN Object 

   A new TPN object is introduced in the PATH and RESV message to 
   support TPN assignment. The TPN object is optional and has the 
   following format: 

   TPN Class-Num = xx (TBD), C_Type = 1 

    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |D|       Reserved              |             TPN               | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 

   D (Downstream Assignment) (1 bit): indicates which node to assign the 
   TPN. When set, the TPN is assigned by the downstream node; when 
   cleared, the TPN is assigned by the upstream node.  

   TPN (16 bits): indicates the Tributary Port Number for the assigned 
   Tributary Slot(s).  



 
 
Zhang                   Expires January 2011                  [Page 15] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


      -  In case of LO ODUj multiplexed into HO ODU1/ODU2/ODU3, only the 
         lower 6 bits of TPN field is significant and the other bits of 
         TPN MUST be set to 0. 

      -  In case of LO ODUj multiplexed into HO ODU4, only the lower 7 
         bits of TPN field is significant and the other bits of TPN MUST 
         be set to 0.  

      -  In case of ODUj mapped into OTUk (j=k), the TPN is not needed 
         and this object SHOULD not appear in the RSVP-TE message. 

    

6.2. Procedure of TPN Assignment 

   Since the TPN is not needed in case of ODU mapping, the following 
   sub-sessions are only applicable for the ODU multiplexing cases.  

6.2.1. Downstream Node Assignment by Control Plane 

   In this case, the upstream node sends a PATH message, which contains 
   a TPN Object with the D bit set to 1, to its downstream neighbor node 
   to request creation of LO ODUj. The TPN field in this object is set 
   to 0 and MUST be ignored. 

   On receiving the PATH massage, the downstream neighbor node performs 
   a normal tributary slot selection and reservation in the selected HO 
   ODUk link. After that, the downstream node assigns a valid TPN, which 
   does not collided with other TPN value used by existing LO ODU 
   connections in the selected HO ODU link and configures the expected 
   multiplex structure identifier (ExMSI) using this TPN. Then, the 
   assigned TPN is filled into the TPN Object and sent to the upstream 
   neighbor node via the RESV message. 

   The upstream node, when receiving the RESV message, gets the TPN 
   assigned by its downstream neighbor node and fills the TPN into the 
   related MSI byte(s) in the OPUk overhead in the data plane, so that 
   the downstream neighbor node can check whether the TPN received from 
   the data plane is consistent with the ExMSI and determine whether 
   there is any mismatch defect. 

6.2.2. Upstream Node Assignment by Control Plane 

   In this case, the upstream node performs a normal tributary slot 
   selection and reservation in the selected HO ODUk link for LO ODUj, 
   and then assigns a valid TPN, which does not collided with other TPN 

 
 
Zhang                   Expires January 2011                  [Page 16] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


   value used by existing LO ODU connections in the selected HO ODU link, 
   for the reserved tributary slot(s).  

   Then, the upstream node sends a PATH message, which contains the 
   assigned TPN value in the TPN Object (D = 0) and contains the 
   selected tributary slots information (e.g., via the existing 
   LABEL_SET Object), to its downstream neighbor node to request 
   creation of LO ODUj. 

   The downstream neighbor node, based on the received tributary slots 
   information and the TPN value, configures the ExMSI in the data plane, 
   so that the data plane MSI procedure can be performed, as described 
   in the previous sub-session. 

6.3. Collision Management 

   [Editors note] This chapter should indicate the procedure in case of 
   collision between Tributary Port Numbers and/or Tributary Slots e.g. 
   two different LSP setups may choose a disjoint set of Tributary Slots 
   but they may request the same Tributary Port Number value (same MSI 
   in G.709 OPUk field). 

   In this case the first signaling should be successful and the second 
   one must fail. 
    

7. Security Considerations 

   This document introduces no new security considerations to the 
   existing GMPLS signaling protocols. Referring to [RFC3473], further 
   details of the specific security measures are provided. Additionally, 
   [GMPLS-SEC] provides an overview of security vulnerabilities and 
   protection mechanisms for the GMPLS control plane. 

8. IANA Considerations 

   -  TPN Object: 

       A new value is needed to be defined by IANA for this document: 

       o  TPN Object (Session 6): Class-Num = xx (TBD), C-Type = 1 

   -  G.709 SENDER_TSPEC and FLOWSPEC objects: 



 
 
Zhang                   Expires January 2011                  [Page 17] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


       The traffic parameters, which are carried in the G.709 
       SENDER_TSPEC and FLOWSPEC objects, do not require any new object 
       class and type based on [RFC4328]: 

       o  G.709 SENDER_TSPEC Object: Class = 12, C-Type = 5 [RFC4328] 

       o  G.709 FLOWSPEC Object: Class = 9, C-Type = 5 [RFC4328] 

   -  Generalized Label Object: 

       The new defined ODU label (session 5) is a kind of generalized 
       label. Therefore, the Class-Num and C-Type of the ODU label is 
       the same as that of generalized label described in [RFC3473], 
       i.e., Class-Num = 16, C-Type = 2. 

    

9. References 

9.1. Normative References 

   [RFC2119] Bradner, S., "Key words for use in RFCs to Indicate 
             Requirement Levels", BCP 14, RFC 2119, March 1997. 

   [RFC4328] D. Papadimitriou, Ed. "Generalized Multi-Protocol Label 
             Switching (GMPLS) Signaling Extensions for G.709 Optical 
             Transport Networks Control", RFC 4328, Jan 2006. 

   [RFC3471] Berger, L., Editor, "Generalized Multi-Protocol Label 
             Switching (GMPLS) Signaling Functional Description", RFC 
             3471, January 2003. 

   [RFC3473] L. Berger, Ed., "Generalized Multi-Protocol Label Switching 
             (GMPLS) Signaling Resource ReserVation Protocol-Traffic 
             Engineering (RSVP-TE) Extensions", RFC 3473, January 2003. 

   [RFC3945] Mannie, E., "Generalized Multi-Protocol Label Switching 
             (GMPLS) Architecture", RFC 3945, October 2004. 

   [OTN-LMP] Fatai Zhang, Ed., "Link Management Protocol (LMP) 
             extensions for G.709 Optical Transport Networks", draft-
             zhang-ccamp-gmpls-g.709-lmp-discovery-02.txt, Oct 21, 2009. 





 
 
Zhang                   Expires January 2011                  [Page 18] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


9.2. Informative References 

   [G709-V1] ITU-T, "Interface for the Optical Transport Network (OTN)," 
             G.709 Recommendation (and Amendment 1), February 2001 
             (November 2001). 

   [G709-V2] ITU-T, "Interface for the Optical Transport Network (OTN)," 
             G.709 Recommendation, March 2003. 

   [G709-V3] ITU-T, "Interfaces for the Optical Transport Network (OTN) 
             ", G.709/Y.1331, December 2009. 

   [G798-V2] ITU-T, "Characteristics of optical transport network 
             hierarchy equipment functional blocks", G.798, December 
             2006. 

   [G798-V3] ITU-T, "Characteristics of optical transport network 
             hierarchy equipment functional blocks", G.798v3, consented 
             June 2010. 

   [RFC4506] M. Eisler, Ed., "XDR: External Data Representation 
             Standard", RFC 4506, May 2006. 

   [IEEE]    "IEEE Standard for Binary Floating-Point Arithmetic", 
             ANSI/IEEE Standard 754-1985, Institute of Electrical and 
             Electronics Engineers, August 1985. 

   [GMPLS-SEC] Fang, L., Ed., "Security Framework for MPLS and GMPLS 
             Networks", Work in Progress, October 2009. 

    

10. Authors' Addresses 

   Fatai Zhang
   Huawei Technologies
   F3-5-B R&D Center, Huawei Base
   Bantian, Longgang District
   Shenzhen 518129 P.R.China
   Phone: +86-755-28972912
   Email: zhangfatai@huawei.com


   Guoying Zhang
   China Academy of Telecommunication Research of MII


Zhang                   Expires January 2011                  [Page 19] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


   11 Yue Tan Nan Jie Beijing, P.R.China
   Phone: +86-10-68094272
   Email: zhangguoying@mail.ritt.com.cn


   Sergio Belotti
   Alcatel-Lucent
   Optics CTO
   Via Trento 30 20059 Vimercate (Milano) Italy
   +39 039 6863033
   Email: sergio.belotti@alcatel-lucent.it


   Daniele Ceccarelli
   Ericsson
   Via A. Negrone 1/A
   Genova - Sestri Ponente
   Italy
   Email: daniele.ceccarelli@ericsson.com


   Yi Lin
   Huawei Technologies
   F3-5-B R&D Center, Huawei Base
   Bantian, Longgang District
   Shenzhen 518129 P.R.China
   Phone: +86-755-28972914
   Email: linyi_hw@huawei.com


   Yunbin Xu
   China Academy of Telecommunication Research of MII
   11 Yue Tan Nan Jie Beijing, P.R.China
   Phone: +86-10-68094134
   Email: xuyunbin@mail.ritt.com.cn


   Pietro Grandi
   Alcatel-Lucent
   Optics CTO
   Via Trento 30 20059 Vimercate (Milano) Italy


Zhang                   Expires January 2011                  [Page 20] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


   +39 039 6864930
   Email: pietro_vittorio.grandi@alcatel-lucent.it


   Diego Caviglia
   Ericsson
   Via A. Negrone 1/A
   Genova - Sestri Ponente
   Italy
   Email: diego.caviglia@ericsson.com


Acknowledgment 

   This document was prepared using 2-Word-v2.0.template.dot. 

    

Intellectual Property 
 
   The IETF Trust takes no position regarding the validity or scope of   
   any Intellectual Property Rights or other rights that might be   
   claimed to pertain to the implementation or use of the technology   
   described in any IETF Document or the extent to which any license   
   under such rights might or might not be available; nor does it   
   represent that it has made any independent effort to identify any   
   such rights. 

   Copies of Intellectual Property disclosures made to the IETF   
   Secretariat and any assurances of licenses to be made available, or   
   the result of an attempt made to obtain a general license or   
   permission for the use of such proprietary rights by implementers or   
   users of this specification can be obtained from the IETF on-line IPR   
   repository at http://www.ietf.org/ipr 

   The IETF invites any interested party to bring to its attention any   
   copyrights, patents or patent applications, or other proprietary   
   rights that may cover technology that may be required to implement   
   any standard or specification contained in an IETF Document. Please   
   address the information to the IETF at ietf-ipr@ietf.org. 

   The definitive version of an IETF Document is that published by, or   
   under the auspices of, the IETF. Versions of IETF Documents that are   
   published by third parties, including those that are translated into   
   other languages, should not be considered to be definitive versions   
 
 
Zhang                   Expires January 2011                  [Page 21] 

draft-zhang-ccamp-gmpls-evolving-g709-05.txt                  July 2010 


   of IETF Documents. The definitive version of these Legal Provisions   
   is that published by, or under the auspices of, the IETF. Versions of   
   these Legal Provisions that are published by third parties, including   
   those that are translated into other languages, should not be   
   considered to be definitive versions of these Legal Provisions. 

   For the avoidance of doubt, each Contributor to the IETF Standards   
   Process licenses each Contribution that he or she makes as part of   
   the IETF Standards Process to the IETF Trust pursuant to the   
   provisions of RFC 5378. No language to the contrary, or terms,   
   conditions or rights that differ from or are inconsistent with the   
   rights and licenses granted under RFC 5378, shall have any effect and   
   shall be null and void, whether published or posted by such   
   Contributor, or included with or in such Contribution. 

 
Disclaimer of Validity 
 
   All IETF Documents and the information contained therein are provided   
   on an "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE   
   REPRESENTS OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE   
   IETF TRUST AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL   
   WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY   
   WARRANTY THAT THE USE OF THE INFORMATION THEREIN WILL NOT INFRINGE   
   ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS   
   FOR A PARTICULAR PURPOSE. 

 
Copyright Notice 
 
   Copyright (c) 2010 IETF Trust and the persons identified as the 
   document authors.  All rights reserved. 

   This document is subject to BCP 78 and the IETF Trust's Legal 
   Provisions Relating to IETF Documents 
   (http://trustee.ietf.org/license-info) in effect on the date of 
   publication of this document.  Please review these documents 
   carefully, as they describe your rights and restrictions with respect 
   to this document.  Code Components extracted from this document must 
   include Simplified BSD License text as described in Section 4.e of 
   the Trust Legal Provisions and are provided without warranty as 
   described in the Simplified BSD License. 




 
 
Zhang                   Expires January 2011                  [Page 22] 

