<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
	<!ENTITY rfc2629 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2629.xml'>
]>

<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs), 
     please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
     (Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space 
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="info" docName="draft-liu-mpls-tp-bnm-01" ipr="noDerivativesTrust200902">
	<!-- category values: std, bcp, info, exp, and historic
     ipr values: full3667, noModification3667, noDerivatives3667
     you can add the attributes updates="NNNN" and obsoletes="NNNN" 
     they will automatically be output with "(if approved)" -->
	<!-- ***** FRONT MATTER ***** -->
	<front>
		<!-- The abbreviated title is used in the page header - it is only necessary if the 
         full title is longer than 39 characters -->
		<title abbrev="MPLS-TP BNM packet">
		 Multiprotocol Label Switching Transport Profile Bidirectional Notify Message Packet
		</title>
		<author fullname="Guoman Liu" initials="G" surname="Liu">
			<organization>ZTE Corporation</organization>
			<address>
				<postal>
					<street>No.68, Zijinghua Road, Yuhuatai District</street>
					<city>Nanjing</city>
					<code>210012</code>
					<country>P.R.China</country>
				</postal>
				<phone>+86 025 52871606</phone>
				<email>liu.guoman@zte.com.cn</email>
			</address>
		</author>
		
		<author fullname="Jian Yang" initials="J" surname="Yang">
			<organization>ZTE Corporation</organization>
			<address>
				<postal>
					<street>5F,RD Building 3,ZTE Industrial Park,XiLi LiuXian Road</street>
					<city>Nanshan District,Shenzhen</city>
					<code>518055</code>
					<country>P.R.China</country>
				</postal>
				<phone>+86 755 26773731</phone>
				<email>yang_jian@zte.com.cn</email>
			</address>
		</author>
		
		<author fullname="Lili Jiang" initials="L" surname="Jiang">
			<organization>ZTE Corporation</organization>
			<address>
				<postal>
					<street>No.68, Zijinghua Road, Yuhuatai District</street>
					<city>Nanjing</city>
					<code>210012</code>
					<country>P.R.China</country>
				</postal>
				<phone>+86 025 52871745</phone>
				<email>jiang.lili@zte.com.cn</email>
			</address>
		</author>
		
		<date year="2009" />
		<area>OAM</area>
		<workgroup>MPLS Working Group</workgroup>
		<keyword>template</keyword>
		<abstract>
			<t>
	This document specifies an extension to MPLS BDI packet to form a new type of OAM packet BNM(Bidirectional Notify Message) , this BNM packet will not only have the function of informing another peer MEP about existing fault of this path like MPLS BDI packet, but also it may use for performance measure and testing communication between two equipments. in addtion, when Client network has a fault or defect. it notify another peer client network about remote peer fault. And these performance measure and fault notification information will be encapsulated in BNM packet by the way of TLV packet. So it may decrease the number of  OAM type and keep compatibility with MPLS network. on the other hand, this encapsulating these information by the way of TLV packet will be easy to extend OAM function to operate an MPLS Transport profile(MPLS-TP) label switched path (LSP).
            </t>
		</abstract>
	</front>
	<middle>
	    <!-- _1_ -->
		<section anchor="nested_lists" title="Introduction">
			<t>
			  this document mainly introduce a kind of new OAM packet(BNM) that can extend BDI packet and use encapsulation in the way of G-ACH. It used for a MEP to inform another MEP about fault message of the path or client network  or measure the performance of a  path or test communcation between two equipments. ,i.e ,LMM,DMM,VSR,EXR etc.thest kinds of fault notification or performance measure information, which may be encapsulated into BNM packet by the way of TLV will be sent to another MEP along MPLS-TP LSP. so it may ensure that it is easy to extend MPLS OAM function under the condition of not adding the number of MPLS OAM kinds 

              
            </t>
		</section>
		
		<!-- _2_ -->
		<section title="Conventions used in this document">
		  <t>
		    The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
            "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
            document are to be interpreted as described in RFC-2119.
            <vspace blankLines='1' />
            The following terminologies were defined in [Y.17TOM or Y.1711].
            <vspace blankLines='1' />
            OAM: Operations, Administration, Maintenance 
            <vspace blankLines='1' />
            LSP: MPLS-TP Label Switched Path. 
            <vspace blankLines='1' />
             BDI:Backward Defect Indicator
            <vspace blankLines='1' />
            CSF:Client Signal Fail
            <vspace blankLines='1' />
            DMR:Delay Measurement Response
            <vspace blankLines='1' />
            DM:Delay Measurement
            <vspace blankLines='1' />
            DMM:Delay Measurement Message
             
             <vspace blankLines='1' />
            EXM:Exercise Message
            <vspace blankLines='1' />
            EXR:Exercise Response
            <vspace blankLines='1' />
            LM:Loss Measurement
            <vspace blankLines='1' />
            LMM:Loss Measurement Message
            <vspace blankLines='1' />
            LMR:Loss Measurement Response
            <vspace blankLines='1' />
            MPLS:Multi-Protocol Label Switching
            <vspace blankLines='1'/>
            MPLS-TP:Multi-Protocol Label Switching Transport Profile
            <vspace blankLines='1'/>
            SSM:Synchronisation Status Message
            <vspace blankLines='1'/>
            TLV:Type Length Value
            <vspace blankLines='1'/>
            VSM:Vendor Specific Message(special message packet)
            <vspace blankLines='1'/>
            VSR:Vendor Specific Response
            <vspace blankLines='1'/>
            TTSI:Trail Termination Source Identifier_source LER ID+LSP ID
            <vspace blankLines='1'/>
             BNM:Bidirectional Notify Message
            <vspace blankLines='1'/>
            MEP:MEG End Point
          </t>
		</section>
		
		<!-- _3_ -->
		<section title="MPLS-TP BNM Message">
		<t>For mpls-tp BNM packet, it must be encapsulated by G-ACH to keep the same as all other MPLS-TP OAM packet. The G-ACH with MPLS-TP BNM code point indicates that the message is an MPLS BDI message. In addition, a 32-bit field is added to carry the LSP ID and the message length as shown below Figure 1: 		
		<vspace blankLines='1' />
		<figure anchor="Figure 1 MPLS-TP OAM Message Header">
               <artwork align="center">
<![CDATA[
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5   6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |0 0 0 1|version|0 0 0 0 0 0 0 0 |       Channel Type(BNM)      |     
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |                         LSP ID                                 | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |        Message Length         |     operator code
                    
                    
   ]]>         </artwork>
             </figure>
         
		<vspace blankLines='1'/>
		 First Nibble: set 0001b;
		 <vspace blankLines='1'/>
		 Version: the second nibble, indicates the version of the MPLS-TP OAM Message Header , here set 0000;
		 
		 <vspace blankLines='1'/>
		 Resv field:eight bits, all set 0;
		 <vspace blankLines='1'/>
		 channel type:16bit, the field value is 0x03 that is the same as mpls BDI code point;
		 <vspace blankLines='1'/>
		 LSP ID:the 32-bits field is set by the sender. The receiver MUST include the LSP ID in the response. This way, the sender can correlate a 
   reply with the corresponding request.avoid misconnection or misrelative. 
         <vspace blankLines='1'/>
         Message Length:the value of this field is the length of all TLV packets in the BNM packets. when the field value is 0, it indicates that there is no TLV packets in this BNM packet. 
        <vspace blankLines='1'/>
         operator code: set 0,indicate request packet;
                        set 1,indicate response packet;
                        set 2,indicate echo information;
         <vspace blankLines='1'/>
        
		</t>
		
		
		<!-- _4_ -->
		<section title="LM TLV">
		<t>LM TLV is used to measure packet loss performance of this path or LSP connection. firstly a MEP point will initiate a LM request message to another MEP points ,the LM request message will be encapsulated into BNM packet by the way of LM TLV. when another peer MEP receives this LM request message ,it will send LM response message to the MEP.  The LM response message will also be the same way of encapsulation as the LM request message.then the MEP receives the LM response message ,it will process and analyse the LM response message and computer the packet loss performance of the path .so it will select a better performance path. the LM TLV packet show the following figure 2:
		<vspace blankLines='1' />
		<figure anchor="Figure 2:LM TLV">
               <artwork align="center">
<![CDATA[
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
 |type = TBD|  length | sequence number| received number |   other |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- 
                  		
                   	
		]]>         </artwork>
             </figure>
         
		<vspace blankLines='1'/>
		type: this field indicates LM TLV code point;
		<vspace blankLines='1'/>
		length:the length of the LM TLV;
		<vspace blankLines='1'/>
		 sequence number: the sequence number of traffic packet that be sent by source point.so it can computer the number of total traffic packet that have already been sent during the period of time.
		 <vspace blankLines='1'/>
		 received number: the number of traffic packet that have already been received during the period of time.
		 <vspace blankLines='1'/>
		 other: (optional) it may carry other data information.
        </t>
		</section>
		
		
		<!--_3.2_-->
		<section title="DM TLV">		
		<t>
		DM TLV is used to measure one-way or two-way delay of a path .in order to measure delay, firstly a MEP point will send DM TLV request BNM packet to another MEP point of the path. and fill the timestamp into the timestamp field of DM TLV. when peer MEP point received the DM request TLV, for one-way delay measure,it will computer this one-way delay by timestamp of sending in DM request TLV and timestamp of receiving. for two-way delay measure, when peer MEP point received DM request TLV , it will fill timestamp of receiving into timestamp field forming a DM response TLV .Then the DM response TLV will be encapsulted into BNM to be sent to peer MEP point. so initiated MEP point can computer the two-way delay.  And DM TLV shows the following figure 3:
		<vspace blankLines='1' />
		<figure anchor="Figure 3: one-way Delay Response TLV">
               <artwork align="center">
<![CDATA[
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
|  type = TBD   |  length   |              timestamp              | 
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                 		
                  	
		]]>         </artwork>
             </figure>
         
		<vspace blankLines='1'/>
		type: the field indicates DM TLV;
		<vspace blankLines='1'/>
		length:the length of the DM TLV;
		<vspace blankLines='1'/>
		 timestamp: for DM request TLV,it indicates timestamp of sending DM request TLV. for DM response TLV, it indicates timestamp of receiving DM request TLV.
			
		</t>
		
		</section>
		
		
        <!-- _3.3_ -->
		<section title="Experimental TLV">
		 <t>
		 Experimental TLV is used for experimental activities in cases where an OAM PDU type is not defined in MPLS-TP aspect. and it can be used within an administrative domain on a temporary basis. Firstly a MEP sends a experimental request TLV packet to another MEP for experimental activities. When another MEP receives the experimental request TLV and processes the packet. and then the result of experimental activity will be encapsulated into Experimental response TLV packet like EXR packet in BNM packet, then the sink MEP sends this BNM including Experimental response TLV to source MEP, so the source MEP understands or knows the result of experimental activity. The Experimental response TLV packet show below figure 4:
		 
		 <vspace blankLines='1' />
		<figure anchor="Figure 4: Experimental TLV">
               <artwork align="center">
<![CDATA[
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |  type = TBD   |  length = 0   |value of experimental activity | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   	
                   	
		]]>         </artwork>
             </figure>
         
		<vspace blankLines='1'/>
			
		type: the field indicates Experimental TLV;
		<vspace blankLines='1'/>
		length:the length of this Experimental TLV;
		<vspace blankLines='1'/>
		value: the data about Experimental activities;
			
		</t>
		
		</section>
		
		<!-- _3.4_ -->
		<section title="Vendor Specific TLV">
		 <t>
		Vendor Specific TLV  may be used to check or test Interoperability by a vendor across its equipment. Firstly Vendor Specific Equipment MEP may send vendor specific request TLV packet to another Vendor Specific Equipment MEP. When another MEP received the Vendor Specific Request TLV packet and processed it .and then sink MEP can send a BNM packet including Vendor Specific response TLV to source MEP. And these Vendor Specific Equipment can communicate with each other . the Vendor Specific TLV packet show below figure 5:
		 
		 <vspace blankLines='1' />
		<figure anchor="Figure 5: Vendor Specific TLV">
               <artwork align="center">
<![CDATA[
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |  type = TBD   |  length = 0 | value of interoperability state |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   		
                  		
		]]>         </artwork>
             </figure>
         
		<vspace blankLines='1'/>
		
		type: the field indicates Experimental TLV;
		<vspace blankLines='1'/>
		length:the length of this Experimental TLV;
		<vspace blankLines='1'/>
		value: the data of interoperability state;
			
		</t>
		
		</section>
		
		
		 <!-- _3.5_ -->
		<section title="Client Signal Fail(CSF) TLV">
		 <t>
		Client Signal Fail(CSF) TLV is used to to propagate a Client Signal Fail (CSF) indication to the far-end MPLS-TP client-specific sink-adaptation process on detection of a failure of the ingress client signal in case the client-layer itself does not support an alarm suppression mechanism. This BNM packet in which may have encapsulated CSF TLV can be  issued by a MEP upon receiving signal fail information from its client-layer. When far-end MEP received this BNM packet including CSF TLV and processed it , the MEP detects a client-layer signal fail condition and forward this as a signal fail indication to its client-layer, this CSF TLV packet show below figure 6:
		 <vspace blankLines='1' />
		<figure anchor="Figure 6: Client Signal Fail(CSF) TLV">
               <artwork align="center">
<![CDATA[
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |  type = TBD   |  length = 0   |     value of CSF state        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                  	
                	
		]]>         </artwork>
             </figure>
         
		<vspace blankLines='1'/>
		 	
		type: the field indicates Client Signal Fail(CSF) TLV;
		<vspace blankLines='1'/>
		length:the length of this Client Signal Fail(CSF) TLV;
		<vspace blankLines='1'/>
		value: the data of CSF state;
			
		</t>
		
		</section>
		
		
		 <!-- _3.6_ -->
		<section title="Fault Message Notify TLV">
		 <t>
		Fault Message Notify TLV that is like BDI packet is used to inform the far-peer MEP point that there is a defect in its upstream or downstream segment of the LSP When there is a fault happened in the LSP,  Then fault type and location information will be filled in Fault Message Notify TLV packet and further can be encapsulated into BNM packet that will be sent to the far-end MEP point. so the MEP point will trigger 1:1 or 1:n protection switching; the Fault Message Notify TLV structure show below figure 7:
		 <vspace blankLines='1' />
		<figure anchor="Figure 7: Fault Message Notify TLV">
               <artwork align="center">
<![CDATA[
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |  type = TBD   |  length = 0   |     fault type and location   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
                   		
                  	
		]]>         </artwork>
             </figure>
         
		<vspace blankLines='1'/>
		
		type: the field indicates Fault Message Notify TLV;
		<vspace blankLines='1'/>
		length:the length of this Fault Message Notify TLV;
		<vspace blankLines='1'/>
		value: indicates fault type and location;
			
		</t>
		
		</section>
		
		
		<!-- _3.7_ -->
		<section title="other">
		 <t>
		The BNM packet can not only realize these functions, but also it may realize other functions by extending TLV packet, i.e Synchronisation Status Message(SSM) may be encapsulated into a TLV packet that can be further encapsulated into the BNM packet. so by extending TLV packet, it is easy that BNM packet may support more other functions.
		 
		</t>
		
		</section>
		</section>
		
		 
		
		<!-- _4_ -->
		<section title="Security Considerations"><t>The security considerations for the authentication TLV need further 
   study.</t></section>
		
		<!-- _5_ -->
		<section title="IANA Considerations"><t>TBD.</t></section>
		
		<!-- _6_ -->
		<section title="Acknowledgments"><t>TBD.</t></section>
	</middle>
	<!--  *****BACK MATTER ***** -->
	<back>
		<!-- References split into informative and normative -->
		<!-- There are 2 ways to insert reference entries from the citation libraries:
     1. define an ENTITY at the top, and use "ampersand character"RFC2629; here (as shown)
     2. simply use a PI "less than character"?rfc include="reference.RFC.2119.xml"?> here
        (for I-Ds: include="reference.I-D.narten-iana-considerations-rfc2434bis.xml")

     Both are cited textually in the same manner: by using xref elements.
     If you use the PI option, xml2rfc will, by default, try to find included files in the same
     directory as the including file. You can also define the XML_LIBRARY environment variable
     with a value containing a set of directories to search.  These can be either in the local
     filing system or remote ones accessed by http (http://domain/dir/... ).-->
	 <references title="Normative References">
       <reference anchor="ITUT-Y.1711">
       <front>
       <title>ITU-T Recommendation Y.1711(Operation Maintenance mechanism for MPLS networks)
       </title>
       <author><organization>ITU-T</organization></author>
			<date month="February" year="2004"/></front>
			<!--seriesInfo></seriesInfo-->
       </reference>
       
       <reference anchor="IETF RFC4377">
       <front>
       <title>IETF RFC4377(Operations and Management (OAM) Requirements for Multi-Protocol Label Switched (MPLS) Networks)
       </title>
       <author><organization>IETF</organization></author>
			<date month="February" year="2006"/></front>
			<!--seriesInfo></seriesInfo-->
       </reference>
	 </references>
	 
	 <references title="Informative References">
	 
	    <reference anchor="ITUT-Y.17TOM Draft">
		  <front>
		    <title>Draft ITU-T Recommendation Y.17TOM (Operation Maintenance mechanism for T-MPLS layer networks)</title>
	        <author><organization>ITU-T</organization></author>
			<date month="April" year="2007"/>
		  </front>
		  <!--seriesInfo></seriesInfo-->
		</reference>
		
       <reference anchor="MPLS-TP JWT REPORT">
		   <front>
		       <title>JWT Report on MPLS Architectural Considerations for a Transport Profile</title>
	           <author surname="S.Bryant, L.Andersson"><organization></organization></author>
			   <date month="July" year="2008"/>
			</front>
		</reference>
		
		<reference anchor="Requirements for OAM in MPLS Transport Networks">
		   <front>
		       <title>Requirements for OAM in MPLS Transport Networks</title>
	           <author surname="M.Vigoureux, D.Ward, M.Betts "><organization>Internet Draft</organization></author>
			   <date month="November" year="2008"/>
			</front>
		</reference>
		
		<reference anchor="MPLS-TP Requirements">
		   <front>
		       <title>MPLS transport profile Requirements</title>
	           <author surname="B.Niven-Jenkins, D.Brungard, M.Betts,N. Sprecher ,S.Ueno"><organization>Internet Draft</organization></author>
			   <date month="January" year="2009"/>
			</front>
		</reference>
		
	 </references>
	 
     <references title="URL References">
		<reference anchor="MPLS-TP-22" target="http://www.example.com/dominator.html">
				<front>
				   <title />
					<author>
						<organization>IETF - ITU-T Joint Working Team</organization>
					</author>
					<date year="2008"/>
				</front>
		</reference>
	 </references>
	</back>
</rfc>
