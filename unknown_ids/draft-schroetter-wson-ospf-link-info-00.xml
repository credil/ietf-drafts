<?xml version="1.0" encoding="US-ASCII"?>
<!-- This template is for creating an Internet Draft using xml2rfc,
     which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!-- One method to get references from the online citation libraries.
     There has to be one entity for each item to be referenced. 
     An alternate method (rfc include) is described in the references. -->
<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC2629 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2629.xml">
<!ENTITY RFC3552 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3552.xml">
<!ENTITY RFC3630 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3630.xml">
<!ENTITY RFC4203 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4203.xml">
<!ENTITY RFC3471 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3471.xml">
<!ENTITY RFC5307 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5307.xml">
<!ENTITY RFC5305 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5305.xml">
<!ENTITY WSON-Info SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-ccamp-rwa-info-07.xml">
<!ENTITY Otani SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-ccamp-gmpls-g-694-lambda-labels-05.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs), 
     please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
     (Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space 
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="std" docName="draft-schroetter-wson-ospf-link-info-00" ipr="pre5378Trust200902">
  <!-- category values: std, bcp, info, exp, and historic
     ipr values: full3667, noModification3667, noDerivatives3667
     you can add the attributes updates="NNNN" and obsoletes="NNNN" 
     they will automatically be output with "(if approved)" -->

  <!-- ***** FRONT MATTER ***** -->

  <front>
    <!-- The abbreviated title is used in the page header - it is only necessary if the 
         full title is longer than 39 characters -->

    <title abbrev="OSPF Link Information for WSON">OSPF Link Information Model for OSPF</title>

    <!-- add 'role="editor"' below for the editors if appropriate -->

    <!-- Another author who claims to be an editor -->

    <author fullname="Dirk Schroetter" initials="D." role="editor"
            surname="Schroetter">
      <organization>Cisco Systems</organization>

      <address>
        <postal>
          <street>Neuer Wall 77</street>

          <!-- Reorder these if your country does things differently -->

          <code>D-20354</code>

          <city>Hamburg</city>

          <region></region>

          <country>Germany</country>
        </postal>

        <phone>+49 40 3767-4402</phone>

        <email>dschroet@cisco.com</email>

        <!-- uri and facsimile elements may also be added -->
      </address>
    </author>

	<author fullname="Giovanni Martinelli" initials="G."
            surname="Martinelli">
      <organization>Cisco Systems</organization>

      <address>
        <postal>
          <street>Via Philips 12</street>

          <!-- Reorder these if your country does things differently -->

          <code>20052</code>

          <city>Monza</city>

          <region></region>

          <country>Italy</country>
        </postal>

        <phone>+39 039 209-2044</phone>

        <email>giomarti@cisco.com</email>

        <!-- uri and facsimile elements may also be added -->
      </address>
    </author>
    <date month="March" year="2010" day="1"/>

    <!-- If the month and year are both specified and are the current ones, xml2rfc will fill 
         in the current day for you. If only the current year is specified, xml2rfc will fill 
	 in the current day and month for you. If the year is not the current one, it is 
	 necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the 
	 purpose of calculating the expiry date).  With drafts it is normally sufficient to 
	 specify just the year. -->

    <!-- Meta-data Declarations -->

    <area>General</area>

    <workgroup>Internet Engineering Task Force</workgroup>

    <!-- WG name at the upperleft corner of the doc,
         IETF is fine for individual submissions.  
	 If this element is not present, the default is "Network Working Group",
         which is used by the RFC Editor as a nod to the history of the IETF. -->

    <keyword>template</keyword>

    <!-- Keywords will be incorporated into HTML output
         files in a meta tag but they have no effect on text or nroff
         output. If you submit your draft to the RFC Editor, the
         keywords will be used for the search engine. -->

    <abstract>
      <t>This document describes the extensions to the OSPF Link TLV to support Routing and Wavelength Assignment (RWA) in Wavelength Switched Optical Networks (WSON) under the control of Generalized MPLS (GMPLS). </t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">
      <t>The current Internet Draft describing the Wavelength Switched Optical Network (WSON) information model <xref target="I-D.ietf-ccamp-rwa-info"></xref> defines the links in a WSON network with respect to their connectivity matrix, their label restrictions (essentially the set of allowed or usable wavelengths) and additional information from the MPLS-TE routing protocol extensions for OSPF and IS-IS <xref target="RFC3630"></xref>, <xref target="RFC5305"></xref> along with the GMPLS routing protocols extensions for OSPF and IS-IS <xref target="RFC4203"></xref>, <xref target="RFC5307"></xref>.</t>
	  <t>At a high level, the information models for WSON described in <xref target="I-D.ietf-ccamp-rwa-info" /> and <xref target="WSON-Encode" /> model the connectivity through the WSON switching node as well as the connectivity between links at a WSON switching node. The current information model is sufficient to describe the structure of a WSON node as well as the possible interconnection of wavelengths between links and their local processing (e.g. regeneration or wavelength conversion). This document describes extensions to that model and their encoding that allow a more granular approach to provide hints to the Routing and Wavelength Assignment (RWA) algorithm regarding the placement of client signals within a set of available wavelengths and a more granular approach towards the association of channels or channel sets with Administrative Groups. </t>

      <section title="Requirements Language">
        <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <xref
        target="RFC2119">RFC 2119</xref>.</t>
      </section>
    </section>

	<section title="Usage Scenarios">
		<t>This section provides some usage scenarios of the proposed extension.</t>
		
		<section title="Client signals that require specific wavelengths on a given link">
			<t>Assume a link between two nodes that can carry a specific client signal type (identified by the modulation format of the client signal) only on a specific subset of the supported wavelengths of that link. This restriction may be due to the optical parameters of the link or administrative preference of the operator.</t>
			<t>In a setup as shown in <xref target="wavelength_usage" /> the physical link may only support 40G on wavelength #3 (denoted as WL3). The document defines extensions to the OSPF Link TLV that allow the logical partitioning of the link into two sub-links. Hints to the Routing and Wavelength Assignment (RWA) algorithm on where to place a client signal using a 10G vs. 40G modulation format can then be provided through the use of the Sublink Modulation Format Compatibility Set sub-TV (see <xref target ="SMFCS" />) and the Sublink Administrative Group sub-TLV (see <xref target = "SAG" />).</t>
			<figure align="center" anchor="wavelength_usage" title="40G Client Signal may only be carried on WL3">
				<artwork align="center"><![CDATA[
-------------------------          ------+------------------
         +------+                        |  +------+
  L      | WL 1 |                    L   |  | WL 1 |
         +------+                        |  +------+
                                         |
         +------+                        |  +------+
  I      | WL 2 |                    I   |  | WL 2 |   Sublink 1  
         +------+                        |  +------+   for 10G
                                         |
         +------+                        |  +------+
  N      | WL 3 |                    N   |  | WL 4 |
         +------+                        |  +------+
                                         +------------------
         +------+                        |  +------+
  K      | WL 4 |                    K   |  | WL 3 |  Sublink 2 
         +------+                        |  +------+  for 40G
-------------------------          ------+------------------
]]></artwork>
			</figure>
		</section>
		
		<section title="Wavelengths reserved for specific uses">
			<t>Assume a link between two nodes where the operator wants to reserve a number of wavelengths for a specific purpose. Such purposes may include these wavelengths being available to the RWA algorithm only for backup purposes or being only available to client signals that require wavelength conversion or regeneration. Such preferences and restrictions on the usage of wavelengths can be described using the Administrative Group concept when the Administrative Group is associated with a sublink.</t>
			<t>In a setup as shown in <xref target="wavelength_ag" /> assume that wavelength #4 (WL4) may only be used for 40G signals that belong to a specific Administrative Group (AG=3 in this example). This restriction may be due to policy choice by the operator or due to structural restrictions in the node itself (e.g. access to wavelength converters). In such cases, the hints to the Routing and Wavelength Assignment (RWA) algorithm on where to place a client signal can then be provided through the use of the Sublink Modulation Format Compatibility Set sub-TV (see <xref target ="SMFCS" />) and the Sublink Administrative Group sub-TLV (see <xref target = "SAG" />).</t>
			<figure align="center" anchor="wavelength_ag" title="Client Signal may only be carried on WL3">
				<artwork align="center"><![CDATA[
-------------------------          ------+------------------
         +------+                        |  +------+
  L      | WL 1 |                    L   |  | WL 1 |
         +------+                        |  +------+  Sublink 1
                                         |            for 10G
         +------+                        |  +------+  with AG=1
  I      | WL 2 |                    I   |  | WL 2 |   
         +------+                        |  +------+  
                                         +------------------
         +------+                        |  +------+
  N      | WL 3 |                    N   |  | WL 3 |  Sublink 2
         +------+                        |  +------+  for 40G AG=2
                                         +------------------
         +------+                        |  +------+
  K      | WL 4 |                    K   |  | WL 4 |  Sublink 3 
         +------+                        |  +------+  for AG=3
-------------------------          ------+------------------
]]></artwork>
			</figure>			
		</section>
	 
		<section title="Wavelength Availability based on adjacent channel usage">
			<t>
				In some cases the placement of a client signal may depend on the modulation format of a signal in an adjacent channel or a client signal of a specific set of modulation formats requires a number of adjacent channels not to be in use. Assume a link that supports four channels at a given channel spacing when using a 10G modulation format. 40G signals are also supported, but the modulation format requires or the operator mandates that the adjacent channels must not be in use if a channel carries a 40G signal. Such dependencies can be expressed using the Signal Dependency sub-TLV (see <xref target = "SDS" />).
			</t>
		</section>
	</section>

	<section title="Link Information" anchor="link_info">
		<t>The Link TLV describes a single link with respect to the available bandwidth and any administrative or signal-related restrictions on the wavelength use. It is constructed of a number of sub-TLVs which may appear in the TLV in any order. The Link TLV MUST contain exactly one Link Wavelength Set sub-TLV for each sublink. At least one Wavelength Set sub-TLV MUST be present in the Link TLV. All other sub-TLVs described in this document are OPTIONAL.</t>
		<t>The following sub-TLVs of the Link TLV are defined:
			<list style="empty">
				  <t>TBD - Sublink Wavelength Set</t>
				  <t>TBD - Sublink Modulation Format Compatibility Set</t>
				  <t>TBD - Signal Dependency Set</t>
				  <t>TBD - Sublink Administrative Group</t> 
		    </list>
			This document introduces the concept of logical sublinks within a physical link connecting two nodes. A sublink is uniquely identified through the tuple (Link ID, Sublink ID). Sublink IDs MUST be unique on a per-link basis.
		</t>
		<t> The Link TLV can be represented through a RBNF in the following way:
		        <figure>
 					<artwork align="left"><![CDATA[
<WSON_LINK_TLV> ::= [ <Sublink Definition> ]
]]></artwork>
			</figure>
		   Where the &lt;Sublink Definition&gt; consist of a variable set of sub-TLV associated with a sublink.
		</t>
		<t>
		        <figure>
 					<artwork align="left"><![CDATA[
<Sublink Definition> ::= <SL_WL_SET> [ <SL_WL_SET> ...] 
                 [ <SL_FORMAT_COMPAT> ]  [ <SL_SIGNAL_DEP> ] 
                 [ <SL_ADMIN_GROUP> ]
]]></artwork>
			</figure>
		The objects composing &lt;Sublink Definition&gt; are the sub-TLV defined along this section.
		</t>

		<section title="Sublink Wavelength Set sub-TLV">
			<t>The Link wavelength set sub-TLV specifies the wavelengths that this link can support and any restrictions on the usage of these wavelengths from administrative choice by the operator or signal compatibility of the client signal with respect to a set of wavelengths.</t>
			<t>The Link wavelength sub-TLV has the following format:
				<figure align="center" anchor="link_wavelength_set" title="Sublink Wavelength Set sub-TLV">
 					<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Sublink ID  |    Encoding   |          Reserved             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:                    Wavelength Descriptor                      :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
				</figure>
			<list style="empty">
				<t>Sublink ID: 8 bits
					<list style="hanging" hangIndent="4">
						<t>0x00 - Reserved
						</t>
						<t>0x01 ... 0xFE - Sublink ID
							<list style="hanging">
								<t>Unique identifier for the wavelength set. This identifier is unique on a per-link basis.
								</t>
							</list>
						</t>
						<t>0xFF - reserved						
						</t>
					</list>	
				</t>
				<t>Encoding: 8 bits
					<list style="hanging" hangIndent="4">
						<t>0x00 - Reserved
						</t>
						<t>0x01 - Label Sets
							<list style="hanging">
								<t>Wavelength Set encoding based on Label Sets per <xref target="LS"></xref>. The format of the labels follows <xref target="I-D.ietf-ccamp-gmpls-g-694-lambda-labels"></xref>.
								</t>
							</list>
						</t>
						<t>0x02 - Label Bitset
							<list style="hanging">
								<t>Label Set encoding per []
								</t>
							</list>
						</t>
						<t>0x03 ... 0xFF - reserved						
						</t>
					</list>
				</t>
				<t>Reserved: 16 bits
					<list style="hanging">
						<t>This field is reserved. It MUST be set to zero on transmission and MUST be ignored on receipt.
						</t>
					</list>
				</t>
				<t>Wavelength Descriptor: variable
					<list style="hanging">
						<t>The Wavelength Descriptor identifies the wavelengths being available for this sublink. The format and length depends on the encoding format.
						</t>
					</list>
				</t>
			</list>
			If Encoding is 1 then at least one Label Set with Action set to 0 or 2 MUST be present in the Link Wavelength Set sub-TLV. There MAY be multiple Label Sets per Link Wavelength Set sub-TLV. The set of available channels on a (Link ID, Sublink ID) tuple is given by the set complement of the union of all Label Sets with Action set to 0 or 2 and the union of all Label Sets with Action set to 1 or 3. 
			</t>
			
			<section anchor = "LS" title = "Label Set">
				<t>
					The encoding of the Label Sets is based on the similar concept introduced in <xref target="RFC3471"></xref>. 
					<figure align="center" anchor="label_set" title="Label Set">
					<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Action     |    Reserved   |             Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                          Wavelength 1                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:                               :                               :
:                               :                               :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                          Wavelength N                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]>
					</artwork>
					</figure>
					<list style="empty">
						<t>Action : 8 bits
							<list style="empty">
								<t>0 - Inclusive List
									<list style="empty">
										<t>
											Indicates that the object contains one or more wavelength elements that are included in the Label Set.
										</t>
									</list>
								</t>
								<t>1 - Exclusive List
									<list style="empty">
										<t>
											Indicates that the object contains one or more wavelength elements that are excluded from the Label Set.
										</t>
									</list>
								</t>
								<t>2 - Inclusive Range
									<list style="empty">
										<t>
											Indicates that the object contains a range of labels that are included in the Label Set.  The object/TLV contains two wavelength elements.  The first element indicates the start of the range.  The second element indicates the end of the range.
										</t>
									</list>
								</t>
								<t>3 - Exclusive Range
									<list style="empty">
										<t>
											Indicates that the object contains a range of labels that are excluded from the Label Set.  The object/TLV contains two wavelength elements. The first element indicates the start of the range.  The second element indicates the end of the range.
										</t>
									</list>
								</t>
							</list>
						</t>
						<t>Reserved: 8 bits
							<list style="empty">
								<t>This field is reserved. It MUST be set to zero on transmission and MUST be ignored on receipt.
								</t>
							</list>
						</t>
						<t>Length: 16 bits
							<list style="empty">
								<t>Length in octets of this Label Set
								</t>
							</list>
						</t>
						<t>Wavelength: 32 bits
							<list style="empty">
								<t>
									The wavelength represents the individual channel to be included in or excluded from the list of available channels (if Action is 0 or 1) or the start or end of the channel range (If Action is 2 or 3). If Action is 2 or 3 exactly two wavelength entries MUST be present. If Action is 0 or 1 there MUST be at least one Wavelength element.
								</t>
								<t>
									The encoding of the wavelength field follows <xref target="I-D.ietf-ccamp-gmpls-g-694-lambda-labels"></xref>
								</t>
							</list>
						</t>
					</list>
				</t>
			</section>
		</section>
		
		<section anchor = "SMFCS" title="Sublink Modulation Format Compatibility Set">
			<t>The OPTIONAL Sublink Modulation Format Compatibility Set sub-TLV carries the list of acceptable modulation formats for any wavelength in the sublink.</t>
			<t>The Wavelength Set Modulation Format Compatibility Set has the following format:
				<figure align="center" anchor="modulation_compat" title="Sublink Modulation Format">
					<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Sublink ID   |     Encoding  |          Reserved             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Modulation Type 1                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:                         Modulation Type N                     :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
				</figure>
				<list style="empty">
					<t>Sublink ID: 8 bits
						<list style="hanging" hangIndent="4">
							<t>0x00 - Reserved
							</t>
							<t>0x01 ... 0xFE - Sublink ID
								<list style="hanging">
									<t>Unique identifier for the wavelength set. This identifier is unique on a per-link basis.
									</t>
								</list>
							</t>
							<t>0xFF - Reserved						
							</t>
						</list>	
					</t>
					<t>Encoding: 8 bits
						<list style="empty">
							<t>0x00 - Reserved
							</t>
							<t>0x01 - Encoding using modulation type per <xref target="WSON-Encode" />.
							</t>
							<t>0x02-0xFF - Reserved
							</t>
						</list>
					</t>
					<t>Reserved: 16 bits
						<list style="hanging">
							<t>This field is reserved. It MUST be set to zero on transmission and MUST be ignored on receipt.
							</t>
						</list>
					</t>
					<t>Modulation Type 1..N: variable
						<list style="hanging">
							<t>List of acceptable modulation formats for the wavelengths in this sublink per <xref target="WSON-Encode" />.
							</t>
						</list>
					</t>
				</list>
				Currently, the only modulation format specification is the one described in <xref target="WSON-Encode" />. Additional encoding mechanisms for signal compatibility may be defined in the future.
			</t>
		</section>
			
		<section anchor = "SDS" title="Signal Dependency sub-TLV">
			<t>
				This OPTIONAL sub-TLV indicates a wavelength blocking of adjacent wavelengths based upon the modulation format of a client signal around that client signal's center wavelength. The Signal Dependency sub-TLV has the following format:
				<figure align="center" anchor="signal_dependency_set" title="Signal Dependency sub-TLV">
					<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Modulation Type                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Grid |  C.S  | Lower Excursion |Grid |  C.S  | Upper Excursion |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
				</figure>
	
			    <list style="empty">
					<t>Modulation Type: variable
						<list style="hanging">
							<t>Specifies the modulation type for which wavelength blocking of adjacent wavelengths around the client signal's center frequency shall be used. The format of the Modulation Type follows <xref target="WSON-Encode" />.
							</t>
						</list>
					</t>
					<t>Grid: 3 bits
						<list style="hanging" hangIndent="4">
							<t>0 - Reserved</t>
							<t>1 - ITU-T DWDM</t>
							<t>2 - ITU-T CDWDM</t>
							<t>3 .. 7 - Reserved</t>
						</list>	
					</t>
					<t>C.S (channel spacing): 4 bits
						<list style="hanging" hangIndent="4">
							<t>0 - Reserved</t>
							<t>1 - 100 GHz</t>
							<t>2 - 50 GHz</t>
							<t>3 - 25 GHz</t>
							<t>4 - 12.5 GHz</t>
							<t>5 .. 15 - Reserved</t>
						</list>
					</t>
					<t>Lower Excursion: 9 bits
						<list style="hanging">
							<t>Specifies the excursion from the client signal's center wavelength towards the lower frequencies. For DWDM links the lower boundary of the signal dependency wavelength range is given by center frequency - Lower Excursion * Channel Spacing. A value of 0 indicates no excursion towards the lower frequencies.
							</t>
						</list>
					</t>
					<t>Upper Excursion: 9 bits
						<list style="hanging">
							<t>Specifies the excursion from the client signal's center wavelength towards the higher frequencies. For DWDM links the upper boundary of the signal dependency wavelength range is given by center frequency + Lower Excursion * Channel Spacing. A value of 0 indicates no excursion towards the higher frequencies.
							</t>
						</list>
					</t>
				</list>
				This optional sub-TLV defines a lambda range of <vspace blankLines="1" />[Lower Excursion * Channel Spacing,Upper Excursion * Channel Spacing] for DWDM and <vspace blankLines="1" />[Lower Excursion * 20 nm,Upper Excursion * 20 nm] for CWDM<vspace blankLines="1" />which can not be used around a signal's center wavelength or center frequency if that signal uses the modulation format specified in the sub-TLV.
			</t>
		</section>
			
		<section anchor ="SAG" title="Sublink Administrative Group sub-TLV">
			<t>
				The OPTIONAL Administrative Group sub-TLV carries the Administrative Group for the sublink identified in this sub-TLV. The sub-TlV has the following format:
				<figure align="center" anchor="administrative_group" title="Administrative Group sub-TLV">
					<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Sublink ID  |                 Reserved                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Administrative Group                    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
				</figure>
				<list style="empty">
					<t>Sublink ID: 8 bits
						<list style="hanging" hangIndent="4">
							<t>0x00 - Reserved
							</t>
							<t>0x01 ... 0xFE - Sublink ID
								<list style="hanging">
									<t>Unique identifier for the wavelength set. This identifier is unique on a per-link basis.
									</t>
								</list>
							</t>
							<t>0xFF - reserved						
							</t>
						</list>	
					</t>
					<t>Reserved: 24 bits
						<list style="hanging">
							<t>This field is reserved. It MUST be set to zero on transmission and MUST be ignored on receipt.
							</t>
						</list>
					</t>
					<t>Administrative Group: 32 bits
						<list style="hanging">
							<t>This field contains the Administrative Group associated with the identified Sublink ID. The format of this field is defined in Section 2.5.9 of <xref target="RFC3630"/>
							</t>
						</list>
					</t>
				</list>
			</t>
		</section>
				
	</section>

    <section anchor="IANA" title="IANA Considerations">
      <t>As per <xref target="RFC3630"></xref> all Type assignments for sub-TLVs need to be made through IANA. This document requests Type assignments for the sub-TLVs described in <xref target="link_info"/>.</t>
    </section>

    <section anchor="Security" title="Security Considerations">
      <t>This document does not introduce any further security issues above and beyond those discussed in <xref target="RFC3630" /> and <xref target="RFC4203" />.</t>
    </section>
    
	<appendix anchor="Appendix" title="Usage Examples">
      	<t>The appendix shows some of the use cases of the Link Extensions described in this document.</t>

		<appendix title="Simple set of wavelengths">
			<t>
				This example shows the encoding for a WSON link carrying a single sublink. The wavelengths available on this link are the channels at the frequencies between 192.0 THz (1561.41 nm) and 195.9 THz (1530.33 nm) using 100 GHz grid spacing.
				<figure align="center" anchor="link_wavelength_set_example" title="Link Wavelength Set sub-TLV Encoding Example">
					<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Sublink ID= 1 |   Encoding=1  |        Reserved=0             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Action=2    |  Reserved=0   |          Length               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = -11               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = 28                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
				</figure>
				The encoding defines a sublink with the ID 1 and the encoding uses Label Sets. The Label Set is specified using an inclusive Range (Action=2). The next four octets specify the starting frequency of the wavelength band using the DWDM Grid (G=1) and the grid spacing of 100 GHz (C.S=1). The n field contains the offset in 100 GHz steps from 193.1 THz ((192.0 - 193.1) / 0.1). The following four octets encode the end frequency of the wavelength band in a similar manner.
			</t>
		</appendix>
		
		<appendix title="Simple set of wavelengths with exclusions">
			<t>
				This example shows the encoding for a WSON link carrying a single sublink. The wavelengths available on this link are the channels at the frequencies between 192.0 THz (1561.41 nm) and 195.9 THz (1530.33 nm) using 100 GHz grid spacing as before but the link uses a guard channel at every fifth channel of the 100 GHz grid ("four-skip-one").
				<figure align="center" anchor="link_wavelength_set_excl_example" title="Link Wavelength Set sub-TLV Encoding Example with excluded wavelengths">
					<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Sublink ID= 1 |   Encoding=1  |        Reserved=0             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Action=2    |  Reserved=0   |          Length               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = -11               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = 28                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Action=1    |  Reserved=0   |          Length               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = -6                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = -1                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = 4                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = 9                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = 14                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = 19                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = 24                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
				</figure>
				The base encoding follows the previous example, but this time a list of excluded wavelengths (Action = 1) follows the definition of the included range of wavelengths (Action=2). In this example the wavelengths at the center frequencies of 192.5, 193.0, 193.5, 194.0, 194.5 and 195.5 THz are excluded from the list of available wavelengths for this sublink.
			</t>
		</appendix>
		
		<appendix title="Multiple sublinks per link">
			<t>
				An operator may want to logically subdivide the set of available wavelengths for reasons of signal compatibility with only a specific subset of wavelengths on a given link, general traffic conditioning preferences or other policy choices. In order to allow the RWA algorithm to honor such restrictions the link can be logically subdivided into sublinks that may have different Modulation format compatibility TLVs or Administrative Groups associated with them. In this example, sublink 1 carries the channels with center frequencies between 192.0 THz and 194.1 THz using a 50 GHz grid and sublink 2 contains the channels with center frequencies between 194.2 and 195.9 THz in a 100 GHz grid spacing. This change in grid spacing may be due to signal compatibility when sublink 2 is used for LSPs using a different modulation format than the ones using sublink 1.
				<figure align="center" anchor="mult_link_wavelength_sete" title="Multiple Wavelength Sets per Link - Sublink 1">
					<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Sublink ID= 1 |   Encoding=1  |        Reserved=0             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Action=2    |  Reserved=0   |          Length               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=2 |   Reserved=0    |         n = -22               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=2 |   Reserved=0    |         n = 20                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
				</figure>
				
				<figure align="center" anchor="mult_link_wavelength_set2" title="Multiple Wavelength Sets per Link - Sublink 2">
					<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Sublink ID= 2 |   Encoding=1  |        Reserved=0             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Action=2    |  Reserved=0   |          Length               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = 11                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=1 |   Reserved=0    |         n = 28                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
				</figure>
				Now that the channels logically belong to different sublinks, the Sublink Modulation Format Compatibility Set and Sublink Administrative Group can be used to provide hints to the RWA algorithm on which channels to consider for traffic using a specific modulation format or requesting a specific Administrative Group.
			</t>
		</appendix>
		<appendix title="Sublink Modulation Format Compatibility Set">
			<t>
				After defining the two sublinks as per the previous example, one may use the Sublink Modulation Format Compatibility Set TLV to provide hints to the RWA algorithm that a specific client types using a set of modulation formats should be use channels of a specific sublink.  
			</t>
			<t>
				In this example, the channels in sublink 1 can carry client signals using the following modulation formats:
				<list style="empty">
					<t>Optical Tributary Signal Class NRZ 2.5G</t>
					<t>Optical Tributary Signal Class NRZ 10G</t>
				</list>
				The corresponding encoding is as follows:

				<figure align="center" anchor="modulation_compat_0" title="Sublink Modulation Format - Sublink 1">
					<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Sublink ID=1|  Encoding=1     |       Reserved                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1|1|      Modulation ID=2        |           Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Possible additional modulation parameters depending upon    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:   the modulation ID                                           :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1|1|      Modulation ID=3        |           Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Possible additional modulation parameters depending upon    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:   the modulation ID                                           :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
				</figure>
				
				Sublink 2 however should be used for the following modulation format:
				<list style="empty">
					<t>Optical Tributary Signal Class NRZ 40G</t>
				</list>
				Which is encoded as follows:
								
				<figure align="center" anchor="modulation_compat_1" title="Sublink Modulation Format - Sublink 2">
					<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Sublink ID=2| Encoding = 1    |           Reserved            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1|1|      Modulation ID=4        |           Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Possible additional modulation parameters depending upon    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:   the modulation ID                                           :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
				</figure>								
			</t>
		</appendix>
		<appendix title="Signal Dependency Set">
			<t>
			In some cases a link may carry clients of a particular modulation type at a Grid spacing of 50 GHz but it may require a different spacing when a different modulation format is used. In that case a channel at center frequency x "blocks" other frequencies around its center frequency.</t>
			<t>
				In this example, assume a sublink that can carry client signals at a 50 GHz spacing when the modulation format is "Optical Tributary Signal Class NRZ 10G" and all channels can also carry client signals using the "Optical Tributary Signal Class NRZ 40G" modulation format. If a channel is using this modulation format, the two adjacent channels may not be used. This information can be used by the RWA algorithm to select the correct spacing of a new "Optical Tributary Signal Class NRZ 40G" signal and mark its adjacent channels as "unusable".
				<figure align="center" anchor="signal_dependency_set_ex1" title="Signal Dependency sub-TLV Example">
					<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1|1|      Modulation ID=4        |           Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Possible additional modulation parameters depending upon    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:   the modulation ID                                           :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| G=1 | C.S=2 |   Lower Exc=1   | G=1 | C.S=2 |   Upper Exc=1   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
					</figure>
			</t> 
		</appendix>
    </appendix>  

</middle>

<!--  *****BACK MATTER ***** -->

<back>
  <!-- References split into informative and normative -->

  <!-- There are 2 ways to insert reference entries from the citation libraries:
   1. define an ENTITY at the top, and use "ampersand character"RFC2629; here (as shown)
   2. simply use a PI "less than character"?rfc include="reference.RFC.2119.xml"?> here
      (for I-Ds: include="reference.I-D.narten-iana-considerations-rfc2434bis.xml")

   Both are cited textually in the same manner: by using xref elements.
   If you use the PI option, xml2rfc will, by default, try to find included files in the same
   directory as the including file. You can also define the XML_LIBRARY environment variable
   with a value containing a set of directories to search.  These can be either in the local
   filing system or remote ones accessed by http (http://domain/dir/... ).-->

  <references title="Normative References">
    	<!--?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?-->
    	&RFC2119;
	  	&RFC3630;
	  	&RFC5305;
	  	&RFC4203;
	  	&RFC5307;
	  	&RFC3471;
		&WSON-Info;
		&Otani;
	
		<reference anchor="WSON-Encode" target="https://datatracker.ietf.org/doc/draft-ietf-ccamp-rwa-wson-encode/">
			<front>
				<title>Routing and Wavelength Assignment Information Encoding for Wavelength Switched Optical Networks</title>
				<author initials= "G." surname="Bernstein" />
				<author initials= "Y." surname="Lee" />
				<author initials= "D." surname="Li" />
				<author initials= "W." surname="Imajuku" />
				<date month="February" year="2010" />
			</front>
	  	</reference>
	
		<reference anchor="G.694.1" target="ITU-T G.694.2">
      	<front>
          	<title>Spectral Grids for DWDM applications: DWDM frequency grid</title>
				<author fullname="ITU-T"/>
          	<date month="June" year="2002" />
      	</front>
      	<seriesInfo name="ITU-T Recommendation" value="G.694.1" />
  	</reference>
  </references>



    <!-- Change Log

v00 2006-03-15  EBD   Initial version

v01 2006-04-03  EBD   Moved PI location back to position 1 -
                      v3.1 of XMLmind is better with them at this location.
v02 2007-03-07  AH    removed extraneous nested_list attribute,
                      other minor corrections
v03 2007-03-09  EBD   Added comments on null IANA sections and fixed heading capitalization.
                      Modified comments around figure to reflect non-implementation of
                      figure indent control.  Put in reference using anchor="DOMINATION".
                      Fixed up the date specification comments to reflect current truth.
v04 2007-03-09 AH     Major changes: shortened discussion of PIs,
                      added discussion of rfc include.
v05 2007-03-10 EBD    Added preamble to C program example to tell about ABNF and alternative 
                      images. Removed meta-characters from comments (causes problems).  -->
  </back>
</rfc>
