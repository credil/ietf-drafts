 Network Working Group                         S. Poretsky              
 Internet Draft                                Allot Communications            
 Expires: September 08, 2009                                   
 Intended Status: Informational                Brent Imhoff                 
                                               Juniper Networks

                                               March 08, 2009

                        Terminology for Benchmarking 
                 Link-State IGP Data Plane Route Convergence

               <draft-ietf-bmwg-igp-dataplane-conv-term-17.txt>

Status of this Memo
   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.
   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on September 8, 2009.

Copyright Notice
   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document. 

ABSTRACT
   This document describes the terminology for benchmarking Interior 
   Gateway Protocol (IGP) Route Convergence.   The terminology is to 
   be used for benchmarking IGP convergence time through externally 
   observable (black box) data plane measurements.  The terminology 
   can be applied to any link-state IGP, such as ISIS and OSPF. 

Poretsky, Imhoff                                                [Page 1]
  
INTERNET-DRAFT           Benchmarking Terminology for     March 2009
                 Link-State IGP Data Plane Route Convergence

Table of Contents
     1. Introduction and Scope........................................3 
     2. Existing Definitions .........................................4 
     3. Term Definitions..............................................4 
        3.1 States   
           3.1.1 Route Convergence....................................4 
           3.1.2 Full Convergence.....................................5
           3.1.3 Network Convergence..................................5
           3.1.4 Route-Specific Convergence...........................6
           3.1.5 Stale Forwarding.....................................6
        3.2 Events
           3.2.1 Convergence Event....................................7
           3.2.2 Convergence Event Trigger............................7
           3.2.3 Convergence Event Instant............................8
           3.2.4 Convergence Recovery Instant.........................8        
           3.2.5 First Route Convergence Instant......................9
           3.2.6 Convergence Event Transition.........................9
           3.2.7 Convergence Recovery Transition......................10
           3.2.8 Nested Convergence Events............................10
        3.3 Interfaces
           3.3.1 Local Interface......................................11
           3.3.2 Neighbor Interface...................................11
           3.3.3 Remote Interface.....................................11
           3.3.4 Preferred Egress Interface...........................12
           3.3.5 Next-Best Egress Interface...........................12
        3.4 Benchmarking Method
           3.4.1 Packet Loss..........................................13
           3.4.2 Convergence Packet Loss..............................13 
           3.4.3 Rate-Derived Convergence Method......................14
           3.4.4 Loss-Derived Convergence Method......................14
           3.4.5 Packet Sampling Interval.............................15
        3.5 Benchmarks
           3.5.1 Full Convergence Time................................17
           3.5.2 First Route Convergence Time.........................17
           3.5.3 Route-Specific Convergence Time......................17 
           3.5.4 Sustained Convergence Validation Time................18
           3.5.5 Reversion Convergence Time...........................19
     4. IANA Considerations...........................................19
     5. Security Considerations.......................................19
     6. Acknowledgements..............................................20
     7. References....................................................20
     8. Author's Address..............................................21






Poretsky, Imhoff                                                [Page 2]
  
INTERNET-DRAFT           Benchmarking Terminology for     March 2009
                 Link-State IGP Data Plane Route Convergence

1. Introduction and Scope

   This draft describes the terminology for benchmarking Interior 
   Gateway Protocol (IGP) Route Convergence.  The motivation and 
   applicability for this benchmarking is provided in [Po07a].  The 
   methodology to be used for this benchmarking is described in [Po07m].  
   The purpose of this document is to introduce new terms required to 
   complete execution of the IGP Route Convergence Methodology [Po07m].  
   These terms apply to IPv4 and IPv6 traffic and IGPs.

   Convergence times are measured at the Tester on the data plane by 
   observing packet loss through the DUT.  The methodology and 
   terminology to be used for benchmarking Route Convergence can be 
   applied to any link-state IGP such as ISIS [Ca90] and OSPF [Mo98].  
   The data plane is measured to obtain black-box (externally 
   observable) convergence benchmarking metrics.  When there is no
   packer loss observed in the data plane, the convergence time
   SHALL be reported as zero.  

   An example of Route Convergence as observed and measured from the 
   data plane is shown in Figure 1.  The graph in Figure 1 shows 
   Forwarding Rate versus Time.  Time 0 on the X-axis is on the far 
   right of the graph.  The Offered Load to the ingress interface of 
   the DUT SHOULD equal the measured Throughput [Ba99][Ma98] of the DUT 
   and the Forwarding Rate [Ma98] and Convergence Packet Loss is 
   measured at the Preferred and Next-Best Egress interfaces of the DUT
   befire, during, and after a Convergence Event Trigger.  These 
   components of the graph are defined in the Term Definitions section.  

  Full Convergence-> Convergence     Convergence 
                     Recovery       Event   Event    Time=
                     Instant        Instant Trigger  0sec
  Forwarding Rate=         ^              ^    ^     ^     Offered Load=
     Offered Load --> ------\    Packet   /----------- <--Max Throughput
                             \    Loss   /<----Convergence
           Convergence------->\         /      Event Transition
        Recovery Transition    \       /
                                \_____/<------Maximum Packet Loss
                                ^
                          First Route
                      Convergence Instant

        Y-axis = Forwarding Rate
        X-axis = Time (increases right to left to match commercial test 
                       equipment displays)

                        Figure 1. Convergence Graph


Poretsky, Imhoff                                                [Page 3]
  
INTERNET-DRAFT           Benchmarking Terminology for     March 2009
                 Link-State IGP Data Plane Route Convergence

2.  Existing Definitions
   This document uses existing terminology defined in other BMWG 
   work.  Examples include, but are not limited to: 
      
             Latency                   [Ref.[Ba91], section 3.8] 
             Frame Loss Rate           [Ref.[Ba91], section 3.6] 
             Throughput                [Ref.[Ba91], section 3.17] 
             Device Under Test (DUT)   [Ref.[Ma98], section 3.1.1] 
             System Under Test (SUT)   [Ref.[Ma98], section 3.1.2] 
             Out-of-order Packet       [Ref.[Po06], section 3.3.2] 
             Duplicate Packet          [Ref.[Po06], section 3.3.3] 
             Packet Reordering         [Ref.[Mo06], section 3.3]

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14, RFC 2119 
   [Br97].  RFC 2119 defines the use of these key words to help make the
   intent of standards track documents as clear as possible.  While this
   document uses these keywords, this document is not a standards track
   document.

3. Term Definitions

 3.1 States
   3.1.1 Route Convergence

        Definition:
        The action to update all components of the router with the 
        most recent route change(s) including the Routing 
        Information Base (RIB) and Forwarding Information Base (FIB), 
        along with software and hardware tables, such that forwarding 
        is successful for one or more route entries.

        Discussion:
        Route Convergence MUST occur after a Convergence Event.
        Route Convergence can be observed externally by the rerouting
        of data traffic to the Next-best Egress Interface.  Also,
        completion of Route Convergence may or may not be sustained 
        over time.

        Measurement Units: N/A

        Issues: None

        See Also:
        Network Convergence
        Full Convergence
        Convergence Event

Poretsky, Imhoff                                                [Page 4]
  
INTERNET-DRAFT           Benchmarking Terminology for     March 2009
                 Link-State IGP Data Plane Route Convergence

   3.1.2 Full Convergence

        Definition:
        Route Convergence for an entire FIB in which complete recovery 
        from the Convergence Event is indicated by the DUT throughput 
        equal to the offered load.

        Discussion:
        When benchmarking convergence, it is useful to measure
        the time to converge an entire FIB.  For example,
        a Convergence Event can be produced for an OSPF table of 
        5000 routes so that the time to converge routes 1 through 
        5000 is measured.  Completion of Full Convergence is externally 
        observable from the data plane when the Throughput of the data 
        plane traffic on the Next-Best Egress Interface equals the 
        offered load.  

        Full Convergence MAY be measured using Rate-Derived Convergence 
        Method or calculated using Loss-Derived Convergence Method. 
        Full Convergence may or may not be sustained over time.  The 
        Sustained Convergence Validation Time MUST be applied.  
        
        Measurement Units: N/A

        Issues: None

        See Also:
        Network Convergence
        Route Convergence
        Convergence Event

   3.1.3 Network Convergence  

        Definition:
        The process of updating of all routing tables, including 
        distributed FIBs, in all routers throughout the network.

        Discussion:
        Network Convergence requires completion of all Route 
        Convergence operations for all routers in the network following 
        a Convergence Event.  Completion of Network Convergence can be 
        observed by recovery of System Under Test (SUT) Throughput to 
        equal the offered load, with no Stale Forwarding, and no 
        Blenders [Ca01][Ci03].

        Measurement Units: N/A

        Issues: None

Poretsky, Imhoff                                                [Page 5]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence

        See Also:
        Route Convergence
        Stale Forwarding
 
  3.1.4 Route-Specific Convergence
        Definition:
        Route Convergence for one or more specific route entries in 
        the FIB in which recovery from the Convergence Event is 
        indicated when data-plane traffic for the flow [Po06] matching 
        that route entry(ies) is routed to the Next-Best Egress 
        Interface.

        Discussion:
        When benchmarking convergence, it is sometimes useful to 
        measure the time to converge a single flow [Po06] or group of 
        flows to benchmark convergence time for one or a few route 
        entries in the FIB instead of the entire FIB.  Route-Specific 
        Convergence of a flow is externally observable from the data 
        plane when the data plane traffic for that flow is routed to 
        the Next-Best Egress Interface.  

        Measurement Units: N/A

        Issues: None

        See Also:
        Full Convergence
        Route Convergence
        Convergence Event

   3.1.5 Stale Forwarding
        Definition:
        Forwarding of traffic to route entries that no longer exist 
        or to route entries with next-hops that are no longer preferred.

        Discussion:
        Stale Forwarding can be caused by a Convergence Event and can 
        manifest as a "black-hole" or microloop that produces packet 
        loss.  Stale Forwarding can exist until Network Convergence is 
        completed.  Stale Forwarding cannot be observed with a single 
        DUT.
      
        Measurement Units: N/A

        Issues: None

        See Also:
        Network Convergence

Poretsky, Imhoff                                                [Page 6]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence

 3.2 Events

   3.2.1 Convergence Event
        
        Definition:
        The occurrence of a planned or unplanned event in the network 
        that results in a change in the egress interface of the Device
        Under Test (DUT) for routed packets.

        Discussion:
        Convergence Events include link loss, routing protocol session 
        loss, router failure, configuration change, and better next-hop
        learned via a routing protocol.

        Measurement Units:
        N/A

        Issues:        
        None

        See Also:
        Convergence Packet Loss
        Convergence Event Instant

   3.2.2 Convergence Event Trigger
    
        Definition:
        An action taken by the Tester to produce a Convergence Event.

        Discussion:
        The Convergence Event Trigger is introduced by the Tester and 
        may be indicated by link loss, routing protocol session loss, 
        router failure, configuration change, or a better next-hop 
        learned via a routing protocol introduced by the Tester.

        Measurement Units:
        N/A

        Issues:        
        None

        See Also:
        Convergence Event
        Convergence Packet Loss
        Convergence Recovery Instant
        


Poretsky, Imhoff                                                [Page 7]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence

   3.2.3 Convergence Event Instant

        Definition:
        The time instant that a Convergence Event becomes observable in 
        the data plane.

        Discussion:
        Convergence Event Instant is observable from the data 
        plane as the precise time that the device under test begins 
        to exhibit packet loss.  The Convergence Event Instant is
        produced by the Convergence Event Trigger.  The Convergence 
        Event Instant always occurs concurrent or subsequent to the 
        Tester introducing the Convergence Event Trigger.

        Measurement Units:
        hh:mm:ss:nnn:uuu, 
           where 'nnn' is milliseconds and 'uuu' is microseconds.

        Issues: None

        See Also:
        Convergence Event
        Convergence Packet Loss
        Convergence Recovery Instant

   3.2.4 Convergence Recovery Instant

        Definition:
        The time instant that Full Convergence completion is 
        observed.

        Discussion:
        Convergence Recovery Instant is measurable from the data 
        plane as the precise time that the device under test completes 
        Full Convergence.  The Convergence Recovery Instant MUST be 
        maintained for an interval of duration equal to the Sustained 
        Convergence Validation Time.

        Measurement Units:
        hh:mm:ss:nnn:uuu, 
           where 'nnn' is milliseconds and 'uuu' is microseconds.

        Issues:        
        None

        See Also:
        Sustained Convergence Validation Time
        Convergence Packet Loss
        Convergence Event Instant

Poretsky, Imhoff                                                [Page 8]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence

   3.2.5 First Route Convergence Instant
        Definition:
        The time instant a first route entry has converged 
        following a Convergence Event, as observed by receipt of 
        the first packet from the Next-Best Egress Interface.

        Discussion:
        The First Route Convergence Instant is an indication that the 
        process to achieve Full Convergence has begun.  Any route may 
        be the first to converge for First Route Convergence Instant.  
        Measurement on the data-plane enables the First Route 
        Convergence Instant to be observed without any white-box 
        information from the DUT.  

        Measurement Units:
           hh:mm:ss:nnn:uuu, 
             where 'nnn' is milliseconds and 'uuu' is microseconds.

        Issues:
        None

        See Also:
        Route Convergence
        Full Convergence
        Stale Forwarding

   3.2.6 Convergence Event Transition
        Definition:
        A time interval observed following a Convergence Event in which
        Throughput gradually reduces to a minimum value.

        Discussion:
        The Convergence Event Transition is best observed for Full 
        Convergence.  The egress packet rate observed during a 
        Convergence Event Transition may not decrease linearly and may 
        not decrease to zero.  Both the offered load and the Packet 
        Sampling Interval influence the observations of the Convergence 
        Event Transition.  For example, it is possible that if the 
        Convergence Event were to cause the Throughput [Ba91] to drop 
        to zero then this may not be observed if the Packet Sampling 
        Interval is set too high.  This is further discussed with the 
        term "Packet Sampling Interval".

        Measurement Units:
          seconds

        Issues: None

Poretsky, Imhoff                                                [Page 9]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence

        See Also:
        Convergence Event
        Full Convergence
        Packet Sampling Interval

   3.2.7 Convergence Recovery Transition

        Definition:
        The characteristic of the DUT in which Throughput gradually 
        increases to equal the offered load.

        Discussion:
        The Convergence Recovery Transition is best observed for 
        Full Convergence.  The egress packet rate observed during
        a Convergence Recovery Transition may not increase linearly.
        Both the offered load and the Packet Sampling Interval
        influence the observations of the Convergence Recovery
        Transition.  This is further discussed with the term 
        "Packet Sampling Interval".

        Measurement Units:
        seconds

        Issues: None

        See Also:
        Full Convergence
        Packet Sampling Interval

   3.2.8 Nested Convergence Events

        Definition:
        The occurrence of a Convergence Event while the route 
        table is converging from a prior Convergence Event.  

        Discussion:
        The Convergence Events for a Nested Convergence Event
        MUST occur with different neighbors.  A common 
        observation from a Nested Convergence Event will be 
        the withdrawal of routes from one neighbor while the 
        routes of another neighbor are being installed.
        
        Measurement Units: N/A

        Issues: None

        See Also:
        Convergence Event

Poretsky, Imhoff                                               [Page 10]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence

 3.3 Interfaces 
        
   3.3.1 Local Interface

        Definition:
        An interface on the DUT.

        Discussion:
        A failure of the Local Interface indicates that the failure 
        occurred directly on the DUT.

        Measurement Units: N/A

        Issues: None

        See Also:
        Neighbor Interface
        Remote Interface

   3.3.2 Neighbor Interface

        Definition:
        The interface on the neighbor router or tester that is 
        directly linked to the DUT's Local Interface.

        Discussion:
        A failure of a Neighbor Interface indicates that a
        failure occurred on a neighbor router's interface that 
        directly links the neighbor router to the DUT.

        Measurement Units: N/A

        Issues: None

        See Also:
        Local Interface
        Remote Interface

   3.3.3 Remote Interface

        Definition:
        An interface on a neighboring router that is not directly 
        connected to any interface on the DUT.

        Discussion:
        A failure of a Remote Interface indicates that the failure
        occurred on a neighbor router's interface that is not
        directly connected to the DUT.

Poretsky, Imhoff                                               [Page 11]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence


        Measurement Units:
        N/A

        Issues:
        None

        See Also:
        Local Interface
        Neighbor Interface

   3.3.4 Preferred Egress Interface

        Definition:
        The outbound interface from the DUT for traffic routed to the 
        preferred next-hop.

        Discussion:
        The Preferred Egress Interface is the egress interface prior 
        to a Convergence Event. 

        Measurement Units:
        N/A

        Issues:
        None

        See Also:
        Next-Best Egress Interface 

   3.3.5 Next-Best Egress Interface

        Definition:
        The outbound interface from the DUT for traffic routed to the 
        second-best next-hop.  It is the same media type and link speed
        as the Preferred Egress Interface

        Discussion:
        The Next-Best Egress Interface becomes the egress interface 
        after a Convergence Event.

        Measurement Units: 
        N/A
  
        Issues: None

        See Also:
        Preferred Egress Interface 

Poretsky, Imhoff                                               [Page 12]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence
 3.4 Benchmarking Methods

   3.4.1  Packet Loss

        Definition:
        The number of packets that should have been forwarded
        by a DUT under a constant offered load that were 
        not forwarded due to lack of resources.

        Discussion:
        Packet Loss is a modified version of the term "Frame Loss Rate" 
        as defined in [Ba91].  The term "Frame Loss" is intended for 
        Ethernet Frames while "Packet Loss" is intended for IP packets.  
        Packet Loss can be measured as a reduction in forwarded traffic 
        from the Throughput [Ba91] of the DUT. 

        Measurement units:
        Number of offered packets that are not forwarded. 

        Issues:  None

        See Also:
        Convergence Packet Loss

   3.4.2 Convergence Packet Loss

        Definition:
        The number of packets lost due to a Convergence Event
        until Full Convergence completes.

        Discussion:
        Convergence Packet Loss includes packets that were lost and 
        packets that were delayed due to buffering.  The Convergence 
        Packet Loss observed in a Packet Sampling Interval may or may 
        not be equal to the number of packets in the offered load 
        during the interval following a Convergence Event (see Figure 
        1).

        Measurement Units:
        number of packets

        Issues: None

        See Also:
        Packet Loss
        Route Convergence
        Convergence Event
        Packet Sampling Interval

Poretsky, Imhoff                                               [Page 13]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence

   3.4.3 Rate-Derived Convergence Method
        Definition:
        The method to calculate convergence time benchmarks from the 
        amount of time that Convergence Packet Loss persists upon 
        occurrence of a Convergence Event.    

        Rate-Derived Convergence Method can be calculated as the time 
        difference from the Convergence Event Instant to the 
        Convergence Recovery Instant, as shown with Equation 1.
        
        (Equation 1)  
          Rate-Derived Convergence Method = 
              Convergence Recovery Instant - Convergence Event Instant. 
              
        Discussion:
        It is RECOMMENDED that the Rate-Derived Convergence Method be 
        measured when benchmarking convergence times.  The Rate-Derived 
        Convergence Method SHOULD be measured with an Offered Load at 
        the Throughput of the DUT.  At least one packet per route 
        in the FIB for all routes in the FIB MUST be offered to the DUT 
        within the Packet Sampling Interval.  
        
        It is possible to measure no packet loss, which results in a
        Rate-Derived Convergence Time benchmark of zero.  Failure to 
        achieve Full Convergence results in a Rate-Derived Convergence 
        Time benchmark of infinity.  
         
        Measurement Units:
        seconds

        Issues: None

        See Also:
        Convergence Packet Loss
        Convergence Recovery Instant
        Convergence Event Instant
        Full Convergence        

   3.4.4 Loss-Derived Convergence Method
        Definition:
        The method to calculate convergence time benchmarks from the 
        amount of Convergence Packet Loss.  Loss-Derived Convergence 
        Method can be calculated from Convergence Packet Loss as shown 
        with Equation 2.  

        Equation 2 - 
          Loss-Derived Convergence Method =
                Convergence Packets Loss / Offered Load
          where units are packets / packets/second = seconds

Poretsky, Imhoff                                               [Page 14]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence

        Discussion:
        Ideally, the Convergence Event Transition and Convergence 
        Recovery Transition are instantaneous so that the Rate-Derived 
        Convergence Method = Loss-Derived Convergence Method.  However, 
        router implementations are less than ideal.  Loss-Derived 
        Convergence Method gives a better than actual result when 
        converging many routes simultaneously because it ignores the 
        transitions.  The Rate-Derived Convergence Method takes the 
        transitions into account.  

        Equation 2 calculates the average convergence time over all 
        routes to which packets have been sent. The average convergence 
        time is often lower than the maximum convergence time 
        over all routes, so it can produce a result that is faster than 
        the actual convergence time..  Therefore, Loss-Derived 
        Convergence Method is not the preferred method to measure 
        convergence benchmarks.  For these reasons the RECOMMENDED 
        method to obtain a benchmark metric for convergence time is the 
        Rate-Derived Convergence Method. 

        Measurement Units:
        seconds

        Issues: None

        See Also:
        Convergence Packet Loss
        Rate-Derived Convergence Method
        Route-Specific Convergence
        Convergence Event Transition
        Convergence Recovery Transition

   3.4.5 Packet Sampling Interval
        Definition:  
        The interval at which the tester (test equipment) polls to make 
        measurements for arriving packet flows.

        Discussion: 
        At least one packet per route in the FIB for all routes in the 
        FIB MUST be offered to the DUT within the Packet Sampling 
        Interval.  Metrics measured at the Packet Sampling Interval 
        MUST include Forwarding Rate and Convergence Packet Loss.

        Packet Sampling Interval can influence the Convergence Graph.
        This is particularly true when implementations complete Full 
        Convergence in less time than the Packet Sampling Interval.  The 
        Convergence Event Transition and Convergence Recovery Transition 

Poretsky, Imhoff                                               [Page 15]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence

        can become exaggerated when the Packet Sampling Interval is too 
        long.  In this condition, the Rate-Derived Convergence Method 
        may produce a larger than actual convergence time.  In such 
        cases the Loss-Derived Convergence Method may produce a more 
        accurate result.  The recommended value for configuration of 
        the Packet Sampling Interval is provided in [Po07m].

        Measurement Units: seconds

        Issues: None

        See Also:
        Convergence Packet Loss
        Convergence Event Transition
        Convergence Recovery Transition

3.5 Benchmarks

   3.5.1 Full Convergence Time

        Definition:
        The amount of time it takes for Full Convergence to occur.

        Discussion:
        Full Convergence Time can be determined using the Rate-Derived             
        Convergence Method or Loss-Derived Convergence Method.  The 
        Rate-Derived Convergence Method is RECOMMENDED.  When 
        measuring Route-Specific Convergence Time, there may be 
        conditions in which the maximum Route Specific Convergence Time
        can be reported as the Full Convergence Time.  Full Convergence 
        may or may not be sustained over time.  The Sustained 
        Convergence Validation Time MUST be applied.  

        Measurement Units:
        seconds

        Issues: None

        See Also:
        Full Convergence
        Rate-Derived Convergence Method
        Loss-Derived Convergence Method

   3.5.2 First Route Convergence Time

        Definition:
        The amount of time for Convergence Packet Loss until the 
        convergence of a first route entry on the Next-Best Egress 
        Interface, as indicated by the First Route Convergence 
        Instant.

Poretsky, Imhoff                                               [Page 16]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence

        Discussion:
        The First Route Convergence Time benchmarking metric can be 
        measured when benchmarking either Full Convergence or 
        Route-Specific Convergence.  When benchmarking Full Convergence, 
        First Route Convergence Time can be measured as the time 
        difference from the Convergence Event Instant and the First 
        Route Convergence Instant, as shown with Equation 4a.
        
        (Equation 4a)  
        First Route Convergence Time = 
        First Route Convergence Instant - Convergence Event Instant 
         
        First Route Convergence Time should be measured at the maximum
        Throughput of the DUT.  At least one packet per route in the FIB 
        for all routes in the FIB MUST be offered to the DUT within the
        Packet Sampling Interval.  Failure to achieve the First Route 
        Convergence Instant results in a First Route Convergence Time 
        benchmark of infinity.
 
        Measurement Units:
        seconds

        Issues: None

        See Also:
        Convergence Packet Loss
        First Route Convergence Instant

   3.5.3 Route-Specific Convergence Time

        Definition:
        The amount of time it takes for Route-Specific Convergence to
        be completed as calculated from the amount of Convergence 
        Packet Loss for the flow associated to a specific route.

        Route-Specific Convergence Time can be calculated from
        Convergence Packet Loss as shown with Equation 3.

        (Equation 3) Route-Specific Convergence Time =
                           Convergence Packets Loss / Offered Load
          where units are packets / packets/second = seconds

Poretsky, Imhoff                                               [Page 17]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence
     
        Discussion:
        It is possible to provide an offered load that has flows 
        matching every route entry in the FIB and benchmarking 
        Route-Specific Convergence Time for all route entries.  The 
        number of flows that can be measured is dependent upon the flow 
        measurement capabilities of the Tester.  When benchmarking 
        Route-Specific Convergence, Convergence Packet Loss is measured 
        for specific flow(s) and Equation 3 is applied for each flow.  
        Each flow has a single destination address matching a different 
        route entry.  The fastest measurable convergence time is equal 
        to the time between two consecutive packets of a flow offered
        by the Tester.  In practice, the fastest measurable 
        convergence time is the Packet Sampling Interval of the Tester. 

        The Route-Specific Convergence Time benchmarks enable minimum, 
        maximum, average, and median convergence time measurements to be 
        reported by comparing the results for the different route 
        entries.  It also enables benchmarking of convergence time when 
        configuring a priority value for route entry(ies).  Since 
        multiple Route-Specific Convergence Times can be measured it is 
        possible to have an array of results.  The format for reporting 
        Route-Specific Convergence Time is provided in [Po07m].

        Measurement Units:
        seconds

        Issues:
        None

        See Also:
        Convergence Event
        Convergence Packet Loss
        Route-Specific Convergence

   3.5.4 Sustained Convergence Validation Time
        Definition:
        The amount of time for which the completion of Full 
        Convergence is maintained without additional packet loss.  

        Discussion:
        The purpose of the Sustained Convergence Validation Time is to 
        produce Convergence benchmarks protected against fluctuation 
        in Throughput after the completion of Full Convergence is 
        observed.  The RECOMMENDED Sustained Convergence Validation 
        Time to be used is 5 seconds.  The BMWG selected 5 seconds 
        based upon RFC 2544 [Ba99] which recommends waiting 2 seconds 
        for residual frames to arrive and 5 seconds for DUT 
        restabilization.

Poretsky, Imhoff                                               [Page 18]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence

        Measurement Units:
        seconds

        Issues: None

        See Also:
        Full Convergence
        Convergence Recovery Instant

   3.5.5 Reversion Convergence Time

        Definition:
        The amount of time for the DUT to complete Full Convergence 
        to the Preferred Egress Interface, instead of the Next-Best 
        Egress Interface, upon recovery from a Convergence Event.

        Discussion:
        Reversion Convergence Time is the amount of time for Full
        Convergence to the original egress interface.  This is 
        achieved by recovering from the Convergence Event, such as 
        restoring the failed link.  Reversion Convergence Time 
        can be measured using the Rate-Derived Convergence Method 
        or Loss-Derived Convergence Method.  The Rate-Derived 
        Convergence Method is RECOMMENDED.  It is possible to have 
        the Reversion Convergence Time differ from the Full 
        Convergence Time.

        Measurement Units: seconds 
        
        Issues: None        

        See Also:
        Preferred Egress Interface
        Convergence Event
        Rate-Derived Convergence Method

    
4. IANA Considerations

   This document requires no IANA considerations.

5. Security Considerations

   Documents of this type do not directly affect the security of
   Internet or corporate networks as long as benchmarking is not
   performed on devices or systems connected to production networks.
   Security threats and how to counter these in SIP and the media 
   layer is discussed in RFC3261, RFC3550, and RFC3711 and various 
   other drafts.  This document attempts to formalize a set of 
   common terminology for benchmarking IGP convergence performance 
   in a lab environment.

Poretsky, Imhoff                                               [Page 19]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence

6. Acknowledgements
   Thanks to Sue Hares, Al Morton, Kevin Dubray, Ron Bonica, David Ward, 
   Kris Michielsen and the BMWG for their contributions to this work. 

7. References
 7.1 Normative References
   [Ba91] Bradner, S. "Benchmarking Terminology for Network 
         Interconnection Devices", RFC1242, July 1991.

   [Ba99] Bradner, S. and McQuaid, J., "Benchmarking 
         Methodology for Network Interconnect Devices", 
         RFC 2544, March 1999. 
      
   [Br97] Bradner, S., "Key words for use in RFCs to Indicate 
          Requirement Levels", RFC 2119, March 1997 

   [Ca90] Callon, R., "Use of OSI IS-IS for Routing in TCP/IP and Dual 
         Environments", RFC 1195, December 1990.

   [Ma98] Mandeville, R., "Benchmarking Terminology for LAN 
         Switching Devices", RFC 2285, February 1998.

   [Mo98] Moy, J., "OSPF Version 2", RFC 2328, IETF, April 1998.

   [Mo06] Morton, A., et al, "Packet Reordering Metrics", RFC 4737,
          November 2006.

   [Po06] Poretsky, S., et al., "Terminology for Benchmarking 
         Network-layer Traffic Control Mechanisms", RFC 4689, 
         November 2006. 

   [Po07a] Poretsky, S., "Benchmarking Applicability for Link-State 
         IGP Data Plane Route Convergence", 
         draft-ietf-bmwg-igp-dataplane-conv-app-17, work in progress, 
         March 2009.

   [Po07m] Poretsky, S. and Imhoff, B., "Benchmarking Methodology for 
         Link-State IGP Data Plane Route Convergence", 
         draft-ietf-bmwg-igp-dataplane-conv-meth-17, work in progress, 
         March 2009.

 7.2 Informative References
   [Ca01] S. Casner, C. Alaettinoglu, and C. Kuan, "A Fine-Grained View 
         of High Performance Networking", NANOG 22, June 2001.

   [Ci03] L. Ciavattone, A. Morton, and G. Ramachandran, "Standardized 
         Active Measurements on a Tier 1 IP Backbone", IEEE 
         Communications Magazine, pp90-97, May 2003. 

Poretsky, Imhoff                                               [Page 20]
  
INTERNET-DRAFT             Benchmarking Terminology for   March 2009
                 Link-State IGP Data Plane Route Convergence


8. Author's Address

      Scott Poretsky
      Allot Communications
      67 South Bedford Street, Suite 400
      Burlington, MA 01803
      USA
      Phone: + 1 508 309 2179
      Email: sporetsky@allot.com

      Brent Imhoff
      Juniper Networks
      1194 North Mathilda Ave
      Sunnyvale, CA 94089
      USA
      Phone: + 1 314 378 2571 
      EMail: bimhoff@planetspork.com































Poretsky, Imhoff                                               [Page 21]
