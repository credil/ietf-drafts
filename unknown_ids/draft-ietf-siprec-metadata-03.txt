SIPREC                                           Ram Mohan. Ravindranath
Internet-Draft                                  Parthasarathi. Ravindran
Intended status: Standards Track                     Cisco Systems, Inc.
Expires: January 10, 2012                                  Paul. Kyzivat
                                                            Unaffiliated
                                                            July 9, 2011


          Session Initiation Protocol (SIP) Recording Metadata
                     draft-ietf-siprec-metadata-03

Abstract

   Session recording is a critical requirement in many communications
   environments such as call centers and financial trading.  In some of
   these environments, all calls must be recorded for regulatory,
   compliance, and consumer protection reasons.  Recording of a session
   is typically performed by sending a copy of a media stream to a
   recording device.  This document describes the metadata model as
   viewed by Session Recording Server(SRS) and the Recording metadata
   format.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 10, 2012.

Copyright Notice

   Copyright (c) 2011 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents



Ravindranath, et al.    Expires January 10, 2012                [Page 1]

Internet-Draft           SIP Recording Metadata                July 2011


   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  4
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Definitions  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   4.  Metadata Model . . . . . . . . . . . . . . . . . . . . . . . .  5
   5.  Recording Metadata Format  . . . . . . . . . . . . . . . . . .  6
     5.1.  XML data format  . . . . . . . . . . . . . . . . . . . . .  6
       5.1.1.  Namespace  . . . . . . . . . . . . . . . . . . . . . .  7
       5.1.2.  recording  . . . . . . . . . . . . . . . . . . . . . .  7
   6.  Recording Metadata elements  . . . . . . . . . . . . . . . . .  7
     6.1.  Recording Session  . . . . . . . . . . . . . . . . . . . .  7
       6.1.1.  Attributes . . . . . . . . . . . . . . . . . . . . . .  8
       6.1.2.  Associations . . . . . . . . . . . . . . . . . . . . .  8
     6.2.  Communication Session Group  . . . . . . . . . . . . . . .  8
       6.2.1.  Attributes . . . . . . . . . . . . . . . . . . . . . .  9
       6.2.2.  Associations . . . . . . . . . . . . . . . . . . . . .  9
       6.2.3.  XML element  . . . . . . . . . . . . . . . . . . . . .  9
     6.3.  Communication Session  . . . . . . . . . . . . . . . . . . 10
       6.3.1.  Attributes . . . . . . . . . . . . . . . . . . . . . . 10
       6.3.2.  Associations . . . . . . . . . . . . . . . . . . . . . 11
       6.3.3.  XML element  . . . . . . . . . . . . . . . . . . . . . 12
     6.4.  Participant  . . . . . . . . . . . . . . . . . . . . . . . 12
       6.4.1.  Attributes . . . . . . . . . . . . . . . . . . . . . . 12
       6.4.2.  Associations . . . . . . . . . . . . . . . . . . . . . 13
       6.4.3.  XML element  . . . . . . . . . . . . . . . . . . . . . 13
     6.5.  Media Stream . . . . . . . . . . . . . . . . . . . . . . . 14
       6.5.1.  Attributes . . . . . . . . . . . . . . . . . . . . . . 14
       6.5.2.  Associations . . . . . . . . . . . . . . . . . . . . . 15
       6.5.3.  XML element  . . . . . . . . . . . . . . . . . . . . . 15
     6.6.  Extension Data . . . . . . . . . . . . . . . . . . . . . . 15
       6.6.1.  Composition  . . . . . . . . . . . . . . . . . . . . . 15
       6.6.2.  XML element  . . . . . . . . . . . . . . . . . . . . . 15
     6.7.  start-time/stop-time . . . . . . . . . . . . . . . . . . . 16
   7.  SIP Recording Metadata Example . . . . . . . . . . . . . . . . 16
     7.1.  Complete SIP Recording Metadata Example  . . . . . . . . . 16
     7.2.  Partial Update of Recording metadata XML body  . . . . . . 18
   8.  XML Schema definition for Recording metadata . . . . . . . . . 18
   9.  Security Considerations  . . . . . . . . . . . . . . . . . . . 21
     9.1.  Connection Security  . . . . . . . . . . . . . . . . . . . 21
   10. IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 21



Ravindranath, et al.    Expires January 10, 2012                [Page 2]

Internet-Draft           SIP Recording Metadata                July 2011


     10.1. SIP recording metadata Schema Registration . . . . . . . . 22
   11. Acknowledgement  . . . . . . . . . . . . . . . . . . . . . . . 22
   12. Appendix A: Metadata Model Object Instances  . . . . . . . . . 22
     12.1. Use case 1: Basic Call . . . . . . . . . . . . . . . . . . 22
     12.2. Use case 2: Basic Call with hold/resume  . . . . . . . . . 23
     12.3. Use case 3: Basic call with Transfer . . . . . . . . . . . 25
     12.4. Conference Use Cases . . . . . . . . . . . . . . . . . . . 26
       12.4.1. Case 1:  . . . . . . . . . . . . . . . . . . . . . . . 27
       12.4.2. Case 2:  . . . . . . . . . . . . . . . . . . . . . . . 29
       12.4.3. Case 3:  . . . . . . . . . . . . . . . . . . . . . . . 31
       12.4.4. Case 4:  . . . . . . . . . . . . . . . . . . . . . . . 32
   13. References . . . . . . . . . . . . . . . . . . . . . . . . . . 33
     13.1. Normative References . . . . . . . . . . . . . . . . . . . 33
     13.2. Informative References . . . . . . . . . . . . . . . . . . 33
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 34




































Ravindranath, et al.    Expires January 10, 2012                [Page 3]

Internet-Draft           SIP Recording Metadata                July 2011


1.  Introduction

   Session recording is a critical requirement in many communications
   environments such as call centers and financial trading.  In some of
   these environments, all calls must be recorded for regulatory,
   compliance, and consumer protection reasons.  Recording of a session
   is typically performed by sending a copy of a media stream to a
   recording device.  This document focuses on the Recording metadata
   which describes the communication session.  The document describes a
   metadata model as viewed by Session Recording Server and the
   Recording metadata format, the requirements for which are described
   in [I-D.ietf-siprec-req] and the architecture for which is described
   in [I-D.ietf-siprec-architecture].


2.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].  This
   document only uses these key words when referencing normative
   statements in existing RFCs."


3.  Definitions

   Metadata element: A metadata element represent one block/class of
   metadata model.

   Metadata attributes: Metadata attributes represents the attributes
   listed in each of the blocks of metadata model

   Metadata Composition: Composition represents owns/holds relationship
   to show Metadata elements contained in another Metadata element

   Metadata Associations: Metadata associations represents the
   associations between different Metadata elements in the model.  It
   uses UML notation.

   XML element: An XML element represent one XML schema complexType
   element (xs:complexType) of XML schema

   XML attributes: An XML attribute represent one XML schema element
   (xs:element) of XML schema







Ravindranath, et al.    Expires January 10, 2012                [Page 4]

Internet-Draft           SIP Recording Metadata                July 2011


4.  Metadata Model

   Metadata is the information that describes recorded media and the CS
   to which they relate.  Below diagram shows a model for Metadata as
   viewed by Session Recording Server (SRS).




  +-------------------------------+       1
  | Recording Session (RS)        |---------------+
  +-------------------------------+               |
        |1..*           | 1..*                    |
        |               |                         |
        |               | 0..*                    |
        |        +-----------------+              |
        |        | Communication   |              |
        |        |  Session (CS)   |      1       |
        |        |    Group        |--------------|
        |        +-----------------+              |
        |              | 0..1                     |
        |              |                          |
        |0..*          | 1..*                     |
  +-------------------------------+               |
  |   Communication Session (CS)  |       1       |
  |                               |---------------|
  +-------------------------------+               |       +------------+
        | 1..*                 |1..*              |       |            |
        |                      |                  |  0..* |Extension   |
        | 2..*                 |0..*              |/\_____| Data       |
  +-------------+ receives +----------------+     |\/     |            |
  | Participant |----------|  Media Streams |     |       +------------+
  |             |0..*  0..*|                |     |
  |             |          |                |     |
  |             |          |                |     |
  |             |  sends   |                |     |
  |             |----------|                |     |
  |             |1.*   0..*|                |     |
  +-------------+          +----------------+     |
         |                         |              |
         |1                        |1             |
         |                         |              |
         +----------------------------------------+




   Session Recording Client (SRC) MAY initiate the Recording Session.



Ravindranath, et al.    Expires January 10, 2012                [Page 5]

Internet-Draft           SIP Recording Metadata                July 2011


   Here, Recording Session is a completely independent from the
   Communication Session that is being recorded at both the SIP dialog
   level and at the session level.  The metadata MUST be conveyed from
   SRC to SRS.  The metadata MUST be conveyed within the Recording
   Session Dialog.

   Note that the metadata model captures changes that occur over the
   duration of the recording session.  For example, if the call is
   transferred from one participant to another, then the SRC MUST convey
   a change of participant and the properties of the new media stream to
   the SRS.

   Some of the metadata is not required to be conveyed explicitly from
   the SRC to the SRS, if it can be obtained contextually by the SRS.
   For instance, the timing of RS block changes(like Start / Stop time)
   may not be explicitly conveyed from the SRC to the SRS (The Date
   header in RS dialog SIP message MAY provide the timing, but it is
   optional).  In such cases the time a change occurred may be assumed
   to be the same as the time when notification of the change is
   received by the SRS.


5.  Recording Metadata Format

   This section gives an overview of Recording Metadata Format.  The
   media related details of metadata MUST be passed across using session
   description protocol (SDP) [RFC4566].  SDP attributes describes about
   different media formats like audio, video.  The other metadata
   attributes like participant details MUST be passed across in new
   Recording specific XML document namely application/rs-metadata+xml.
   The linkage between application/rs-metadata+xml XML schema and
   metadata SDP is done using the SDP label attribute (a=label:xxx)
   referenced in [RFC4574].

   Metadata is passed across in Recording Session(RS) incrementally
   whenever there is a change in CS.

5.1.  XML data format

   Recording Metadata document is an XML document which will be embedded
   as a message body. recording element MUST present in all recording
   metadata XML document. recording acts as container for all other
   elements in this XML document.

   Recording object is a XML document.  It MUST have the XML declaration
   and it SHOULD contain an encoding declaration in the XML declaration,
   e.g., "<?xml version='1.0' encoding='UTF-8'?>".  If the charset
   parameter of the MIME content type declaration is present and it is



Ravindranath, et al.    Expires January 10, 2012                [Page 6]

Internet-Draft           SIP Recording Metadata                July 2011


   different from the encoding declaration, the charset parameter takes
   precedence.

   Every application conforming to this specification MUST accept the
   UTF-8 character encoding to ensure the minimal interoperability.

   Syntax and semantics error in recording XML document has to be
   informed to the originator using application specific mechanism.

5.1.1.  Namespace

   The namespace URI for elements defined by this specification is a
   Uniform Resource Namespace (URN) [RFC2141], using the namespace
   identifier 'ietf' defined by [RFC2648] and extended by [RFC3688].

   The URN is as follows: urn:ietf:params:xml:ns:recording

5.1.2.  recording

   recording element MUST contain an xmlns namespace attribute with
   value as urn:ietf:params:xml:ns:siprec.  One recording element MUST
   present in the all recording metadata XML document.

   dataMode element shows whether the XML document is complete document
   or partial update.  The default value is complete.


6.  Recording Metadata elements

   This section describes each element of the metadata model, and the
   attributes of each element.  This section also describes how
   different elements are associated and the XML element for each of
   them.

6.1.  Recording Session
















Ravindranath, et al.    Expires January 10, 2012                [Page 7]

Internet-Draft           SIP Recording Metadata                July 2011


   +-------------------------------+
   | Recording Session (RS)        |
   +-------------------------------+
   |                               |            +-----------------+
   |     Start/End Time            |    1  0..* |                 |
   |                               |/\__________|Extension Data   |
   |                               |\/          |                 |
   |                               |            +-----------------+
   +-------------------------------+
         |1..*            | 1..*
         |                |
         |0..*            | 0..*
    Communication    Communication
    Session          Session Group(CS Group)


   A Recording Session element represents a SIP session created between
   an SRC and SRS for the purpose of recording a Communication Session.
   This element is represented by a SIP RS dialog and hence there is no
   need for this element to be reflected in metadata XML.

6.1.1.  Attributes

   A Recording Session element MAY have attributes like:
   o  Start/End Time - Start and End time value MUST be derived from
      Date header(if present in SIP message) in RS.  In cases where Date
      header is not present, Start/End time MAY be set to the time at
      which SRS receives the notification of SIP message to setup RS /
      disconnect RS.

6.1.2.  Associations

   One instance of Recording Session MUST have:

   o  Zero or more instances of Communication Session Group.  CSG may be
      zero because it is optional metadata block.  Also the allowance of
      zero instances is to accommodate persistent recording, where there
      may be none.
   o  Zero or more instances of Communication Session blocks.
   o  Each CS Group MUST be associated with one or more Recording
      Sessions [Here each RS can be setup by the potentially different
      SRCs.]

6.2.  Communication Session Group







Ravindranath, et al.    Expires January 10, 2012                [Page 8]

Internet-Draft           SIP Recording Metadata                July 2011


    Recording Session (RS)
              | 1..*
              |
              | 0..*
   +-------------------------------+
   | Communication Session         |
   |     Group                     |
   +-------------------------------+
   |  Unique-ID                    |           +----------------+
   |                               |   1  0..* |                |
   |                               |/\_________|Extension Data  |
   |                               |\/         |                |
   +-------------------------------+           +----------------+
              | 0..1
              |
              | 1..*
    Communication Session (CS)


   A Communication Session Group provides association or linking of
   Communication Sessions.

6.2.1.  Attributes

   A CS Group MUST have a Unique-ID attribute.  This Unique-ID is to
   group different CSs that are related.  SRC (or MAY be SRS) MUST
   ensure the uniqueness of Unique-ID in case multiple SRC interacts
   with the same SRS.  The mechanism by which SRC groups the CS is
   outside the scope of SIPREC.

6.2.2.  Associations

   A communication Session Group MUST be associated with RS and CS in
   the following manner:

   o  There can be one or more Recording Session elements per
      Communication Session Group.
   o  Each Communication Session Group MUST be associated with one or
      more RS [Here each RS can be setup by the potentially different
      SRCs]
   o  There MAY be one or more Communication Sessions per CS Group [e.g.
      Consult Transfer]
   o  Each CS MAY be associated to zero or one CS-Group

6.2.3.  XML element

   Group element is an optional element provides the information about
   the communication session group



Ravindranath, et al.    Expires January 10, 2012                [Page 9]

Internet-Draft           SIP Recording Metadata                July 2011


   Each communication session group (CSG) is represented using one group
   element.  Each group element has unique URN UUID attribute which
   helps to uniquely identify CSG.

6.3.  Communication Session



   Recording              Communication
   Session            Session Group(CS Group)
      |1..*                  | 0..1
      |                      |
      |0..*                  | 1..*
   +-------------------------------+               +-----------------+
   |   Communication Session (CS)  |       1  0..* |                 |
   |                               |/\_____________|Extension Data   |
   +-------------------------------+\/             |                 |
   |   CS Identifier               |               +-----------------+
   |   Termination Reason          |
   |   Start Time                  |
   |   End Time                    |
   +-------------------------------+
      |                      |
      | 1..*                 |1..*
      |                      |
      | 2..*                 |0..*
   Participant              Media Stream



   A Communication Session block/element in the metadata model
   represents Communication Session and its properties needed as seen by
   SRC.

6.3.1.  Attributes

   A communication Session block MUST have the following attributes:

   o  Termination Reason - This represents the reason why a CS was
      terminated.  The communication session MAY contain a Call
      Termination Reason.  This MAY be derived from SIP Reason header of
      CS.
   o  CS Identifier - This attribute is used to uniquely identify a CS.
   o  Start Time - This optional attribute represents CS start time
   o  End Time - This optional attribute represents CS end time

   Attributes like Retention (represent the value/duration for which
   Media streams of the CS needs to be retained), Force Deletion, Access



Ravindranath, et al.    Expires January 10, 2012               [Page 10]

Internet-Draft           SIP Recording Metadata                July 2011


   Information e.t.c that are primarily related to policy will not be
   passed in metadata from SRC to SRS.  However if there are
   implementations where SRC has enough information, this could be sent
   as Extension Data attached to CS

6.3.2.  Associations

   A Communication Session MUST be associated to CS-Group, Participant,
   Media Stream and Recording Session blocks.  Cardinalities between CS
   and Participant allows:

   o  CS to have atleast two or more participants
   o  Participant MUST be associated with one or more CS's.  This may
      even includes participants who are not directly part of any CS.
      An example of such a case is participants in a premixed media
      stream.  The SRC may have knowledge of such Participants, yet not
      have any signaling relationship with them.  This might arise if
      one participant in CS is a conf focus.  Another use case is if one
      UA in CS works in 3pcc mode to acquire an MoH media stream, this
      might be reflected as unique source for media stream without
      having a reported signaling relationship to it.  In all these
      cases if SRC can learn enough information about the Participant,
      they MUST be associated with CS.
   o  The model also allows participants in CS that are not participants
      in the media.  An example is the identity of a 3pcc controller
      that has initiated a CS to two or more participants of the CS.
      Another example is the identity of a conference focus.  Of course
      a focus is probably in the media, but since it may only be there
      as a mixer, it may not report itself as a participant in any of
      the media streams.

   Cardinalities between CS and Media Stream allows:

   o  A CS to have zero or more Streams
   o  A stream can be associated with 1 or more CS.  An example is
      multicast MoH stream which might be associated with many CSs.
      Also if we were to consider a B2BUA to have a separate CS on each
      "side" then they might share a stream.(Though more likely this
      would be treated as a single CS.)

   Cardinalities between CS and RS allows:

   o  One instance of RS MUST have Zero or more instances of
      Communication Session blocks.
   o  Each CS MUST be associated with one more RS [ Here each RS can be
      potentially setup by different SRCs]





Ravindranath, et al.    Expires January 10, 2012               [Page 11]

Internet-Draft           SIP Recording Metadata                July 2011


6.3.3.  XML element

   Session element provides the information about the communication
   session

   Each communication session(CS) has one session element.  Each session
   element has unique URN UUID attribute which helps to uniquely
   identify CS.

   Reason element MAY be included to indicate the reason for
   termination. group-ref element MAY exist to indicate the group where
   the mentioned session belongs.

6.4.  Participant


    Communication Session (CS)
              | 1..*
              |
              | 2..*
   +-------------------------------+
   |          Participant          |
   |                               |
   +-------------------------------+
   |  AoR list                     |            +-----------------+
   |  Name                         |    1  0..* |                 |
   |  Participant Type             |/\__________|Extension Data   |
   |                               |\/          |                 |
   +-------------------------------+            +-----------------+
           | 0..*       1..*|
   receives|                |sends
           | 0..*       0..*|
             Media Stream



   A Participant block has information about a device that is part of a
   CS and/or contributes/consumes media stream(s) belonging to a CS.

6.4.1.  Attributes

   Participant has attributes like:

   o  AoR list - Has list of AoRs.  An AoR MAY be SIP/SIPS/TEL URI.
      There MAY be cases where a participant can have more than one AoR
      [ e.g.  P-Asserted-ID which can have both SIP and TEL URIs]





Ravindranath, et al.    Expires January 10, 2012               [Page 12]

Internet-Draft           SIP Recording Metadata                July 2011


   o  Name - This attribute represents Participant name(SIP display
      name) or DN number ( in case it is known)

   Other attributes [ like Participant Role, Participant type ] MAY be
   carried as part of extension data to Participant from SRC to SRS.

6.4.2.  Associations

   Cardinalities between participant and Media Stream allows:

   o  Participant to receives zero or more media streams
   o  Participant to send zero or more media streams.  (Same participant
      provides multiple streams e.g. audio and video)
   o  Media stream to be received by zero or more participants.  Its
      possible, though perhaps unlikely, that a stream is generated but
      sent only to the SRC and SRS, not to any participant.  E.g.  In
      conferencing where all participants are on hold and the SRC is
      collocated with the focus.  Also a media stream may be received by
      multiple participants (e.g.  Whisper calls, side conversations).
   o  Media stream to be sent by one or more participants (pre-mixed
      streams).

   Example of a case where a participant may receive Zero or more
   streams - a Supervisor may have side conversation with Agent, while
   Agent converses with customer.

6.4.3.  XML element

   Participant element provides information regarding the specific
   participant involved in the recording

   There MUST be atleast 2 participant for any given session. "send" or
   "receive" element in each participant is associating SDP m-lines with
   the participant. send element indicates that participant is sending
   the stream of media with the mentioned media description. recv
   element indicates that participant is receiving the stream and by
   default all participant will receive the stream. recv element has
   relevance in case whisper call scenario wherein few of the
   participant in the session receives the stream and not others.

   Participant MUST have AOR element which contains SIP/SIPS URI to
   identify the participant.  AOR element is SIP/SIPS URI FQDN or IP
   address which represents the user. name is an optional element to
   represent display name.

   Each participant element has unique URN UUID attribute which helps to
   uniquely identify participant and session URN UUID to associate
   participant with specific session element.  URN UUID of participant



Ravindranath, et al.    Expires January 10, 2012               [Page 13]

Internet-Draft           SIP Recording Metadata                July 2011


   *MUST* used in the scope of CSG and no new URN UUID has to be created
   for the same element (participant, stream) between different CS in
   the same CSG.  In case URN UUID has to be used permanent, careful
   usage of URN UUID to original AoR has to be decided by the
   implementers and it is implementer's choice.

6.5.  Media Stream


                              Participant
                            | 0..*       1..*|
                    receives|                |sends
                            | 0..*       0..*|
                         +-------------------------+
                         |          Media Stream   |
                         |                         |
Communication 1..*  0..* +-------------------------+
  Session    ------------|  Start Time             |        +----------+
                         |  End Time               |1  0..* |          |
                         |  Media Stream Reference |/\______|Extension |
                         |  Content                |\/      | Data     |
                         +-------------------------+        +----------+


   A Media Stream block MUST have properties of media as seen by SRC and
   sent to SRS.  Different instances of Media Stream block would be
   created whenever there is a change in media (e.g. dir change like
   pause/resume and/or codec change and/or participant change.).

6.5.1.  Attributes

   A Media Stream block MUST have the following attributes:

   o  Start Time - Represents Media Start time at SRC.
   o  End Time - Represents Media End time at SRC.  This is an optional
      attribute and MAY be included after a stream ends
   o  Media Stream Reference - In implementations this can reference to
      m-line
   o  Content - The content of an MS element will be described in terms
      of value from the RFC 4796 [RFC4796] registry.

   NOTE: how the content attribute is conveyed (in metadata XML or in RS
   SDP) is still open.

   The metadata model should include media streams that are not being
   delivered to the SRS.  Examples include cases where SRC offered
   certain media types but SRS chooses to accept only a subset of them
   OR an SRC may not even offer a certain media type due it its



Ravindranath, et al.    Expires January 10, 2012               [Page 14]

Internet-Draft           SIP Recording Metadata                July 2011


   restrictions to record

6.5.2.  Associations

   A Media Stream MUST be associated with Participant and CS.  The
   details of association with the Participant are described in the
   Participant block section.  The details of association with CS is
   mentioned in the CS section.

6.5.3.  XML element

   Stream element indicates SDP media lines associated with the session
   and participants.

   This element indicates the SDP m-line properties like label
   attributes, media mode.  Label attribute is used to link m-line SDP
   body using label attribute in SDP m-line.  The media mode helps in
   understanding whether the media is mixed or not.

   Each stream element has unique URN UUID attribute which helps to
   uniquely identify stream and session URN UUID to associate stream
   with specific session element.  The open item here is whether to use
   URN UUID (global id) or xml:id (local id).

6.6.  Extension Data

   A recording metadata object contains additional data not specified as
   part of siprec.  This is intended to accommodate future standards
   track extensions, as well as vendor and user specific extensions.
   The mechanism MUST provide a means of unambiguously distinguishing
   such extension data.

6.6.1.  Composition

   Extension data element MUST be contained/owned by a Metadata element.
   Each instance of Metadata element(except extension data element
   itself) MAY have

   o  Zero or more instances of Extension data element
   o  Each Extension data element MUST be contained/owned by an Metadata
      element other than itself

6.6.2.  XML element

   Extensiondata element provides the mechanism by which namespace/
   element MAY be extended with standard or proprietary information.

   extensiondata element MUST include any other XML namespace.  Multiple



Ravindranath, et al.    Expires January 10, 2012               [Page 15]

Internet-Draft           SIP Recording Metadata                July 2011


   namespace MAY exists under extensiondata. extensiondata element exist
   in each level like recording, session, participant, stream to provide
   extensiondata specific to each element. extensiondata element MUST be
   part of parent element for which the additional information is sent
   and hence no Unique ID is needed.

6.7.  start-time/stop-time

   start-time/stop-time contains a string indicating the date and time
   of the status change of this tuple.  The value of this element MUST
   follow the IMPP datetime format [RFC3339].  Timestamps that contain
   'T' or 'Z' MUST use the capitalized forms.  At a time, any of the
   time tuple start-time or stop-time MAY exist in the element namely
   group, session, participant, stream and not both timestamp at the
   same time.

   As a security measure, the timestamp element SHOULD be included in
   all tuples unless the exact time of the status change cannot be
   determined.

   NOTE: Open item on whether start/stop attribute is needed for all
   Metadata elements


7.  SIP Recording Metadata Example

7.1.  Complete SIP Recording Metadata Example

   The following example provides all the tuples involved in Recording
   Metadata XML body.

     <?xml version="1.0" encoding="UTF-8"?>
     <recording xmlns='urn:ietf:params:xml:ns:recording'>
        <group id="urn:uuid:efe3930b-2a31-4e6a-a6ab-203fd7078302">
          <start-time>2010-12-16T23:41:07Z</start-time>
              <extensiondata>
          <!-- Standardized extension -->
          <call-center xmlns='urn:ietf:params:xml:ns:callcenter'>
            <supervisor>sip:alice@cisco.com</supervisor>
          </call-center>
          <mydata xmlns='http://example.com/my'>
            <structure>FOO!</structure>
            <whatever>bar</whatever>
          </mydata>
        </extensiondata>
        </group>
        <session id="urn:uuid:855a5ded-8420-456d-a70f-6da1eeaeb425">
          <group-ref>urn:uuid:efe3930b-2a31-4e6a-a6ab-203fd7078302



Ravindranath, et al.    Expires January 10, 2012               [Page 16]

Internet-Draft           SIP Recording Metadata                July 2011


          </group-ref>
          <start-time>2010-12-16T23:41:07Z</start-time>
             <extensiondata>
          <structure>FOO!</structure>
          <whatever>bar</whatever>
        </extensiondata>
        </session>
        <participant
           id="urn:uuid:b2b7c112-5982-469d-9007-6ddbecca64d3"
           session="urn:uuid:855a5ded-8420-456d-a70f-6da1eeaeb425">
           <aor>sip:partha@blr.cisco.com</aor>
           <send>urn:uuid:8b53f3de-da39-4846-93c7-ee5e5f8f6f0b</send>
           <send>urn:uuid:50000c9b-9191-40a4-8231-5bcbca5e2b17</send>
           <start-time>2010-12-16T23:41:07Z</start-time>
                   <extensiondata>
            <structure>FOO!</structure>
            <whatever>bar</whatever>
           </extensiondata>
        </participant>

        <participant
            id="urn:uuid:cd27cfa1-2bdd-4830-a653-70374d10f103"
            session="urn:uuid:855a5ded-8420-456d-a70f-6da1eeaeb425">
            <aor>sip:paul@box.cisco.com</aor>
            <send>urn:uuid:50000c9b-9191-40a4-8231-5bcbca5e2b17</send>
            <send>urn:uuid:8b53f3de-da39-4846-93c7-ee5e5f8f6f0b</send>
            <start-time>2010-12-16T23:41:07Z</start-time>
                    <extensiondata>
             <structure>FOO!</structure>
             <whatever>bar</whatever>
           </extensiondata>
        </participant>
        <stream id="urn:uuid:50000c9b-9191-40a4-8231-5bcbca5e2b17"
            session="urn:uuid:855a5ded-8420-456d-a70f-6da1eeaeb425">
            <start-time>2010-12-16T23:41:07Z</start-time>
            <label>96</label>
        </stream>
        <stream id="urn:uuid:8b53f3de-da39-4846-93c7-ee5e5f8f6f0b"
            session="urn:uuid:855a5ded-8420-456d-a70f-6da1eeaeb425">
            <start-time>2010-12-16T23:41:07Z</start-time>
            <label>97</label>
        </stream>
        <stream id="urn:uuid:f3373a7b-4958-4e55-8820-d03a191fb76a"
            session="urn:uuid:cd27cfa1-2bdd-4830-a653-70374d10f103">
            <start-time>2010-12-16T23:41:07Z</start-time>
            <label>98</label>
        </stream>
        <stream id="urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a"



Ravindranath, et al.    Expires January 10, 2012               [Page 17]

Internet-Draft           SIP Recording Metadata                July 2011


            session="urn:uuid:cd27cfa1-2bdd-4830-a653-70374d10f103">
            <start-time>2010-12-16T23:41:07Z</start-time>
            <label>99</label>
        </stream>
   </recording>

                  SIP Recording Metadata Example XML body

7.2.  Partial Update of Recording metadata XML body

   The following example provides partial update in Recording Metadata
   XML body for the above example.  The example illustrate the stop time
   of the specific stream.

     <?xml version="1.0" encoding="UTF-8"?>
     <recording xmlns='urn:ietf:params:xml:ns:siprec'>
       <dataMode>partial</dataMode>
       <stream id="urn:uuid:50000c9b-9191-40a4-8231-5bcbca5e2b17"
            session="urn:uuid:855a5ded-8420-456d-a70f-6da1eeaeb425">
            <label>96</label>
        </stream>
        <stream id="urn:uuid:8b53f3de-da39-4846-93c7-ee5e5f8f6f0b"
            session="urn:uuid:855a5ded-8420-456d-a70f-6da1eeaeb425">
            <label>97</label>
        </stream>
        <stream id="urn:uuid:f3373a7b-4958-4e55-8820-d03a191fb76a"
            session="urn:uuid:cd27cfa1-2bdd-4830-a653-70374d10f103">
            <label>98</label>
        </stream>
        <stream id="urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a"
            session="urn:uuid:cd27cfa1-2bdd-4830-a653-70374d10f103">
            <label>99</label>
        </stream>
     </recording>

             Partial update of SIP Recording Example XML body


8.  XML Schema definition for Recording metadata

   This section defines XML schema for Recording metadata document

   <?xml version="1.0" encoding="UTF-8"?>
   <xs:schema targetNamespace="urn:ietf:params:xml:ns:recording"
    xmlns:tns="urn:ietf:params:xml:ns:recording"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified"
    attributeFormDefault="unqualified">



Ravindranath, et al.    Expires January 10, 2012               [Page 18]

Internet-Draft           SIP Recording Metadata                July 2011


   <!-- This import brings in the XML language attribute xml:lang-->
   <xs:import namespace="http://www.w3.org/XML/1998/namespace"
    schemaLocation="http://www.w3.org/2001/xml.xsd"/>
   <xs:element name="recording" type="recording"/>
   <xs:complexType name="recording">
       <xs:sequence>
           <xs:element name="datamode" type="dataMode"
                minOccurs="0"/>
           <xs:element name="session" type="session"
                minOccurs="0" maxOccurs="unbounded"/>
           <xs:element name="participant" type="participant"
                minOccurs="0" maxOccurs="unbounded"/>
           <xs:element name="stream" type="stream"
               minOccurs="0" maxOccurs="unbounded"/>
         <xs:element name="extensiondata" type="extensiondata"
               minOccurs="0" maxOccurs="unbounded"/>
       </xs:sequence>
   </xs:complexType>
   <xs:complexType name="group">
       <xs:sequence>
         <xs:element name="start-time" type="xs:dateTime"
            minOccurs="0"/>
         <xs:element name="stop-time" type="xs:dateTime"
            minOccurs="0"/>
       </xs:sequence>
       <xs:attribute name="id" type="urnuuid"
            use="required"/>
   </xs:complexType>
   <xs:complexType name="session">
       <xs:sequence>
         <xs:element name="start-time" type="dateTime"
                minOccurs="0"/>
         <xs:element name="stop-time" type="dateTime"
                minOccurs="0"/>
         <xs:element name="reason" type="xs:string"
                minOccurs="0"/>
         <xs:element name="group-ref" type="urnuuid"
                minOccurs="0" maxOccurs="1"/>
       </xs:sequence>
       <xs:attribute name="id" type="urnuuid"
            use="required"/>
   </xs:complexType>
   <xs:complexType name="participant">
       <xs:sequence>
           <xs:element name="aor" type="xs:anyURI"
             maxOccurs="1"/>
         <xs:element name="name" type="xs:string"
             minOccurs="0" maxOccurs="1"/>



Ravindranath, et al.    Expires January 10, 2012               [Page 19]

Internet-Draft           SIP Recording Metadata                July 2011


           <xs:element name="send" type="urnuuid"
             minOccurs="0" maxOccurs="unbounded"/>
           <xs:element name="recv" type="urnuuid"
             minOccurs="0" maxOccurs="unbounded"/>
         <xs:element name="start-time" type="xs:dateTime"
                minOccurs="0"/>
         <xs:element name="stop-time" type="xs:dateTime"
                minOccurs="0"/>
       </xs:sequence>
       <xs:attribute name="id" type="urnuuid"
            use="required"/>
       <xs:attribute name="session" type="urnuuid"
            use="required"/>
   </xs:complexType>
   <xs:complexType name="stream">
       <xs:sequence>
         <xs:element name="label" type="xs:string"
             minOccurs="0" maxOccurs="1"/>
           <xs:element name="mode" type="streamMode"
             minOccurs="0" maxOccurs="1"/>
         <xs:element name="start-time" type="xs:dateTime"
                minOccurs="0"/>
         <xs:element name="stop-time" type="xs:dateTime"
                minOccurs="0"/>
       <xs:element name="extensiondata" type="extensiondata"
             minOccurs="0"/>
       </xs:sequence>
       <xs:attribute name="id" type="urnuuid"
            use="required"/>
       <xs:attribute name="session" type="urnuuid"
            use="required"/>
   </xs:complexType>
   <xs:element name='extensiondata'>
     <xs:complexType>
         <xs:any     namespace='##other'
                     minOccurs='0'
                     maxOccurs='unbounded'
                     processContents='lax'/>
     </xs:complexType>
     <xs:attribute name="id" type="urnuuid"
            use="required"/>
     <xs:attribute name="parent" type="urnuuid"
       use="required"/>
   </xs:element>
   <xs:simpleType name="streamMode">
       <xs:restriction base="xs:string">
           <xs:pattern
            value="mixed|separate"/>



Ravindranath, et al.    Expires January 10, 2012               [Page 20]

Internet-Draft           SIP Recording Metadata                July 2011


       </xs:restriction>
   <xs:simpleType name="urnuuid">
         <xs:restriction base="xs:string">
           <xs:pattern
            value="urn:uuid:[0-9a-zA-Z]{8}-[0-9a-zA-Z]{4}
                 -[0-9a-zA-Z]{4}-[0-9a-zA-Z]{4}-[0-9a-zA-Z]{12}"/>
         </xs:restriction>
   </xs:simpleType>
   </xs:simpleType>
     <xs:simpleType name="dataMode">
         <xs:restriction base="xs:string">
           <xs:pattern
            value="complete|partial"/>
         </xs:restriction>
   </xs:simpleType>


9.  Security Considerations

   The metadata information sent from SRC to SRS MAY reveal sensitive
   information about different participants in a session.  For this
   reason, it is RECOMMENDED that a SRC use a strong means for
   authentication and metadata information protection and that it apply
   comprehensive authorization rules when using the metadata format
   defined in this document.  The following sections will discuss each
   of these aspects in more detail.

9.1.  Connection Security

   It is RECOMMENDED that a SRC authenticate SRS using the normal SIP
   authentication mechanisms, such as Digest as defined in Section 22 of
   [RFC3261].  The mechanism used for conveying the metadata information
   MUST ensure integrity and SHOULD ensure confidentially of the
   information.  In order to achieve these, an end-to-end SIP encryption
   mechanism, such as S/MIME described in [RFC3261], SHOULD be used.

   If a strong end-to-end security means (such as above) is not
   available, it is RECOMMENDED that a SRC use mutual hop-by-hop
   Transport Layer Security (TLS) authentication and encryption
   mechanisms described in "SIPS URI Scheme" and "Interdomain Requests"
   of [RFC3261].


10.  IANA Considerations

   This specification registers a new XML namespace, and a new XML
   schema.




Ravindranath, et al.    Expires January 10, 2012               [Page 21]

Internet-Draft           SIP Recording Metadata                July 2011


10.1.  SIP recording metadata Schema Registration

   URI: urn:ietf:params:xml:ns:recording

   Registrant Contact: IETF SIPREC working group, Ram mohan
   R(rmohanr@cisco.com)

   XML: the XML schema to be registered is contained in Section 6.

   Its first line is <?xml version="1.0" encoding="UTF-8"?> and its last
   line is </xs:schema>


11.  Acknowledgement

   We wish to thank John Elwell(Siemens-Enterprise), Henry Lum(Alcatel-
   Lucent), Leon Portman(Nice), De Villers, Andrew Hutton(Siemens-
   Enterprise), Deepanshu Gautam(Huawei), Charles Eckel(Cisco), Muthu
   Arul(Cisco), Michael Benenson(Cisco), Hadriel Kaplan (ACME), Brian
   Rosen(Neustar), Scott Orton(Broadsoft) for their valuable comments
   and inputs.

   We wish to thank Joe Hildebrand(Cisco), Peter Saint-Andre(Cisco) for
   the valuable XML related guidance.


12.  Appendix A: Metadata Model Object Instances

   This section describes the metadata model object instances for
   different use cases of SIPREC.  For the sake of simplicity as the
   media streams sent by each of the participants is received by every
   other participant in these use cases, it is NOT shown in the object
   instance diagrams below.  Also for the sake of ease not all
   attributes of each block are shown in these instance diagrams.

12.1.  Use case 1: Basic Call

   Basic call between two Participants A and B. In this use case each
   participant sends one Media Stream.  For the sake of simplicity
   "receives" lines are not shown in this instance diagram.  Media
   Streams sent by each participant is received all other participants
   of that CS.









Ravindranath, et al.    Expires January 10, 2012               [Page 22]

Internet-Draft           SIP Recording Metadata                July 2011


   +-------------------------------+
   | Recording Session (RS)        |
   +-------------------------------+
              |
              |
              |
     +----------------+
     | Communication  |
     | Session (CS)   |
     +----------------+-----------------------+
     |  Start Time    |                       |
     +----------------+                       |
              |                               |
              |-------------------+           |
              |                   |           |
   +---------------+     +---------------+    |
   | ParticipantA  |     | ParticipantB  |    |
   |               |     |               |    |
   +---------------+     +---------------+    |
              |                  |            |
     sends    |                  |  sends     |
              |                  |            |
   +---------------+       +---------------+  |
   |Media Stream A1|       |Media Stream B1|  |
   +---------------+       +---------------+  |
   |MediaStream Ref|       |MediaStream Ref|  |
   |Start Time     |       |Start Time     |  |
   +---------------+       +---------------+  |
          |                       |           |
          +-----------------------------------+


12.2.  Use case 2: Basic Call with hold/resume

   Basic call between two Participants A and B and with Participant A or
   B doing a Hold/Resume.  In this use case each participant sends one
   Media Stream.  After Hold/Resume the properties of Media can change.
   For the sake of simplicity "receives" lines are not shown in this
   instance diagram.  Media Streams sent by each participant is received
   all other participants of that CS.


   +-------------------------------+
   | Recording Session (RS)        |
   +-------------------------------+
              |                   |
              |                   |
              |                   |



Ravindranath, et al.    Expires January 10, 2012               [Page 23]

Internet-Draft           SIP Recording Metadata                July 2011


              |                 +-------------------------------+
              |                 |   Communication Session (CS)  |
              |     +-----------|      Group(CSG)               |
              |     |           +-------------------------------+
              |     |           |   Unique-id1                  |
              |     |           +-------------------------------+
              |     |
              |     |
              |     |
     +----------------+
     | Communication  |
   +-| Session (CS)   |----------------------------------------------+
   | +----------------+                                              |
   | |                |                                              |
   | +----------------+                                              |
   |            |                                                    |
   |            |-------------------+                                |
   |            |                   |                                |
   | +---------------+     +---------------+                         |
   | | ParticipantA  |     | ParticipantB  |-----------+             |
   | |               |--+  |               |           |             |
   | +---------------+  |  +---------------+           |sends(After  |
   |       |       |    |       |         |            |     Resume) |
   |       |       |    |       |         |         +--------------+ |
   | sends |       |     +--+   |  sends  |         |MediaStream B3| |
   |       |       -----+   |   |          +-----+  +--------------+ |
   | +---------------+  |   |  +---------------+ |  |MediaStreamRef|-|
   | |Media Stream A1|  |   |  |Media Stream B1| |  | Start Time   | |
   | +---------------+  |   |  +---------------+ |  |              | |
   +-|MediaStreamref |  |   |  |MediaStreamRef | |  +--------------+ |
     |Start Time     |  |   |  |Start Time     |-|-------------------|
     +---------------+  |   |  +---------------+ |                   |
                        |   |                    |                   |
           +------------+   |sends               |sends (hold)       |
           | sends          |(Resume)            |                   |
           | (hold)         +-------+             +-------+          |
           |                        |                     |          |
     +---------------+       +---------------+   +--------------+    |
     |Media Stream A2|       |Media Stream A3|   |MediaStream B2|    |
     +---------------+       +---------------+   |              |    |
     |MediaStreamref |       |MediaStreamRef |   +--------------+    |
     |End Time       |       |Start Time     |   |Codec Params  |    |
     +---------------+       +---------------+   |end Time      |    |
              |                     |            |              |    |
              |                     |            +--------------+    |
              |                     |                  |             |
              +------------------------------------------------------+




Ravindranath, et al.    Expires January 10, 2012               [Page 24]

Internet-Draft           SIP Recording Metadata                July 2011


12.3.  Use case 3: Basic call with Transfer

   Basic call between two Participants A and B and with Participant A
   transfer(consult transfer) to Participant C. In this use case each
   participant sends one Media Stream.  After transfer the properties of
   Participant A Media can change.  For the sake of simplicity
   "receives" lines are not shown in this instance diagram.  Media
   Streams sent by each participant is received all other participants
   of that CS.


   +-------------------------------+
   | Recording Session (RS)        |-------+
   +-------------------------------+       |
              |                            |
              |                            |
              |                            |
   +-------------------------------+       |
   |   Communication Session (CS)  |       |
   |      Group(CSG)               |       |
   +-------------------------------+       |
   |   Unique-id1                  |       |
   +-------------------------------+       |
              |                            |
              |----------------------------+
              |
              |-----------------+
              |                 |
   +----------------+     +----------------+
   | Communication  |     | Communication  |
   | Session (CS)1  |     | Session (CS)2  |
   +----------------+     +----------------+-----------+
   |                |     |                |           |
   +----------------+     +----------------+           |
              |                                        |
              |-------------------+                    |
              |        |          |                    |
   +---------------+   | +---------------+             |
   | ParticipantA  |   | | ParticipantB  |             |
   |               |   | |               |             |
   +---------------+   | +---------------+             |
              |        |         |                     |
     sends    |        |         |  sends              |
              |        |         |                     |
   +---------------+   |   +---------------+           |
   |Media Stream A1|   |   |Media Stream B1|           |
   +---------------+   |   +---------------+           |
   |               |   |   |               |           |



Ravindranath, et al.    Expires January 10, 2012               [Page 25]

Internet-Draft           SIP Recording Metadata                July 2011


   |               |   |   | Media Stream  |           |
   | Media Stream  |---+---|  Ref          |           |
   | Ref           |       |               |           |
   +---------------+       +---------------+           |
                                                       |
                                                       |
                          +----------------------------|
                          |                            |
         +--------------------------------+            |
         |                                |            |
   +---------------+                +---------------+  |
   | Participant A |                | Participant C |  |
   |   (same)      |                |               |  |
   +---------------+                +---------------+  |
         |                                    |        |
         | sends (After transfer)             | sends  |
   +----------------+                +----------------+|
   | Media Stream A2|                | Media Stream C1||
   +----------------+                +----------------+|
   | Media StreamRef|                | Media StreamRef||
   |                |                |                ||
   |                |                |                ||
   +----------------+                +----------------+|
           |                                  |        |
           |                                  |        |
           |                                  |        |
           +-------------------------------------------+


12.4.  Conference Use Cases

   Depending on who act as SRC and the information that an SRC has there
   can be several ways to model conference use cases.  This section has
   instance diagrams for the following cases:

   o  A CS where one of the participant (which is also SRC) is a user in
      a conference
   o  A CS where one of the participant is focus ( which is also SRC)
   o  A CS where one of the participant is user and the SRC is a
      different entity like B2BUA
   o  A CS where one of the participant is focus and the SRC is a
      different entity like B2BUA

   NOTE: There MAY be other ways to model the same use cases depending
   on what information the SRC has.






Ravindranath, et al.    Expires January 10, 2012               [Page 26]

Internet-Draft           SIP Recording Metadata                July 2011


12.4.1.  Case 1:

   This is the usecase where there is a CS with one of the participant
   (who is also SRC) as a user in a conference.  For the sake of
   simplicity the receive lines for each of the participant is not
   shown.


   +---------------------------------------------------+
   |      Communication Session                        |
   | +-------------+              +--------------+     |
   | |             |              |              |     |
   | |Participant B|              | Participant A|     |
   | |  (User in   |--------------|              |     |
   | |  conf/SRC)  |              |              |     |
   | +-------------+              +--------------+     |
   |   |  |  |  |                                      |
   +---------------------------------------------------+
       |  |  |  |
       |  |  |  |
       D   E  F  G (Participants of Conference)


   Instance Diagram:

   +-------------------------------+
   | Recording Session (RS)        |--+
   +-------------------------------+  |
              |                       |
              |                       |
              |                       |
   +-------------------------------+  |
   |   Communication Session (CS)  |  |
   |      Group(CSG)               |  |
   +-------------------------------+  |
   |   Unique-id1                  |  |
   +-------------------------------+  |
              |                       |
              |-----------------------+
              |
     +----------------+
     | Communication  |
     | Session (CS)   |--+----------------+-----+
     +----------------+  |                |     |
     |                |  |                |     |
     +----------------+  |                |     |
              |          |                |     |
              |          |                |     |



Ravindranath, et al.    Expires January 10, 2012               [Page 27]

Internet-Draft           SIP Recording Metadata                July 2011


              |          |                |     |
   +---------------+     |                |     |
   | ParticipantA  |     |                |     |
   |               |     |                |     |
   +---------------+     |                |     |
              |          |                |     |
     sends    |          |                |     |
              |          |                |     |
   +---------------+     |                |     |
   |Media Stream A1|     |                |     |
   +---------------+     |                |     |
   |MediaStream Ref|-----|----------------+     |
   |               |     |                |     |
   +---------------+     |                |     |
                         |                |     |
                         |                |     |
           +-------------+                |     |
           |                              |     |
           |                              |     |
   +----------------+                     |     |
   | Participant B  |                     |     |
   |  (in conf)     |                     |     |
   +----------------+                     |     |
           |                              |     |
    sends  |                              |     |
           |                              |     |
   +----------------+                     |     |
   | Media Stream B1|---------------------+     |
   +----------------+        sends              |
   | MediaStream Ref|                           |
   |                |         +-----------------+
   +----------------+         |
              |               |
              |sends          |
              |               |
        +-----------------+-------------+------------+
        |                 |             |            |
        |                 |             |            |
   +------------+  +------------+ +------------+ +-------------+
   |participantD|  |ParticipantE| |ParticipantF| |Participant G|
   +------------+  +------------+ +------------+ +-------------+



   In this example we have two participants A and B who are part of a
   Communication Session(CS).  One of the participants B is part of a
   conference and also acts as SRC.There can be two cases here.  B can
   be a participant of the conference or B can be a focus.  In this



Ravindranath, et al.    Expires January 10, 2012               [Page 28]

Internet-Draft           SIP Recording Metadata                July 2011


   instance diagram Participant B is a user in a conference.  The SRC
   (Participant B) subscribes to conference event package to get the
   details of other particiants.  Participant B(SRC) sends the same
   through the metadata to SRS.  In this instance diagram the Media
   Stream(mixed stream) sent from Participant B has media streams
   contributed by conference participants (D,E,F and G).  For the sake
   of simplicity the "receives" line is not shown here.  In this example
   the media stream sent by each participant(A or B) of CS is received
   by all other participant(A or B).

12.4.2.  Case 2:

   This is the usecase where there is a CS where one of the participant
   is focus ( which is also SRC).



   +---------------------------------------------------+
   |      Communication Session                        |
   | +--------------+              +--------------+    |
   | |              |--------------|              |    |
   | |Participant C |              | Participant A|    |
   | |  (Focus in   |------+       |              |    |
   | | conf and SRC)|---+  |       +--------------+    |
   | +--------------+   |  |                           |
   |   |                |  +---------+                 |
   |   |                |            |                 |
   | +--------------+   |         +---------------+    |
   | | Participant B|   +---+     | Participant D |    |
   | |              |       |     |               |    |
   | +--------------+       |     +---------------+    |
   |                        |                          |
   |                   +--------------+                |
   |                   |Participant E |                |
   |                   |              |                |
   |                   +--------------+                |
   |                                                   |
   +---------------------------------------------------+

   Instance Diagram:

   +-------------------------------+
   | Recording Session (RS)        |
   +-------------------------------+
              |-------------------------+
              |                         |
              |                         |
   +-------------------------------+    |



Ravindranath, et al.    Expires January 10, 2012               [Page 29]

Internet-Draft           SIP Recording Metadata                July 2011


   |   Communication Session (CS)  |    |
   |      Group(CSG)               |    |
   +-------------------------------+    |
   |   Unique-id1                  |    |
   +-------------------------------+    |
              |                         |
              |-------------------------+
              |
     +----------------+
     | Communication  |
     | Session (CS)   |----------------------+
     +----------------+                      |
     |                |                      |
     +----------------+                      |
              |                              |
              |-------------------+          |
              |        |          |          |
   +---------------+   | +---------------+   |
   | ParticipantA  |   | | ParticipantB  |   |
   |               |   | |               |   |
   +---------------+   | +---------------+   |
              |        |         |           |
     sends    |        |         |  sends    |
              |        |         |           |
   +---------------+   |   +---------------+ |
   |Media Stream A1|   |   |Media Stream B1| |
   +---------------+   |   +---------------+ |
   |MediaStream Ref|   |   |MediaStream Ref| |
   |               |---+---|               | |
   +---------------+       +---------------+ |
                                             |
          +----------------------------------+
          |            |         |           |
          |            |         |           |
   +---------------+   | +---------------+   |
   | ParticipantD  |   | | ParticipantE  |   |
   |               |   | |               |   |
   +---------------+   | +---------------+   |
              |        |         |           |
     sends    |        |         |  sends    |
              |        |         |           |
   +---------------+   |   +---------------+ |
   |Media Stream D1|   |   |Media Stream E1| |
   +---------------+   |   +---------------+ |
   |MediaStream Ref|   |   |MediaStream Ref| |
   |               |---+---|               | |
   +---------------+       +---------------+ |
                                             |



Ravindranath, et al.    Expires January 10, 2012               [Page 30]

Internet-Draft           SIP Recording Metadata                July 2011


                                             |
                                  +----------+
                +-----------------|
                |                 |
                |                 |
               +----------------+ |
               | Participant C  | |
               |  (focus +src)  | |
               +----------------+ |
                       |          |
                Sends  |  +-------+
                       |  |
   "sends" OR          |  |
   contributed +----------------+
    by         | Media Stream C1|
   Participants+----------------+  "receives" by participants A,B,D,E
   A,B,D,E     | MediaStream Ref|------------------------------------
   ------------| Codec Params   |
               +----------------+



   In this example we have two participants A and B who are part of a
   Communication Session(CS).  One of the participants (C) is focus of a
   conference and also acts as SRC.  The SRC (Participant C) being the
   Focus of the conference has access to the details of other
   particiants.  SRC (Participant C) sends the same through the metadata
   to SRS.  In this instance diagram the Media Stream(mixed stream) sent
   by C has media streams contributed by conference participants (A, B,
   D and E).  Participants A, B,D and E sends Media Streams A1, B1, D1
   and E1 respectively.  The media stream sent by Participant C(Focus)
   is received by all other participants of CS.  For the sake of
   simplicity the "receives" line is not shown linked to all other
   participants.

   NOTE: SRC ( Participant C) can send mixed stream or seperate streams
   to SRS

12.4.3.  Case 3:

   A CS where one of the participant is user and the SRC is a different
   entity like B2BUA.  In this case the SRC may not know that one of the
   user is part of conference.  Hence the instance diagram will not have
   information about the conference participants.







Ravindranath, et al.    Expires January 10, 2012               [Page 31]

Internet-Draft           SIP Recording Metadata                July 2011


   +---------------------------------------------------+
   |      Communication Session                        |
   | +-------------+  +------+    +--------------+     |
   | |             |  | (SRC)|    |              |     |
   | |Participant B|--|B2BUA |----| Participant A|     |
   | |  (User in   |  +------+    |              |     |
   | |  conf)      |              |              |     |
   | +-------------+              +--------------+     |
   |   |  |  |  |                                      |
   +---------------------------------------------------+
       |  |  |  |
       |  |  |  |
       D   E  F  G (Participants of Conference)


12.4.4.  Case 4:

   A CS where one of the participant is focus and the SRC is a different
   entity like B2BUA.  In this case the participant which is focus sends
   "isfocus" in SIP message to SRC.  The SRC subscribe to conference
   event package on seeing this "isfocus".  SRC learns the details of
   other participants of conference from the conference package and send
   the same in metadata to SRS.  The instance diagram for this use case
   is same as Case 1.


              +--------------------------------+
              |   Conference Event Package     |
              |                                |
              +--------------------------------+
                         |
                         | subscribes
                         |
   +---------------------|-----------------------------+
   |      Communication  |Session                      |
   | +-------------+  +------+    +--------------+     |
   | |             |  | (SRC)|    |              |     |
   | |Participant B|--|B2BUA |----| Participant A|     |
   | |  (FOCUS in  |  +------+    |              |     |
   | |  conf)      |              |              |     |
   | +-------------+              +--------------+     |
   |   |  |  |  |                                      |
   +---------------------------------------------------+
       |  |  |  |
       |  |  |  |
       D   E  F  G (Participants of Conference)





Ravindranath, et al.    Expires January 10, 2012               [Page 32]

Internet-Draft           SIP Recording Metadata                July 2011


13.  References

13.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC2141]  Moats, R., "URN Syntax", RFC 2141, May 1997.

   [RFC3261]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston,
              A., Peterson, J., Sparks, R., Handley, M., and E.
              Schooler, "SIP: Session Initiation Protocol", RFC 3261,
              June 2002.

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              January 2004.

   [RFC3339]  Klyne, G., Ed. and C. Newman, "Date and Time on the
              Internet: Timestamps", RFC 3339, July 2002.

   [RFC4566]  Handley, M., Jacobson, V., and C. Perkins, "SDP: Session
              Description Protocol", RFC 4566, July 2006.

   [RFC4574]  Levin, O. and G. Camarillo, "The Session Description
              Protocol (SDP) Label Attribute", RFC 4574, August 2006.

   [RFC4796]  Hautakorpi, J. and G. Camarillo, "The Session Description
              Protocol (SDP) Content Attribute", RFC 4796,
              February 2007.

13.2.  Informative References

   [I-D.ietf-siprec-req]
              Rehor, K., Portman, L., Hutton, A., and R. Jain, "Use
              Cases and Requirements for SIP-based Media Recording
              (SIPREC)", draft-ietf-siprec-req-12 (work in progress),
              June 2011.

   [I-D.ietf-siprec-architecture]
              Hutton, A., Portman, L., Jain, R., and K. Rehor, "An
              Architecture for Media Recording using the Session
              Initiation Protocol", draft-ietf-siprec-architecture-02
              (work in progress), April 2011.

   [RFC2648]  Moats, R., "A URN Namespace for IETF Documents", RFC 2648,
              August 1999.





Ravindranath, et al.    Expires January 10, 2012               [Page 33]

Internet-Draft           SIP Recording Metadata                July 2011


Authors' Addresses

   Ram Mohan Ravindranath
   Cisco Systems, Inc.
   Cessna Business Park,
   Kadabeesanahalli Village, Varthur Hobli,
   Sarjapur-Marathahalli Outer Ring Road
   Bangalore, Karnataka  560103
   India

   Email: rmohanr@cisco.com


   Parthasarathi Ravindran
   Cisco Systems, Inc.
   Cessna Business Park,
   Kadabeesanahalli Village, Varthur Hobli,
   Sarjapur-Marathahalli Outer Ring Road
   Bangalore, Karnataka  560103
   India

   Email: partr@cisco.com


   Paul Kyzivat
   Unaffiliated
   Boxborough, MA
   USA

   Email: pkyzivat@alum.mit.edu





















Ravindranath, et al.    Expires January 10, 2012               [Page 34]

