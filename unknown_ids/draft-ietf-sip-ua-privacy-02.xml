<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [

<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC3261 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3261.xml">
<!ENTITY RFC3323 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3323.xml">
<!ENTITY RFC3325 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3325.xml">
<!ENTITY RFC3515 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3515.xml">
<!ENTITY RFC4474 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4474.xml">
<!ENTITY RFC4566 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4566.xml">
<!ENTITY I-D.ietf-sip-gruu SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-sip-gruu.xml">
<!ENTITY I-D.ietf-behave-turn SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-behave-turn.xml">
<!ENTITY I-D.ietf-sipping-config-framework SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-sipping-config-framework.xml">
]>

<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>

<?rfc strict="yes" ?>
<?rfc toc="yes"?>
<?rfc tocdepth="4"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>

<rfc category="info" docName="draft-ietf-sip-ua-privacy-02" ipr="full3978">

  <front>
    <title>UA-Driven Privacy Mechanism for SIP</title>

    <author fullname="Mayumi Munakata" initials="M.M."
            surname="Munakata">
      <organization abbrev="NTT">NTT Corporation</organization>
      <address>
        <email>munakata.mayumi@lab.ntt.co.jp</email>
      </address>
    </author>

    <author fullname="Shida Schubert" initials="S.S."
            surname="Schubert">
      <organization abbrev="NTT">NTT Corporation</organization>
      <address>
        <email>shida@ntt-at.com</email>
      </address>
    </author>

    <author fullname="Takumi Ohba" initials="T.O."
            surname="Ohba">
      <organization abbrev="NTT">NTT Corporation</organization>
      <address>
        <postal>
          <street>9-11, Midori-cho 3-Chome</street>
          <city>Musashino-shi</city>
          <region>Tokyo</region>
          <code>180-8585</code>
          <country>Japan</country>
        </postal>
        <phone>+81 422 59 7748</phone>
        <email>ohba.takumi@lab.ntt.co.jp</email>
        <uri>http://www.ntt.co.jp</uri>
      </address>
    </author>

    <date day="14" month="July" year="2008" />
    <area>RAI</area>
    <workgroup>SIP</workgroup>

    <abstract>
      <t>This document defines a best current practice for a user agent to generate an anonymous SIP message by utilizing mechanisms such as GRUU and TURN without the need for a privacy service defined in RFC 3323.</t>
    </abstract>
  </front>


  <middle>
    <section title="Introduction">
      <t><xref target="RFC3323"></xref> defines a privacy mechanism for the <xref target="RFC3261">Session Initiation Protocol (SIP)</xref>, based on techniques available at the time of its publication.  This mechanism relies on the use of a separate privacy service to remove sensitive information from SIP messages sent by a user agent before forwarding those messages to the final destination.  Since then, numerous SIP extensions have been proposed and standardized.  Some of those enable a user agent to withhold its user's identity and related information without the need for privacy services, which was not possible when RFC 3323 was defined.</t>

      <t>This document defines a best current practice in which a user agent controls all the privacy functions on its own utilizing SIP extensions such as <xref target="I-D.ietf-sip-gruu">GRUU (Globally Routable User Agent URIs)</xref> and <xref target="I-D.ietf-behave-turn">TURN (Traversal Using Relay NAT)</xref>.</t>
    </section>


    <section title="Terminology">

      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <xref target="RFC2119"></xref>.

      <list hangIndent="12" style="hanging">
        <t hangText="privacy-sensitive information:"><vspace blankLines="0" />The information that identifies a user who sends the SIP message, as well as the supplementary information that can be used to guess the user's identity.</t>
      </list></t>
    </section>


    <section title="Concept of Privacy">
      <t>The concept of privacy in this document is the act of concealing identity of a user and supplementary information.  The scope of this document is to withhold the privacy-sensitive information of the user who sends the SIP message from other users and intermediaries handling the message.  The protection of network privacy (e.g., topology hiding) is outside the scope of this document.</t>

      <t>Privacy-sensitive information includes display-name and URI (Uniform Resource Identifier) in a From header that can reveal the user's name and affiliation (e.g., company name), contact information in a Contact header that is used to communicate with the user agent, IP addresses in Via header and <xref target="RFC4566">SDP (Session Description Protocol)</xref> that tell the location of a user agent.  A host name that appears in headers such as Call-ID is also regarded as privacy-sensitive information because it may reveal the user's domain name.</t>
    </section>


    <section title="Treatment of Privacy-Sensitive Information">
      <t>The two pieces of information that a user agent needs to obscure while sustaining its purpose and functionality are the URI and IP address used for establishing a media/signaling session.</t>
      <t>Essential privacy-sensitive information in a UA-generated SIP message includes display-names (in From and Contact), as well as URIs (in From and Contact) and IP addresses (in Contact, Via, and SDP).  Among these, URIs and IP addresses in Contact, Via, and SDP must be functional even when they are anonymized.</t>
      <t>With the use of  <xref target="I-D.ietf-sip-gruu">GRUU</xref> and <xref target="I-D.ietf-behave-turn">TURN</xref>, a user agent can obtain URI and IP address for media and signaling that are functional yet anonymous, and do not identify the user agent nor the user.  Instructions on how to obtain a functional anonymous URI and IP address are given in Section 4.1 and 4.2, respectively.</t>

      <t>Host names should be concealed because the user's identity may be guessed from them but they are not always regarded as essential privacy-sensitive information.</t>

      <t>In addition, a user agent should be careful not to include any information that identifies the user in optional SIP headers such as Subject and User-Agent.</t>


      <section title="Obtaining Functional Anonymous URI Using GRUU Mechanism">
        <t>A user agent wanting to obtain functional anonymous URI MUST support and SHOULD utilize the GRUU mechanism unless the user agent obtains functional anonymous URI through other means outside the scope of this document.  By sending a REGISTER request requesting GRUU, the user agent can obtain an anonymous URI, which can later be used for Contact header.</t>
        <t>The detailed process on how a user agent obtains a GRUU is described
in <xref target="I-D.ietf-sip-gruu"></xref>.</t>
        <t>If the Registrar supports the GRUU and returns a
REGISTER response, the user agent SHOULD search within the REGISTER response for a "temp-gruu" URI parameter, which provides the desired privacy property.</t>
        <t>If the "temp-gruu" URI parameter and value exist within the REGISTER response, the user agent SHOULD use the value of the "temp-gruu" as an anonymous URI representing the user agent.  This URI SHOULD be used for Contact header.</t>
        <t>If there is no "temp-gruu" URI parameter in the 200 response to the REGISTER request, a user agent SHOULD NOT proceed with its anonymization process, unless something equivalent to "temp-gruu" is provided through some administrative means.</t>
        <t>It is RECOMMENDED that user agent consult the user before sending a request without a functional anonymous URI when privacy is requested from the user.</t>
      </section>


      <section title="Obtaining Functional Anonymous IP Address Using TURN Mechanism">
        <t>It is assumed that a user agent is either manually or automatically
configured through means such as a <xref target="I-D.ietf-sipping-config-framework">configuration framework</xref> with the address of one or more <xref target="I-D.ietf-behave-turn">STUN (Session Traversal Utilities for NAT)</xref>relay servers.</t>
        <t>Anonymous IP addresses are needed in two places to maintain privacy, one to be used in signaling such as in a Via header, another to be used in SDP for media.</t>
        <t>A user agent that is not provided with a functional anonymous IP address through some administrative means, MUST obtain a relayed address if anonymity is desired (IP address of the media relay) for use in SDP and in Via header.  Such IP address is to be derived from a STUN relay server through TURN mechanism, which allows a STUN server to act as a media relay.</t>
      </section>
    </section>


    <section title="User Agent Behavior">
      <t>This section describes how to generate an anonymous SIP message at a user agent.</t>
      <t>A user agent fully compliant with this document MUST obscure or conceal all the essential UA-inserted privacy-sensitive information in SIP requests and responses as shown in Section 5.1 when user privacy is requested.  In addition, the user agent SHOULD conceal the non-essential privacy-sensitive information as shown in Section 5.2.</t>


      <section title="Essential Privacy-Sensitive Information">
        <section title="Contact">
          <t>Without privacy considerations, this field contains a URI or an IP address used to reach the user agent for mid-dialog requests and possibly out-of-dialog requests, such as <xref target="RFC3515">REFER</xref>.  The Contact header can also contain a display-name.  Since the Contact header is essential for routing further requests to the user agent, it must include a functional URI of IP address even when it is anonymized.</t>
          <t>A user agent generating an anonymous SIP message supporting this specification MUST anonymize a Contact header using an anonymous URI ("temp-gruu") through GRUU mechanism or an anonymous IP address through TURN mechanism unless an equivalent functional anonymous URI or IP address is provided by some other means.</t>
          <t>Refer to Section 4.1 for details on how to obtain an anonymous URI through GRUU, and refer to Section 4.2 for details on how to obtain an IP address through TURN.</t>
          <t>A display-name in a Contact header MUST be omitted or "Anonymous".</t>
        </section>


        <section title="From">
          <t>Without privacy considerations, this field contains the identity of the user, such as display-name and URI.</t>
          <t>RFCs 3261 and 3323 recommend to set "sip:anonymous@anonymous.invalid" as a SIP URI in a From header when user privacy is requested.  This raises issues, when the mechanism of <xref target="RFC4474">SIP-Identity</xref> is applied to the message because the SIP-Identity requires an actual domain name in a From header.</t>
          <t>A user agent generating an anonymous SIP message supporting this specification MUST anonymize a From header in an either way described below.</t>
          <t>A user agent SHOULD anonymize a From header using an anonymous display-name and an anonymous URI following the procedure noted in section 4.1.1.3 of RFC 3261 unless it is aware that SIP-Identity mechanism will be applied to the request.</t>
          <t>The recommended form of the From header is:</t>
          <t>From: "Anonymous" &lt;sip:anonymous@anonymous.invalid>;tag=1928301774</t>
          <t>If a user agent is aware that the SIP-Identity mechanism will be applied to the request, it SHOULD include valid hostname instead of "anonymous.invalid" for a URI in a From header as follows.</t>
          <t>From: "Anonymous" &lt;sip:anonymous@atlanta.com>;tag=1928301774</t>
        </section>


        <section title="Via">
          <t>Without privacy considerations, the bottommost Via header added by a user agent contains the IP address and port or hostname that are used to reach the user agent for responses.</t>
          <t>A user agent generating an anonymous SIP message supporting this specification MUST anonymize an IP address in a Via header, if present, using an anonymous IP address through TURN mechanism unless an equivalent functional anonymous IP address is provided by some other means.</t>
          <t>Refer to Section 4.2 for details on how to obtain an IP address through TURN.</t>
          <t>Via header SHOULD NOT include a host name, but it is not essential.</t>
        </section>


        <section title="IP addresses in SDP">
          <t>A user agent generating an anonymous SIP message supporting this specification MUST anonymize IP addresses in SDP, if present, using an anonymous IP address through TURN mechanism unless an equivalent functional anonymous IP address is provided by some other means.</t>
          <t>Refer to Section 4.2 for details on how to obtain an IP address through TURN.</t>
        </section>
      </section>


    <section title="Non-Essential Privacy-Sensitive Information">
        <section title="Host Names in Other SIP Headers">
          <t>A user agent generating an anonymous SIP message supporting this specification SHOULD conceal host names in any SIP headers, such as Call-ID and Warning headers, but it is not always regarded as essential privacy-sensitive information.</t>
        </section>


        <section title="Optional SIP Headers">
          <t>Other optional SIP headers (such as Calll-Info, In-Reply-To, Organization, Referred-By, Reply-To, Server, Subject, User-Agent, and Warning) can contain privacy-sensitive information.</t>
          <t>A user agent generating an anonymous SIP message supporting this specification SHOULD NOT include any information that identifies the user in such optional headers.</t>
        </section>
      </section>
    </section>


    <section title="Security Considerations">
      <t>Many of the security considerations in either <xref target="RFC3323"></xref> and <xref target="RFC3325"></xref> remains valid even with the use of this specification but this specification does not introduce any new security consideration.</t>
      <t>In fact, this specification alleviates the security consideration described in RFC 3323 by providing a privacy mechanism which is executed at the user agent rather than being dependent on the network , as a result providing the user agent with certainty that crucial privacy sensitive information are concealed.</t>
    </section>


    <section title="IANA Considerations">
      <t>This document requires no action by IANA.</t>
    </section>
  </middle>


  <back>
    <references title="Normative References">
      &RFC2119;

      &RFC3261;

      &RFC4566;

      &I-D.ietf-sip-gruu;

      &I-D.ietf-behave-turn;
    </references>

    <references title="Informative References">
      &RFC3323;

      &RFC3325;

      &RFC3515;

      &RFC4474;

      &I-D.ietf-sipping-config-framework;
    </references>
  </back>
</rfc>
