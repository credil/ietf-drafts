<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<?rfc tocdepth="3"?>
<?rfc rfcedstyle="yes"?>
<rfc category="info" docName="draft-ietf-mpls-tp-framework-08"
     ipr="trust200902">
  <front>
    <title abbrev="MPLS Transport Profile Framework">A Framework for MPLS in
    Transport Networks</title>

    <author fullname="Matthew Bocci" initials="M" role="editor"
            surname="Bocci">
      <organization>Alcatel-Lucent</organization>

      <address>
        <postal>
          <street>Voyager Place, Shoppenhangers Road</street>

          <city>Maidenhead</city>

          <region>Berks</region>

          <code>SL6 2PJ</code>

          <country>United Kingdom</country>
        </postal>

        <phone></phone>

        <email>matthew.bocci@alcatel-lucent.com</email>
      </address>
    </author>

    <author fullname="Stewart Bryant" initials="S" role="editor"
            surname="Bryant">
      <organization>Cisco Systems</organization>

      <address>
        <postal>
          <street>250 Longwater Ave</street>

          <city>Reading</city>

          <code>RG2 6GB</code>

          <country>United Kingdom</country>
        </postal>

        <phone></phone>

        <email>stbryant@cisco.com</email>
      </address>
    </author>

    <author fullname="Dan Frost" initials="D" surname="Frost">
      <organization>Cisco Systems</organization>

      <address>
        <postal>
          <street></street>

          <city></city>

          <region></region>

          <code></code>

          <country></country>
        </postal>

        <phone></phone>

        <facsimile></facsimile>

        <email>danfrost@cisco.com</email>

        <uri></uri>
      </address>
    </author>

    <author fullname="Lieven Levrau" initials="L" surname="Levrau">
      <organization>Alcatel-Lucent</organization>

      <address>
        <postal>
          <street>7-9, Avenue Morane Sulnier</street>

          <city>Velizy</city>

          <code>78141</code>

          <country>France</country>
        </postal>

        <phone></phone>

        <email>lieven.levrau@alcatel-lucent.com</email>
      </address>
    </author>

    <author fullname="Lou Berger" initials="L" surname="Berger">
      <organization>LabN</organization>

      <address>
        <postal>
          <street></street>

          <city></city>

          <region></region>

          <code></code>

          <country></country>
        </postal>

        <phone>+1-301-468-9228</phone>

        <facsimile></facsimile>

        <email>lberger@labn.net</email>

        <uri></uri>
      </address>
    </author>

    <date day="22" month="January" year="2010" />

    <area>Routing</area>

    <workgroup>MPLS Working Group</workgroup>

    <keyword>mpls-tp</keyword>

    <keyword>MPLS</keyword>

    <keyword>Internet-Draft</keyword>

    <abstract>
      <t>This document specifies an architectural framework for the
      application of Multiprotocol Label Switching (MPLS) to the construction
      of packet-switched equivalents of traditional circuit-switched carrier
      networks. It describes a common set of protocol functions - the MPLS
      Transport Profile (MPLS-TP) - that supports the operational models and
      capabilities typical of such networks, including signaled or explicitly
      provisioned bi-directional connection-oriented paths, protection and
      restoration mechanisms, comprehensive Operations, Administration and
      Maintenance (OAM) functions, and network operation in the absence of a
      dynamic control plane or IP forwarding support. Some of these functions
      are defined in existing MPLS specifications, while others require
      extensions to existing specifications to meet the requirements of the
      MPLS-TP.</t>

      <t>This document defines the subset of the MPLS-TP applicable in general
      and to point-to-point paths. The remaining subset, applicable
      specifically to point-to-multipoint paths, are out of scope of this
      document.</t>

      <t>This document is a product of a joint Internet Engineering Task Force
      (IETF) / International Telecommunications Union Telecommunications
      Standardization Sector (ITU-T) effort to include an MPLS Transport
      Profile within the IETF MPLS and PWE3 architectures to support the
      capabilities and functionalities of a packet transport network as
      defined by the ITU-T.</t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">
      <section title="Motivation and Background">
        <t>This document describes an architectural framework for the
        application of MPLS to the construction of packet-switched transport
        networks. It specifies the common set of protocol functions that meet
        the requirements in <xref target="RFC5654"></xref>, and that together
        constitute the MPLS Transport Profile (MPLS-TP) for point-to-point
        paths. The remaining MPLS-TP functions, applicable specifically to
        point-to-multipoint paths, are out of scope of this document.</t>

        <t>Historically the optical transport infrastructure - Synchronous
        Optical Network/Synchronous Digital Hierarchy (SONET/SDH) and Optical
        Transport Network (OTN) - has provided carriers with a high benchmark
        for reliability and operational simplicity. To achieve this, transport
        technologies have been designed with specific characteristics:</t>

        <t><list style="symbols">
            <t>Strictly connection-oriented connectivity, which may be
            long-lived and may be provisioned manually (i.e. configuration of
            the node via a command line interface) or by network
            management.</t>

            <t>A high level of availability.</t>

            <t>Quality of service.</t>

            <t>Extensive OAM capabilities.</t>
          </list> Carriers wish to evolve such transport networks to take
        advantage of the flexibility and cost benefits of packet switching
        technology and to support packet based services more efficiently.
        While MPLS is a maturing packet technology that already plays an
        important role in transport networks and services, not all MPLS
        capabilities and mechanisms are needed in or consistent with the
        transport network operational model. There are also transport
        technology characteristics that are not currently reflected in
        MPLS.</t>

        <t>There are thus two objectives for MPLS-TP:</t>

        <t><list style="numbers">
            <t>To enable MPLS to be deployed in a transport network and
            operated in a similar manner to existing transport
            technologies.</t>

            <t>To enable MPLS to support packet transport services with a
            similar degree of predictability to that found in existing
            transport networks.</t>
          </list></t>

        <t>In order to achieve these objectives, there is a need to define a
        common set of MPLS protocol functions - an MPLS Transport Profile -
        for the use of MPLS in transport networks and applications. Some of
        the necessary functions are provided by existing MPLS specifications,
        while others require additions to the MPLS tool-set. Such additions
        should, wherever possible, be applicable to MPLS networks in general
        as well as those that conform strictly to the transport network
        model.</t>

        <t>This document is a product of a joint Internet Engineering Task
        Force (IETF) / International Telecommunications Union
        Telecommunications Standardization Sector (ITU-T) effort to include an
        MPLS Transport Profile within the IETF MPLS and PWE3 architectures to
        support the capabilities and functionalities of a packet transport
        network as defined by the ITU-T.</t>
      </section>

      <section title="Scope">
        <t>This document describes an architectural framework for the
        application of MPLS to the construction of packet-switched transport
        networks. It specifies the common set of protocol functions that meet
        the requirements in <xref target="RFC5654"></xref>, and that together
        constitute the MPLS Transport Profile (MPLS-TP) for point-to-point
        MPLS-TP transport paths. The remaining MPLS-TP functions, applicable
        specifically to point-to-multipoint transport paths, are out of scope
        of this document.</t>
      </section>

      <section title="Terminology">
        <texttable align="left" style="headers">
          <ttcol>Term</ttcol>

          <ttcol>Definition</ttcol>

          <c>LSP</c>

          <c>Label Switched Path</c>

          <c>MPLS-TP</c>

          <c>MPLS Transport Profile</c>

          <c>SDH</c>

          <c>Synchronous Digital Hierarchy</c>

          <c>ATM</c>

          <c>Asynchronous Transfer Mode</c>

          <c>OTN</c>

          <c>Optical Transport Network</c>

          <c>cl-ps</c>

          <c>Connectionless - Packet Switched</c>

          <c>co-cs</c>

          <c>Connection Oriented - Circuit Switched</c>

          <c>co-ps</c>

          <c>Connection Oriented - Packet Switched</c>

          <c>OAM</c>

          <c>Operations, Administration and Maintenance</c>

          <c>G-ACh</c>

          <c>Generic Associated Channel</c>

          <c>GAL</c>

          <c>Generic Alert Label</c>

          <c>MEP</c>

          <c>Maintenance End Point</c>

          <c>MIP</c>

          <c>Maintenance Intermediate Point</c>

          <c>APS</c>

          <c>Automatic Protection Switching</c>

          <c>SCC</c>

          <c>Signaling Communication Channel</c>

          <c>MCC</c>

          <c>Management Communication Channel</c>

          <c>EMF</c>

          <c>Equipment Management Function</c>

          <c>FM</c>

          <c>Fault Management</c>

          <c>CM</c>

          <c>Configuration Management</c>

          <c>PM</c>

          <c>Performance Management</c>

          <c>LSR</c>

          <c>Label Switching Router</c>

          <c>MPLS-TP PE</c>

          <c>MPLS-TP Provider Edge LSR</c>

          <c>MPLS-TP P</c>

          <c>MPLS-TP Provider LSR</c>

          <c>PW</c>

          <c>Pseudowire</c>

          <c>Adaptation</c>

          <c>The mapping of client information into a format suitable for
          transport by the server layer</c>

          <c>Native Service</c>

          <c>The traffic belonging to the client of the MPLS-TP network</c>

          <c>T-PE</c>

          <c>PW Terminating Provider Edge</c>

          <c>S-PE</c>

          <c>PW Switching provider Edge</c>
        </texttable>

        <section title="Transport Network">
          <t>A Transport Network provides transparent transmission of client
          user plane traffic between attached client devices by establishing
          and maintaining point-to-point or point-to-multipoint connections
          between such devices. The architecture of networks supporting point
          to multipoint connections is out of scope of this document. A
          Transport Network is independent of any higher-layer network that
          may exist between clients, except to the extent required to supply
          this transmission service. In addition to client traffic, a
          Transport Network may carry traffic to facilitate its own operation,
          such as that required to support connection control, network
          management, and Operations, Administration and Maintenance (OAM)
          functions.</t>

          <t>See also the definition of Packet Transport Service in <xref
          target="pts"></xref>.</t>
        </section>

        <section title="MPLS Transport Profile">
          <t>The MPLS Transport Profile (MPLS-TP) is the subset of MPLS
          functions that meet the requirements in <xref
          target="RFC5654"></xref>. Note that MPLS is defined to include any
          present and future MPLS capability specified by the IETF, including
          those capabilities specifically added to support transport network
          requirements <xref target="RFC5654"></xref>.</t>
        </section>

        <section title="MPLS-TP Section">
          <t>An MPLS-TP Section is defined in Section 1.2.2 of <xref
          target="RFC5654"></xref>.</t>
        </section>

        <section title="MPLS-TP Label Switched Path">
          <t>An MPLS-TP Label Switched Path (MPLS-TP LSP) is an LSP that uses
          a subset of the capabilities of an MPLS LSP in order to meet the
          requirements of an MPLS transport network as set out in <xref
          target="RFC5654"></xref>. The characteristics of an MPLS-TP LSP are
          primarily that it:</t>

          <t><list style="numbers">
              <t>Uses a subset of the MPLS OAM tools defined as described in
              <xref target="I-D.ietf-mpls-tp-oam-framework"></xref>.</t>

              <t>Supports 1+1, 1:1, and 1:N protection functions.</t>

              <t>Is traffic engineered.</t>

              <t>May be established and maintained via the management plane,
              or using GMPLS protocols when a control plane is used.</t>

              <t>Is either point-to-point or point-to-multipoint. Multipoint
              to point and multipoint to multipoint LSPs are not
              permitted.</t>
            </list>Note that an MPLS LSP is defined to include any present and
          future MPLS capability, including those specifically added to
          support the transport network requirements.</t>
        </section>

        <section title="MPLS-TP Label Switching Router (LSR) and Label Edge Router (LER)">
          <t>Editor's Note: These terms are here for clarity - but this is not
          the authoritative definition - (need to find a definition)</t>

          <t>An MPLS-TP Label Switching Router (LSR) is either an MPLS-TP
          Provider Edge (PE) router or an MPLS-TP Provider (P) router for a
          given LSP, as defined below. The terms MPLS-TP PE router and MPLS-TP
          P router describe logical functions; a specific node may undertake
          only one of these roles on a given LSP.</t>

          <t>Note that the use of the term "router" in this context is
          historic and neither requires nor precludes the ability to perform
          IP forwarding.</t>

          <section title="MPLS-TP Provider Edge (PE) Router">
            <t>An MPLS-TP Provider Edge (PE) router is an MPLS-TP LSR that
            adapts client traffic and encapsulates it to be transported over
            an MPLS-TP LSP. Encapsulation may be as simple as pushing a label,
            or it may require the use of a pseudowire. An MPLS-TP PE exists at
            the interface between a pair of layer networks. For an MS-PW, an
            MPLS-TP PE may be either an S-PE or a T-PE, as defined in <xref
            target="RFC5659"></xref>.</t>

            <t>A layer network is defined in <xref target="G.805"></xref>.</t>
          </section>

          <section title="MPLS-TP Provider (P) Router">
            <t>An MPLS-TP Provider router is an MPLS-TP LSR that does not
            provide MPLS-TP PE functionality for a given LSP. An MPLS-TP P
            router switches LSPs which carry client traffic, but does not
            adapt client traffic and encapsulate it to be carried over an
            MPLS-TP LSP.</t>
          </section>
        </section>

        <section title="Customer Edge (CE)">
          <t>A Customer Edge (CE) is the client function sourcing or sinking
          native service traffic to or from the MPLS-TP network. CEs on either
          side of the MPLS-TP network are peers and view the MPLS-TP network
          as a single point-to-point or point-to-multipoint link.</t>
        </section>

        <section title="Additional Definitions and Terminology">
          <t>Detailed definitions and additional terminology may be found in
          <xref target="RFC5654"></xref>.</t>
        </section>
      </section>

      <section title="Applicability">
        <t>MPLS-TP can be used to construct packet transport networks and is
        therefore applicable in any packet transport network context. It is
        also applicable to subsets of a packet network where the transport
        network operational model is deemed attractive. The following are
        examples of MPLS-TP applicability models:</t>

        <t><list style="numbers">
            <t>MPLS-TP provided by a network that only supports MPLS-TP LSPs
            and PWs (i.e. Only MPLS-TP LSPs and PWs exist between the PEs or
            LSRs), acting as a server for other layer 1, layer 2 and layer 3
            networks (<xref target="tp-server"></xref>).</t>

            <t>MPLS-TP provided by a network that also supports non-MPLS-TP
            LSPs and PWs (i.e. both LSPs and PWs that conform to the transport
            profile and those that do not, exist between the PEs), acting as a
            server for other layer 1, layer 2 and layer 3 networks (<xref
            target="tp-in-mpls"></xref>).</t>

            <t>MPLS-TP as a server layer for client layer traffic of IP or
            MPLS networks which do not use functions of the MPLS transport
            profile. For MPLS traffic, the MPLS-TP server layer network uses
            PW switching or LSP stitching at the PE that terminates the
            MPLS-TP server layer (<xref target="tp-client-service"></xref>). -
            See notes in word document - ref = rfc5150</t>
          </list>These models are not mutually exclusive.</t>

        <t><figure anchor="tp-server" title="MPLS-TP Server Layer Example">
            <artwork><![CDATA[MPLS-TP LSP, provided by a network that only supports MPLS-TP, acting as 
    a server for other layer 1, layer 2 and layer 3 networks.

            |<-- L1/2/3 -->|<-- MPLS-TP-->|<-- L1/2/3 -->|
                                 Only

                               MPLS-TP
                         +---+   LSP    +---+          
          +---+  Client  |   |----------|   | Client   +---+     
          |CE1|==Traffic=|PE2|==========|PE3|=Traffic==|CE1|
          +---+          |   |----------|   |          +---+    
                         +---+          +---+ 

  Example  a)  [Ethernet]     [Ethernet]     [Ethernet]
  layering                    [   PW   ]
                              [-TP LSP ]
                               
           b)  [   IP   ]     [  IP    ]     [  IP   ]
                              [ Demux  ]
                              [-TP LSP ]               

]]></artwork>
          </figure><figure anchor="tp-in-mpls"
            title="MPLS-TP in MPLS Network Example">
            <artwork><![CDATA[MPLS-TP LSP, provided by a network that also supports non-MPLS-TP 
    functions, acting as a server for other layer 1, layer 2 and 
    layer 3 networks.

            |<-- L1/2/3 -->|<-- MPLS -->|<-- L1/2/3 -->|
                                 
                               MPLS-TP
                         +---+   LSP    +---+          
          +---+  Client  |   |----------|   | Client   +---+     
          |CE1|==Traffic=|PE2|==========|PE3|=Traffic==|CE1|
          +---+          |   |----------|   |          +---+    
                         +---+          +---+               
 
Example  a)  [Ethernet]       [Ethernet]     [Ethernet]
layering                      [   PW   ]
                              [-TP LSP ]
                               
         b)  [   IP   ]       [  IP    ]     [  IP   ]
                              [ Demux  ]
                              [-TP LSP ]]]></artwork>
          </figure><figure anchor="tp-client-service"
            title="MPLS-TP Transporting Client Service Traffic">
            <artwork><![CDATA[MPLS-TP as a server layer for client layer traffic of IP or MPLS 
    networks which do not use functions of the MPLS transport 
    profile.


              |<-- MPLS ---->|<-- MPLS-TP-->|<--- MPLS --->|
                                   Only

  +---+   +----+  Non-TP  +----+  MPLS-TP +----+  Non-TP  +----+   +---+
  |CE1|---|T-PE|====LSP===|S-PE|====LSP===|S-PE|====LSP===|S-PE|---|CE2|
  +---+   +----+          +----+          +----+          +----+   +---+
                       (PW switching)  (PW switching)

(a)  [ Eth ]   [   Eth  ]       [  Eth   ]     [   Eth  ]     [ Eth ]
               [PW Seg't]       [PW Seg't]     [PW Seg't]
               [   LSP  ]       [-TP LSP ]     [   LSP  ] 



             |<-- MPLS ---->|<-- MPLS-TP-->|<--- MPLS --->|
                                  Only

  +---+   +----+  Non-TP  +----+  MPLS-TP +----+  Non-TP  +----+   +---+
  |CE1|---| PE |====LSP===| PE |====LSP===| PE |====LSP===| PE |---|CE2|
  +---+   +----+          +----+          +----+          +----+   +---+
                       (LSP stitching) (LSP stitching)

(b)  [ IP ]      [  IP  ]       [   IP   ]     [  IP   ]     [ IP  ]
                 [  LSP ]       [-TP LSP ]     [  LSP  ] ]]></artwork>
          </figure></t>
      </section>
    </section>

    <section title="MPLS Transport Profile Requirements">
      <t>The requirements for MPLS-TP are specified in <xref
      target="RFC5654"></xref>, <xref
      target="I-D.ietf-mpls-tp-oam-requirements"></xref>, and <xref
      target="I-D.ietf-mpls-tp-nm-req"></xref>. This section provides a brief
      reminder to guide the reader and is therefore not normative. It is not
      intended as a substitute for these documents.</t>

      <t>MPLS-TP must not modify the MPLS forwarding architecture and must be
      based on existing pseudowire and LSP constructs.</t>

      <t>Point to point LSPs may be unidirectional or bi-directional, and it
      must be possible to construct congruent Bi-directional LSPs.</t>

      <t>MPLS-TP LSPs do not merge with other LSPs at an MPLS-TP LSR and it
      must be possible to detect if a merged LSP has been created.</t>

      <t>It must be possible to forward packets solely based on switching the
      MPLS or PW label. It must also be possible to establish and maintain
      LSPs and/or pseudowires both in the absence or presence of a dynamic
      control plane. When static provisioning is used, there must be no
      dependency on dynamic routing or signaling.</t>

      <t>OAM, protection and forwarding of data packets must be able to
      operate without IP forwarding support.</t>

      <t>It must be possible to monitor LSPs and pseudowires through the use
      of OAM in the absence of control plane or routing functions. In this
      case information gained from the OAM functions is used to initiate path
      recovery actions at either the PW or LSP layers.</t>
    </section>

    <section title="MPLS Transport Profile Overview">
      <section anchor="pts" title="Packet Transport Services">
        <t>One objective of MPLS-TP is to enable MPLS networks to provide
        packet transport services with a similar degree of predictability to
        that found in existing transport networks. Such packet transport
        services inherit a number of characteristics, defined in <xref
        target="RFC5654"></xref>:</t>

        <t><list style="symbols">
            <t>In an environment where an MPLS-TP layer network is supporting
            a client layer network, and the MPLS-TP layer network is supported
            by a server layer network then operation of the MPLS-TP layer
            network must be possible without any dependencies on either the
            server or client layer network.</t>

            <t>The service provided by the MPLS-TP network to the client is
            guaranteed not to fall below the agreed level regardless of other
            client activity.</t>

            <t>The control and management planes of any client network layer
            that uses the service is isolated from the control and management
            planes of the MPLS-TP layer network, where the client network
            layer is considered to be the native service of the MPLS-TP
            network.</t>

            <t>Where a client network makes use of an MPLS-TP server that
            provides a packet transport service, the level of co-ordination
            required between the client and server layer networks is minimal
            (preferably no co-ordination will be required).</t>

            <t>The complete set of packets generated by a client MPLS(-TP)
            layer network using the packet transport service, which may
            contain packets that are not MPLS packets (e.g. IP or CNLS packets
            used by the control/management plane of the client MPLS(-TP) layer
            network), are transported by the MPLS-TP server layer network.</t>

            <t>The packet transport service enables the MPLS-TP layer network
            addressing and other information (e.g. topology) to be hidden from
            any client layer networks using that service, and vice-versa.</t>
          </list>These characteristics imply that a packet transport service
        does not support a connectionless packet-switched forwarding mode.
        However, this does not preclude it carrying client traffic associated
        with a connectionless service.</t>

        <t>Such packet transport services are very similar to Layer 2 Virtual
        Private Networks as defined by the IETF.</t>
      </section>

      <section title="Scope of the MPLS Transport Profile">
        <t><xref target="mpls-tp-scope"></xref> illustrates the scope of
        MPLS-TP. MPLS-TP solutions are primarily intended for packet transport
        applications. MPLS-TP is a strict subset of MPLS, and comprises only
        those functions that are necessary to meet the requirements of <xref
        target="RFC5654"></xref>. This includes MPLS functions that were
        defined prior to <xref target="RFC5654"></xref> but that meet the
        requirements of <xref target="RFC5654"></xref>, together with
        additional functions defined to meet those requirements. Some MPLS
        functions defined before <xref target="RFC5654"></xref> such as Equal
        Cost Multi-Path, LDP signaling used in such a way that it creates
        multipoint-to-point LSPs, and IP forwarding in the data plane are
        explicitly excluded from MPLS-TP by that requirements
        specification.</t>

        <t>Note that MPLS as a whole will continue to evolve to include
        additional functions that do not conform to the MPLS Transport Profile
        or its requirements, and thus fall outside the scope of MPLS-TP.</t>

        <t><figure anchor="mpls-tp-scope" title="Scope of MPLS-TP">
            <artwork><![CDATA[|<============================== MPLS ==============================>|


|<============= Pre-RFC5654 MPLS ================>|
  {      ECMP       }
  { LDP/non-TE LSPs }
  {     IP fwd      }  
                                    
                    |<================ MPLS-TP ====================>|
                                                    { Additional }
                                                    {  Transport }
                                                    {  Functions } 


]]></artwork>
          </figure></t>

        <t></t>
      </section>

      <section anchor="arch" title="Architecture">
        <t>MPLS-TP comprises the following architectural elements:</t>

        <t><list style="symbols">
            <t>Sections, LSPs and PWs that provide a packet transport service
            for a client network.</t>

            <t>Proactive and on-demand Operations, Administration and
            Maintenance (OAM) functions to monitor and diagnose the MPLS-TP
            network, such as connectivity check, connectivity verification,
            performance monitoring and fault localisation.</t>

            <t>Optional control planes for LSPs and PWs, as well as support
            for static provisioning and configuration.</t>

            <t>Optional path protection mechanisms to ensure that the packet
            transport service survives anticipated failures and degradations
            of the MPLS-TP network.</t>

            <t>Network management functions.</t>
          </list></t>

        <t>The MPLS-TP architecture for LSPs and PWs includes the following
        two sets of functions:</t>

        <t><list style="symbols">
            <t>MPLS-TP client adaptation</t>

            <t>MPLS-TP forwarding</t>
          </list></t>

        <t>The adaptation functions interface the native service to MPLS-TP.
        This includes the case where the native service is an MPLS-TP LSP.</t>

        <t>The forwarding functions comprise the mechanisms required for
        forwarding the encapsulated client traffic over an MPLS-TP server
        layer network, for example PW and LSP labels.</t>

        <section title="MPLS-TP Client Adaptation Functions" toc="default">
          <t>The MPLS-TP native service adaptation functions interface the
          client service to MPLS-TP. For pseudowires, these adaptation
          functions are the payload encapsulation described in Section 4.4 of
          <xref target="RFC3985"></xref> and Section 6 of <xref
          target="RFC5659"></xref>. For network layer client services, the
          adaptation function uses the MPLS encapsulation format as defined in
          <xref target="RFC3032"></xref>.</t>

          <t>The purpose of this encapsulation is to abstract the client
          service data plane from the MPLS-TP data plane, thus contributing to
          the independent operation of the MPLS-TP network.</t>

          <t>MPLS-TP is itself a client of an underlying server layer. MPLS-TP
          is thus also bounded by a set of adaptation functions to this server
          layer network, which may itself be MPLS-TP. These adaptation
          functions provide encapsulation of the MPLS-TP frames and for the
          transparent transport of those frames over the server layer network.
          The MPLS-TP client inherits its Quality of Service (QoS) from the
          MPLS-TP network, which in turn inherits its QoS from the server
          layer. The server layer must therefore provide the necessary QoS to
          ensure that the MPLS-TP client QoS commitments can be satisfied.</t>
        </section>

        <section title="MPLS-TP Forwarding Functions">
          <t>The forwarding functions comprise the mechanisms required for
          forwarding the encapsulated client over an MPLS-TP server layer
          network, for example PW and LSP labels.</t>

          <t>MPLS-TP LSPs use the MPLS label switching operations and TTL
          processing procedures defined in <xref target="RFC3031"></xref> and
          <xref target="RFC3032"></xref>. These operations are highly
          optimised for performance and are not modified by the MPLS-TP
          profile.</t>

          <t>In addition, MPLS-TP PWs use the SS-PW and MS-PW forwarding
          operations defined in <xref target="RFC3985"></xref> and <xref
          target="RFC5659"></xref>. The PW label is processed by a PW
          forwarder and is always at the bottom of the label stack for a given
          MPLS-TP layer network.</t>

          <t>Per-platform label space is used for PWs. Either per-platform,
          per-interface or other context-specific label space <xref
          target="RFC5331"></xref> may be used for LSPs.</t>

          <t>MPLS-TP forwarding is based on the label that identifies the
          transport path (LSP or PW). The label value specifies the processing
          operation to be performed by the next hop at that level of
          encapsulation. A swap of this label is an atomic operation in which
          the contents of the packet after the swapped label are opaque to the
          forwarder. The only event that interrupts a swap operation is TTL
          expiry. This is a fundamental architectural construct of MPLS to be
          taken into account when designing protocol extensions that require
          packets (e.g. OAM packets) to be sent to an intermediate LSR.</t>

          <t>Further processing to determine the context of a packet occurs
          when a swap operation is interrupted in this manner, or a pop
          operation exposes a specific reserved label at the top of the stack.
          Otherwise the packet is forwarded according to the procedures in
          <xref target="RFC3032"></xref>.</t>

          <t>Point-to-point MPLS-TP LSPs can be either unidirectional or
          bidirectional.</t>

          <t>It must be possible to configure an MPLS-TP LSP such that the
          forward and backward directions of a bidirectional MPLS-TP LSP are
          co-routed, i.e. follow the same path. The pairing relationship
          between the forward and the backward directions must be known at
          each LSR or LER on a bidirectional LSP.</t>

          <t>In normal conditions, all the packets sent over a PW or an LSP
          follow the same path through the network and those that belong to a
          common ordered aggregate are delivered in order. For example
          per-packet equal cost multi-path (ECMP) load balancing is not
          applicable to MPLS-TP LSPs.</t>

          <t>Penultimate hop popping (PHP) is disabled on MPLS-TP LSPs by
          default.</t>

          <t>MPLS-TP supports Quality of Service capabilities via the MPLS
          Differentiated Services (DiffServ) architecture <xref
          target="RFC3270"></xref>. Both E-LSP and L-LSP MPLS DiffServ modes
          are supported. The Traffic Class field (formerly the EXP field) of
          an MPLS label follows the definition and processing rules of <xref
          target="RFC5462"></xref> and <xref target="RFC3270"></xref>. Note
          that packet reordering between flows belonging to different traffic
          classes may occur if more than one traffic class is supported on a
          single LSP.</t>

          <t>Only the Pipe and Short Pipe DiffServ tunnelling and TTL
          processing models described in <xref target="RFC3270"></xref> and
          <xref target="RFC3443"></xref> are supported in MPLS-TP.</t>
        </section>
      </section>

      <section title="MPLS-TP Native Services">
        <t>This document describes the architecture for two types of native
        service adaptation:</t>

        <t><list style="symbols">
            <t>A PW: PW Demultiplexer and PW encapsulation</t>

            <t>An MPLS Label</t>
          </list></t>

        <t>A PW provides any emulated service that the IETF has defined to be
        provided by a PW, for example Ethernet, Frame Relay, or PPP/HDLC. A
        registry of PW types is maintained by IANA. When the client adaptation
        is via a PW, the mechanisms described in <xref target="PW-sec"></xref>
        are used.</t>

        <t>An MPLS LSP Label can also be used as the adaptation, in which case
        any client supported by <xref target="RFC3031"></xref> is allowed, for
        example a MPLS LSP, PW, or IP. When the client adaptation is via an
        MPLS label, the mechanisms described in <xref
        target="NLTS-sec"></xref> are used.</t>

        <section title="MPLS-TP Client/Server Relationship">
          <t>The MPLS-TP client server relationship is defined by the MPLS-TP
          network boundary and the label context. It is not explicitly
          indicated in the packet. In terms of the MPLS label stack, when the
          client traffic type of the MPLS-TP network is an MPLS LSP or a PW,
          then the S bit of all the labels in the MPLS-TP label stack are
          zero, otherwise the bottom label of the MPLS-TP label stack has the
          S bit set to one ( i.e. there can only one S bit set in a label
          stack).</t>

          <t>The data plane behaviour of MPLS-TP is the same as the best
          current practise for MPLS. This includes the setting of the S-Bit.
          In each case, the S-bit is set to indicate the bottom (i.e.
          inner-most) label in the label stack that is contiguous between the
          MPLS-TP server and the client layer. Note that this best current
          practise differs slightly from <xref target="RFC3032"></xref> which
          uses the S-bit to identify when MPLS label processing stops and
          network layer processing starts.</t>

          <t>The relationship of MPLS-TP to its clients is illustrated in
          <xref target="clients"></xref>.</t>

          <t><figure anchor="clients" title="MPLS-TP - Client Relationship">
              <artwork><![CDATA[
            PW-Based                       MPLS Labelled 
            Services                         Services
 |-----------------------------|  |----------------------------|
 
   Emulated        PW over LSP      IP over LSP         IP            
   Service                                                                      
                  +------------+                                      
                  | PW Payload |                                      
                  +------------+  +------------+               (CLIENTS)    
                  |PW Lbl(S=1) |  |     IP     |                    
 +------------+   +------------+  +------------+  +------------+  
 | PW Payload |   |LSP Lbl(S=0)|  |LSP Lbl(S=1)|  |     IP     |   
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 |PW Lbl (S=1)|   |LSP Lbl(S=0)|  |LSP Lbl(S=0)|  |LSP Lbl(S=1)|  
 +------------+   +------------+  +------------+  +------------+
 |LSP Lbl(S=0)|
 +------------+                                                (MPLS-TP)
                                                                          
                                                                         

~~~~~~~~~~~ = Client - MPLS-TP layer boundary


Note that in the PW over LSP case the client may omit its LSP Label if

penultimate hop popping has been agreed with its peer

]]></artwork>
            </figure></t>

          <t>The data plane behaviour of MPLS-TP is the same as the best
          current practise for MPLS. This includes the setting of the S-Bit.
          In each case, the S-bit is set to indicate the bottom (i.e.
          inner-most) label in the label stack that is contiguous between the
          MPLS-TP server and the client layer.</t>

          <t>Note that the label stacks shown above are divided between those
          inside the MPLS-TP Network and those within the client network when
          the client network is MPLS(-TP). They illustrate the smallest number
          of labels possible. These label stacks could also include more
          labels.</t>
        </section>

        <section anchor="PW-sec" title="Pseudowire Adaptation">
          <t>The architecture for an MPLS-TP network that provides PW emulated
          services is based on the MPLS <xref target="RFC3031"></xref> and
          pseudowire <xref target="RFC3985"></xref> architectures. If
          multi-segment pseudowires are used to provide a packet transport
          service, motivated by, for example, the requirements specified in
          <xref target="RFC5254"></xref>, then the MS-PW architecture <xref
          target="RFC5659"></xref> also applies.</t>

          <t><xref target="tp-arch"></xref> shows the architecture for an
          MPLS-TP network using single-segment PWs.</t>

          <t><figure anchor="tp-arch"
              title="MPLS-TP Architecture (Single Segment PW)">
              <artwork><![CDATA[            |<--------------- Emulated Service ----------------->|
            |                                                    |
            |          |<-------- Pseudowire -------->|          |
            |          |      encapsulated, packet    |          |
            |          |      transport service       |          |
            |          |                              |          |
            |          |    |<------ LSP ------->|    |          |
            |          V    V                    V    V          |
            V    AC    +----+      +-----+       +----+     AC   V
      +-----+    |     | PE1|=======\   /========| PE2|     |    +-----+
      |     |----------|.......PW1.| \ / |............|----------|     |
      | CE1 |    |     |    |      |  X  |       |    |     |    | CE2 |
      |     |----------|.......PW2.| / \ |............|----------|     |
      +-----+  ^ |     |    |=======/   \========|    |     | ^  +-----+
            ^  |       +----+      +-----+       +----+       |  ^
            |  |   Provider Edge 1    ^     Provider Edge 2   |  |
            |  |                      |                       |  |
     Customer  |                  P Router                    | Customer
      Edge 1   |                                              |  Edge 2
               |                                              |
               |                                              |
         Native service                                 Native service

]]></artwork>
            </figure></t>

          <t><xref target="ms-pw-arch"></xref> shows the architecture for an
          MPLS-TP network when multi-segment pseudowires are used. Note that
          as in the SS-PW case, P-routers may also exist.</t>

          <t><figure anchor="ms-pw-arch"
              title="MPLS-TP Architecture (Multi-Segment PW)">
              <artwork><![CDATA[           |<----------- Pseudowire encapsulated ------------->|
           |             packet transport service              |
           |                                                   |
           |                                                   |
           |                                                   |
        AC |     |<-------- LSP1 -------->|    |<--LSP2-->|    | AC
         | V     V                        V    V          V    V |
         | +----+              +-----+    +----+          +----+ |
   +---+ | |TPE1|===============\   /=====|SPE1|==========|TPE2| | +---+
   |   |---|......PW1-Seg1.... | \ / | ......X...PW1-Seg2......|---|   |
   |CE1| | |    |              |  X  |    |    |          |    | | |CE2|
   |   |---|......PW2-Seg1.... | / \ | ......X...PW2-Seg2......|---|   |
   +---+ | |    |===============/   \=====|    |==========|    | | +---+
       ^   +----+     ^        +-----+    +----+     ^    +----+   ^
       |              |          ^                   |             |
       |           TE LSP        |                TE LSP           |
       |                      P-router                             |
       |                                                           |
       |<-------------------- Emulated Service ------------------->|

PW1-segment1 and PW1-segment2 are segments of the same MS-PW,
while PW2-segment1 and PW2-segment2 are segments of another MS-PW

]]></artwork>
            </figure></t>

          <t>The corresponding MPLS-TP protocol stacks including PWs are shown
          in <xref target="MPLS-TP-Defn"></xref>. In this figure protocol the
          Transport Service Layer <xref target="RFC5654"></xref> is identified
          by the PW demultiplexer (Demux) label and the Transport Path Layer
          <xref target="RFC5654"></xref> is identified by the LSP Demux
          Label.</t>

          <t><figure anchor="MPLS-TP-Defn"
              title="MPLS-TP Layer Network using Pseudowires">
              <artwork><![CDATA[ 
 +-------------------+     /===================\   /===================\                         
 |  Client Layer     |     H     OAM PDU       H   H     OAM PDU       H                          
 /===================\     H-------------------H   H-------------------H    
 H     PW Encap      H     H      GACh         H   H      GACh         H  
 H-------------------H     H-------------------H   H-------------------H                          
 H   PW Demux (S=1)  H     H PW Demux (S=1)    H   H    GAL (S=1)      H      
 H-------------------H     H-------------------H   H-------------------H
 H     LSP Demux(s)  H     H  LSP Demux(s)     H   H  LSP Demux(s)     H
 \===================/     \===================/   \===================/  
 |    Server Layer   |     |   Server Layer    |   |   Server Layer    |
 +-------------------+     +-------------------+   +-------------------+

     User Traffic                 PW OAM                  LSP OAM 

Note: H(ighlighted) indicates the part of the protocol stack we are 
considering in this document.

]]></artwork>
            </figure></t>

          <t>PWs and their underlying labels may be configured or signaled.
          See <xref target="static"></xref> for additional details related to
          configured service types. See <xref target="CONTROLPLANE"></xref>
          for additional details related to signaled service types.</t>

          <section title="Pseudowire Bases Services">
            <t>When providing a Virtual Private Wire Service (VPWS) , Virtual
            Private Local Area Network Service (VPLS), Virtual Private
            Multicast Service (VPMS) or Internet Protocol Local Area Network
            Service (IPLS) pseudowires must be used to carry the client
            service. VPWS, VLPS, and IPLS are described in <xref
            target="RFC4664"></xref>. VPMS is described in <xref
            target="I-D.ietf-l2vpn-vpms-frmwk-requirements"></xref></t>
          </section>
        </section>

        <section anchor="NLTS-sec" title="Network Layer Adaptation">
          <t> MPLS-TP LSPs can be used to transport network layer clients. The
          network layer protocols supported by <xref target="RFC3031"></xref>
          and supported in <xref target="RFC3032"></xref> can be transported
          between service interfaces. Examples are shown in Figure 5 above.
          Support for network layer clients follows the MPLS architecture for
          support of network layer protocols as defined in and supported in
          <xref target="RFC3032"></xref>[RFC3031] and supported in [RFC3032].
          </t>

          <t>With network layer adaptation, the MPLS-TP domain provides either
          a uni-directional or bidirectional point-to-point connection between
          two PEs in order to deliver a packet transport service to attached
          customer edge (CE) nodes. For example, a CE may be an IP, MPLS or
          MPLS-TP node. As shown in <xref target="tp-ip-lsp-arch"></xref>,
          there is an attachment circuit between the CE node on the left and
          its corresponding provider edge (PE) node which provides the service
          interface, a bidirectional LSP across the MPLS-TP network to the
          corresponding PE node on the right, and an attachment circuit
          between that PE node and the corresponding CE node for this
          service.</t>

          <t>The attachment circuits may be heterogeneous (e.g., any
          combination of SDH, PPP, Frame Relay, etc.) and network layer
          protocol payloads arrive at the service interface encapsulated in
          the Layer1/Layer2 encoding defined for that access link type. It
          should be noted that the set of network layer protocols includes
          MPLS and hence MPLS encoded packets with an MPLS label stack (the
          client MPLS stack), may appear at the service interface. </t>

          <t><figure anchor="tp-ip-lsp-arch"
              title="MPLS-TP Architecture for Network Layer Clients">
              <artwork><![CDATA[            |<------------- Client Network Layer-------------->|
            |                                                  |
            |          |<---- Pkt Xport Service --->| 
            |          |                            |          |
            |          |    |<-- PSN Tunnel -->|    |          |
            |          V    V                  V    V          |
            V     AC   +----+      +---+       +----+    AC    V
      +-----+     |    |PE1 |      |   |       |PE2 |    |     +-----+
      |     |     |LSP |    |      |   |       |    |    |     |     |
      | CE1 |----------|    |========X=========|    |----------| CE2 |
      |     |  ^  |IP  |    |  ^   |   |   ^   |    |    |  ^  |     |
      +-----+  |  |    |    |  |   |   |   |   |    |    |  |  +-----+
            ^  |       +----+  |   +---+   |   +----+    |  |  ^
            |  |      Provider |     ^     |  Provider      |  |
            |  |       Edge    |     |     |   Edge         |  |
      Customer |        1      | P-router  |    2           | Customer
      Edge 1   |             TE           TE                | Edge 2
               |             LSP          LSP               |
               |                                            |
         Native service                               Native service    

]]></artwork>
            </figure></t>

          <t>At the ingress service interface the client packets are received
          . The PE pushes one or more labels onto the client packets which are
          then label switched over the transport network. Correspondingly the
          egress PE pops any labels added by the MPLS-TP networks and
          transmits the packet for delivery to the attached CE via the egress
          service interface. </t>

          <t><figure anchor="MPLS-TP-NL-Stack"
              title="Domain of MPLS-TP Layer Network for IP and LSP Clients">
              <artwork><![CDATA[
                           /===================\ 
                           H     OAM PDU       H
 +-------------------+     H-------------------H   /===================\      
 |  Client Layer     |     H      GACh         H   H     OAM PDU       H     
 /===================\     H-------------------H   H-------------------H   
 H    Encap Label    H     H      GAL (S=1)    H   H      GACh         H
 H-------------------H     H-------------------H   H-------------------H                          
 H   SvcLSP Demux    H     H SvcLSP Demux (S=0)H   H    GAL (S=1)      H
 H-------------------H     H-------------------H   H-------------------H
 H     LSP Demux(s)  H     H  LSP Demux(s)     H   H  LSP Demux(s)     H
 \===================/     \===================/   \===================/  
 |   Server Layer    |     |   Server Layer    |   |   Server Layer    |
 +-------------------+     +-------------------+   +-------------------+

     User Traffic            Service LSP OAM               LSP OAM 


Note: H(ighlighted) indicates the part of the protocol stack we are 
considering in this document.

]]></artwork>
            </figure></t>

          <t>In this figure the Transport Service Layer <xref
          target="RFC5654"></xref> is identified by the Service LSP (SvcLSP)
          demultiplexer (Demux) label and the Transport Path Layer <xref
          target="RFC5654"></xref> is identified by the LSP Demux Label. Note
          that the functions of the Encapsulation label and the Service Label
          shown above as SvcLSP Demux may be represented by a single label
          stack entry. Additionally, the S-bit will always be zero when the
          client layer is MPLS labelled. </t>

          <t>Within the MPLS-TP transport network, the network layer protocols
          are carried over the MPLS-TP network using a logically separate MPLS
          label stack (the server stack). The server stack is entirely under
          the control of the nodes within the MPLS-TP transport network and it
          is not visible outside that network. <xref
          target="MPLS-TP-NL-Stack"></xref> shows how a client network
          protocol stack (which may be an MPLS label stack and payload) is
          carried over a network layer client service over an MPLS-TP
          transport network. </t>

          <t>A label per network layer protocol payload type that is to be
          transported is required. When multiple protocol payload types are to
          be carried over a single service a unique label stack entry must be
          present for each payload type. Such labels are referred to as
          "Encapsulation Labels", one of which is shown in A label per network
          layer protocol payload type that is to be transported is required.
          Such labels are referred to as "Encapsulation Labels", one of which
          is shown in <xref target="MPLS-TP-NL-Stack"></xref>. Encapsulation
          Label is either configured or signaled. Encapsulation Labels are
          either configured or signaled. </t>

          <t>Both an Encapsulation Label and a Service Label should be present
          in the label stack when a particular packet transport service is
          supporting more than one network layer protocol payload type. For
          example, if both IP and MPLS are to be carried, as shown in <xref
          target="tp-ip-lsp-arch"></xref>, then two Encapsulation Labels are
          mapped on to a common Service Label.</t>

          <t>The Encapsulation Label may be omitted when the transport service
          is supporting only one network layer protocol payload type. For
          example, if only MPLS labeled packets are carried over a service,
          then the Service Label (stack entry) provides both the payload type
          indication and service identification.</t>

          <t> Service labels are typically carried over an MPLS-TP LSP
          edge-to-edge (or transport path layer). An MPLS-TP edge-to-edge LSP
          is represented as an LSP Demux label as shown in <xref
          target="MPLS-TP-NL-Stack"></xref>. An edge-to-edge LSP is commonly
          used when more than one service exists between two PEs. The
          edge-to-edge LSP may be omitted when only one service exists between
          two PEs. For example, if only one service is carried between two PEs
          then a single Service Label could be used to provide both the
          service indication and the MPLS-TP edge-to-edge LSP. Alternatively,
          if multiple services exist between a pair of PEs then a per-client
          Service Label would be mapped on to a common MPLS-TP edge-to-edge
          LSP. </t>

          <t>As noted above, the layer 2 and layer 1 protocols used to carry
          the network layer protocol over the attachment circuits are not
          transported across the MPLS-TP network. This enables the use of
          different layer 2 and layer 1 protocols on the two attachment
          circuits. </t>

          <t>At each service interface, Layer 2 addressing must be used to
          ensure the proper delivery of a network layer packet to the adjacent
          node. This is typically only an issue for LAN media technologies
          (e.g., Ethernet) which have Media Access Control (MAC) addresses. In
          cases where a MAC address is needed, the sending node must set the
          destination MAC address to an address that ensures delivery to the
          adjacent node. That is the CE sets the destination MAC address to an
          address that ensures delivery to the PE, and the PE sets the
          destination MAC address to an address that ensures delivery to the
          CE. The specific address used is technology type specific and is not
          covered in this document. In some technologies the MAC address will
          need to be configured (Examples for the Ethernet case include a
          configured unicast MAC address for the adjacent node, or even using
          the broadcast MAC address when the CE-PE service interface is
          dedicated. The configured address is then used as the MAC
          destination address for all packets sent over the service
          interface.) </t>

          <t> Note that when two CEs, which peer with each other, operate over
          a network layer transport service run a routing protocol such as
          IS-IS or OSPF some care should be taken to configure the routing
          protocols to use point- to-point adjacencies .The specifics of such
          configuration is outside the scope of this document. See <xref
          target="RFC5309"></xref> for additional details. </t>

          <t> The CE to CE service types and corresponding labels may be
          configured or signaled . See <xref target="static"></xref> for
          additional details related to configured service types. See <xref
          target="CONTROLPLANE"></xref> for additional details related to
          signaled service types. </t>
        </section>
      </section>

      <section anchor="addr" title="Identifiers">
        <t>Identifiers are used to uniquely distinguish entities in an MPLS-TP
        network. These include operators, nodes, LSPs, pseudowires, and their
        associated maintenance entities. <xref
        target="I-D.ietf-mpls-tp-identifiers"></xref> defines a set of
        identifiers that are compatible with existing MPLS control plane
        identifiers, as well as a set of identifiers that may be used when no
        IP control plane is available.</t>
      </section>

      <section anchor="GENERICACH" title="Generic Associated Channel (G-ACh)">
        <t>For correct operation of the OAM it is important that the OAM
        packets fate-share with the data packets. In addition in MPLS-TP it is
        necessary to discriminate between user data payloads and other types
        of payload. For example, a packet may be associated with a Signaling
        Communication Channel (SCC), or a channel used for Automatic
        Protection Switching (APS) data. This is achieved by carrying such
        packets on a generic control channel associated to the LSP, PW or
        section.</t>

        <t>MPLS-TP makes use of such a generic associated channel (G-ACh) to
        support Fault, Configuration, Accounting, Performance and Security
        (FCAPS) functions by carrying packets related to OAM, APS, SCC, MCC or
        other packet types in-band over LSPs or PWs. The G-ACh is defined in
        <xref target="RFC5586"></xref> and is similar to the Pseudowire
        Associated Channel <xref target="RFC4385"></xref>, which is used to
        carry OAM packets over pseudowires. The G-ACh is indicated by a
        generic associated channel header (ACH), similar to the Pseudowire
        VCCV control word; this header is present for all Sections, LSPs and
        PWs making use of FCAPS functions supported by the G-ACh.</t>

        <t>For pseudowires, the G-ACh uses the first four bits of the
        pseudowire control word to provide the initial discrimination between
        data packets and packets belonging to the associated channel, as
        described in <xref target="RFC4385"></xref>. When this first nibble of
        a packet, immediately following the label at the bottom of stack, has
        a value of '1', then this packet belongs to a G-ACh. The first 32 bits
        following the bottom of stack label then have a defined format called
        an associated channel header (ACH), which further defines the content
        of the packet. The ACH is therefore both a demultiplexer for G-ACh
        traffic on the PW, and a discriminator for the type of G-ACh
        traffic.</t>

        <t>When the OAM or other control message is carried over an LSP,
        rather than over a pseudowire, it is necessary to provide an
        indication in the packet that the payload is something other than a
        user data packet. This is achieved by including a reserved label with
        a value of 13 in the label stack. This reserved label is referred to
        as the 'Generic Alert Label (GAL)', and is defined in <xref
        target="RFC5586"></xref>. When a GAL is found, it indicates that the
        payload begins with an ACH. The GAL is thus a demultiplexer for G-ACh
        traffic on the LSP, and the ACH is a discriminator for the type of
        traffic carried on the G-ACh. Note however that MPLS-TP forwarding
        follows the normal MPLS model, and that a GAL is invisible to an LSR
        unless it is the top label in the label stack. The only other
        circumstance under which the label stack may be inspected for a GAL is
        when the TTL has expired. Any MPLS-TP component that intentionally
        performs this inspection must assume that it is asynchronous with
        respect to the forwarding of other packets. All operations on the
        label stack are in accordance with <xref target="RFC3031"></xref> and
        <xref target="RFC3032"></xref>.</t>

        <t>In MPLS-TP, the 'G-ACh Alert Label (GAL)' always appears at the
        bottom of the label stack (i.e. S bit set to 1).</t>

        <t>The G-ACh must only be used for channels that are an adjunct to the
        data service. Examples of these are OAM, APS, MCC and SCC, but the use
        is not restricted to these services. The G-ACh must not be used to
        carry additional data for use in the forwarding path, i.e. it must not
        be used as an alternative to a PW control word, or to define a PW
        type.</t>

        <t>At the server layer, bandwidth and QoS commitments apply to the
        gross traffic on the LSP, PW or section. Since the G-ACh traffic is
        indistinguishable from the user data traffic, protocols using the
        G-ACh must take into consideration the impact they have on the user
        data that they are sharing resources with. Conversely, capacity must
        be made available for important G-ACh uses such as protection and OAM.
        In addition, protocols using the G-ACh must conform to the security
        and congestion considerations described in <xref
        target="RFC5586"></xref>.</t>

        <t><xref target="PWE3-stack"></xref> shows the reference model
        depicting how the control channel is associated with the pseudowire
        protocol stack. This is based on the reference model for VCCV shown in
        Figure 2 of <xref target="RFC5085"></xref>.</t>

        <t><figure anchor="PWE3-stack"
            title="PWE3 Protocol Stack Reference Model including the G-ACh "
            width="72">
            <artwork><![CDATA[ 
       +-------------+                                +-------------+ 
       |  Payload    |       < Service / FCAPS >      |  Payload    | 
       +-------------+                                +-------------+ 
       |   Demux /   |       < CW / ACH for PWs >     |   Demux /   | 
       |Discriminator|                                |Discriminator|
       +-------------+                                +-------------+ 
       |     PW      |             < PW >             |     PW      |
       +-------------+                                +-------------+
       |    PSN      |             < LSP >            |    PSN      | 
       +-------------+                                +-------------+ 
       |  Physical   |                                |  Physical   | 
       +-----+-------+                                +-----+-------+ 
             |                                              | 
             |             ____     ___       ____          | 
             |           _/    \___/   \    _/    \__       | 
             |          /               \__/         \_     | 
             |         /                               \    | 
             +--------|      MPLS/MPLS-TP Network       |---+ 
                       \                               / 
                        \   ___      ___     __      _/ 
                         \_/   \____/   \___/  \____/ 

]]></artwork>
          </figure></t>

        <t></t>

        <t>PW associated channel messages are encapsulated using the PWE3
        encapsulation, so that they are handled and processed in the same
        manner (or in some cases, an analogous manner) as the PW PDUs for
        which they provide a control channel.</t>

        <t><xref target="MPLS-PS-inc-LSP-ACH"></xref> shows the reference
        model depicting how the control channel is associated with the LSP
        protocol stack.</t>

        <t></t>

        <figure anchor="MPLS-PS-inc-LSP-ACH"
                title="MPLS Protocol Stack Reference Model including the LSP Associated Control Channel ">
          <artwork><![CDATA[
       +-------------+                                +-------------+ 
       |  Payload    |          < Service >           |   Payload   | 
       +-------------+                                +-------------+ 
       |Discriminator|         < ACH on LSP >         |Discriminator|
       +-------------+                                +-------------+
       |Demultiplexer|         < GAL on LSP >         |Demultiplexer| 
       +-------------+                                +-------------+
       |    PSN      |            < LSP >             |    PSN      | 
       +-------------+                                +-------------+ 
       |  Physical   |                                |  Physical   | 
       +-----+-------+                                +-----+-------+ 
             |                                              | 
             |             ____     ___       ____          | 
             |           _/    \___/   \    _/    \__       | 
             |          /               \__/         \_     | 
             |         /                               \    | 
             +--------|      MPLS/MPLS-TP Network       |---+ 
                       \                               / 
                        \   ___      ___     __      _/ 
                         \_/   \____/   \___/  \____/ 
   ]]></artwork>

          <postamble></postamble>
        </figure>

        <t></t>
      </section>

      <section anchor="OAM"
               title="Operations, Administration and Maintenance (OAM)">
        <t>MPLS-TP must be able to operate in environments where IP is not
        used in the forwarding plane. Therefore, the default mechanism for OAM
        demultiplexing in MPLS-TP LSPs and PWs is the Generic Associated
        Channel (<xref target="GENERICACH"></xref>). Forwarding based on IP
        addresses for user or OAM packets is not required for MPLS-TP.</t>

        <t><xref target="RFC4379"></xref> and BFD for MPLS LSPs <xref
        target="I-D.ietf-bfd-mpls"></xref> have defined alert mechanisms that
        enable an MPLS LSR to identify and process MPLS OAM packets when the
        OAM packets are encapsulated in an IP header. These alert mechanisms
        are based on TTL expiration and/or use an IP destination address in
        the range 127/8 for IPv4 and that same range embedded as IPv4 mapped
        IPv6 addresses for IPv6 <xref target="RFC4379"></xref>. When the OAM
        packets are encapsulated in an IP header, these mechanisms are the
        default mechanisms for MPLS networks in general for identifying MPLS
        OAM packets. MPLS-TP must be able to operate in an environments where
        IP forwarding is not supported, and thus the GACH/GAL is the default
        mechanism to demultiplex OAM packets in MPLS-TP.</t>

        <t>MPLS-TP supports a comprehensive set of OAM capabilities for packet
        transport applications, with equivalent capabilities to those provided
        in SONET/SDH.</t>

        <t>MPLS-TP defines mechanisms to differentiate specific packets (e.g.
        OAM, APS, MCC or SCC) from those carrying user data packets on the
        same transport path (i.e. section, LSP or PW). These mechanisms are
        described in <xref target="RFC5586"></xref>.</t>

        <t>MPLS-TP requires <xref
        target="I-D.ietf-mpls-tp-oam-requirements"></xref> that a set of OAM
        capabilities is available to perform fault management (e.g. fault
        detection and localisation) and performance monitoring (e.g. packet
        delay and loss measurement) of the LSP, PW or section. The framework
        for OAM in MPLS-TP is specified in <xref
        target="I-D.ietf-mpls-tp-oam-framework"></xref>.</t>

        <t>MPLS-TP OAM packets share the same fate as their corresponding data
        packets, and are identified through the Generic Associated Channel
        mechanism <xref target="RFC5586"></xref>. This uses a combination of
        an Associated Channel Header (ACH) and a Generic Alert Label (GAL) to
        create a control channel associated to an LSP, Section or PW.</t>

        <section title="OAM Architecture">
          <t>OAM and monitoring in MPLS-TP is based on the concept of
          maintenance entities, as described in <xref
          target="I-D.ietf-mpls-tp-oam-framework"></xref>. A Maintenance
          Entity can be viewed as the association of two Maintenance End
          Points (MEPs) (see example in <xref target="tp-oam-ex"></xref> ).
          Another OAM construct is referred to as Maintenance Entity Group
          (MEG), which is a collection of one or more MEs that belongs to the
          same transport path and that are maintained and monitored as a
          group. The MEPs that form an ME should be configured and managed to
          limit the OAM responsibilities of an OAM flow within the domain of a
          transport path or segment, in the specific layer network that is
          being monitored and managed.</t>

          <t>Each OAM flow is associated with a single ME. Each MEP within an
          ME resides at the boundaries of that ME. An ME may also include a
          set of zero or more Maintenance Intermediate Points (MIPs), which
          reside within the Maintenance Entity. Maintenance End Points (MEPs)
          are capable of sourcing and sinking OAM flows, while Maintenance
          Intermediate Points (MIPs) can only sink or respond to OAM flows
          from within a MEG, or originate notifications as a result of
          specific network conditions.</t>

          <t><figure anchor="tp-oam-ex"
              title="Example of MPLS-TP OAM showing end-to-end and segment OAM"
              width="72">
              <artwork><![CDATA[
========================== End to End LSP OAM ==========================
     .....                     .....         .....            .....     
-----|MIP|---------------------|MIP|---------|MIP|------------|MIP|-----
     '''''                     '''''         '''''            '''''     

     |<-------- Carrier 1 --------->|        |<--- Carrier 2 ----->|                                                                               
      ----     ---     ---      ----          ----     ---     ----      
 NNI |    |   |   |   |   |    |    |  NNI   |    |   |   |   |    | NNI 
-----| PE |---| P |---| P |----| PE |--------| PE |---| P |---| PE |----
     |    |   |   |   |   |    |    |        |    |   |   |   |    |     
      ----     ---     ---      ----          ----     ---     ----      

      ==== Segment LSP OAM ======  == Seg't ==  === Seg't LSP OAM === 
            (Carrier 1)             LSP OAM         (Carrier 2)
                                (inter-carrier)
      .....   .....   .....  ..........   ..........  .....    .....
      |MEP|---|MIP|---|MIP|--|MEP||MEP|---|MEP||MEP|--|MIP|----|MEP| 
      '''''   '''''   '''''  ''''''''''   ''''''''''  '''''    ''''' 
      <------------ ME ----------><--- ME ----><------- ME -------->

Note: MEPs for End-to-end LSP OAM exist outside of the scope 
      of this figure.

]]></artwork>
            </figure><xref target="oam-arch"></xref> illustrates how the
          concept of Maintenance Entities can be mapped to sections, LSPs and
          PWs in an MPLS-TP network that uses MS-PWs.</t>

          <t><figure anchor="oam-arch"
              title="MPLS-TP OAM architecture showing PWs, LSPs and Sections">
              <artwork><![CDATA[   Native  |<-------------------- PW15 --------------------->| Native
    Layer  |                                                 |  Layer
  Service  |    |<-PSN13->|    |<-PSN3X->|    |<-PSNXZ->|    | Service 
     (AC1) V    V   LSP   V    V   LSP   V    V   LSP   V    V  (AC2)
           +----+   +-+   +----+         +----+   +-+   +----+
+---+      |TPE1|   | |   |SPE3|         |SPEX|   | |   |TPEZ|     +---+
|   |      |    |=========|    |=========|    |=========|    |     |   |
|CE1|------|........PW1.....X..|...PW3...|.X......PW5........|-----|CE2|
|   |      |    |=========|    |=========|    |=========|    |     |   |
+---+      | 1  |   |2|   | 3  |         | X  |   |Y|   | Z  |     +---+
           +----+   +-+   +----+         +----+   +-+   +----+

           |<- Subnetwork 123->|         |<- Subnetwork XYZ->|

           .------------------- PW15  PME -------------------.
           .---- PW1 PTCME ----.         .---- PW5 PTCME ---.
                .---------.                   .---------.
                 PSN13 LME                     PSNXZ LME

                 .--.  .--.     .--------.     .--.  .--.
             Sec12 SME Sec23 SME Sec3X SME SecXY SME SecYZ SME


TPE1: Terminating Provider Edge 1     SPE2: Switching Provider Edge 3
TPEX: Terminating Provider Edge X     SPEZ: Switching Provider Edge Z

   .---. ME     .     MEP    ====   LSP      .... PW

SME: Section Maintenance Entity
LME: LSP Maintenance Entity
PME: PW Maintenance Entity

]]></artwork>
            </figure></t>

          <t>The following MPLS-TP MEs are specified in <xref
          target="I-D.ietf-mpls-tp-oam-framework"></xref>:</t>

          <t><list style="symbols">
              <t>A Section Maintenance Entity (SME), allowing monitoring and
              management of MPLS-TP Sections (between MPLS LSRs).</t>

              <t>A LSP Maintenance Entity (LME), allowing monitoring and
              management of an end-to-end LSP (between LERs).</t>

              <t>A PW Maintenance Entity (PME), allowing monitoring and
              management of an end-to-end SS/MS-PWs (between T-PEs).</t>

              <t>An LSP Tandem Connection Maintenance Entity (LTCME).</t>
            </list></t>

          <t>A G-ACH packet may be directed to an individual MIP along the
          path of an LSP or MS-PW by setting the appropriate TTL in the label
          for the G-ACH packet, as per the traceroute mode of LSP Ping <xref
          target="RFC4379"></xref> and the vccv-trace mode of<xref
          target="I-D.ietf-pwe3-segmented-pw"> </xref>. Note that this works
          when the location of MIPs along the LSP or PW path is known by the
          MEP. There may be circumstances where this is not the case, e.g.
          following restoration using a facility bypass LSP. In these cases,
          tools to trace the path of the LSP may be used to determine the
          appropriate setting for the TTL to reach a specific MIP.</t>

          <t>Within an LSR or PE, MEPs and MIPs can only be placed where MPLS
          layer processing is performed on a packet. The architecture mandates
          that this must occur at least once.</t>

          <t>MEPs may only act as a sink of OAM packets when the label
          associated with the LSP or PW for that ME is popped. MIPs can only
          be placed where an exception to the normal forwarding operation
          occurs. A MEP may act as a source of OAM packets wherever a label is
          pushed or swapped. For example, on an MS-PW, a MEP may source OAM
          within an S-PE or a T-PE, but a MIP may only be associated with a
          S-PE and a sink MEP can only be associated with a T-PE.</t>
        </section>

        <section title="OAM Functions">
          <t>The MPLS-TP OAM architecture supports a wide range of OAM
          functions, including the following:<list style="symbols">
              <t>Continuity Check</t>

              <t>Connectivity Verification</t>

              <t>Performance Monitoring (e.g. packet loss and delay
              measurement)</t>

              <t>Alarm Suppression</t>

              <t>Remote Integrity</t>
            </list></t>

          <t>These functions are applicable to any layer defined within
          MPLS-TP, i.e. to MPLS-TP Sections, LSPs and PWs.</t>

          <t>The MPLS-TP OAM tool-set must be able to operate without relying
          on a dynamic control plane or IP functionality in the datapath. In
          the case of an MPLS-TP deployment in a network in which IP
          functionality is available, all existing IP/MPLS OAM functions, e.g.
          LSP-Ping, BFD and VCCV, may be used.</t>

          <t>One use of OAM mechanisms is to detect link failures, node
          failures and performance outside the required specification which
          then may be used to trigger recovery actions, according to the
          requirements of the service.</t>
        </section>
      </section>

      <section anchor="CONTROLPLANE" title="Control Plane">
        <t>Editors note: This section will be updated based on text supplied
        by the control plane framework draft editors.</t>

        <t>A distributed dynamic control plane may be used to enable dynamic
        service provisioning in an MPLS-TP network. Where the requirements
        specified in <xref target="RFC5654"></xref> can be met, the MPLS
        Transport Profile uses existing standard control plane protocols for
        LSPs and PWs.</t>

        <t>Note that a dynamic control plane is not required in an MPLS-TP
        network. See <xref target="static"></xref> for further details on
        statically configured and provisioned MPLS-TP services.</t>

        <t><xref target="cp-arch"></xref> illustrates the relationship between
        the MPLS-TP control plane, the forwarding plane, the management plane,
        and OAM for point-to-point MPLS-TP LSPs or PWs.</t>

        <t></t>

        <t><figure anchor="cp-arch"
            title="MPLS-TP Control Plane Architecture Context">
            <artwork><![CDATA[ +------------------------------------------------------------------+
 |                                                                  |
 |                Network Management System and/or                  |
 |                                                                  |
 |           Control Plane for Point to Point Connections           |
 |                                                                  |
 +------------------------------------------------------------------+
               |     |         |     |          |     |
  .............|.....|...  ....|.....|....  ....|.....|............       
  :          +---+   |  :  : +---+   |   :  : +---+   |           :
  :          |OAM|   |  :  : |OAM|   |   :  : |OAM|   |           :
  :          +---+   |  :  : +---+   |   :  : +---+   |           :
  :            |     |  :  :   |     |   :  :   |     |           :
 \: +----+   +--------+ :  : +--------+  :  : +--------+   +----+ :/
--+-|Edge|<->|Forward-|<---->|Forward-|<----->|Forward-|<->|Edge|-+--     
 /: +----+   |ing     | :  : |ing     |  :  : |ing     |   +----+ :\
  :          +--------+ :  : +--------+  :  : +--------+          :
  '''''''''''''''''''''''  '''''''''''''''  '''''''''''''''''''''''

Note: 
   1) NMS may be centralised or distributed. Control plane is 
      distributed.
   2) 'Edge' functions refers to those functions present at 
      the edge of a PSN domain, e.g. NSP or classification.
   3) The control plane may be transported over the server 
      layer, an LSP or a G-ACh.

]]></artwork>
          </figure></t>

        <t>The MPLS-TP control plane is based on a combination of the
        LDP-based control plane for pseudowires <xref target="RFC4447"></xref>
        and the RSVP-TE-based control plane for MPLS-TP LSPs <xref
        target="RFC3471"></xref>. Some of the RSVP-TE functions that are
        required for MPLS-TP LSP signaling are based on Generalized MPLS
        (GMPLS) (<xref target="RFC3945"></xref>, <xref
        target="RFC3471"></xref>, <xref target="RFC3473"></xref>).</t>

        <t>The distributed MPLS-TP control plane may provide the following
        functions:</t>

        <t><list style="symbols">
            <t>Signaling</t>

            <t>Routing</t>

            <t>Traffic engineering and constraint-based path computation</t>
          </list></t>

        <t>In a multi-domain environment, the MPLS-TP control plane supports
        different types of interfaces at domain boundaries or within the
        domains. These include the User-Network Interface (UNI), Internal
        Network Node Interface (I-NNI), and External Network Node Interface
        (E-NNI). Note that different policies may be defined that control the
        information exchanged across these interface types.</t>

        <t>The MPLS-TP control plane is capable of activating MPLS-TP OAM
        functions as described in the OAM section of this document <xref
        target="OAM"></xref>, e.g. for fault detection and localisation in the
        event of a failure in order to efficiently restore failed transport
        paths.</t>

        <t>The MPLS-TP control plane supports all MPLS-TP data plane
        connectivity patterns that are needed for establishing transport
        paths, including protected paths as described in <xref
        target="SURVIVE"></xref>. Examples of the MPLS-TP data plane
        connectivity patterns are LSPs utilising the fast reroute backup
        methods as defined in <xref target="RFC4090"></xref> and
        ingress-to-egress 1+1 or 1:1 protected LSPs.</t>

        <t>The MPLS-TP control plane provides functions to ensure its own
        survivability and to enable it to recover gracefully from failures and
        degradations. These include graceful restart and hot redundant
        configurations. Depending on how the control plane is transported,
        varying degrees of decoupling between the control plane and data plane
        may be achieved.</t>

        <section title="PW Control Plane">
          <t>An MPLS-TP network provides many of its transport services using
          single-segment or multi-segment pseudowires, in compliance with the
          PWE3 architecture (<xref target="RFC3985"></xref> and <xref
          target="RFC5659"></xref>). The setup and maintenance of
          single-segment or multi-segment pseudowires uses the Label
          Distribution Protocol (LDP) as per <xref target="RFC4447"></xref>
          and extensions for MS-PWs (<xref
          target="I-D.ietf-pwe3-segmented-pw"></xref> and <xref
          target="I-D.ietf-pwe3-dynamic-ms-pw"></xref>).</t>
        </section>

        <section title="LSP Control Plane">
          <t>MPLS-TP Provider Edge LSRs aggregate multiple pseudowires and
          carry them across the MPLS-TP network through MPLS-TP tunnels
          (MPLS-TP LSPs). Applicable functions from the Generalized MPLS
          (GMPLS) (<xref target="RFC3945"></xref>) protocol suite supporting
          packet-switched capable (PSC) technologies are used as the control
          plane for MPLS-TP transport paths (LSPs).</t>

          <t>The LSP control plane includes:<list style="symbols">
              <t>RSVP-TE for signaling</t>

              <t>OSPF-TE or ISIS-TE for routing</t>
            </list> RSVP-TE signaling in support of GMPLS, as defined in <xref
          target="RFC3473"></xref>, is used for the setup, modification, and
          release of MPLS-TP transport paths and protection paths. It supports
          unidirectional and bidirectional point-to-point LSPs as well as
          unidirectional point-to-multipoint LSPs. The architecture for
          MPLS-TP supporting point-to-multipoint packet transport services is
          out of scope of this document.</t>

          <t>The route of a transport path is typically calculated in the
          ingress node of a domain and the RSVP explicit route object (ERO) is
          utilised for the setup of the transport path exactly following the
          given route. GMPLS-based MPLS-TP LSPs must be able to inter-operate
          with RSVP-TE-based MPLS-TE LSPs, as per <xref
          target="RFC5146"></xref></t>

          <t>OSPF and IS-IS for GMPLS (<xref target="RFC4203"></xref> and
          <xref target="RFC5307"></xref>) are used for carrying link state
          routing information in an MPLS-TP network.</t>
        </section>
      </section>

      <section anchor="static" title="Static Operation of LSPs and PWs">
        <t>An MPLS-TP LSP or PW may be statically configured without the
        support of a dynamic control plane. This may be either by direct
        configuration of the LSRs, or via a network management system. Static
        operation is independent of a specific PW or LSP instance &ndash; for
        example it should be possible for a PW to be statically configured,
        while the LSP supporting it setup by a dynamic control plane.</t>

        <t>Persistent forwarding loops can cause significant additional
        resource utilisation, above that budgeted for the transport path.
        Therefore, when static configuration mechanisms are used, care must be
        taken to ensure that loops do not form.</t>
      </section>

      <section anchor="SURVIVE" title="Survivability">
        <t>Editors note: This section will be updated based on text supplied
        by the survivability draft editors.</t>

        <t>Survivability requirements for MPLS-TP are specified in <xref
        target="I-D.ietf-mpls-tp-survive-fwk"></xref>.</t>

        <t>A wide variety of resiliency schemes have been developed to meet
        the various network and service survivability objectives. For example,
        as part of the MPLS/PW paradigms, MPLS provides methods for local
        repair using back-up LSP tunnels (<xref target="RFC4090"></xref>),
        while pseudowire redundancy <xref
        target="I-D.ietf-pwe3-redundancy"></xref> supports scenarios where the
        protection for the PW cannot be fully provided by the PSN layer (i.e.
        where the backup PW terminates on a different target PE node than the
        working PW). Additionally, GMPLS provides a well known set of control
        plane driven protection and restoration mechanisms <xref
        target="RFC4872"></xref>. MPLS-TP provides additional protection
        mechanisms that are optimised for both linear topologies and ring
        topologies, and that operate in the absence of a dynamic control
        plane. These are specified in <xref
        target="I-D.ietf-mpls-tp-survive-fwk"></xref>.</t>

        <t>Different protection schemes apply to different deployment
        topologies and operational considerations. Such protection schemes may
        provide different levels of resiliency, for example:</t>

        <t><list style="symbols">
            <t>Two concurrent traffic paths (1+1).</t>

            <t>one active and one standby path with guaranteed bandwidth on
            both paths (1:1).</t>

            <t>one active path and a standby path the resources or which are
            shared by one or more other active paths (shared protection).</t>
          </list></t>

        <t>The applicability of any given scheme to meet specific requirements
        is outside the current scope of this document.</t>

        <t>The characteristics of MPLS-TP resiliency mechanisms are as
        follows:<list style="symbols">
            <t>Optimised for linear, ring or meshed topologies.</t>

            <t>Use OAM mechanisms to detect and localise network faults or
            service degenerations.</t>

            <t>Include protection mechanisms to coordinate and trigger
            protection switching actions in the absence of a dynamic control
            plane. This is known as an Automatic Protection Switching (APS)
            mechanism.</t>

            <t>MPLS-TP recovery schemes are applicable to all levels in the
            MPLS-TP domain (i.e. MPLS section, LSP and PW), providing segment
            and end-to-end recovery.</t>

            <t>MPLS-TP recovery mechanisms support the coordination of
            protection switching at multiple levels to prevent race conditions
            occurring between a client and its server layer.</t>

            <t>MPLS-TP recovery mechanisms can be data plane, control plane or
            management plane based.</t>

            <t>MPLS-TP supports revertive and non-revertive behaviour.</t>
          </list></t>
      </section>

      <section anchor="PST" title="Path Segment Tunnels">
        <t>In order to support the option to monitor, protect and manage a
        portion of an LSP, a new architectural element is defined, Path
        Segment Tunnel (PST). A Path Segment Tunnel is an LSP defined and used
        for the purposes of OAM monitoring, protection or management of LSP
        segment or concatenated LSP segments, and based on MPLS hierarchical
        nested LSP defined in <xref target="RFC3031"></xref>. </t>

        <t>A PST is defined between the edges of the portion of the LSP that
        needs to be monitored, protected or managed. Maintenance messages can
        be initiated at the edge of the PST and sent to the peer edge of the
        PST or to an intermediate point along the PST setting the TTL value at
        the PST level accordingly. </t>

        <t>For example in <xref target="PST-ic"></xref>, three PST are
        configured to allow monitoring, protection and management of the LSP
        concatenated segments. One PST is defined between PE1 and PE2, the
        second between PE2 and PE3 and a third PST is set up between PE3 and
        PE4. Each of these three PST may be monitored, protected, or managed
        independently.</t>

        <t><figure anchor="PST-ic" title="PSTs in inter-carrier network">
            <artwork><![CDATA[========================== End to End LSP =============================

   |<--------- Carrier 1 --------->|       |<----- Carrier 2 ----->|
 
---| PE1 |---| P |---| P |---| PE2 |-------| PE3 |---| P |---| PE4 |---

   |============= PST =============|==PST==|========= PST =========|
              (Carrier 1)                          (Carrier 2)

                    ]]></artwork>
          </figure>The end-to-end traffic of the LSP, including data-traffic
        and control traffic (OAM, PSC, management and signaling messages) is
        tunneled within the PST by means of label stacking as defined in <xref
        target="RFC3031"></xref>.</t>

        <t>The mapping between an LSP and a PST can be 1:1 which is similar to
        the IUT-T Tandem Connection element <xref target="G.805"></xref> which
        defines a sub layer corresponding to a segment of a path and allows
        the monitoring of that segment. The mapping can also be 1:N to allow
        scalable monitoring, protection and management of a set of segments or
        concatenated LSP segments traversing the same portion of a network.
        Figure 2 shows a PST which is used to aggregate a set of concatenated
        LSP segments of the following LSPs: LSP from PEx to PEt and LSP from
        PEa to PEd. Note that such a construction may be useful if the LSPs
        traverse via a common portion of the network and have the same
        constrains, such as the same set of requirements for QoS, etc. </t>

        <t><figure anchor="PST-concat"
            title="PST for a Set of Concatenated LSP Segments">
            <artwork><![CDATA[|PEx|--|PEy|-+                                      +-|PEz|--|PEt|
             |                                      |
             |  |<---------- Carrier 1 --------->|  |     
             |  +-----+   +---+   +---+    +-----+  |
             +--|     |---|   |---|   |----|     |--+
                | PE1 |   | P |   | P |    | PE2 |
             +--|     |---|   |---|   |----|     |--+
             |  +-----+   +---+   + P +    +-----+  |
             |  |============= PST ==============|  |
|PEa|--|PEb|-+            (Carrier 1)               +-|PEc|--|PEd|                            
                    
                    ]]></artwork>
          </figure></t>

        <section title="Provisioning of PST">
          <t>PSTs can be either provisioned statically or using control plane
          signaling procedures. The make-before-break procedures which are
          supported by MPLS allow the creation of a PST on existing LSPs
          in-service without traffic disruption. A PST can be defined
          corresponding to one or more end-to-end tunneled LSPs. New
          end-to-end LSPs which are tunneled within the PST can be setup.
          Traffic of the existing LSPs is switched over to the new end-to-end
          tunneled LSPs. The old end-to-end LSPs can be tore down. </t>
        </section>
      </section>

      <section anchor="NETMGT" title="Network Management">
        <t>The network management architecture and requirements for MPLS-TP
        are specified in <xref target="I-D.ietf-mpls-tp-nm-framework"></xref>
        and <xref target="I-D.ietf-mpls-tp-nm-req"></xref>. These derive from
        the generic specifications described in ITU-T G.7710/Y.1701 <xref
        target="G.7710"></xref> for transport technologies. It also
        incorporates the OAM requirements for MPLS Networks <xref
        target="RFC4377"></xref> and MPLS-TP Networks <xref
        target="I-D.ietf-mpls-tp-oam-requirements"></xref> and expands on
        those requirements to cover the modifications necessary for fault,
        configuration, performance, and security in a transport network.</t>

        <t>The Equipment Management Function (EMF) of an MPLS-TP Network
        Element (NE) (i.e. LSR, LER, PE, S-PE or T-PE) provides the means
        through which a management system manages the NE. The Management
        Communication Channel (MCC), realised by the G-ACh, provides a logical
        operations channel between NEs for transferring Management
        information. For the management interface from a management system to
        an MPLS-TP NE, there is no restriction on which management protocol is
        used. The MCC is used to provision and manage an end-to-end connection
        across a network where some segments are created/managed by, for
        example, Netconf or SNMP and other segments by XML or CORBA
        interfaces. Maintenance operations are run on a connection (LSP or PW)
        in a manner that is independent of the provisioning mechanism. An
        MPLS-TP NE is not required to offer more than one standard management
        interface. In MPLS-TP, the EMF must be capable of statically
        provisioning LSPs for an LSR or LER, and PWs for a PE, as well as any
        associated MEPs and MIPs, as per <xref target="static"></xref>.</t>

        <t>Fault Management (FM) functions within the EMF of an MPLS-TP NE
        enable the supervision, detection, validation, isolation, correction,
        and alarm handling of abnormal conditions in the MPLS-TP network and
        its environment. FM must provide for the supervision of transmission
        (such as continuity, connectivity, etc.), software processing,
        hardware, and environment. Alarm handling includes alarm severity
        assignment, alarm suppression/aggregation/correlation, alarm reporting
        control, and alarm reporting.</t>

        <t>Configuration Management (CM) provides functions to control,
        identify, collect data from, and provide data to MPLS-TP NEs. In
        addition to general configuration for hardware, software protection
        switching, alarm reporting control, and date/time setting, the EMF of
        the MPLS-TP NE also supports the configuration of maintenance entity
        identifiers (such as MEP ID and MIP ID). The EMF also supports the
        configuration of OAM parameters as a part of connectivity management
        to meet specific operational requirements. These may specify whether
        the operational mode is one-time on-demand or is periodic at a
        specified frequency.</t>

        <t>The Performance Management (PM) functions within the EMF of an
        MPLS-TP NE support the evaluation and reporting of the behaviour of
        the NEs and the network. One particular requirement for PM is to
        provide coherent and consistent interpretation of the network
        behaviour in a hybrid network that uses multiple transport
        technologies. Packet loss measurement and delay measurements may be
        collected and used to detect performance degradation. This is reported
        via fault management to enable corrective actions to be taken (e.g.
        protection switching), and via performance monitoring for Service
        Level Agreement (SLA) verification and billing. Collection mechanisms
        for performance data should be capable of operating on-demand or
        pro-actively.</t>
      </section>
    </section>

    <section title="Security Considerations">
      <t>The introduction of MPLS-TP into transport networks means that the
      security considerations applicable to both MPLS and PWE3 apply to those
      transport networks. Furthermore, when general MPLS networks that utilise
      functionality outside of the strict MPLS Transport Profile are used to
      support packet transport services, the security considerations of that
      additional functionality also apply.</t>

      <t>For pseudowires, the security considerations of <xref
      target="RFC3985"></xref> and <xref target="RFC5659"></xref> apply.</t>

      <t>Packets that arrive on an interface with a given label value should
      not be forwarded unless that label value is assigned to an LSP or PW to
      a peer LSR or PE that is reachable via that interface.</t>

      <t>Each MPLS-TP solution must specify the additional security
      considerations that apply.</t>
    </section>

    <section title="IANA Considerations">
      <t>IANA considerations resulting from specific elements of MPLS-TP
      functionality will be detailed in the documents specifying that
      functionality.</t>

      <t>This document introduces no additional IANA considerations in
      itself.</t>
    </section>

    <section title="Acknowledgements">
      <t>The editors wish to thank the following for their contribution to
      this document: <list style="symbols">
          <t>Rahul Aggarwal</t>

          <t>Dieter Beller</t>

          <t>Malcolm Betts</t>

          <t>Italo Busi</t>

          <t>John E Drake</t>

          <t>Hing-Kam Lam</t>

          <t>Marc Lasserre</t>

          <t>Vincenzo Sestito</t>

          <t>Nurit Sprecher</t>

          <t>Martin Vigoureux</t>

          <t>Yaacov Weingarten</t>

          <t>The participants of ITU-T SG15</t>
        </list></t>
    </section>

    <section title="Open Issues">
      <t>This section contains a list of issues that must be resolved before
      last call.</t>

      <t><list style="symbols">
          <t>There is some text missing from the network layer clients
          section. Text is invited covering the use of out of band signaling
          associated with the AC.</t>

          <t>Need text to address how the LSR next hop MAC address is
          determined for Ethernet link layers when no IP (i.e. ARP) is
          available. If statically configured, what is the default? 181209:
          this will be addressed in the normative data plane draft</t>

          <t>Need to add section (Appendix) describing stack optizations for
          LSP and PWs</t>

          <t>Add a section clarify what options are used for interdomain
          operation e.g. inter-AS TE LSPs, MS-PW, LSP stitching, back-to-back
          ACs</t>

          <t>Text reduction for the OAM, survivability and NM sections.</t>

          <t>Include summarised PST text</t>
        </list></t>
    </section>
  </middle>

  <back>
    <references title="Normative References">
      <?rfc include='reference.RFC.3031'?>

      <?rfc include='reference.RFC.3032'?>

      <?rfc include='reference.RFC.3270'?>

      <?rfc include='reference.RFC.3985'?>

      <?rfc include='reference.RFC.4385'?>

      <?rfc include='reference.RFC.4090'?>

      <?rfc include='reference.RFC.4203'?>

      <?rfc include='reference.RFC.4447'?>

      <?rfc include='reference.RFC.4872'?>

      <?rfc include='reference.RFC.5085'?>

      <?rfc include='reference.RFC.5586'?>

      <?rfc include='reference.RFC.5462'?>

      <?rfc include='reference.RFC.3471'?>

      <?rfc include='reference.RFC.5307'?>

      <?rfc include='reference.RFC.3473'?>

      <reference anchor="G.7710">
        <front>
          <title>ITU-T Recommendation G.7710/Y.1701 (07/07), "Common equipment
          management function requirements"</title>

          <author>
            <organization></organization>
          </author>

          <date year="2005" />
        </front>
      </reference>

      <reference anchor="G.805">
        <front>
          <title>ITU-T Recommendation G.805 (11/95), "Generic Functional
          Architecture of Transport Networks"</title>

          <author>
            <organization></organization>
          </author>

          <date month="November" year="1995" />
        </front>
      </reference>
    </references>

    <references title="Informative References">
      <?rfc include='reference.RFC.4377'?>

      <?rfc include='reference.I-D.ietf-pwe3-redundancy'?>

      <?rfc include='reference.RFC.5659'?>

      <?rfc include='reference.RFC.5654'?>

      <?rfc include='reference.I-D.ietf-mpls-tp-oam-requirements'?>

      <?rfc include='reference.I-D.ietf-mpls-tp-nm-req'?>

      <?rfc include='reference.I-D.ietf-mpls-tp-nm-framework'?>

      <?rfc include='reference.RFC.4379'?>

      <?rfc include='reference.I-D.ietf-bfd-mpls'?>

      <?rfc include='reference.RFC.5146'?>

      <?rfc include='reference.I-D.ietf-mpls-tp-survive-fwk'?>

      <?rfc include='reference.I-D.ietf-mpls-tp-oam-framework'?>

      <?rfc include='reference.I-D.ietf-pwe3-dynamic-ms-pw'?>

      <?rfc include='reference.I-D.ietf-pwe3-segmented-pw'?>

      <?rfc ?>

      <?rfc include='reference.I-D.ietf-l2vpn-vpms-frmwk-requirements'?>

      <?rfc ?>

      <?rfc include='reference.RFC.4664'?>

      <?rfc include='reference.RFC.5254'?>

      <?rfc ?>

      <?rfc ?>

      <?rfc ?>

      <?rfc ?>

      <?rfc include='reference.RFC.5309'?>

      <?rfc include='reference.RFC.5331'?>

      <?rfc include='reference.RFC.3945'?>

      <?rfc include='reference.RFC.3443'?>

      <?rfc include='reference.I-D.ietf-mpls-tp-identifiers'?>
    </references>
  </back>
</rfc>
