





GEOPRIV Working Group                                            J. Polk
INTERNET-DRAFT                                             Cisco Systems
Obsoletes: 3825 (if approved)                              J. Schnizlein
Category: Standards Track                                           ISOC
Expires: June 21, 2010                                        M. Linsner
17 December 2009                                           Cisco Systems
                                                              M. Thomson
                                                                  Andrew
                                                           B. Aboba (ed)
                                                   Microsoft Corporation

            Dynamic Host Configuration Protocol Options for
          Coordinate-based Location Configuration Information

                  draft-ietf-geopriv-rfc3825bis-04.txt

Status of This Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.  This document may contain material
   from IETF Documents or IETF Contributions published or made publicly
   available before November 10, 2008.  The person(s) controlling the
   copyright in some of this material may not have granted the IETF
   Trust the right to allow modifications of such material outside the
   IETF Standards Process.  Without obtaining an adequate license from
   the person(s) controlling the copyright in such materials, this
   document may not be modified outside the IETF Standards Process, and
   derivative works of it may not be created outside the IETF Standards
   Process, except to format it for publication as an RFC or to
   translate it into languages other than English.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on June 21, 2010.



Polk, et al.                 Standards Track                    [Page 1]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

Abstract

   This document specifies Dynamic Host Configuration Protocol Options
   (both DHCPv4 and DHCPv6) for the coordinate-based geographic location
   of the client.  The Location Configuration Information (LCI) includes
   latitude, longitude, and altitude, with resolution or uncertainty
   indicators for each.  Separate parameters indicate the reference
   datum for each of these values.

Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
       1.1.  Conventions  . . . . . . . . . . . . . . . . . . . . . .  3
       1.2   Resolution and Uncertainty . . . . . . . . . . . . . . .  4
   2.  DHCP Option Format . . . . . . . . . . . . . . . . . . . . . .  4
       2.1   DHCPv6 Option  . . . . . . . . . . . . . . . . . . . . .  5
       2.2   DHCPv4 Option  . . . . . . . . . . . . . . . . . . . . .  6
       2.3   Latitude and Longitude Fields  . . . . . . . . . . . . .  8
       2.4   Altitude . . . . . . . . . . . . . . . . . . . . . . . . 11
       2.5   Datum  . . . . . . . . . . . . . . . . . . . . . . . . . 12
   3.  Security Considerations. . . . . . . . . . . . . . . . . . . . 13
   4.  IANA Considerations. . . . . . . . . . . . . . . . . . . . . . 14
   5.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 15
   6.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 15
       6.1.  Normative References . . . . . . . . . . . . . . . . . . 15
       6.2.  Informational References . . . . . . . . . . . . . . . . 15
   Appendix A. Calculations of Resolution . . . . . . . . . . . . . . 16
       A.1.  LCI of "White House" (Example 1) . . . . . . . . . . . . 16
       A.2.  LCI of "Sears Tower" (Example 2) . . . . . . . . . . . . 19
   Appendix B. Calculations of Uncertainty  . . . . . . . . . . . . . 20
       B.1   LCI of "Sydney Opera House" (Example 3)  . . . . . . . . 20
   Appendix C. Changes from RFC 3825  . . . . . . . . . . . . . . . . 24
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 25







Polk, et al.                 Standards Track                    [Page 2]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


1.  Introduction

   The physical location of a network device has a range of
   applications.  In particular, emergency telephony applications rely
   on knowing the location of a caller in order to determine the correct
   emergency center.

   The location of a device can be represented either in terms of
   geospatial (or geodetic) coordinates, or as a civic address.
   Different applications may be more suited to one form of location
   information; therefore, both the geodetic and civic forms may be used
   simultaneously.

   This document specifies Dynamic Host Configuration Protocol (DHCPv4)
   [RFC2131] and DHCPv6 [RFC3315]) options for the coordinate-based
   geographic location of the client, to be provided by the server.
   "Dynamic Host Configuration Protocol (DHCPv4 and DHCPv6) Option for
   Civic Addresses Configuration Information" [RFC4776] specifies DHCP
   options for civic addresses.

   The geodetic coordinate options defined in this document and the
   civic address options defined in [RFC4776] enable a DHCP client to
   obtain its location.  For example, a wired Ethernet host might use
   these options for location determination.  In this case, the location
   information could be derived from a wiremap by the DHCP server, using
   the Circuit-ID Relay Agent Information Option (RAIO) defined (as Sub-
   Option 1) in RFC 3046 [RFC3046].  The DHCP server could correlate the
   Circuit-ID with the geographic location where the identified circuit
   terminates (such as the location of the wall jack).

   The options defined in this document have limited applicability for
   mobile hosts.  Typically DHCP clients refresh their configuration in
   response to changes in interface state or pending lease expirations.
   As a result, when a mobile host changes location without subsequently
   completing another DHCP exchange, location configuration information
   initially obtained via DHCP could become outdated.

   An important feature of this specification is that after the relevant
   DHCP exchanges have taken place, the location information is stored
   on the end device rather than somewhere else, where retrieving it
   might be difficult in practice.

1.1.  Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].




Polk, et al.                 Standards Track                    [Page 3]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


1.2.  Resolution and Uncertainty

   The DHCP options defined in this document include fields quantifying
   the resolution or uncertainty associated with a target location.  No
   inferences relating to privacy policies can be drawn from either
   uncertainty or resolution values.

   As utilized in this document, resolution refers to the accuracy of a
   reported location, as expressed by the number of valid bits in each
   of the Latitude, Longitude and Altitude fields.

   In the context of location technology, uncertainty is a
   quantification of errors.  Any method for determining location is
   subject to some sources of error; uncertainty describes the amount of
   error that is present.  Uncertainty might be the coverage area of a
   wireless transmitter, the extent of a building or a single room.

   Uncertainty is usually represented as an area within which the target
   is located.  In this document, each of the three axes can be assigned
   an uncertainty value.  In effect, this describes a rectangular prism.

   When representing locations from sources that can quantify
   uncertainty, the goal is to find the smallest possible rectangular
   prism that this format can describe.  This is achieved by taking the
   minimum and maximum values on each axis and ensuring that the final
   encoding covers these points.  This increases the region of
   uncertainty, but ensures that the region that is described
   encompasses the target location.

   The DHCPv4 option format defined in this document supports both
   resolution and uncertainty parameters.  Version 0 of the DHCPv4
   option format defined in this document includes a resolution
   parameter for each of the dimensions of location.  Since this
   resolution parameter need not apply to all dimensions equally, a
   resolution value is included for each of the 3 location elements.
   The DHCPv6 option format as well as version 1 of the DHCPv4 option
   format utilizes an uncertainty parameter.  Appendix A of this
   document provides examples showing the calculation of resolution
   values.  Appendix B provides an example demonstrating calculation of
   uncertainty values.

2.  DHCP Option Format

   This section defines the format for the DHCPv4 and DHCPv6 options.
   These options utilize a similar format, differing primarily in the
   option code.





Polk, et al.                 Standards Track                    [Page 4]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


2.1.  DHCPv6 Option

   The DHCPv6 [RFC3315] option format is as follows:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Option Code (TBD)       |          OptLen (16)          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  LatUnc   |                  Latitude                         +
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Lat (cont'd)  |  LongUnc  |               Longitude           +
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Longitude (cont'd)         |   AT  |   AltUnc  |  Altitude +
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |               Altitude (cont'd)               |     Datum     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Code:  GEOCONF_GEODETIC (8 bits).

   OptLen:  Option Length (8 bits).  This option is fixed size, the
            value of this octet will always be 16.

   LatUnc:  Latitude Uncertainty (6 bits).

   Latitude:  Latitude (34 bits).

   LongUnc:  Longitude Uncertainty (6 bits).

   Longitude:  Longitude (34 bits).

   AType:  Altitude Type (4 bits).

   AltUnc:  Altitude Uncertainty (6 bits).

   Altitude:  Altitude (30 bits).

   Datum:  Datum (8 bits).













Polk, et al.                 Standards Track                    [Page 5]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


2.2.  DHCPv4 Option

   The DHCPv4 option format is as follows:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   Code 123    |    Length     |   LatUnc  |     Latitude      +
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                Latitude (cont'd)              |  LongUnc  |   +
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             Longitude                         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | AType |   AltUnc  |                Altitude                   +
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Alt.(cont'd)  |Ver| Res |Datum|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Code:      8 bits.  The code for the DHCPv4 option (123).

   Length:    8 bits.  The length of the DHCPv4 option, in octets.
              For versions 0 and 1, the option length is 16.

   LatUnc:    6 bits.  When the Ver field = 0, this field represents
              Latitude resolution.  When the Ver field = 1,
              this field represents Latitude uncertainty.

   Latitude:  a 34 bit fixed point value consisting of 9 bits of
              integer and 25 bits of fraction.  Latitude SHOULD be
              normalized to within +/- 90 degrees.  Positive numbers
              are north of the equator and negative numbers are south
              of the equator.

   LongUnc:   6 bits.  When the Ver field = 0, this field represents
              Longitude resolution.  When the Ver field = 1,
              this field represents Longitude uncertainty.

   Longitude: a 34 bit fixed point value consisting of 9 bits of
              integer and 25 bits of fraction.  Longitude SHOULD be
              normalized to within +/- 180 degrees.  Positive values
              are East of the prime meridian and negative
              (2s complement) numbers are West of the prime meridian.

   AType:     Altitude Type (4 bits).

   AltUnc:    6 bits.  When the Ver field = 0, this field represents
              Altitude resolution.  When the Ver field = 1,
              this field represents Altitude uncertainty.



Polk, et al.                 Standards Track                    [Page 6]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


   Altitude:  A 30 bit value defined by the AType field.

   Ver:       The Ver field is two bits, providing for four potential
              versions.  This specification defines the behavior of
              version 0 (originally specified in [RFC3825]) as well as
              version 1.  The Ver field is always located at the same
              offset from the beginning of the option, regardless of
              the version in use.

   Res:       The Res field which is 3 bits, is reserved.  These bits
              have been used by [IEEE-802.11y], but are not defined
              within this specification.

   Datum:     3 bits.  The Map Datum used for the coordinates given in
              this Option.

2.2.1.  Version Support

2.2.1.1.  Client Version Support

   DHCPv4 clients implementing this specification MUST support receiving
   responses of versions 0 and 1.  Since this specification utilizes the
   same DHCPv4 option code as [RFC3825], the option format does not
   provide a means for the client to indicate the highest version that
   it supports to the server.

2.2.1.2.  Server Version Selection

   A DHCPv4 server that provides location information cannot provide
   options with both version 0 and version 1 formats in the same
   response.  This is not useful since receiving two copies of the same
   Option (either in the same response or a separate response) causes a
   DHCPv4 client to replace the information in the old Option with the
   information in the new Option.

   A server uses configuration to determine which version to send in a
   response.  For example, where a mixture of version 0 and version 1
   clients are expected, the server could be configured to send version
   0 or version 1 depending on configuration (possibly making the choice
   based on information such as the client MAC address).  Where few
   version 0 clients are expected, the server could be configured to
   send only version 1 responses.  Version 0 options will provide
   resolution, while version 1 options will provide an area of
   uncertainty.

   An RFC 3825 DHCPv4 client that receives a version 1 option, as
   defined in this document, will either reject the Option or will not
   understand the additions to the Datum field and will misinterpret the



Polk, et al.                 Standards Track                    [Page 7]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


   LongUnc, LatUnc, and AltUnc values.  If the RFC 3825 DHCPv4 client
   does not reject the option and utilizes the location data it will
   most likely assume a datum and interpret the LongUnc/LatUnc/AltUnc
   values as significant digits and apply them to the Latitude,
   Longitude, and Altitude values.  The resultant location value will be
   in error up to a full degree of latitude and longitude, and a full
   increment of altitude.  This results in a version 0-only client
   either not obtaining location information (with no ability to
   indicate to the server that version 1 was unsupported), or
   misinterpreting the option.

   Therefore, in situations where some DHCPv4 clients are known to
   support only version 0, by default the DHCPv4 server SHOULD send a
   version 0 response.  It is also RECOMMENDED that DHCPv4 client
   implementations support version 1, so the versioning capability added
   by this document does not cause errors interpreting the latitude,
   longitude and altitude values.

   Moving forward, clients not understanding a datum value MUST assume a
   World Geodesic System 1984 (WGS84) [WGS84] datum (EPSG [EPSG] 4326 or
   4979, depending on whether there is an altitude value present) and
   proceed accordingly.  Assuming that a less accurate location value is
   better than none, this ensures that some (perhaps less accurate)
   location is available to the client.

2.3.  Latitude and Longitude Fields

   The Latitude and Longitude values in this specification are encoded
   as 34 bit, twos complement, fixed point values with 9 integer bits
   and 25 fractional bits.  The exact meaning of these values is
   determined by the datum; the description in this section applies to
   the datums defined in this document.

   New datums MUST define the way that the 34 bit values and the
   respective 6 bit uncertainties are interpreted.  This document uses
   the same definition for all datums it specifies.

   Latitude values MUST be constrained to the range from -90 to +90
   degrees.  Positive latitudes are north of the equator; negative
   latitude are south of the equator.

   Longitude values SHOULD be normalized to the range from -180 to +180
   degrees.  Values outside this range are normalized by adding or
   subtracting 360 until they fall within this range.  Positive
   longitudes are east of the Prime Meridian (Greenwich); negative
   longitudes are west of the Prime Meridian.

   When encoding, latitude and longitude values are rounded to the



Polk, et al.                 Standards Track                    [Page 8]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


   nearest 34-bit binary representation.  This imprecision is considered
   acceptable for the purposes to which this form is intended to be
   applied and is ignored when decoding.

2.3.1.  Latitude and Longitude Resolution

   In the version 0 DHCPv4 Option, the Latitude, Longitude and Altitude
   fields are each preceded by an accuracy sub-field of 6 bits,
   indicating the number of bits of resolution.  The resolution sub-
   fields accommodate the desire to easily adjust the precision of a
   reported location.  Contents beyond the claimed resolution MAY be
   randomized to obscure greater precision that might be available.

   When encoded within the version 0 DHCPv4 Option, the LatUnc value
   encodes the number of high-order Latitude bits that should be
   considered valid.  Any bits entered to the right of this limit should
   not be considered valid and might be purposely false, or zeroed by
   the sender.  The examples in Appendix A illustrate that a smaller
   value in the resolution field increases the area within which the
   device is located.  A value of 2 in the LatUnc field indicates a
   precision of no greater than 1/6th that of the globe (see the first
   example of Appendix A).  A value of 34 in the LatUnc field indicates
   a precision of about 3.11 mm in Latitude at the equator.

   When encoded within the version 0 DHCPv4 Option, the LongUnc value
   encodes the number of high-order Longitude bits that should be
   considered valid.  Any bits entered to the right of this limit should
   not be considered valid and might be purposely false, or zeroed by
   the sender.  A value of 2 in the LongUnc field indicates precision of
   no greater than 1/6th that of the globe (see the first example of
   Appendix A).  A value of 34 in the LongUnc field indicates a
   precision of about 2.42 mm in longitude (at the equator).  Because
   lines of longitude converge at the poles, the distance is smaller
   (better precision) for locations away from the equator.

2.3.2.  Latitude and Longitude Uncertainty

   The latitude and longitude uncertainty fields are encoded as 6 bit,
   unsigned integer values.  These values quantify the amount of
   uncertainty in each of the latitude and longitude values
   respectively.  A value of 0 is reserved to indicate that the
   uncertainty is unknown; values greater than 34 are reserved.

   A point within the region of uncertainty is selected to be the
   encoded point; the centroid of the region is often an appropriate
   choice.  The value for uncertainty is taken as the distance from the
   selected point to the furthest extreme of the region of uncertainty
   on that axis.



Polk, et al.                 Standards Track                    [Page 9]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


   The following figure shows a two-dimensional figure that is projected
   to each axis.  In the figure, "X" marks the point that is selected;
   the ranges marked with "U" is the uncertainty.

        ___          ___________
        ^ |         /           |
        | |        /            |
        | |       /             |
        U |      /              |
        | |     (               |
        V |     |               |
        --X     |         X     |
          |     |               `---------.
          |     |                         |
          |     |                         |
          |     |                         |
          -     `-------------------------'

                |---------X---------------|
                          |<------U------>|

   Uncertainty applies to each axis independently.

   The amount of uncertainty can be determined from the encoding by
   taking 2 to the power of 8, less the encoded value.  As is shown in
   the following formula, where "x" is the encoded integer value:

          uncertainty = 2 ^ ( 8 - x )

   The result of this formula is expressed in degrees of latitude or
   longitude.  The uncertainty is added to the base latitude or
   longitude value to determine the maximum value in the uncertainty
   range; similarly, the uncertainty is subtracted from the base value
   to determine the minimum value.  Note that because lines of longitude
   converge at the poles, the actual distance represented by this
   uncertainty changes with the distance from the equator.

   If the maximum or minimum latitude values derived from applying
   uncertainty are outside the range of -90 to +90, these values are
   trimmed to within this range.  If the maximum or minimum longitude
   values derived from applying uncertainty are outside the range of
   -180 to +180, then these values are normalized to this range by
   adding or subtracting 360 as necessary.

   The encoded value is determined by subtracting the next highest whole
   integer value for the base 2 logarithm of uncertainty from 8.  As is
   shown by the following formula, where uncertainty is the midpoint of
   the known range less the lower bound of that range:



Polk, et al.                 Standards Track                   [Page 10]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


          x = 8 - ceil( log2( uncertainty ) )

   Note that the result of encoding this value increases the range of
   uncertainty to the next available power of two; subsequent repeated
   encodings and decodings do not change the value.  Only increasing
   uncertainty means that the associated confidence does not have to
   decrease.

2.4.  Altitude

   The altitude is expressed as a 30 bit, fixed point, twos complement
   integer with 22 integer bits and 8 fractional bits.  How the altitude
   value is interpreted depends on the type of altitude and the selected
   datum.

   New altitude types and datums MUST define the way that the 30 bit
   value and the associated 6 bit uncertainty are interpreted.

   Three altitude types are defined in this document: unknown (0),
   meters (1) and floors (2).  Additional altitude types MUST be defined
   in a Standards Track RFC.

2.4.1.  No Known Altitude (AT = 0)

   In some cases, the altitude of the location might not be provided. An
   altitude type of 0 indicates that the altitude is not given to the
   client.  In this case, the altitude and altitude uncertainty fields
   can contain any value and MUST be ignored.

2.4.2.  Altitude in Meters (AT = 1)

   If the altitude type has a value of 1, the altitude is measured in
   meters.  The altitude is measured in relation to the zero set by the
   vertical datum.

2.4.3.  Altitude in Floors (AT = 2)

   A value of 2 for altitude type indicates that the altitude value is
   measured in floors.  This value is relevant only in relation to a
   building; the value is relative to the ground level of the building.
   In this definition, numbering starts at ground level, which is floor
   0 regardless of local convention.

   Non-integer values can be used to represent intermediate or sub-
   floors, such as mezzanine levels.  For instance, a mezzanine between
   floors 4 and 5 could be represented as 4.1.





Polk, et al.                 Standards Track                   [Page 11]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


2.4.4.  Altitude Resolution

   When encoded within the version 0 DHCPv4 Option, the AltUnc value
   encodes the number of high-order Altitude bits that should be
   considered valid.  Values above 30 (decimal) are undefined and
   reserved.

   If AT = 1, an AltUnc value 0.0 would indicate unknown altitude.  The
   most precise Altitude would have an AltUnc value of 30.  Many values
   of AltUnc would obscure any variation due to vertical datum
   differences.

   The AltUnc field SHOULD be set to maximum precision when AT = 2
   (floors) when a floor value is included in the DHCP Reply, or when AT
   = 0, to denote that the floor isn't known.  An altitude coded as AT =
   2, AltRes = 30, and Altitude = 0.0 is meaningful even outside a
   building, and represents ground level at the given latitude and
   longitude.

2.4.5.  Altitude Uncertainty

   Altitude uncertainty uses the same form of expression as latitude and
   longitude uncertainty.  Like latitude and longitude, a value of 0 is
   reserved to indicate that uncertainty is not known; values above 30
   are also reserved.  Altitude uncertainty only applies to altitude
   type 1.

   The amount of altitude uncertainty can be determined by the following
   formula, where x is the encoded integer value:

          uncertainty = 2 ^ ( 21 - x )

   This value uses the same units as the associated altitude.

   Similarly, a value for the encoded integer value can be derived by
   the following formula:

         x = 21 - ceil( log2( x ) )

2.5.  Datum

   The datum field determines how coordinates are organized and related
   to the real world.  Three datums are defined in this document, based
   on the definitions in [OGP.Geodesy]:

   1: WGS84 (Latitude, Longitude, Altitude):
      The World Geodesic System 1984 [WGS84] coordinate reference
      system.



Polk, et al.                 Standards Track                   [Page 12]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


      This datum is identified by the European Petroleum Survey Group
      (EPSG)/International Association of Oil & Gas Producers (OGP) with
      the code 4979, or by the URN "urn:ogc:def:crs:EPSG::4979".
      Without altitude, this datum is identified by the EPSG/OGP code
      4326 and the URN "urn:ogc:def:crs:EPSG::4326".

   2: NAD83 (Latitude, Longitude) + NAVD88:
      This datum uses a combination of the North American Datum 1983
      (NAD83) for horizontal (latitude and longitude) values, plus the
      North American Vertical Datum of 1988 (NAVD88) vertical datum.

      This datum is used for referencing location on land (not near
      tidal water) within North America.

      NAD83 is identified by the EPSG/OGP code of 4269, or the URN
      "urn:ogc:def:crs:EPSG::4269".  NAVD88 is identified by the EPSG/
      OGP code of 5703, or the URN "urn:ogc:def:crs:EPSG::5703".

   3: NAD83 (Latitude, Longitude) + MLLW:
      This datum uses a combination of the North American Datum 1983
      (NAD83) for horizontal (latitude and longitude) values, plus the
      Mean Lower Low Water (MLLW) vertical datum.

      This datum is used for referencing location on or near tidal water
      within North America.

      NAD83 is identified by the EPSG/OGP code of 4269, or the URN
      "urn:ogc:def:crs:EPSG::4269".  MLLW does not have a specific code
      or URN.

   All hosts MUST support the WGS84 datum (Datum 1).

   New datum codes can be registered in the IANA registry (Section 4) by
   a Standards Track RFC.

3.  Security Considerations

   Where critical decisions might be based on the value of this GeoConf
   option, DHCP authentication as defined in "Authentication for DHCP
   Messages" [RFC3118] and "Dynamic Host Configuration Protocol for IPv6
   (DHCPv6)" [RFC3315] SHOULD be used to protect the integrity of the
   DHCP options.

   Since there is no privacy protection for DHCP messages, an
   eavesdropper who can monitor the link between the DHCP server and
   requesting client can discover this LCI.

   To minimize the unintended exposure of location information, the LCI



Polk, et al.                 Standards Track                   [Page 13]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


   option SHOULD be returned by DHCP servers only when the DHCP client
   has included this option in its 'parameter request list' (section 3.5
   [RFC2131]).

   When implementing a DHCP server that will serve clients across an
   uncontrolled network, one should consider the potential security
   risks.

4.  IANA Considerations

   IANA has assigned a DHCPv4 option code of 123 for the GeoConf option
   defined in this document.  Assignment of a DHCPv6 option code is
   requested.

   The GeoConf Option defines two fields for which IANA maintains a
   registry: The Altitude (AT) field and the Datum field (see Section
   2).  The datum indicator MUST include specification of both
   horizontal and vertical datum.  New values for the Altitude (AT)
   field are assigned through "Standards Action" [RFC5226].  The initial
   values of the Altitude registry are as follows:

   AT = 1  meters of Altitude defined by the vertical datum specified.

   AT = 2  building Floors of Altitude.

   Datum = 1 denotes the vertical datum WGS 84 as defined by the EPSG as
           their CRS Code 4327; CRS Code 4327 also specifies WGS 84 as
           the vertical datum

   Datum = 2 denotes the vertical datum NAD83 as defined by the EPSG as
           their CRS Code 4269; North American Vertical Datum of 1988
           (NAVD88) is the associated vertical datum for NAD83

   Datum = 3 denotes the vertical datum NAD83 as defined by the EPSG as
           their CRS Code 4269; Mean Lower Low Water (MLLW) is the
           associated vertical datum for NAD83

   Any additional LCI datum(s) to be defined for use via the DHCPv4 or
   DHCPv6 Options defined in this document MUST be done through a
   Standards Track RFC.

   This document defines the Ver field for the DHCPv4 Option, with
   values as follows:

   0: Implementations conforming to [RFC3825]
   1: Implementations of this specification

   Any additional Ver field values to be defined for use with the DHCPv4



Polk, et al.                 Standards Track                   [Page 14]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


   Option MUST be done through a Standards Track RFC.

5.  Acknowledgments

   The authors would like to thank Patrik Falstrom, Ralph Droms, Ted
   Hardie, Jon Peterson, and Nadine Abbott for their inputs and
   constructive comments regarding this document.  Additionally, the
   authors would like to thank Greg Troxel for the education on vertical
   datums, as well as Carl Reed.

6.  References

6.1.  Normative References

[EPSG]    European Petroleum Survey Group, http://www.epsg.org/ and
          http://www.epsg-registry.org/

[RFC2119] Bradner, S., "Key words for use in RFCs to Indicate
          Requirement Levels", BCP 14, RFC 2119, March 1997.

[RFC2131] Droms, R., "Dynamic Host Configuration Protocol", RFC 2131,
          March 1997.

[RFC3046] Patrick, M., "DHCP Relay Agent Information Option", RFC 3046,
          January 2001.

[RFC3118] Droms, R. and W. Arbaugh, "Authentication for DHCP Messages",
          RFC 3118, June 2001.

[RFC3315] Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C. and M.
          Carney, "Dynamic Host Configuration Protocol for IPv6
          (DHCPv6)", RFC 3315, July 2003.

[WGS84]   US National Imagery and Mapping Agency, "Department of Defense
          (DoD) World Geodetic System 1984 (WGS 84), Third Edition",
          NIMA TR8350.2, January 2000,
          https://www1.nga.mil/PRODUCTSSERVICES/GEODESYGEOPHYSICS/
          WORLDGEODETICSYSTEM/Pages/default.aspx and
          http://www.ngs.noaa.gov/faq.shtml#WGS84

6.2.  Informational References

[GeoShape]
          Thomson, M. and C. Reed, "GML 3.1.1 PIDF-LO Shape Application
          Schema for use by the Internet Engineering Task Force (IETF)",
          Candidate OpenGIS Implementation Specification 06-142,
          Version: 0.0.9, December 2006.




Polk, et al.                 Standards Track                   [Page 15]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


[IEEE-802.11y]
          Information technology - Telecommunications and information
          exchange between systems - Local and metropolitan area
          networks - Specific requirements - Part 11: Wireless LAN
          Medium Access Control (MAC) and Physical Layer (PHY)
          specifications Amendment 3: 3650-3700 MHz Operation in USA,
          November 2008.

[NENA]    National Emergency Number Association (NENA) www.nena.org NENA
          Technical Information Document on Model Legislation Enhanced
          911 for Multi-Line Telephone Systems.

[RFC3825] Polk, J., Schnizlein, J. and M. Linsner, "Dynamic Host
          Configuration Protocol Option for Coordinate-based Location
          Configuration Information", RFC 3825, July 2004.

[RFC4119] Peterson, J., "A Presence-based GEOPRIV Location Object
          Format", RFC 4119, December 2005.

[RFC4776] Schulzrinne, H., "Dynamic Host Configuration Protocol (DHCPv4
          and DHCPv6) Option for Civic Addresses Configuration
          Information", RFC 4776, November 2006.

[RFC5139] Thomson, M. and J. Winterbottom, "Revised Civic Location
          Format for Presence Information Data Format Location Object
          (PIDF-LO)", RFC 5139, February 2008.

[RFC5226] Narten, T. and H. Alvestrand, "Guidelines for Writing an IANA
          Considerations Section in RFCs", RFC 5226, May 2008.

Appendix A. Calculations of Resolution

   The following examples for two different locations demonstrate how
   the Resolution values for Latitude, Longitude, and Altitude (used
   in the version 0 DHCPv4 option) can be used.  In both examples,
   the geo-location values were derived from maps using the WGS84
   map datum, therefore in these examples, the Datum field would
   have a value = 1 (00000001, or 0x01).

A.1.  Location Configuration Information of "White House" (Example 1)

   The address was NOT picked for any political reason and can easily be
   found on the Internet or mapping software, but was picked as an
   easily identifiable location on our planet.

   Postal Address:
      White House
      1600 Pennsylvania Ave. NW



Polk, et al.                 Standards Track                   [Page 16]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


      Washington, DC 20006

   Standing on the sidewalk, north side of White House, between
   driveways.

      Latitude 38.89868 degrees North (or +38.89868 degrees)
      Using 2s complement, 34 bit fixed point, 25 bit fraction
      Latitude = 0x04dcc1fc8,
      Latitude = 0001001101110011000001111111001000

   Longitude 77.03723 degrees West (or -77.03723 degrees)
      Using 2s complement, 34 bit fixed point, 25 bit fraction
      Longitude = 0xf65ecf031,
      Longitude = 1101100101111011001111000000110001

   Altitude 15

   In this example, we are not inside a structure, therefore we will
   assume an altitude value of 15 meters, interpolated from the US
   Geological survey map, Washington West quadrangle.

      AltUnc = 30, 0x1e, 011110
      AT = 1, 0x01, 000001
      Altitude = 15, 0x0F00, 00000000000000000000000001111100000000

   If: LatUnc is expressed as value 2 (0x02 or 000010) and LongUnc is
       expressed as value 2 (0x02 or 000010), then it would describe a
       geo-location region that is north of the equator and extends from
       -1 degree (west of the meridian) to -128 degrees.  This would
       include the area from approximately 600km south of Saltpond,
       Ghana, due north to the North Pole and approximately 4400km
       south-southwest of Los Angeles, CA due north to the North Pole.
       This would cover an area of about one-sixth of the globe,
       approximately 20 million square nautical miles (nm).

   If: LatUnc is expressed as value 3 (0x03 or 000011) and LongUnc is
       expressed as value 3 (0x03 or 000011), then it would describe a
       geo-location area that is north from the equator to 63 degrees
       north, and -65 degrees to -128 degrees longitude.  This area
       includes south of a line from Anchorage, AL to eastern Nunavut,
       CN, and from the Amazons of northern Brazil to approximately
       4400km south-southwest of Los Angeles, CA.  This area would
       include North America, Central America, and parts of Venezuela
       and Columbia, except portions of Alaska and northern and eastern
       Canada, approximately 10 million square nm.

   If: LatUnc is expressed as value 5 (0x05 or 000101) and LongUnc is
       expressed as value 5 (0x05 or 000101), then it would describe a



Polk, et al.                 Standards Track                   [Page 17]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


       geo-location area that is latitude 32 north of the equator to
       latitude 48 and extends from -64 degrees to -80 degrees
       longitude.  This is approximately an east-west boundary of a time
       zone, an area of approximately 700,000 square nm.

   If: LatUnc is expressed as value 9 (0x09 or 001001) and LongUnc is
       expressed as value 9 (0x09 or 001001), which includes all the
       integer bits, then it would describe a geo-location area that is
       latitude 38 north of the equator to latitude 39 and extends from
       -77 degrees to -78 degrees longitude.  This is an area of
       approximately 9600 square km (111.3km x 86.5km).

   If: LatUnc is expressed as value 18 (0x12 or 010010) and LongUnc is
       expressed as value 18 (0x12 or 010010), then it would describe a
       geo-location area that is latitude 38.8984375 north to latitude
       38.9003906 and extends from -77.0390625 degrees to -77.0371094
       degrees longitude.  This is an area of approximately 36,600
       square meters (169m x 217m).

   If: LatUnc is expressed as value 22 (0x16 or 010110) and LongUnc is
       expressed as value 22 (0x16 or 010110), then it would describe a
       geo-location area that is latitude 38.896816 north to latitude
       38.8985596 and extends from -77.0372314 degrees to -77.0371094
       degrees longitude.  This is an area of approximately 143 square
       meters (10.5m x 13.6m).

   If: LatUnc is expressed as value 28 (0x1c or 011100) and LongUnc is
       expressed as value 28 (0x1c or 011100), then it would describe a
       geo-location area that is latitude 38.8986797 north to latitude
       38.8986816 and extends from -77.0372314 degrees to -77.0372296
       degrees longitude.  This is an area of approximately 339 square
       centimeters (20.9cm x 16.23cm).

   If: LatUnc is expressed as value 30 (0x1e or 011110) and LongUnc is
       expressed as value 30 (0x1e or 011110), then it would describe a
       geo-location area that is latitude 38.8986797 north to latitude
       38.8986802 and extends from -77.0372300 degrees to -77.0372296
       degrees longitude.  This is an area of approximately 19.5 square
       centimeters (50mm x 39mm).

   If: LatUnc is expressed as value 34 (0x22 or 100010) and LongUnc is
       expressed as value 34 (0x22 or 100010), then it would describe a
       geo-location area that is latitude 38.8986800 north to latitude
       38.8986802 and extends from -77.0372300 degrees to -77.0372296
       degrees longitude.  This is an area of approximately 7.5 square
       millimeters (3.11mm x 2.42mm).

   In the (White House) example, the requirement of emergency responders



Polk, et al.                 Standards Track                   [Page 18]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


   in North America via their NENA Model Legislation [NENA] could be met
   by a LatUnc value of 21 and a LongUnc value of 20.  This would yield
   a geo-location that is latitude 38.8984375 north to latitude
   38.8988616 north and longitude -77.0371094 to longitude -77.0375977.
   This is an area of approximately 89 feet by 75 feet or 6669 square
   feet, which is very close to the 7000 square feet requested by NENA.
   In this example, a service provider could enforce that a device send
   a Location Configuration Information with this minimum amount of
   resolution for this particular location when calling emergency
   services.

A.2.  Location Configuration Information of "Sears Tower" (Example 2)

   Postal Address:
      Sears Tower
      103rd Floor
      233 S. Wacker Dr.
      Chicago, IL  60606

   Viewing the Chicago area from the Observation Deck of the Sears
   Tower.

   Latitude 41.87884 degrees North (or +41.87884 degrees)
   Using 2s complement, 34 bit fixed point, 25 bit fraction
   Latitude = 0x053c1f751,
   Latitude = 0001010011110000011111011101010001
   Longitude 87.63602 degrees West (or -87.63602 degrees)
   Using 2s complement, 34 bit fixed point, 25 bit fraction
   Longitude = 0xf50ba5b97,
   Longitude = 1101010000101110100101101110010111

   Altitude 103

   In this example, we are inside a structure, therefore we will assume
   an altitude value of 103 to indicate the floor we are on.  The
   Altitude Type value is 2, indicating floors.  The AltUnc field would
   indicate that all bits in the Altitude field are true, as we want to
   accurately represent the floor of the structure where we are located.

   AltUnc = 30, 0x1e, 011110
   AT = 2, 0x02, 000010
   Altitude = 103, 0x00006700, 000000000000000110011100000000

   For the accuracy of the latitude and longitude, the best information
   available to us was supplied by a generic mapping service that shows
   a single geo-loc for all of the Sears Tower.  Therefore we are going
   to show LatUnc as value 18 (0x12 or 010010) and LongUnc as value 18
   (0x12 or 010010).  This would be describing a geo-location area that



Polk, et al.                 Standards Track                   [Page 19]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


   is latitude 41.8769531 to latitude 41.8789062 and extends from
   -87.6367188 degrees to -87.6347657 degrees longitude.  This is an
   area of approximately 373412 square feet (713.3 ft. x 523.5 ft.).

Appendix B. Calculations of Uncertainty

   The following example demonstrates how Uncertainty values for
   Latitude, Longitude, and Altitude (used in the DHCPv6 Option as
   well as the version 1 DHCPv4 option) can be calculated.

B.1 Location Configuration Information of "Sydney Opera House"
    (Example 3)

   This section describes an example of encoding and decoding the
   geodetic DHCP Option.  The textual results are expressed in GML
   [OGC.GML-3.1.1] form, suitable for inclusion in PIDF-LO [RFC4119].

   These examples all assume a datum of WGS84 (datum = 1) and an
   altitude type of meters (AT = 1).

B.1.1. Encoding a Location into DHCP Geodetic Form

   This example draws a rough polygon around the Sydney Opera House.
   This polygon consists of the following six points:

       33.856625 S, 151.215906 E
       33.856299 S, 151.215343 E
       33.856326 S, 151.214731 E
       33.857533 S, 151.214495 E
       33.857720 S, 151.214613 E
       33.857369 S, 151.215375 E

   The top of the building 67.4 meters above sea level, and a starting
   altitude of 0 meters above the WGS84 geoid is assumed.

   The first step is to determine the range of latitude and longitude
   values.  Latitude ranges from -33.857720 to -33.856299; longitude
   ranges from 151.214495 to 151.215906.

   For this example, the point that is encoded is chosen by finding the
   middle of each range, that is (-33.8570095, 151.2152005).  This is
   encoded as (1110111100010010010011011000001101,
   0100101110011011100010111011000011) in binary, or (3BC49360D,
   12E6E2EC3) in hexadecimal notation (with an extra 2 bits of leading
   padding on each).  Altitude is set at 33.7 meters, which is
   000000000000000010000110110011 (binary) or 000021B3 (hexadecimal).

   The latitude uncertainty is given by inserting the difference between



Polk, et al.                 Standards Track                   [Page 20]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


   the center value and the outer value into the formula from
   Section 2.3.1.  This gives:
        x = 8 - ceil( log2( -33.8570095 - -33.857720 ) )
   The result of this equation is 18, therefore the uncertainty is
   encoded as 010010 in binary.

   Similarly, longitude uncertainty is given by the formula:
        x = 8 - ceil( log2( 151.2152005 - 151.214495 ) )
   The result of this equation is also 18, or 010010 in binary.

   Altitude uncertainty uses the formula from Section 2.4.4:
        x = 21 - ceil( log2( 33.7 - 0 ) )
   The result of this equation is 15, which is encoded as 001111 in
   binary.

   Adding an Altitude Type of 1 (meters) and a Datum of 1 (WGS84), this
   gives the following DHCPv4 form:

        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |   Code (123)  |  OptLen (16)  |  LatUnc   |     Latitude      .
       |0 1 1 1 1 0 1 1|0 0 0 1 0 0 0 0|0 1 0 0 1 0|1 1 1 0 1 1 1 1 0 0.
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       .                Latitude (cont'd)              |  LongUnc  |   .
       .0 1 0 0 1 0 0 1 0 0 1 1 0 1 1 0 0 0 0 0 1 1 0 1|0 1 0 0 1 0|0 1.
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       .                       Longitude (cont'd)                      |
       .0 0 1 0 1 1 1 0 0 1 1 0 1 1 1 0 0 0 1 0 1 1 1 0 1 1 0 0 0 0 1 1|
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | AType |   AltUnc  |                Altitude                   .
       |0 0 0 1|0 0 1 1 1 1|0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1.
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       .  Alt (cont'd) |     Datum     |
       .1 0 1 1 0 0 1 1|0 1 0 0 0 0 0 1|
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   In hexadecimal, this is 7B104BBC 49360D49 2E6E2EC3 13C00021 B341.
   The DHCPv6 form only differs in the code and option length portion.

B.1.2. Decoding a Location from DHCP Geodetic Form

   If receiving the binary form created in the previous section, this
   section describes how that would be interpreted.  The result is then
   represented as a GML object, as defined in [GeoShape].

   A latitude value of 1110111100010010010011011000001101 decodes to a
   value of -33.8570095003 (to 10 decimal places).  The longitude value



Polk, et al.                 Standards Track                   [Page 21]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


   of 0100101110011011100010111011000011 decodes to 151.2152005136.

   Decoding Tip:  If the raw values of latitude and longitude are placed
      in integer variables, the actual value can be derived by the
      following process:

      1.  If the highest order bit is set (i.e. the number is a twos
          complement negative), then subtract 2 to the power of 34 (the
          total number of bits).

      2.  Divide the result by 2 to the power of 25 (the number of
          fractional bits) to determine the final value.

      The same principle can be applied when decoding altitude values,
      except with different powers of 2 (30 and 8 respectively).

   The latitude and longitude uncertainty are both 18, which gives an
   uncertainty value using the formula from Section 2.3.1 of
   0.0009765625.  Therefore, the decoded latitudes is -33.8570095003 +/-
   0.0009765625 (or the range from -33.8579860628 to -33.8560329378) and
   the decoded longitude is 151.2152005136 +/- 0.0009765625 (or the
   range from 151.2142239511 to 151.2161770761).

   The encoded altitude of 000000000000000010000110110011 decodes to
   33.69921875.  The encoded uncertainty of 15 gives a value of 64,
   therefore the final uncertainty is 33.69921875 +/- 64 (or the range
   from -30.30078125 to 97.69921875).

B.1.2.1. GML Representation of Decoded Locations

   The GML representation of a decoded DHCP option depends on what
   fields are specified.  Uncertainty can be omitted from all of the
   respective fields, and altitude can also be absent.

   In the absence of uncertainty information, the value decoded from the
   DHCP form can be expressed as a single point.  If the point includes
   altitude, it uses a three dimensional CRS, otherwise it uses a two
   dimensional CRS.

   The following GML shows the value decoded in the previous example as
   a point in a three dimensional CRS:

       <gml:Point srsName="urn:ogc:def:crs:EPSG::4979"
                  xmlns:gml="http://www.opengis.net/gml">
         <gml:pos>-33.8570095003 151.2152005136 33.69921875</gml:pos>
       </gml:Point>

   If all fields are included along with uncertainty, the shape



Polk, et al.                 Standards Track                   [Page 22]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


   described is a rectangular prism.  Note that this is necessary given
   that uncertainty for each axis is provided idependently.

   The following example uses all of the decoded information from the
   previous example:

     <gs:Prism srsName="urn:ogc:def:crs:EPSG::4979"
         xmlns:gs="http://www.opengis.net/pidflo/1.0"
         xmlns:gml="http://www.opengis.net/gml">
       <gs:base>
         <gml:Polygon>
           <gml:exterior>
             <gml:LinearRing>
               <gml:posList>
                 -33.8579860628 151.2142239511 -30.30078125
                 -33.8579860628 151.2161770761 -30.30078125
                 -33.8560329378 151.2161770761 -30.30078125
                 -33.8560329378 151.2142239511 -30.30078125
                 -33.8579860628 151.2142239511 -30.30078125
               </gml:posList>
             </gml:LinearRing>
           </gml:exterior>
         </gml:Polygon>
       </gs:base>
       <gs:height uom="urn:ogc:def:uom:EPSG::9001">
         128
       </gs:height>
     </gs:Prism>

   Note that this representation is only appropriate if the uncertainty
   is sufficiently small.  [GeoShape] recommends that distances between
   polygon vertices be kept short.  A GML representation like this one
   is only appropriate where uncertainty is less than 1 degree (an
   encoded value of 9 or greater).

   If altitude or altitude uncertainty is not specified, the shape is
   described as a rectangle using the "gml:Polygon" shape.  If altitude
   is available, a three dimensional CRS is used, otherwise a two
   dimensional CRS is used.

   For Datum values of 2 or 3 (NAD83), there is no available CRS URN
   that covers three dimensional coordinates.  By necessity, locations
   described in these datums can be represented by two dimensional
   shapes only; that is, either a two dimensional point or a polygon.

   If the altitude type is 2 (floors), then this value can be
   represented using a civic address object [RFC5139] that is presented
   alongside the geodetic object.



Polk, et al.                 Standards Track                   [Page 23]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


Appendix C. Changes from RFC 3825

   Technical changes:

   -04: Added Appendix B providing an example relating to
        uncertainty.  Added Section 2.3.1 on Latitude and Longitude
        resolution and Section 2.4.4 on Altitude resolution.
        Added definition of Resolution to Section 1.2.

   -03: Clarified potential behavior of version 0 clients receiving
        a version 1 option and added recommendations for clients and
        servers.

   -02: Added Section 1.2 introducing uncertainty and resolution
        concepts.  Added Section 2.1 defining DHCPv6 option format.

   -01: Within Section 2.1, split Datum field from RFC 3825 into three
        fields: Ver, Res and Datum fields.  Explained that the Ver
        field is always located at the same offset.  Added Section 2.2
        relating to Version Support.

   -00: None

   Editorial changes:

   -03: Changed "DHC" to "DHCP" in some usages.  Clarified relationship
        of resolution and uncertainty to privacy.  Changed all uses of
        the LoRes/LaRes/AltRes terminology to LongUnc/LatUnc/AltUnc,
        and clarified when these parameters were used to encode
        resolution vs. uncertainty.

   -02: Reorganized Sections 1 and 2.

   -01: Added references to IEEE 802.11y, RFC 3825.

   -00: Changed boilerplate.  Added B. Aboba as editor. Re-positioned
        Appendix A and Acknowledgments sections.  Changed reference
        numbers to names, added reference to RFC 5226 (since RFC 3825
        was missing a reference to RFC 2434, now obsolete), updated
        references (and URLs).  Updated author affiliations and email
        addresses.  Changed references to "the appendix" to Appendix A.
        Added Appendix B listing changes.









Polk, et al.                 Standards Track                   [Page 24]

INTERNET-DRAFT       DHCP Option for Coordinate LCI     17 December 2009


Authors' Addresses

   James M. Polk
   Cisco Systems
   2200 East President George Bush Turnpike
   Richardson, Texas 75082 USA
   USA

   EMail: jmpolk@cisco.com

   John Schnizlein
   Technology Program Manager
   Internet Society
   1775 Wiehle Avenue
   Suite 201
   Reston, VA 20190-5108 USA
   USA

   EMail: schnizlein@isoc.org

   Marc Linsner
   Cisco Systems
   Marco Island, FL 34145 USA
   USA

   EMail: marc.linsner@cisco.com

   Martin Thomson
   Andrew
   PO Box U40
   Wollongong University Campus, NSW  2500
   AU

   EMail: martin.thomson@andrew.com

   Bernard Aboba
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA 98052 USA
   USA

   EMail: bernarda@microsoft.com









Polk, et al.                 Standards Track                   [Page 25]
