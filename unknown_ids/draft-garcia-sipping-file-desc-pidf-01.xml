<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<?rfc toc="yes" ?>
<?rfc compact="yes" ?>
<?rfc sortrefs="no" ?>
<?rfc symrefs="yes" ?>
<rfc ipr="full3978" category="std">


<front>
    <title abbrev="File Descriptions in PIDF">
       File Descriptions Extension to the Presence Information
       Data Format (PIDF)
    </title>
    <author initials="M" surname="Garcia-Martin" fullname="Miguel A. Garcia-Martin">
      <organization>Nokia Siemens Networks</organization>
      <address>
        <postal>
          <street>P.O.Box 22</street>
          <city>Nokia Siemens Networks</city> <region>FIN</region><code>02022</code>
          <country>Finland</country>
        </postal>
      <email>miguel.garcia@nsn.com</email>
      </address>
    </author>

    <author initials="M" surname="Matuszewski" fullname="Marcin Matuszewski">
      <organization>Nokia</organization>
      <address>
        <postal>
          <street>P.O.Box 407</street>
          <city>NOKIA GROUP</city> <region>FIN</region><code>00045</code>
          <country>Finland</country>
        </postal>
      <email>marcin.matuszewski@nokia.com</email>
      </address>
    </author>

    <date day="16" month="November" year="2007" />
    <area>Real-time Applications and Infrastructure</area>
    <workgroup>SIPPING Working Group</workgroup>
    <keyword>file</keyword>
    <keyword>PIDF</keyword>
    <abstract>
    <t>
      The Presence Information Data Format (PIDF) defines a basic
      format for representing presence information for a
      presentity. Presentities publish their presence information,
      typically towards presence agents. PIDF has been extended to
      provide rich presence information, including, for example, the
      location of the presentity, their activities, mood, the
      capabilities of their user agents, etc. Presentities are willing
      to provide the description of available files at watcher's
      disposal. This might be the case for photographs taken with a
      mobile device, a recorded lecture audio file, etc. This document
      extends the PIDF to provide the syntax and format for the
      description of files within the PIDF.
   </t>
    </abstract>
</front>
<middle>

<section title="Introduction">
<t>
Presence is defined as the willingness and ability of a user to
communicate with other users on the network.  Historically, presence
has been limited to "on-line" and "off-line" indicators, although the
current trend allows to model a number of events in the presence
information.
</t>
<t>
The <xref target="RFC3863">Presence Information Data Format (PIDF) </xref>
defines a common presence data format for <xref
target="RFC3860">Common Profiles for Instant Messaging (CPIM) </xref>
<xref target="RFC3859"> and Presence (CPP) </xref>.
</t>
<t>
The PIDF has been extended and adapted to work with SIP. The <xref
target="RFC4479">Data Model for Presence </xref> defines the
underlying presence data model used by <xref target="RFC3261">Session
Initiation Protocol (SIP) </xref> for Instant Messaging and Presence
Leveraging Extensions (SIMPLE) presence agents. The presence data
model structures the presence information of the PIDF in three
components: the person, the service, and the device.
</t>
<t>
On the other hand, there are scenarios where a user has a number of
available files stored in an endpoint. The user wants to make some of
these files for public or private disposal. One of these cases is, for
example, when Alice takes some pictures with her camera phone and she
wants to share them within a community.
</t>
<t>
This document extends the PIDF, or more precise, it extends the device
component of the presence data model, to allow the inclusion of a
description of available files. A presentity who publishes presence
information can include a description of one or more files that are at
a watcher's disposal for its downloading.
</t>
<t>
The extension allows the publication of files that are "available"
at that particular device. For example, if a user has stored a few
images in his phone, and he wants to advertise them through his
presence information to his watchers, he would not use the service nor
the person components of the presence data model because these images
are not tied to any service or person. Rather, these images are only
available in the particular device that the presentity is describing
in the device component of the presence data model.
</t>
<t>
This can also be seen through a multiple device scenario. Assume a
user who has some images stored in his phone. He is publishing his
presence information from two devices: a laptop and a phone. 
</t>
<t>
The presence publication done from his phone contains a &lt;device&gt;
component (in the PIDF) that represents the phone itself. The file
descriptors of those pictures are also included in the &lt;device&gt;
element. On the other hand, the presence publication done from his
laptop will not contain those files representing the pictures,
since they are not available in the laptop. Then, a presence
compositor can appropriately compose the presence information to
watchers, potentially signalling the two devices for the same
presentity, as separated devices, one including files for
pictures.
</t>
<t>
The extension defined in this document is fully compatible at the data
format with the <xref
target="I-D.garcia-sipping-file-event-package">'file' event package
</xref>.
</t>

</section>

<section title="Terminology">
<t>
The key words "MUST", "MUST NOT", "REQUIRED",
"SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT
RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as described
in BCP 14, <xref target="RFC2119">RFC 2119</xref> and indicate
requirement levels for compliant implementations.
</t>
</section>

<section title="File descriptions in PIDF">

<t>
The <xref target="I-D.garcia-sipping-file-event-package">
'file' event package </xref> defines a SIP event package for
subscribing to changes to a group of files. The 'file' event package
uses the XML 'file-metadata' document that is specified in the <xref
target="I-D.garcia-app-area-file-data-format">XML data format for
describing files</xref>. We embed 
a 'file-metadata' XML document in the 'device' component of the presence
data model because files are highly coupled with the
actual devices that the user is using. Unfortunately, the XML schema does
not provide the means to normatively indicate that 'file-metadata'
documents can be included in the 'device' component of the presence
data model that is part of a PIDF document. However, we provide the
following example:
</t>
<figure title="Example of file descriptions in PIDF" anchor="fig-example"><artwork>
   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;presence xmlns="urn:ietf:params:xml:ns:pidf"
    xmlns:dm="urn:ietf:params:xml:ns:pidf:data-model"
    xmlns:fd="urn:ietf:params:xml:ns:file"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    entity="sip:someone@example.com" &gt;
    &lt;tuple id="sg89ae"&gt;
     &lt;status&gt;
      &lt;basic&gt;open&lt;/basic&gt;
     &lt;/status&gt;
     &lt;dm:deviceID&gt;mac:8asd7d7d70&lt;/dm:deviceID&gt;
     &lt;contact&gt;sip:someone@example.com&lt;/contact&gt;
    &lt;/tuple&gt;
    &lt;dm:person id="p1"&gt;
    &lt;/dm:person&gt;
    &lt;dm:device id="pc122"&gt;
     &lt;dm:deviceID&gt;mac:8asd7d7d70&lt;/dm:deviceID&gt;
  
      &lt;fd:file-set version="123"&gt;
       &lt;fd:file id="id38sh12jd"&gt;
        &lt;fd:identity id="id9d8c9"&gt;
         &lt;fd:mime-type&gt;image/jpeg&lt;/fd:mime-type&gt;
         &lt;fd:size&gt;230432&lt;/fd:size&gt;
         &lt;fd:sha1&gt;72245FE8653DDAF371362F86D471913EE4A2CE2E&lt;/fd:sha1&gt;
        &lt;fd:identity&gt;
        &lt;fd:instance id="idc989c00"&gt; 
         &lt;fd:name&gt;coolpic.jpg&lt;/fd:name&gt;
         &lt;fd:description&gt;
             This is my latest cool picture from my summer vacation
         &lt;/fd:description&gt;
         &lt;fd:user-gruu&gt;
           sip:miguel.garcia@example.com;
               gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
         &lt;/fd:user-gruu&gt;
         &lt;fd:user-aor&gt;sip:miguel.garcia@example.com&lt;/fd:user-aor&gt;
         &lt;fd:creation-date&gt;
             2006-05-09T09:30:47+03:00
         &lt;/fd:creation-date&gt;
         &lt;fd:modification-date&gt;
             2006-05-09T10:24:34+03:00
         &lt;/fd:modification-date&gt;
         &lt;fd:read-date&gt;
             2006-05-10T14:24:32+03:00
         &lt;/fd:read-date&gt;
         &lt;fd:icon-ptr&gt;
             http://www.example.com/coolpic-icon.jpg
         &lt;/fd:icon-ptr&gt;
         &lt;fd:keywords&gt;
           &lt;fd:keyword&gt;summer&lt;/fd:keyword&gt;
           &lt;fd:keyword&gt;vacation&lt;/fd:keyword&gt;
         &lt;/fd:keywords&gt;
        &lt;/fd:instance&gt; 
       &lt;/fd:file&gt;
      &lt;/fd:file-set&gt;

    &lt;/dm:device&gt;
   &lt;/presence&gt;

</artwork></figure>



</section>

<section title="Security Considerations" anchor="security">
<t>
TBD
</t>
</section>

<section title="IANA Considerations" anchor="iana">

<t>
There are no IANA considerations associated to this memo.
</t>
</section>
</middle>
<back>

  <references title="Normative References">
    <reference anchor='RFC2119'>
       <front> 
         <title abbrev='RFC Key Words'>Key words for use in RFCs to
          Indicate Requirement Levels</title> 
         <author initials='S.' surname='Bradner' fullname='Scott
               Bradner'> 
            <organization>Harvard University</organization> 
            <address> 
              <postal>
                 <street>1350 Mass. Ave.</street> 
                 <street>Cambridge</street>
                 <street>MA 02138</street>
              </postal> 
              <phone>- +1 617 495 3864</phone>
              <email>sob@harvard.edu</email>
            </address>
         </author> 
         <date year='1997' month='March' /> 
         <area>General</area>
         <keyword>keyword</keyword> 
       </front>
       <seriesInfo name='BCP' value='14' /> 
       <seriesInfo name='RFC' value='2119' /> 
       <format type='TXT' octets='4723'
         target='ftp://ftp.isi.edu/in-notes/rfc2119.txt' /> 
       <format type='HTML' octets='14486'
               target='http://xml.resource.org/public/rfc/html/rfc2119.html' />
       <format type='XML' octets='5661'
               target='http://xml.resource.org/public/rfc/xml/rfc2119.xml' />
    </reference>

	<reference anchor="I-D.garcia-sipping-file-event-package">
	    <front> 
		<title abbrev='File Event Package'>A Session
		Initiation Protocol (SIP) Event Package and Data
		Format for Describing Files</title> 
		<author initials="M." surname="Garcia-Martin" fullname="Miguel A. Garcia-Martin">
		    <organization>Nokia Siemens Networks</organization>
		</author> 
		<author initials="M." surname="Matuszewski" fullname="Marcin Matuszewski">
		    <organization>Nokia</organization>
		</author>  
		<date year='2007' month='June' /> 
	    </front>
	    <seriesInfo name='Internet-Draft' value='draft-garcia-sipping-file-event-package-00' />
	    <format type='TXT' target='http://www.ietf.org/internet-drafts/draft-garcia-sipping-file-event-package-00.txt' />
	</reference>

    <?rfc include="reference.I-D.garcia-app-area-file-data-format"?>
    <?rfc include="reference.RFC.3261"?>
    <?rfc include="reference.RFC.3863"?>
    <?rfc include="reference.RFC.4479"?>

  </references>

  <references title="Informative References">
    <?rfc include="reference.RFC.3859"?>
    <?rfc include="reference.RFC.3860"?>
  </references>
</back>

</rfc>

<!-- LocalWords: xref CDATA XML 
 -->

