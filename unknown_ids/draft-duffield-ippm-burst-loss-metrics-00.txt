


IPPM Working Group                                           N. Duffield
Internet-Draft                                        AT&T Labs-Research
Intended status: Standards Track                               A. Morton
Expires: September 5, 2009                                     AT&T Labs
                                                              J. Sommers
                                                      Colgate University
                                                           March 4, 2009


                      Burst Loss Metrics for IPPM
               draft-duffield-ippm-burst-loss-metrics-00

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.  This document may contain material
   from IETF Documents or IETF Contributions published or made publicly
   available before November 10, 2008.  The person(s) controlling the
   copyright in some of this material may not have granted the IETF
   Trust the right to allow modifications of such material outside the
   IETF Standards Process.  Without obtaining an adequate license from
   the person(s) controlling the copyright in such materials, this
   document may not be modified outside the IETF Standards Process, and
   derivative works of it may not be created outside the IETF Standards
   Process, except to format it for publication as an RFC or to
   translate it into languages other than English.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on September 5, 2009.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the



Duffield, et al.        Expires September 5, 2009               [Page 1]

Internet-Draft         Burst Loss Metrics for IPPM            March 2009


   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

Abstract

   The IPPM Working Group has developed a one way packet loss metric
   that measures the loss rate on a Poisson probe stream between two
   hosts.  However, the burst properties of packet loss are required to
   understand the impact of packet loss on applications.  This draft
   defines one-way burst packet loss metrics that express the frequency
   and duration of loss episode, i.e., maximal sets of consecutively
   lost probe packets.  The draft also defines a probing methodology
   under which the burst loss metrics are to be measured.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].



























Duffield, et al.        Expires September 5, 2009               [Page 2]

Internet-Draft         Burst Loss Metrics for IPPM            March 2009


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  4
   2.  Singleton Definition for Type-P-One-way Bi-Packet Loss . . . .  4
     2.1.  Metric Name  . . . . . . . . . . . . . . . . . . . . . . .  4
     2.2.  Metric Parameters  . . . . . . . . . . . . . . . . . . . .  4
     2.3.  Metric Units . . . . . . . . . . . . . . . . . . . . . . .  5
     2.4.  Metric Definition  . . . . . . . . . . . . . . . . . . . .  5
     2.5.  Discussion . . . . . . . . . . . . . . . . . . . . . . . .  5
     2.6.  Methodologies  . . . . . . . . . . . . . . . . . . . . . .  5
     2.7.  Errors and Uncertainties . . . . . . . . . . . . . . . . .  5
     2.8.  Reporting the Metric . . . . . . . . . . . . . . . . . . .  5
   3.  General Definition of samples for
       Type-P-One-way-Bi-Packet-Loss  . . . . . . . . . . . . . . . .  5
     3.1.  Metric Name  . . . . . . . . . . . . . . . . . . . . . . .  6
     3.2.  Metric Parameters  . . . . . . . . . . . . . . . . . . . .  6
     3.3.  Metric Units . . . . . . . . . . . . . . . . . . . . . . .  6
     3.4.  Metric Definition  . . . . . . . . . . . . . . . . . . . .  6
     3.5.  Discussion . . . . . . . . . . . . . . . . . . . . . . . .  6
     3.6.  Methodologies  . . . . . . . . . . . . . . . . . . . . . .  7
     3.7.  Errors and Uncertainties . . . . . . . . . . . . . . . . .  7
     3.8.  Reporting the Metric . . . . . . . . . . . . . . . . . . .  7
   4.  A active probing methodology for B-Packet Loss . . . . . . . .  7
     4.1.  Metric Name  . . . . . . . . . . . . . . . . . . . . . . .  7
     4.2.  Metric Parameters  . . . . . . . . . . . . . . . . . . . .  7
     4.3.  Metric Units . . . . . . . . . . . . . . . . . . . . . . .  8
     4.4.  Metric Definition  . . . . . . . . . . . . . . . . . . . .  8
     4.5.  Discussion . . . . . . . . . . . . . . . . . . . . . . . .  8
     4.6.  Methodologies  . . . . . . . . . . . . . . . . . . . . . .  8
     4.7.  Errors and Uncertainties . . . . . . . . . . . . . . . . .  8
     4.8.  Reporting the Metric . . . . . . . . . . . . . . . . . . .  8
   5.  Burst Loss Metrics . . . . . . . . . . . . . . . . . . . . . .  8
     5.1.  Pair Counts  . . . . . . . . . . . . . . . . . . . . . . .  8
     5.2.  Loss Episode Frequency . . . . . . . . . . . . . . . . . .  9
     5.3.  Loss Episode Duration  . . . . . . . . . . . . . . . . . .  9
   6.  IPR Considerations . . . . . . . . . . . . . . . . . . . . . .  9
   7.  Security Considerations  . . . . . . . . . . . . . . . . . . .  9
   8.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 10
   9.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 10
   10. References . . . . . . . . . . . . . . . . . . . . . . . . . . 10
     10.1. Normative References . . . . . . . . . . . . . . . . . . . 10
     10.2. Informative References . . . . . . . . . . . . . . . . . . 10
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 11








Duffield, et al.        Expires September 5, 2009               [Page 3]

Internet-Draft         Burst Loss Metrics for IPPM            March 2009


1.  Introduction

   This memo describes one-way burst packet loss metrics.  The losses
   experienced by the packet stream can be viewed as occurring in loss
   episodes, i.e., maximal set of consecutive lost packets.  The burst
   loss metrics express the frequency and duration of loss episodes.
   Although the average loss rate can be expressed in terms of these
   quantities, they go further in characterizing the statistics of the
   patterns of packet loss within the stream of probes.  This is useful
   information in understanding the effect of packet losses on
   application performance, since different applications can have
   different sensitivities to patterns of burst loss, being sensitive
   not only to the long term average loss rate, but how losses are
   distributed in time, i.e., bursty vs. occurring independently.  As an
   example: MPEG video traffic may be sensitive to loss involving the
   I-frame in a group of pictures, but further burst losses of
   sufficiently short duration have no further impact (the damage is
   already done).

   This is a working draft with several sections still to be completed.


2.   Singleton Definition for Type-P-One-way Bi-Packet Loss

2.1.  Metric Name

   Type-P-One-way-Bi-Packet-Loss

2.2.  Metric Parameters

   o  Src, the IP address of a source host

   o  Dst, the IP address of a destination host

   o  T1, a sending time of the first packet

   o  T2, a sending time of the second packet, with T2>T1

   o  F, a selection function defining unambiguously the two packets
      from the stream selected for the metric.

   o  P, the specification of the packet type, over and above the source
      and destination addresses








Duffield, et al.        Expires September 5, 2009               [Page 4]

Internet-Draft         Burst Loss Metrics for IPPM            March 2009


2.3.  Metric Units

   A Loss Pair is pair (l1, l2) where each of l1 and l2 is a binary
   value 0 or 1, where 0 signifies successful transmission of a packet
   and 1 signifies loss.

   Type-P-One-way-Bi-Packet-Loss take values as a Loss Pair

2.4.  Metric Definition

   1.  "The Type-P-One-way-Bi-Packet-Loss with parameters (Src, Dst, T1,
       T2, F, P) is (1,1)" means that Src sent the first bit of a Type-P
       packet to Dst at wire-time T1 and the first bit of a Type-P
       packet to Dst a wire-time T2>T1, and that neither packet was
       received at Dst.

   2.  The Type-P-One-way-Bi-Packet-Loss with parameters (Src, Dst, T1,
       T2, F, P) is (1,0)" means that Src sent the first bit of a Type-P
       packet to Dst at wire-time T1 and the first bit of a Type-P
       packet to Dst a wire-time T2>T1, and that the first packet was
       not received at Dst, and the second packet was received at Dst

   3.  The Type-P-One-way-Bi-Packet-Loss with parameters (Src, Dst, T1,
       T2, F, P) is (0,1)" means that Src sent the first bit of a Type-P
       packet to Dst at wire-time T1 and the first bit of a Type-P
       packet to Dst a wire-time T2>T1, and that the first packet was
       received at Dst, and the second packet was not received at Dst

   4.  The Type-P-One-way-Bi-Packet-Loss with parameters (Src, Dst, T1,
       T2, F, P) is (0,0)" means that Src sent the first bit of a Type-P
       packet to Dst at wire-time T1 and the first bit of a Type-P
       packet to Dst a wire-time T2>T1, and that both packet were
       received at Dst.

2.5.  Discussion

2.6.  Methodologies

2.7.  Errors and Uncertainties

2.8.  Reporting the Metric


3.  General Definition of samples for Type-P-One-way-Bi-Packet-Loss

   Given the singleton metric for Type-P-One-way-Bi-Packet-Loss, we now
   define examples of sample of singletons.  The basic idea is as
   follows.  We first specify a set of times T1 < T2 <...<Tn, each of



Duffield, et al.        Expires September 5, 2009               [Page 5]

Internet-Draft         Burst Loss Metrics for IPPM            March 2009


   which acts as the first time of a packet pair for a single Type-P-
   One-way-Bi-Packet-Loss measurement.  This results is a set of n
   metric values of Type-P-One-way-Bi-Packet-Loss.

3.1.  Metric Name

   Type-P-One-way-Bi-Packet-Loss-Stream

3.2.  Metric Parameters

   o  Src, the IP address of a source host

   o  Dst, the IP address of a destination host

   o  (T11,T12), (T21,T22)....,(Tn1,Tn2) a set of n times of sending
      times for packet pairs, with T11 < T12 <= T21 < T22 <=...<= Tn1 <
      Tn2

   o  F, a selection function defining unambiguously the two packets
      from the stream selected for the metric.

   o  P, the specification of the packet type, over and above the source
      and destination address

3.3.  Metric Units

   A set L1,L2,...,Ln of loss pairs

3.4.  Metric Definition

   Each loss pair Li for i-1,....n is the Type-P-One-way-Bi-Packet-Loss
   with parameters (Src, Dst, Ti1, Ti2, Fi, P) where Fi is the
   restriction of the selection function F to the packet pair at time
   Ti1, Ti2.

3.5.  Discussion

   The metric definition of Type-P-One-way-Bi-Packet-Loss-Stream is
   sufficiently general to describe the case where packets are sampled
   from a pre-existing stream.  This is useful in the case that there is
   a general purpose measurement stream setup between two hosts, and we
   which to select a substream from it for the purposes of burst loss
   measurement.  In the next section we specialize this somewhat to more
   concretely describe a purpose built packet stream for burst loss
   measurement.






Duffield, et al.        Expires September 5, 2009               [Page 6]

Internet-Draft         Burst Loss Metrics for IPPM            March 2009


3.6.  Methodologies

3.7.  Errors and Uncertainties

3.8.  Reporting the Metric


4.  A active probing methodology for B-Packet Loss

   This section specializes the preceding section for an active probing
   methodology.  The basic idea is a follows.  We set up a sequence of
   evenly spaced times T1 < T2 < ... < Tn.  Each time Ti is potentially
   the first packet time for a packet pair measurement.  We make at
   independent random decision at each time, whether to initiate such a
   measurement.  Hence the interval count between successive times at
   which a pair is initiated follows a geometric distribution.  We also
   specify that the spacing between successive times Ti is the same as
   the spacing between packet in a given pair.  Thus if pairs happen to
   be launched at the successive times Ti T(i+1), the second packet of
   the first pair is actually used as the first packet of the second
   pair.

4.1.  Metric Name

   Type-P-One-way-Bi-Packet-Loss-Geometric-Stream

4.2.  Metric Parameters

   o  Src, the IP address of a source host

   o  Dst, the IP address of a destination host

   o  T, a time

   o  d, a time spacing

   o  n, a count of potential measurement instants

   o  q, a launch probability

   o  F, a selection function defining unambiguously the two packets
      from the stream selected for the metric.

   o  P, the specification of the packet type, over and above the source
      and destination address






Duffield, et al.        Expires September 5, 2009               [Page 7]

Internet-Draft         Burst Loss Metrics for IPPM            March 2009


4.3.  Metric Units

   A set of Loss Pairs L1, L2, ..., Lm for some m <= n

4.4.  Metric Definition

   for each i = 0, 1, ..., n-1 we form the potential measurement time Ti
   = T + i * d.  With probability q, a packet pair measurement is
   launched at Ti, resulting in a Type-P-One-way-Bi-Packet-Loss with
   parameters (Src, Dst, Ti, Ti+d, Fi, P) where Fi is the restriction of
   the selection function F to the packet pair at times Ti, Ti+d.  L1,
   L2,...Lm are the resulting Loss Pairs; m can be less than n since not
   all time Ti have an associated measurement.

4.5.  Discussion

   The above definition of Type-P-One-way-Bi-Packet-Loss-Geometric-
   Stream is equivalent to using Type-P-One-way-Bi-Packet-Loss-Stream
   with an appropriate statistical definition of the selection function
   F.

4.6.  Methodologies

4.7.  Errors and Uncertainties

4.8.  Reporting the Metric


5.  Burst Loss Metrics

   Once measurements have provided as with a sequence of n successive
   loss pairs L1,....,Ln, we can now proceed to metric for the frequency
   and duration of loss episodes.  Recall a loss episode is a maximal
   set of successive lost packets.  Hence loss episodes are demarked by
   loss pairs of the form (0,1) at their start, and (1,0) at their end.
   This observation has been used in [SBDR07] to form metrics for
   frequency and duration of loss episodes, that we now formally define.
   As a first step, we define the counts of each type of Loss Pair
   outcome.

5.1.  Pair Counts

   The Pair Counts associated with a sequence of successive loss pairs
   L1,,,,Ln are the numbers N(i,j) of such loss pairs that take each
   possible value (i,j) in the set ( (0,0), (0,1), (1,0), (1,1))






Duffield, et al.        Expires September 5, 2009               [Page 8]

Internet-Draft         Burst Loss Metrics for IPPM            March 2009


5.2.  Loss Episode Frequency

   The Loss Episode Count associated with a sequence of n successive
   loss pairs L1,,,,Ln is the quantity (N(1,0) +N(1,1)/(2*n)

   Note this is formally equivalent to the loss metric Type-P-One-way-
   Packet-Loss-Average from [1] since it averages single packet losses

5.3.  Loss Episode Duration

   The Loss Episode Duration associated with a sequence of n successive
   loss pairs L1,,,,Ln is the quantity

   2*(N(0,1) + N(1,0) + N(1,1)/ (N(0,1)+N(1,0)) - 1 if N(0,1) + N(1,0)
   >0 and undefined otherwise.

   Note N(0,1) + N(1,0) is zero if there are no transitions between loss
   and no-loss outcomes.


6.  IPR Considerations

   IPR disclosures concerning some of the material covered in this draft
   has been made to the IETF: see ttps://datatracker.ietf.org/ipr/1009/
   and ttps://datatracker.ietf.org/ipr/1010/


7.  Security Considerations

   Conducting Internet measurements raises both security and privacy
   concerns.  This memo does not specify an implementation of the
   metrics, so it does not directly affect the security of the Internet
   nor of applications which run on the Internet.
   However,implementations of these metrics must be mindful of security
   and privacy concerns.

   There are two types of security concerns: potential harm caused by
   the measurements, and potential harm to the measurements.  The
   measurements could cause harm because they are active, and inject
   packets into the network.  The measurement parameters MUST be
   carefully selected so that the measurements inject trivial amounts of
   additional traffic into the networks they measure.  If they inject
   "too much" traffic, they can skew the results of the measurement, and
   in extreme cases cause congestion and denial of service.  The
   measurements themselves could be harmed by routers giving measurement
   traffic a different priority than "normal" traffic, or by an attacker
   injecting artificial measurement traffic.  If routers can recognize
   measurement traffic and treat it separately, the measurements may not



Duffield, et al.        Expires September 5, 2009               [Page 9]

Internet-Draft         Burst Loss Metrics for IPPM            March 2009


   reflect actual user traffic.  If an attacker injects artificial
   traffic that is accepted as legitimate, the loss rate will be
   artificially lowered.  Therefore, the measurement methodologies
   SHOULD include appropriate techniques to reduce the probability that
   measurement traffic can be distinguished from "normal" traffic.
   Authentication techniques, such as digital signatures, may be used
   where appropriate to guard against injected traffic attacks.  The
   privacy concerns of network measurement are limited by the active
   measurements described in this memo: they involve no release of user
   data.


8.  IANA Considerations


9.  Acknowledgements


10.  References

10.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC2680]  Almes, G., Kalidindi, S., and M. Zekauskas, "A One-way
              Packet Loss Metric for IPPM", RFC 2680, September 1999.

   [RFC3357]  Koodli, R. and R. Ravikanth, "One-way Loss Pattern Sample
              Metrics", RFC 3357, August 2002.

   [RFC3393]  Demichelis, C. and P. Chimento, "IP Packet Delay Variation
              Metric for IP Performance Metrics (IPPM)", RFC 3393,
              November 2002.

   [RFC3611]  Friedman, T., Caceres, R., and A. Clark, "RTP Control
              Protocol Extended Reports (RTCP XR)", RFC 3611,
              November 2003.

10.2.  Informative References

   [x]        "".

URIs

   [1]  <RFC2680>





Duffield, et al.        Expires September 5, 2009              [Page 10]

Internet-Draft         Burst Loss Metrics for IPPM            March 2009


Authors' Addresses

   Nick Duffield
   AT&T Labs-Research
   180 Park Avenue
   Florham Park, NJ  07932
   USA

   Phone: +1 973 360 8726
   Fax:
   Email: duffield@research.att.com
   URI:   http://www.research.att.com/info/duffield


   Al Morton
   AT&T Labs
   200 Laurel Avenue South
   Middletown,, NJ  07748
   USA

   Phone: +1 732 420 1571
   Fax:   +1 732 368 1192
   Email: acmorton@att.com
   URI:   http://home.comcast.net/~acmacm/


   Joel Sommers
   Colgate University
   304 McGregory Hall
   Hamilton, NY  13346
   USA

   Phone: +1 315 228 7587
   Fax:
   Email: jsommers@colgate.edu
   URI:   http://cs.colgate.edu/faculty/jsommers/jsommers/home.html















Duffield, et al.        Expires September 5, 2009              [Page 11]


