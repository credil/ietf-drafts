


Network Working Group                                    F. Templin, Ed.
Internet-Draft                            Boeing Research and Technology
Intended status: Informational                          January 08, 2009
Expires: July 12, 2009


                   Virtual Enterprise Traversal (VET)
                   draft-templin-autoconf-dhcp-26.txt

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on July 12, 2009.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.

Abstract

   Enterprise networks connect routers over various link types, and may
   also connect to provider networks and/or the global Internet.  Nodes



Templin                   Expires July 12, 2009                 [Page 1]

Internet-Draft                     VET                      January 2009


   in enterprise networks must have a way to automatically provision IP
   addresses/prefixes and other information, and must also support
   internetworking operation even in highly-dynamic networks.  This
   document specifies a Virtual Enterprise Traversal (VET) abstraction
   for autoconfiguration and operation of nodes in enterprise networks.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Enterprise Characteristics . . . . . . . . . . . . . . . . . .  7
   4.  Autoconfiguration  . . . . . . . . . . . . . . . . . . . . . .  9
     4.1.  Enterprise Interior Router (EIR) Autoconfiguration . . . .  9
     4.2.  Enterprise Border Router (EBR) Autoconfiguration . . . . . 10
       4.2.1.  VET Interface Autoconfiguration  . . . . . . . . . . . 10
       4.2.2.  Provider-Aggregated Prefix Autoconfiguration . . . . . 12
       4.2.3.  Provider-Independent Prefix Autoconfiguration  . . . . 13
     4.3.  Enterprise Border Gateway (EBG) Autoconfiguration  . . . . 13
     4.4.  VET Host Autoconfiguration . . . . . . . . . . . . . . . . 13
   5.  Internetworking Operation  . . . . . . . . . . . . . . . . . . 14
     5.1.  Routing Protocol Participation . . . . . . . . . . . . . . 14
     5.2.  DHCP Prefix Delegation Maintenance . . . . . . . . . . . . 14
     5.3.  Forwarding Packets . . . . . . . . . . . . . . . . . . . . 15
     5.4.  IPv6 Prefix Mapping  . . . . . . . . . . . . . . . . . . . 15
     5.5.  IPv6 Router Discovery and Ingress Filtering  . . . . . . . 16
     5.6.  Fortifying VET with SEAL . . . . . . . . . . . . . . . . . 18
     5.7.  Enterprise-Local Communications  . . . . . . . . . . . . . 18
     5.8.  Multicast  . . . . . . . . . . . . . . . . . . . . . . . . 18
     5.9.  Service Discovery  . . . . . . . . . . . . . . . . . . . . 19
     5.10. Enterprise Partitioning  . . . . . . . . . . . . . . . . . 19
   6.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 19
   7.  Security Considerations  . . . . . . . . . . . . . . . . . . . 20
   8.  Related Work . . . . . . . . . . . . . . . . . . . . . . . . . 20
   9.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 20
   10. Contributors . . . . . . . . . . . . . . . . . . . . . . . . . 21
   11. References . . . . . . . . . . . . . . . . . . . . . . . . . . 21
     11.1. Normative References . . . . . . . . . . . . . . . . . . . 21
     11.2. Informative References . . . . . . . . . . . . . . . . . . 22
   Appendix A.  Duplicate Address Detection (DAD) Considerations  . . 24
   Appendix B.  Change Log  . . . . . . . . . . . . . . . . . . . . . 25
   Author's Address . . . . . . . . . . . . . . . . . . . . . . . . . 29









Templin                   Expires July 12, 2009                 [Page 2]

Internet-Draft                     VET                      January 2009


1.  Introduction

   Enterprise networks [RFC4852] connect routers over various link types
   (see: [RFC4861], Section 2.2).  Certain Mobile Ad-hoc Networks
   (MANETs) [RFC2501] can be considered as a challenging example of an
   enterprise network, in that their topologies may change dynamically
   over time and that they may employ little/no active management by a
   centralized network administrative authority.  These specialized
   characteristics for MANETs require careful consideration, but the
   same principles apply equally to other enterprise network scenarios.

   This document specifies a Virtual Enterprise Traversal (VET)
   abstraction for autoconfiguration and internetworking operation,
   where addresses of different scopes may be assigned on various types
   of interfaces with diverse properties.  Both IPv4 [RFC0791] and IPv6
   [RFC2460] are discussed within this context.  The use of standard
   DHCP [RFC2131][RFC3315] and neighbor discovery [RFC0826][RFC4861]
   mechanisms is assumed unless otherwise specified.

                             Provider-edge Interfaces
                                  x   x        x
                                  |   |        |
             +--------------------+---+--------+----------+    E
             |                    |   |        |          |    n
             |    I               |   |  ....  |          |    t
             |    n           +---+---+--------+---+      |    e
             |    t           |   +--------+      /|      |    r
             |    e  I   x----+   |  Host  |   I /*+------+--< p  I
             |    r  n        |   |Function|   n|**|      |    r  n
             |    n  t        |   +--------+   t|**|      |    i  t
             |    a  e   x----+              V e|**+------+--< s  e
             |    l  r      . |              E r|**|  .   |    e  r
             |       f      . |              T f|**|  .   |       f
             |    V  a      . |   +--------+   a|**|  .   |    I  a
             |    i  c      . |   | Router |   c|**|  .   |    n  c
             |    r  e   x----+   |Function|   e \*+------+--< t  e
             |    t  s        |   +--------+      \|      |    e  s
             |    u           +---+---+--------+---+      |    r
             |    a               |   |  ....  |          |    i
             |    l               |   |        |          |    o
             +--------------------+---+--------+----------+    r
                                  |   |        |
                                  x   x        x
                           Enterprise-edge Interfaces

                 Figure 1: Enterprise Router Architecture

   Figure 1 above depicts the architectural model for an enterprise



Templin                   Expires July 12, 2009                 [Page 3]

Internet-Draft                     VET                      January 2009


   router.  As shown in the figure, an enterprise router may have a
   variety of interface types including enterprise-edge, enterprise-
   interior, provider-edge, internal-virtual, as well as VET interfaces
   used for encapsulation of inner IP packets within outer IP headers.
   The different types of interfaces are defined, and the
   autoconfiguration mechanisms used for each type are specified.  This
   architecture applies equally for MANET routers, in which enterprise-
   interior interfaces correspond to the wireless multihop radio
   interfaces typically associated with MANETs.  Out of scope for this
   document is the autoconfiguration of provider interfaces, which must
   be coordinated in a manner specific to the service provider's
   network.

   The VET specification represents a functional superset of 6over4
   [RFC2529] and ISATAP [RFC5214], and further supports additional
   encapsulations such as IPsec [RFC4301], SEAL [I-D.templin-seal], etc.
   As a result, VET provides a map-and-encaps architecture using
   IP-in-IP tunneling based on both forwarding table and mapping service
   lookups (defined herein).

   The VET principles can be either directly or indirectly traced to the
   deliberations of the ROAD group in January 1992, and also to still
   earlier works including NIMROD [RFC1753], the Catenet model for
   internetworking [CATENET][IEN48][RFC2775], etc.  [RFC1955] captures
   the high-level architectural aspects of the ROAD group deliberations
   in a "New Scheme for Internet Routing and Addressing [ENCAPS] for
   IPNG".

   VET is related to the present-day activites of the IETF autoconf,
   dhc, ipv6, manet and v6ops working groups, as well as the IRTF rrg
   working group.


2.  Terminology

   The mechanisms within this document build upon the fundamental
   principles of IP-within-IP encapsulation.  The terms "inner" and
   "outer" are used throughout this document to respectively refer to
   the innermost IP {address, protocol, header, packet, etc.} *before*
   encapsulation, and the outermost IP {address, protocol, header,
   packet, etc.} *after* encapsulation.  VET also supports the inclusion
   of "mid-layer" encapsulations between the inner and outer layers,
   including IPSec [RFC4301], the Subnetwork Encapsulation and
   Adaptation Layer (SEAL) [I-D.templin-seal], etc.

   The terminology in the normative references apply; the following
   terms are defined within the scope of this document:




Templin                   Expires July 12, 2009                 [Page 4]

Internet-Draft                     VET                      January 2009


   subnetwork
      the same as defined in [RFC3819].

   enterprise
      the same as defined in [RFC4852].

   site
      a logical and/or physical grouping of interfaces that connect a
      topological area less than or equal to an enterprise in scope.  A
      site within an enterprise can in some sense be considered as an
      enterprise unto itself.

   Mobile Ad-hoc Network (MANET)
      a connected topology of mobile or fixed routers that maintain a
      routing structure among themselves over MANET link types
      [I-D.clausen-manet-linktype], where a wide variety of MANETs share
      common properties with enterprise networks.  Further information
      on MANETs can be found in [RFC2501].

   enterprise/site/MANET
      throughout the remainder of this document, the term "enterprise"
      is used to collectively refer to any of enterprise/site/MANET,
      i.e., the VET mechanisms and operational principles apply equally
      to enterprises, sites and MANETs.

   enterprise router
      an Enterprise Interior Router, Enterprise Border Router, or
      Enterprise Border Gateway.  As depicted in Figure 1, an enterprise
      router comprises a router function, a host function, one or more
      enterprise-interior interfaces and zero or more internal virtual,
      enterprise-edge, provider-edge and VET interfaces.

   Enterprise Interior Router (EIR)
      a fixed or mobile enterprise router that forwards packets over one
      or more sets of enterprise-interior interface; each set connected
      to a distinct enterprise.

   Enterprise Border Router (EBR)
      an EIR that connects edge networks to the enterprise, and/or
      connects multiple enterprises together.  An EBR configures a
      seperate VET interface over each set of enterprise-interior
      interfaces that connect the EBR to each distinct enterprise, i.e.,
      an EBR may configure mulitple VET interfaces - one for each
      distinct enterprise.  All EBRs are also EIRs.







Templin                   Expires July 12, 2009                 [Page 5]

Internet-Draft                     VET                      January 2009


   Enterprise Border Gateway (EBG)
      an EBR that either directly or indirectly connects the enterprise
      to provider networks and can delegate addresses/prefixes to other
      EBRs within the enterprise.  All EBGs are also EBRs.

   internal-virtual interface
      a virtual interface that is a special case of either an
      enterprise-edge or an enterprise-interior interface.  Internal-
      virtual interfaces that are also enterprise-edge interfaces are
      often loopback interfaces of some form.  Internal-virtual
      interfaces that are also enterprise-interior interfaces are often
      tunnel interfaces of some form configured over another enterprise-
      interior interface.

   enterprise-edge interface
      an EBR's attachment to a link (e.g., an ethernet, a wireless
      personal area network, etc.) on an arbitrarily-complex edge
      network that the EBR connects to an enterprise and/or to provider
      networks.

   provider-edge interface
      an EBR's attachment to the Internet, or to a provider network
      outside of the enterprise via which the Internet can be reached.

   enterprise-interior interface
      a EIR's attachment to a link within an enterprise.  An enterprise-
      interior interface is "neutral" in its orientation, i.e., it is
      inherently neither an enterprise-edge nor provider-edge interface.
      In particular, a packet may need to be forwarded over several
      enterprise-interior interfaces before it is forwarded via either
      an enterprise-edge or provider-edge interface.

   Enterprise Local Address (ELA)
      an enterprise-scoped IP address (e.g., an IPv6 Unique Local
      Address [RFC4193], an IPv4 privacy address [RFC1918], etc.) that
      is assigned to an enterprise-interior interface and unique within
      the enterprise.  ELAs are used as identifiers for operating the
      routing protocol and/or locators for packet forwarding within the
      scope of the enterprise; ELAs are also used as *outer* IP
      addresses during encapsulation.

   Virtual Enterprise Traversal (VET)
      an abstraction that uses IP-in-IP encapsulation to span a multi-
      link enterprise in a single (inner) IP hop.







Templin                   Expires July 12, 2009                 [Page 6]

Internet-Draft                     VET                      January 2009


   VET interface
      an EBR's Non-Broadcast, Multiple Access interface used for Virtual
      Enterprise Traversal.  The EBR configures a VET interface over a
      set of underlying enterprise-interior interface(s) belonging to
      the same enterprise.  When there are multiple distinct enterprises
      (each with their own distinct set of enterprise-interior
      interfaces), the EBR configures a separate VET interface over each
      set of enterprise-interior interfaces, i.e., the EBR configures
      multiple VET interfaces.

      The VET interface encapsulates each inner IP packet in any mid-
      layer headers plus an outer IP header then forwards it on an
      underlying enterprise-interior interface such that the TTL/Hop
      Limit in the inner header is not decremented as the packet
      traverses the enterprise.  The VET interface therefore presents an
      automatic tunneling abstraction that represents the enterprise as
      a single IP hop.

   VET node
      any node (host or router) that configures and uses a VET
      interface.

   The following additional acronyms are used throughout the document:

   CGA - Cryptographically Generated Address
   DHCP[v4,v6] - the Dynamic Host Configuration Protocol
   FIB - Forwarding Information Base
   ISATAP - Intra-Site Automatic Tunnel Addressing Protocol
   ND - Neighbor Discovery
   PIO - Prefix Information Option
   PRL - Potential Router List
   PRLNAME - Identifying name for the PRL (default is "isatap")
   RIO - Route Information Option
   RS/RA - IPv6 Neighbor Discovery Router Solicitation/Advertisement
   SEAL - Subnetwork Encapsulation and Adaptation Layer
   SLAAC - IPv6 StateLess Address AutoConfiguation


3.  Enterprise Characteristics

   Enterprises consist of links that are connected by enterprise routers
   as depicted in Figure 1.  All enterprise routers are also Enterprise
   Interior Routers (EIRs), and typically participate in a routing
   protocol over enterprise-interior interfaces to discover routes that
   may include multiple Layer-2 or Layer-3 forwarding hops.  Enterprise
   Border Routers (EBRs) are EIRs that connect edge networks and/or join
   multiple enterprises together, while Enterprise Border Gateways
   (EBGs) are EBRs that either directly or indirectly connect



Templin                   Expires July 12, 2009                 [Page 7]

Internet-Draft                     VET                      January 2009


   enterprises to provider networks.

   An enterprise may be as simple as a small collection of enterprise
   routers (and their attached edge networks); an enterprise may also
   contain other enterprises and/or be a subnetwork of a larger
   enterprise.  An enterprise may further encompass a set of branch
   offices and/or nomadic hosts connected to a home office over one or
   several service providers, e.g., through Virtual Private Network
   (VPN) tunnels.

   Enterprises that comprise link types with sufficiently similar
   properties (e.g., Layer-2 (L2) address formats, maximum transmission
   units (MTUs), etc.) can configure a sub-IP layer routing service such
   that IP sees the enterprise as an ordinary shared link the same as
   for a (bridged) campus LAN.  In that case, a single IP hop is
   sufficient to traverse the enterprise without IP layer encapsulation.

   Enterprises that comprise link types with diverse properties and/or
   configure multiple IP subnets must also provide a routing service
   that operates as an IP layer mechanism.  In that case, multiple IP
   hops may be necessary to traverse the enterprise such that specific
   autoconfiguration procedures are necessary to avoid multilink subnet
   issues [RFC4903].  In particular, we describe herein the use of IP-
   in-IP encapsulation to span the enterprise in a single (inner) IP hop
   in order to avoid the multilink subnet issues that arise when
   enterprise-interior interfaces are used directly by applications.

   Conceptually, an enterprise router (i.e, an EIR/EBR/EBG) embodies
   both a host function and router function.  The host function supports
   global-scoped communications over any of the enterprise router's non-
   enterprise-interior interfaces according to the weak end system model
   [RFC1122] and also supports enterprise-local-scoped communications
   over its enterprise-interior interfaces.  The router function
   connects the enterprise router's attached edge networks to the
   enterprise and/or connects the enterprise to other networks including
   the Internet (see: Figure 1).

   In addition to other interface types, VET nodes (i.e., EBRs, EBGs and
   simple hosts) configure VET interfaces that view all other VET nodes
   in an enterprise as single-hop neighbors, where the enterprise can
   also appear as a single IP hop within another enterprise.  VET nodes
   configure a separate VET interface for each distinct enterprise to
   which they connect, and discover a list of EBRs for each VET
   interface that can be used for forwarding packets to off-enterprise
   destinations.  The following sections present the Virtual Enterprise
   Traversal approach.





Templin                   Expires July 12, 2009                 [Page 8]

Internet-Draft                     VET                      January 2009


4.  Autoconfiguration

   EIRs, EBRs, EBGs and VET hosts configure themselves for operation
   according to the following subsections:

4.1.  Enterprise Interior Router (EIR) Autoconfiguration

   EIRs configure enterprise-interior interfaces and engage in routing
   protocols over those interfaces.

   When an EIR joins an enterprise, it first configures a unique IPv6
   link-local address on each enterprise-interior interface that
   requires an IPv6 link-local capability and an IPv4 link-local address
   on each enterprise-interior interface that requires an IPv4 link-
   local capability.  IPv6 link-local address generation mechanisms that
   provide sufficient uniqueness include Cryptographically Generated
   Addresses (CGAs) [RFC3972], IPv6 Privacy Addresses [RFC4941],
   StateLess Address AutoConfiguration (SLAAC) using EUI-64 interface
   identifiers [RFC4862], etc.  The mechanisms specified in [RFC3927]
   provide an IPv4 link-local address generation capability.

   Next, the EIR configures an Enterprise Local Address (ELA) of the
   outer IP protocol version on each of its enterprise-interior
   interfaces and engages in any routing protocols on those interfaces.
   The EIR can configure an ELA via explicit management, DHCP
   autoconfiguration, pseudo-random self-generation from a suitably
   large address pool, or through an alternate autoconfiguration
   mechanism.  In some enterprise use cases (e.g., highly dynamic
   MANETs), assignment of ELAs as singleton addresses (i.e., as /32s for
   IPv4 and /128s for IPv6) may be necessary to avoid multilink subnet
   issues.

   EIRs that configure ELAs using DHCP may require relay support from
   other EIRs within the enterprise; the EIR can alternatively configure
   both a DHCP client and relay that are connected, e.g., via a pair of
   back-to-back connected ethernet interfaces, a tun/tap interface, a
   loopback interface, custom S/W coding, etc.  For DHCPv6, relays that
   do not already know the ELA of a server relay requests to the
   'All_DHCP_Servers' site-scoped IPv6 multicast group.  For DHCPv4,
   relays that do not already know the ELA of a server relay requests to
   the site-scoped IPv4 multicast group address TBD (see: Section 6).
   DHCPv4 servers that delegate ELAs join the TBD multicast group and
   service any DHCPv4 messages received for that group.

   Self-generation of ELAs for IPv6 can be from a large IPv6 local-use
   address range, e.g., IPv6 Unique Local Addresses [RFC4193].  Self-
   generation of ELAs for IPv4 can be from a large IPv4 private address
   range (e.g., [RFC1918]).  When self-generation is used alone, the EIR



Templin                   Expires July 12, 2009                 [Page 9]

Internet-Draft                     VET                      January 2009


   must continuously monitor the ELAs for uniqueness, e.g., by
   monitoring the routing protocol, but care must be taken in the
   interaction of this monitoring with existing mechanisms.

   A combined approach using both DHCP and self-generation is also
   possible in which the EIR first self-generates a temporary ELA used
   only for the purpose of procuring an actual ELA taken from a disjoint
   addressing range.  The EIR then assigns the temporary ELA to an
   enterprise-interior interface, engages in the routing protocol and
   performs a DHCP client/relay exchange using the temporary ELA as the
   address of the relay.  When the DHCP server delegates an actual ELA,
   the EIR abandons the temporary ELA, assigns the actual ELA to the
   enterprise-interior interface and re-engages in the routing protocol.

4.2.  Enterprise Border Router (EBR) Autoconfiguration

   EBRs are EIRs that configure VET interfaces over distinct sets of
   underlying enterprise-interior interfaces; an EBR can connect to
   multiple enterprises, in which case it would configure multiple VET
   interfaces.  EBRs perform the following autoconfiguration operations:

4.2.1.  VET Interface Autoconfiguration

   VET interface autoconfiguration entails: 1) interface initialization,
   2) EBG discovery and enterprise identification, and 3) IPv6 stateless
   address autoconfiguration.  These functions are specified in the
   following sections:

4.2.1.1.  Interface Initialization

   EBRs configure a VET interface over a set of underlying enterprise-
   interior interfaces belonging to the same enterprise, where the VET
   interface presents a virtual view of all EBRs in the enterprise as
   single hop neighbors through the use of IP-in-IP encapsulation.

   When IPv6 and IPv4 are used as the inner/outer protocols
   (respectively), the EBR autoconfigures an ISATAP link-local address
   ([RFC5214], Section 6.2) on the VET interface to support packet
   forwarding and operation of the IPv6 neighbor discovery protocol.
   The ISATAP link-local address embeds an IPv4 ELA assigned to an
   underlying enterprise-interior interface, and need not be checked for
   uniqueness since the IPv4 ELA itself was already determined to be
   unique (see: Section 4.1).  Link-local address configuration for
   other inner/outer IP protocol combinations is through administrative
   configuration or through an unspecified alternate method.

   After the EBR configures a VET interface, it can communicate with
   other EBRs as single-hop neighbors from the viewpoint of the inner IP



Templin                   Expires July 12, 2009                [Page 10]

Internet-Draft                     VET                      January 2009


   protocol (where discovery of other EBRs is discussed in Section 5.5).
   The EBR can also confirm reachability of other EBRs through Neighbor
   Discovery (ND) and/or DHCP exchanges over the VET interface, or
   through other means such as information conveyed in the routing
   protocol.

   The EBR must be able to detect and recover from the loss of VET
   interface neighbors due to, e.g., network partitions, node failures,
   etc.  Mechanisms specified outside of this document such as
   monitoring the routing protocol, ND beaconing/polling, DHCP renewals/
   leasequeries, upper layer protocol hints of forward progress,
   bidirectional forward detection, detection of network attachment,
   etc. can be used according to the particular deployment scenario.

4.2.1.2.  Enterprise Border Gateway Discovery and Enterprise
          Identification

   The EBR next discovers a list of EBGs for each of its VET interfaces,
   i.e., for each enterprise it connects to.  The list can be discovered
   through information conveyed in the routing protocol and/or through
   the Potential Router List (PRL) discovery mechanisms outlined in
   [RFC5214], Section 8.3.2.  In multicast-capable enterprises, they can
   also listen for advertisements on the 'rasadv' [RASADV] IPv4
   multicast group address.

   In particular, whether or not routing information is available the
   EBR can discover the list of EBGs in the PRL by resolving an
   identifying "hostname" ('PRLNAME') using an enterprise local name
   resolution service (e.g., an enterprise-local DNS service, LLMNR
   [RFC4759], etc.).  The EBR discovers 'PRLNAME' through 'rasadv'
   protocol advertisements, through a DHCP option, through link-layer
   information (e.g., an IEEE 802.11 SSID), or through some other means
   specific to the enterprise.  In the absence of other information, the
   EBR can use manual configuration and by default sets 'PRLNAME' to
   "isatap".

   After discovering 'PRLNAME', the EBR can discover the list of EBGs by
   resolving either the hostname 'PRLNAME' or the FQDN
   'PRLNAME'.example.com if an enterprise-specific domain name
   "example.com" is available.

   The hostname 'PRLNAME' (and/or the FQDN 'PRLNAME'.example.com) as
   well as the addresses of EBGs and/or the prefixes they aggregate
   serve as an identifier for the enterprise.







Templin                   Expires July 12, 2009                [Page 11]

Internet-Draft                     VET                      January 2009


4.2.1.3.  IPv6 Stateless Address Autoconfiguration (SLAAC)

   When IPv6 is used as the inner protocol, the EBR sends unicast IPv6
   Router Solicitation (RS) messages over its VET interface(s) to
   receive Router Advertisements (RAs) from EBGs.  When the EBR receives
   an RA containing Prefix Information Options (PIOs) with the 'A' and
   'L' bits set to 1, it autoconfigures IPv6 addresses from the prefixes
   using SLAAC and assigns them to the VET interface.  (When IPv4 is
   used as the outer IP protocol, the addresses are autoconfigured and
   assigned as ISATAP addresses the same as specified in [RFC5214].)

   The use of DHCPv6 for address configuration on VET interfaces is
   undefined.

4.2.2.  Provider-Aggregated Prefix Autoconfiguration

   EBRs acquire provider-aggregated prefixes through autoconfiguration
   exchanges with EBGs over VET interfaces.  When IPv4 is used as the
   inner IP protocol, the EBR acquires provider-aggregated prefixes via
   an unspecified automated IPv4 prefix delegation exchange, explicit
   management, etc.

   When IPv6 is used as the inner IP protocol, the EBR acquires
   provider-aggregated prefixes via IPv6 Neighbor Discovery and DHCPv6
   Prefix Delegation exchanges.  If the EBR receives an RA from an EBG
   that contains PIOs with the 'L' bit set to 0, it can use the PIOs as
   hints of prefixes the DHCPv6 server may be willing to delegate (see:
   Section 5.5).  Whether or not such hints are available, the EBR
   (acting as a requesting router) can use DHCPv6 prefix delegation
   [RFC3633] over the VET interface to obtain Provider-Aggregated IPv6
   prefixes from the server (acting as a delegating router).

   The EBR obtains prefixes using either a 2-message or 4-message DHCPv6
   exchange [RFC3315].  For example, to perform the 2-message exchange
   the EBR's DHCPv6 client forwards a Solicit message with an IA_PD
   option to its DHCPv6 relay, i.e., the EBR acts as a combined client/
   relay (see: Section 4.1).  The relay then forwards the message over
   the VET interface to the EBG.  The forwarded Solicit message will
   elicit a reply from the server containing provider-aggregated IPv6
   prefix delegations.

   The EBR can propose a specific prefix to the DHCPv6 server per
   Section 7 of [RFC3633], e.g., if a prefix delegation hint is
   available.  The server will check the proposed prefix for consistency
   and uniqueness, then return it in the reply to the EBR if it was able
   to perform the delegation.

   After the EBR received provider-aggregated prefix delegations, it can



Templin                   Expires July 12, 2009                [Page 12]

Internet-Draft                     VET                      January 2009


   provision the prefixes on its enterprise-edge interfaces as well as
   on other VET interfaces for which it is configured as an EBG.

4.2.3.  Provider-Independent Prefix Autoconfiguration

   Independent of any provider-aggregated prefixes (see: Section 4.2.2),
   EBRs can also acquire and use provider-independent and/or self-
   configured prefixes (e.g., IPv6 Unique Local Addresses (ULAs)
   [RFC4193][I-D.ietf-ipv6-ula-central]).

   EBRs can retain their provider-independent addresses/prefixes as they
   travel between visited enterprise networks as long as they register
   the prefixes with new enterprises and (preferrably) withdraw the
   prefixes from departed enterprises.  EBRs can use Secure Neighbor
   Discovery (SEND) [RFC3971] to prove ownership of their provider-
   independent prefixes and can use DHCPv6 prefix delegation to register
   the prefixes in the new enterprise.  EBRs can also act as delegating
   routers to sub-delegate portions of their provider-independent
   prefixes to requesting routers on their enterprise edge interfaces
   and on VET interfaces for which they are configured as EBGs.  In this
   sense, the sub-delegations of an EBR's provider-independent prefix
   become provider-aggregated prefixes for another EBR.

4.3.  Enterprise Border Gateway (EBG) Autoconfiguration

   EBGs are EBRs that connect enterprises to a service provider either
   directly via provider-edge interfaces or indirectly via another
   enterprise.  EBGs configure provider-edge interfaces in a manner that
   is specific to its provider connections.  EBGs also configure a DHCP
   relay/server that can service prefix delegation requests.

   For each VET interface on which it is configured as an EBG, the EBG
   must arrange to add its enterprise-interior interface addresses to
   the PRL (see: Section 4.2.1.2), and must maintain these resource
   records in accordance with ([RFC5214], Section 9).  In particular,
   for each such VET interface the EBG adds its enterprise-interior
   interface addresses to the hostname 'PRLNAME' and/or the FQDN
   'PRLNAME'.example.com.

4.4.  VET Host Autoconfiguration

   Nodes that cannot be attached via an EBR's enterprise-edge interface
   (e.g., nomadic laptops that connect to a home office via a Virtual
   Private Network (VPN)) can instead be configured for operation as a
   simple host connected to the VET interface.  Such VET hosts configure
   one or more VET interfaces over corresponding sets of enterprise-
   interior interfaces exactly as for EBRs, but they configure their VET
   interfaces as host interfaces (and not router interfaces).  VET hosts



Templin                   Expires July 12, 2009                [Page 13]

Internet-Draft                     VET                      January 2009


   can then send packets to other hosts on the VET interface, or to off-
   enterprise destinations via a next-hop EBR.


5.  Internetworking Operation

   Following the autoconfiguration procedures specified in Section 4,
   EIRs, EBRs, EBGs and VET hosts engage in normal internetworking
   operations as discussed in the following sections:

5.1.  Routing Protocol Participation

   After an EIR has been autoconfigured, it participates in any routing
   protocols over enterprise-interior interfaces and forwards outer IP
   packets within the enterprise as for any ordinary router.

   EBRs can additionally engage in any inner IP routing protocols over
   enterprise-edge, provider-edge and VET interfaces, and can use those
   interfaces for forwarding inner IP packets to off-enterprise
   destinations.  Note that these inner IP routing protocols are
   separate and distinct from any enterprise-interior routing protocols.

5.2.  DHCP Prefix Delegation Maintenance

   When DHCP prefix delegation is used, the DHCP server ensures that the
   delegations are unique and that the EBG's router function will
   forward IP packets over the VET interface to the correct EBR.

   The DHCP prefix delegations remain active as long as the EBR
   continues to issue renewals over the VET interface before lease
   lifetimes expire.  The lease lifetime also keeps the delegation state
   active even if communications between the EBR and DHCP server are
   disrupted for a period of time (e.g., due to an enterprise network
   partition) before being reestablished (e.g., due to an enterprise
   network merge).  When the EBR leaves the enterprise, it should first
   release its delegated provider-dependent prefixes and unregister its
   provider-independent prefixes to avoid black-holing future
   communications.

   Since the DHCP client and relay are co-resident on the same EBR, no
   special coordination is necessary for the EBG to maintain routing
   information.  The EBG simply retains Forwarding Information Base
   (FIB) entries that identify the EBR as the next-hop toward the
   prefixes over the VET interface.







Templin                   Expires July 12, 2009                [Page 14]

Internet-Draft                     VET                      January 2009


5.3.  Forwarding Packets

   VET nodes forward packets by consulting the FIB to determine a
   specific EBR/EBG as the next-hop router on the VET interface.  When
   multiple next-hop routers are available, VET nodes can use default
   router preferences, routing protocol information, traffic engineering
   configurations, etc. to select the best exit router.  When there is
   no FIB information available, VET nodes can discover the next-hop
   EBR/EBG through the mechanisms specified in Section 5.5.

   VET interfaces encapsulate inner IP packets in any mid-layer headers
   followed by an outer IP header according to the specific
   encapsulation type (e.g., [RFC4301][RFC5214][I-D.templin-seal]); they
   next submit the encapsulated packet to the outer IP forwarding engine
   for transmission on an underlying enterprise-interior interface.

   For forwarding to next-hop addresses over VET interfaces that use
   IPv6-in-IPv4 encapsulation, VET nodes determine the outer destination
   address through static extraction of the IPv4 address embedded in the
   next-hop ISATAP address.  For other IP-in-IP encapsulations,
   determination of the outer destination address is through
   administrative configuration or through an unspecified alternate
   method.

5.4.  IPv6 Prefix Mapping

   For each of the /64 prefixes they aggregate, EBRs must respond to
   messages addressed to the prefix's IPv6 subnet router anycast address
   [RFC4291].  EBRs must also publish the prefixes in the enterprise-
   local name service using the domain name suffix 'PRLNAME.example.com;
   for publications within the global DNS itself, the domain name suffix
   "isatap.net" is used instead.

   EBRs in enterprises that are managed under a cooperative
   administrative authority should publish their prefixes in the
   enterprise name service (e.g., the DNS [RFC1035]).  EBRs in
   enterprises that are managed in a distributed fashion should
   implement their own distributed name resolution services (e.g., LLMNR
   [RFC4759]).

   The EBR publishes the prefix as a domain name consisting of a
   sequence of 16 nibbles in reverse order the same as in ([RFC3596],
   Section 2.5).  For example, the EBR publishes the prefix '2001:
   DB8::/64' as:
   '0.0.0.0.0.0.0.0.8.b.d.0.1.0.0.2.'PRLNAME'.example.com'.

   The EBR (or one of a group of EBRs that service the same prefix)
   includes in each prefix publication IPv4 addresses (e.g., in DNS A



Templin                   Expires July 12, 2009                [Page 15]

Internet-Draft                     VET                      January 2009


   records) taken from the EBRs' enterprise interior interfaces.  In
   enterprises with a cooperative administrative authority, EBRs
   coordinate their publications with an administrator and/or by using a
   secure automated name service update mechanism (e.g., [RFC3007]).  In
   enterprises that are managed in a distributed fashion, EBRs publish
   their prefixes through direct responses to distributed name
   resoultion service queries via a mechanism such as LLMNR.

   Prefix publication in new enterprises should be coordinated in
   conjunction with prefix withdrawls in recently departed enterprises
   such that mobility events are handled gracefully.  In this way, all
   of the EBRs/EBGs on the path from the VET node to the Internet core
   can adjust their forwarding information to track the node's provider-
   independent prefixes as it moves between enterprises.

5.5.  IPv6 Router Discovery and Ingress Filtering

   EBGs follow the router and prefix discovery procedures specified in
   ([RFC5214], Section 8.2).  They send RAs over VET interfaces for
   which they are gateways with PIOs for SLAAC, with the 'M' flag set to
   0 and with the 'O' flag set to indicate whether "other" DHCP services
   are available.  EBGs can also include PIOs with the 'L' bit set to 0
   and with a prefix such as '2001:DB8::/48' as a hint of an aggregated
   prefix from which it is willing to delegate longer prefixes.

   VET nodes follow the router and prefix discovery procedures specified
   in ([RFC5214], Section 8.3).  They discover EBGs within the
   enterprise as specified in Section 4.2.1.2, then perform SEND-
   protected RS/RA exchanges with the EBG to maintain default routes.
   EBRs accept packets that are fowarded by EBGs for which they have
   valid default routes.

   EBRs can also discover destination-specific next-hop EBRs within the
   enterprise by querying the name service for the /64 IPv6 prefix
   corresponding to a packet's destination address.  For example, for
   the IPv6 destination address '2001:DB8:1:2::1' the VET node can
   lookup the domain name:
   '2.0.0.0.1.0.0.0.8.b.d.0.1.0.0.2.'PRLNAME'.example.com'.  If the name
   service lookup succeeds, it will return IPv4 addresses (e.g., in DNS
   A records) that correspond to the enterprise interior interfaces of
   potential next-hop EBRs.  If the lookup fails, the VET node can
   continue to forward its packets to a default EBG.

   When a VET node forwards a packet to an EBG that has a mapping for
   the destination, the EBG forwards the packet to a next-hop EBR on the
   VET interface and returns an ICMP redirect.  If the packet's source
   address is on-link on the VET interface, the EBG returns an ordinary
   "router-to-host" redirect with the source address of the packet as



Templin                   Expires July 12, 2009                [Page 16]

Internet-Draft                     VET                      January 2009


   its destination.  If the packet's source address is not on-link, the
   EBG instead returns a "router-to-router" redirect with the link-local
   ISATAP address of the originating EBR as its destination.  The EBG
   also includes in the redirect one or more link-layer address options
   containing IPv4 addresses of potential next-hop EBRs, where the
   target link-layer address options are formatted exactly as specified
   in [RFC2529].  That is to say, the redirect may contain multiple
   target link-layer address options; each representing the link-layer
   address of a potential next-hop EBR.

   When a VET node received an ordinay "router-to-host" redirect, it
   processes it exacly as specified in [RFC4861], Section 8.  When an
   EBR receives a "router-to-router" redirect, it discovers the link
   layer addresses of potential next-hop EBRs by examining the target
   link-layer address options included in the redirect.  The EBR then
   sends a SEND-protected RA to a potential next-hop EBR over the VET
   interface with a link-local CGA address as the source, the IPv6
   subnet router anycast address corresponding to the original packet's
   destination address as the destination, and a link-layer (i.e., IPv4)
   destination corresponding to the potential EBR.  The EBR also
   includes a Route Information Option (RIO) [RFC4191] in the RA that
   contains the /64 prefix of the original packet's source address.

   When the potential next-hop EBR receives the RA, it uses SEND to
   verify the signature then installs the IPv6 prefix in the RIO as an
   ingress filter entry [RFC3704].  By default, the potential next-hop
   EBR discards any packets that were forwarded by a non-default router
   and for which there is no matching ingress filter entry.  Therefore,
   the EBR that sent the RA is responsible for determining that the
   potential next-hop EBR received it.

   After an EBR sends an initial RA, it should send periodic RAs to
   refresh the next-hop EBR's ingress filter prefix lifetimes as long as
   traffic is flowing.  If a VET node detects that the path to a next-
   hop EBR is failing, it should either select an alternate potential
   next-hop EBR (if one is available) or allow packets to flow through
   an EBG until another ICMP redirect is received.

   When a next-hop EBR receives a packet for which it no longer has a
   route to the final destination, it returns an appropriate ICMP
   unreachable message.  When the VET node that sent the packet receives
   the ICMP unreachable message, it should discard its current list of
   potential next-hop EBRs and allow packets to flow through an EBG
   until another ICMP redirect is received; this allows for graceful
   handling of mobility events.

   VET nodes must only accept PIOs, M/O flag settings and default router
   preferences in RAs that are received from EBGs; they MUST NOT accept



Templin                   Expires July 12, 2009                [Page 17]

Internet-Draft                     VET                      January 2009


   them from ordinary EBRs.

5.6.  Fortifying VET with SEAL

   VET nodes should use SEAL encapsulation [I-D.templin-seal] in
   conjunction with VET to accommdate path MTU diversity, to defend
   against rogue routers and source address spoofing, and to monitor
   next-hop EBR reachability.

   In terms of security, when a VET node receives an ICMP message, it
   can confirm that the packet-in-error within the ICMP message
   corresponds to one of its recently-sent packets by using the SEAL_ID
   as a nonce.  Additionally, a next-hop EBR can track the SEAL_ID
   sequence in packets received from EBRs for which there is an ingress
   filter entry and discard packets that have SEAL_ID values outside of
   the current window.  To maintain synchronization, the next-hop EBR
   resets its cached SEAL_IDs for correspondent EBRs/EBGs whenever it
   receives a fresh SEND-protected RA.

   In terms of next-hop reachability, an EBR can set the SEAL
   "Acknowledgement Requested" bit in RA messages to confirm that a
   potential next-hop EBR received and processed the RA.  The EBR can
   additionally periodically set this bit in ordinary data messages to
   monitor next-hop EBR reachability.

5.7.  Enterprise-Local Communications

   When permitted by policy, end systems that configure the endpoints of
   enterprise-local communications can avoid VET interface encapsulation
   by directly invoking the outer IP protocol using ELAs assigned to
   their enterprise-interior interfaces.  For example, when the outer
   protocol is IPv4, end systems can use IPv4 ELAs for enterprise-local
   communications over their enterprise-interior interfaces without
   using the VET interface.

5.8.  Multicast

   In multicast-capable deployments, EIRs provide an enterprise-wide
   multicasting service such as Simplified Multicast Forwarding (SMF)
   [I-D.ietf-manet-smf] over their enterprise-interior interfaces such
   that outer IP multicast messages of site- or greater scope will be
   propagated across the enterprise.  For such deployments, VET hosts
   and EBRs can also provide an inner IP multicast/broadcast capability
   over their VET interfaces through mapping of the inner IP multicast
   address space to the outer IP multicast address space.

   VET hosts and EBRs encapsulate inner IP multicast messages sent over
   the VET interface in any mid-layer headers (e.g., IPsec, SEAL, etc.)



Templin                   Expires July 12, 2009                [Page 18]

Internet-Draft                     VET                      January 2009


   plus an outer IP header with a site-scoped outer IP multicast address
   as the destination.  For the case of IPv6 and IPv4 as the inner/outer
   protocols (respectively), [RFC2529] provides mappings from the IPv6
   multicast address space to the IPv4 multicast address space.  For
   other IP-in-IP encapsulations, mappings are established through
   administrative configuration or through an unspecified alternate
   method.

   For multicast-capable enterprises, use of the inner IP multicast
   service for operating the ND protocol over the VET interface is
   available but should be used sparingly to minimize enterprise-wide
   flooding.

5.9.  Service Discovery

   VET hosts and EBRs can peform enterprise-wide service discovery using
   a suitable name-to-address resolution service.  Examples of flooding-
   based services include the use of LLMNR [RFC4759] over the VET
   interface or mDNS [I-D.cheshire-dnsext-multicastdns] over an
   underlying enterprise-interior interface.  More scalable and
   efficient service discovery mechanisms are for further study.

5.10.  Enterprise Partitioning

   EBGs can physically partition an enterprise by configuring multiple
   VET interfaces over multiple distinct sets of underlying interfaces.
   In that case, each partition (i.e., each VET interface) must
   configure its own distinct PRL zone (e.g., 'zone1.example.com',
   'zone2.example.com', etc.).

   EBGs can logically partition an enterprise using a single VET
   interface by sending RAs with PIOs containing different IPv6 subnet
   prefixes to nodes in different logical partitions.  EBGs can identify
   partitions, e.g., by examining IPv4 prefixes, observing the
   interfaces over which RSs are received, etc.  In that case, a single
   PRL zone can cover all partitions.


6.  IANA Considerations

   A Site-Local Scope IPv4 multicast group (TBD) for DHCPv4 server
   discovery is requested.  The allocation should be taken from the
   239.255.000.000-239.255.255.255 Site-Local Scope range in the IANA
   'multicast-addresses' registry.







Templin                   Expires July 12, 2009                [Page 19]

Internet-Draft                     VET                      January 2009


7.  Security Considerations

   Security considerations for MANETs are found in [RFC2501].

   Security considerations with tunneling that apply also to VET are
   found in [RFC2529][RFC5214].  In particular, VET nodes must verify
   that the outer IP source address of a packet received on a VET
   interface is correct for the inner IP source address using the
   procedures specified in ([RFC5214], Section 7.3).

   The securing methods specified in Section 5.6 provide additional
   mitigation against both rogue EBRs (via SEND) and source address
   spoofing (via the SEAL_ID and prefix-based ingress filtering).


8.  Related Work

   The authors acknowledge the work done by Brian Carpenter and Cyndi
   Jung in [RFC2529] that introduced the concept of intra-site automatic
   tunneling.  This concept was later called: "Virtual Ethernet" and
   investigated by Quang Nguyen under the guidance of Dr. Lixia Zhang.
   As for this document, these architectural principles also follow from
   earlier works articulated by the ROAD group deliberations of 1992.

   Telcordia has proposed DHCP-related solutions for the CECOM MOSAIC
   program.  The Naval Research Lab (NRL) Information Technology
   Division uses DHCP in their MANET research testbeds.  Various
   proposals within the IETF have suggested similar mechanisms.

   [I-D.ietf-v6ops-tunnel-security-concerns] discusses security concerns
   regarding tunneling mechanisms that may subvert security through
   Network Address Translator (NAT) traversal.

   An automated IPv4 prefix delegation mechanism is proposed in
   [I-D.ietf-dhc-subnet-alloc].


9.  Acknowledgements

   The following individuals gave direct and/or indirect input that was
   essential to the work: Jari Arkko, Teco Boot, Emmanuel Bacelli, Brian
   Carpenter, James Bound, Thomas Clausen, Joel Halpern, Bob Hinden,
   Sapumal Jayatissa, Dan Jen, Tony Li, Joe Macker, Thomas Narten,
   Alexandru Petrescu, John Spence, Jinmei Tatuya, Dave Thaler, Ole
   Troan, Michaela Vanderveen, Lixia Zhang and others in the IETF
   AUTOCONF and MANET working groups.  Many others have provided
   guidance over the course of many years.




Templin                   Expires July 12, 2009                [Page 20]

Internet-Draft                     VET                      January 2009


10.  Contributors

   The following individuals have contributed to this document:

   Eric Fleischman (eric.fleischman@boeing.com)
   Thomas Henderson (thomas.r.henderson@boeing.com)
   Steven Russert (steven.w.russert@boeing.com)
   Seung Yi (seung.yi@boeing.com)

   Ian Chakeres (ian.chakeres@gmail.com) contributed to earlier versions
   of the document.


11.  References

11.1.  Normative References

   [RFC0791]  Postel, J., "Internet Protocol", STD 5, RFC 791,
              September 1981.

   [RFC0826]  Plummer, D., "Ethernet Address Resolution Protocol: Or
              converting network protocol addresses to 48.bit Ethernet
              address for transmission on Ethernet hardware", STD 37,
              RFC 826, November 1982.

   [RFC1035]  Mockapetris, P., "Domain names - implementation and
              specification", STD 13, RFC 1035, November 1987.

   [RFC2131]  Droms, R., "Dynamic Host Configuration Protocol",
              RFC 2131, March 1997.

   [RFC2460]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", RFC 2460, December 1998.

   [RFC3007]  Wellington, B., "Secure Domain Name System (DNS) Dynamic
              Update", RFC 3007, November 2000.

   [RFC3315]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C.,
              and M. Carney, "Dynamic Host Configuration Protocol for
              IPv6 (DHCPv6)", RFC 3315, July 2003.

   [RFC3596]  Thomson, S., Huitema, C., Ksinant, V., and M. Souissi,
              "DNS Extensions to Support IP Version 6", RFC 3596,
              October 2003.

   [RFC3633]  Troan, O. and R. Droms, "IPv6 Prefix Options for Dynamic
              Host Configuration Protocol (DHCP) version 6", RFC 3633,
              December 2003.



Templin                   Expires July 12, 2009                [Page 21]

Internet-Draft                     VET                      January 2009


   [RFC3971]  Arkko, J., Kempf, J., Zill, B., and P. Nikander, "SEcure
              Neighbor Discovery (SEND)", RFC 3971, March 2005.

   [RFC3972]  Aura, T., "Cryptographically Generated Addresses (CGA)",
              RFC 3972, March 2005.

   [RFC4191]  Draves, R. and D. Thaler, "Default Router Preferences and
              More-Specific Routes", RFC 4191, November 2005.

   [RFC4291]  Hinden, R. and S. Deering, "IP Version 6 Addressing
              Architecture", RFC 4291, February 2006.

   [RFC4861]  Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
              "Neighbor Discovery for IP version 6 (IPv6)", RFC 4861,
              September 2007.

   [RFC4862]  Thomson, S., Narten, T., and T. Jinmei, "IPv6 Stateless
              Address Autoconfiguration", RFC 4862, September 2007.

   [RFC5214]  Templin, F., Gleeson, T., and D. Thaler, "Intra-Site
              Automatic Tunnel Addressing Protocol (ISATAP)", RFC 5214,
              March 2008.

11.2.  Informative References

   [CATENET]  Pouzin, L., "A Proposal for Interconnecting Packet
              Switching Networks", May 1974.

   [I-D.cheshire-dnsext-multicastdns]
              Cheshire, S. and M. Krochmal, "Multicast DNS",
              draft-cheshire-dnsext-multicastdns-07 (work in progress),
              September 2008.

   [I-D.clausen-manet-linktype]
              Clausen, T., "The MANET Link Type",
              draft-clausen-manet-linktype-00 (work in progress),
              October 2008.

   [I-D.ietf-autoconf-manetarch]
              Chakeres, I., Macker, J., and T. Clausen, "Mobile Ad hoc
              Network Architecture", draft-ietf-autoconf-manetarch-07
              (work in progress), November 2007.

   [I-D.ietf-dhc-subnet-alloc]
              Johnson, R., "Subnet Allocation Option",
              draft-ietf-dhc-subnet-alloc-07 (work in progress),
              July 2008.




Templin                   Expires July 12, 2009                [Page 22]

Internet-Draft                     VET                      January 2009


   [I-D.ietf-ipv6-ula-central]
              Hinden, R., "Centrally Assigned Unique Local IPv6 Unicast
              Addresses", draft-ietf-ipv6-ula-central-02 (work in
              progress), June 2007.

   [I-D.ietf-manet-smf]
              Macker, J. and S. Team, "Simplified Multicast Forwarding
              for MANET", draft-ietf-manet-smf-08 (work in progress),
              November 2008.

   [I-D.ietf-v6ops-tunnel-security-concerns]
              Hoagland, J., Krishnan, S., and D. Thaler, "Security
              Concerns With IP Tunneling",
              draft-ietf-v6ops-tunnel-security-concerns-01 (work in
              progress), October 2008.

   [I-D.templin-seal]
              Templin, F., "The Subnetwork Encapsulation and Adaptation
              Layer (SEAL)", draft-templin-seal-23 (work in progress),
              August 2008.

   [IEN48]    Cerf, V., "The Catenet Model for Internetworking",
              July 1978.

   [RASADV]   Microsoft, "Remote Access Server Advertisement (RASADV)
              Protocol Specification", October 2008.

   [RFC1122]  Braden, R., "Requirements for Internet Hosts -
              Communication Layers", STD 3, RFC 1122, October 1989.

   [RFC1753]  Chiappa, J., "IPng Technical Requirements Of the Nimrod
              Routing and Addressing Architecture", RFC 1753,
              December 1994.

   [RFC1918]  Rekhter, Y., Moskowitz, R., Karrenberg, D., Groot, G., and
              E. Lear, "Address Allocation for Private Internets",
              BCP 5, RFC 1918, February 1996.

   [RFC1955]  Hinden, R., "New Scheme for Internet Routing and
              Addressing (ENCAPS) for IPNG", RFC 1955, June 1996.

   [RFC2501]  Corson, M. and J. Macker, "Mobile Ad hoc Networking
              (MANET): Routing Protocol Performance Issues and
              Evaluation Considerations", RFC 2501, January 1999.

   [RFC2529]  Carpenter, B. and C. Jung, "Transmission of IPv6 over IPv4
              Domains without Explicit Tunnels", RFC 2529, March 1999.




Templin                   Expires July 12, 2009                [Page 23]

Internet-Draft                     VET                      January 2009


   [RFC2775]  Carpenter, B., "Internet Transparency", RFC 2775,
              February 2000.

   [RFC3056]  Carpenter, B. and K. Moore, "Connection of IPv6 Domains
              via IPv4 Clouds", RFC 3056, February 2001.

   [RFC3704]  Baker, F. and P. Savola, "Ingress Filtering for Multihomed
              Networks", BCP 84, RFC 3704, March 2004.

   [RFC3753]  Manner, J. and M. Kojo, "Mobility Related Terminology",
              RFC 3753, June 2004.

   [RFC3819]  Karn, P., Bormann, C., Fairhurst, G., Grossman, D.,
              Ludwig, R., Mahdavi, J., Montenegro, G., Touch, J., and L.
              Wood, "Advice for Internet Subnetwork Designers", BCP 89,
              RFC 3819, July 2004.

   [RFC3927]  Cheshire, S., Aboba, B., and E. Guttman, "Dynamic
              Configuration of IPv4 Link-Local Addresses", RFC 3927,
              May 2005.

   [RFC4193]  Hinden, R. and B. Haberman, "Unique Local IPv6 Unicast
              Addresses", RFC 4193, October 2005.

   [RFC4301]  Kent, S. and K. Seo, "Security Architecture for the
              Internet Protocol", RFC 4301, December 2005.

   [RFC4759]  Stastny, R., Shockey, R., and L. Conroy, "The ENUM Dip
              Indicator Parameter for the "tel" URI", RFC 4759,
              December 2006.

   [RFC4852]  Bound, J., Pouffary, Y., Klynsma, S., Chown, T., and D.
              Green, "IPv6 Enterprise Network Analysis - IP Layer 3
              Focus", RFC 4852, April 2007.

   [RFC4903]  Thaler, D., "Multi-Link Subnet Issues", RFC 4903,
              June 2007.

   [RFC4941]  Narten, T., Draves, R., and S. Krishnan, "Privacy
              Extensions for Stateless Address Autoconfiguration in
              IPv6", RFC 4941, September 2007.


Appendix A.  Duplicate Address Detection (DAD) Considerations

   A-priori uniqueness determination (also known as "pre-service DAD")
   for an ELA assigned on an enterprise-interior interface (such as
   specified in [RFC4862]) would require either flooding the entire



Templin                   Expires July 12, 2009                [Page 24]

Internet-Draft                     VET                      January 2009


   enterprise or somehow discovering a link in the enterprise on which a
   node that configures a duplicate address is attached and performing a
   localized DAD exchange on that link.  But, the control message
   overhead for such an enterprise-wide DAD would be substantial and
   prone to false-negatives due to packet loss and intermittent
   connectivity.  An alternative to pre-service DAD is to autoconfigure
   pseudo-random ELAs on enterprise-interior interfaces and employ a
   passive in-service DAD (e.g., one that monitors routing protocol
   messages for duplicate assignments).

   Pseudo-random IPv6 ELAs can be generated with mechanisms such as
   CGAs, IPv6 privacy addresses, etc. with very small probability of
   collision.  Pseudo-random IPv4 ELAs can be generated through random
   assignment from a suitably large IPv4 prefix space.

   Consistent operational practices can assure uniqueness for EBG-
   aggregated addresses/prefixes, while statistical properties for
   pseudo-random address self-generation can assure uniqueness for the
   ELAs assigned on an EIR's enterprise-interior interfaces.  Still, an
   ELA delegation authority should be used when available, while a
   passive in-service DAD mechanism should be used to detect ELA
   duplications when there is no ELA delegation authority.


Appendix B.  Change Log

   (Note to RFC editor - this section to be removed before publication
   as an RFC.)

   Changes from -25 to 26:

   o  Clarifications on Router Discovery and Ingress FIltering.

   o  Mechanisms for detecting locator liveness

   o  Mechanisms for avoiding state synchonization requirements.

   Changes from -23 to 24:

   o  Clarifications on router discovery.

   Changes from -22 to 23:

   o  Clarifications on prefix mapping.

   Changes from -21 to 22:





Templin                   Expires July 12, 2009                [Page 25]

Internet-Draft                     VET                      January 2009


   o  Using SEAL to secure VET

   Changes from -20 to 21:

   o  Enterprise partitioning.

   o  Mapping and name service management.

   Changes from -18 to 20:

   o  Added support for simple hosts.

   o  Added EBG name service maintenace procedures

   o  Added router and prefix maintenace procedures

   Changes from -17 to 18:

   o  adjusted section headings to group autoconf operations under EIR/
      EBR/EBG.

   o  clarified M/O bits

   o  clarified EBG roles

   Changes from -15 to 17:

   o  title change to "Virtual Enterprise Traversal (VET)".

   o  changed document focus from MANET-centric to the much-broader
      Enterprise-centric, where "Enterprise" is understood to also cover
      a wide range of MANET types.

   Changes from -14 to 15:

   o  title change to "Virtual Enterprise Traversal (VET) for MANETs".

   o  Address review comments

   Changes from -12 to 14:

   o  title change to "The MANET Virtual Ethernet Abstraction".

   o  Minor section rearrangement.

   o  Clartifications on portable and self-configured prefixes.





Templin                   Expires July 12, 2009                [Page 26]

Internet-Draft                     VET                      January 2009


   o  Clarifications on DHCPv6 prefix delegation procedures.

   Changes from -11 to 12:

   o  title change to "MANET Autoconfiguration using Virtual Ethernet".

   o  DHCP prefix delegation for both IPv4 and IPv6 as primary address
      delegation mechanism.

   o  IPv6 SLAAC for address autoconfiguration on the VET interface.

   o  fixed editorials based on comments received.

   Changes from -10 to 11:

   o  removed the transparent/opaque VET portal abstractions.

   o  removed routing header as an option for MANET exit router
      selection.

   o  included IPv6 SLAAC as an endorsed address configuration mechanism
      for the VET interface.

   Changes from -08 to -09:

   o  Introduced the term "VET".

   o  Changed address delegation language to speak of "MNBR-aggregated"
      instead of global/local.

   o  Updated figures 1-3.

   o  Explained why a MANET interface is "neutral".

   o  Removed DHCPv4 "MLA Address option".  Now, MNBRs can only be
      DHCPv4 servers; not relays.

   Changes from -07 to -08:

   o  changed terms "unenhanced" and "enhanced" to "transparent" and
      "opaque".

   o  revised MANET Router diagram.

   o  introduced RFC3753 terminology for Mobile Router; ingress/egress
      interface.





Templin                   Expires July 12, 2009                [Page 27]

Internet-Draft                     VET                      January 2009


   o  changed abbreviations to "MNR" and "MNBR".

   o  added text on ULAs and ULA-Cs to "Self-Generated Addresses".

   o  rearranged Section 3.1.

   o  various minor text cleanups

   Changes from -06 to -07:

   o  added MANET Router diagram.

   o  added new references

   o  various minor text cleanups

   Changed from -05 to -06:

   o  Changed terms "raw" and "cooked" to "unenhanced" and "enhanced".

   o  minor changes to preserve generality

   Changed from -04 to -05:

   o  introduced conceptual "virtual ethernet" model.

   o  support "raw" and "cooked" modes as equivalent access methods on
      the virutal ethernet.

   Changed from -03 to -04:

   o  introduced conceptual "imaginary shared link" as a representation
      for a MANET.

   o  discussion of autonomous system and site abstractions for MANETs

   o  discussion of autoconfiguration of CGAs

   o  new appendix on IPv6 StateLess Address AutoConfiguration

   Changes from -02 to -03:

   o  updated terminology based on RFC2461 "asymmetric reachability"
      link type; IETF67 MANET Autoconf wg discussions.

   o  added new appendix on IPv6 Neighbor Discovery and Duplicate
      Address Detection




Templin                   Expires July 12, 2009                [Page 28]

Internet-Draft                     VET                      January 2009


   o  relaxed DHCP server deployment considerations allow DHCP servers
      within the MANET itself

   Changes from -01 to -02:

   o  minor updates for consistency with recent developments

   Changes from -00 to -01:

   o  new text on DHCPv6 prefix delegation and multilink subnet
      considerations.

   o  various editorial changes


Author's Address

   Fred L. Templin (editor)
   Boeing Research and Technology
   P.O. Box 3707 MC 7L-49
   Seattle, WA  98124
   USA

   Email: fltemplin@acm.org



























Templin                   Expires July 12, 2009                [Page 29]


