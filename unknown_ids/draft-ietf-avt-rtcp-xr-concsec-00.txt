


Audio/Video Transport Working                                    G. Hunt
Group                                                                 BT
Internet-Draft                                                  A. Clark
Intended status: Standards Track                                Telchemy
Expires: April 28, 2009                                 October 25, 2008


      RTCP XR Report Block for Concealed Seconds metric Reporting
                 draft-ietf-avt-rtcp-xr-concsec-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on April 28, 2009.

















Hunt & Clark             Expires April 28, 2009                 [Page 1]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


Abstract

   This document defines an RTCP XR Report Block that allows the
   reporting of Concealed Seconds metrics primarily for audio
   applications of RTP.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
     1.1.  Concealed Seconds Block  . . . . . . . . . . . . . . . . .  3
     1.2.  RTCP and RTCP XR Reports . . . . . . . . . . . . . . . . .  3
     1.3.  Performance Metrics Framework  . . . . . . . . . . . . . .  3
     1.4.  Applicability  . . . . . . . . . . . . . . . . . . . . . .  4
   2.  Concealed Seconds Metrics Block  . . . . . . . . . . . . . . .  5
     2.1.  Report Block Structure . . . . . . . . . . . . . . . . . .  5
     2.2.  Definition of Fields in Concealed Seconds Metrics Block  .  5
   3.  SDP Signaling  . . . . . . . . . . . . . . . . . . . . . . . .  9
   4.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 10
   5.  Security Considerations  . . . . . . . . . . . . . . . . . . . 11
   6.  Contributors . . . . . . . . . . . . . . . . . . . . . . . . . 12
   7.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 13
     7.1.  Normative References . . . . . . . . . . . . . . . . . . . 13
     7.2.  Informative References . . . . . . . . . . . . . . . . . . 13
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 14
   Intellectual Property and Copyright Statements . . . . . . . . . . 15

























Hunt & Clark             Expires April 28, 2009                 [Page 2]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


1.  Introduction

1.1.  Concealed Seconds Block

   This draft defines a new block type to augment those defined in
   [RFC3611], for use primarily in audio applications of RTP.

   At any instant, the audio output at a receiver may be classified as
   either 'normal' or 'concealed'.  'Normal' refers to playout of audio
   payload received from the remote end, and also includes locally
   generated signals such as announcements, tones and comfort noise.
   Concealment refers to playout of locally-generated signals used to
   mask the impact of network impairments or to reduce the audibility of
   jitter buffer adaptations.

   The new block type provides metrics for concealment.  Specifically,
   the first metric (Unimpaired Seconds) reports the number of whole
   seconds occupied only with normal playout of data which the receiver
   obtained from the sender's stream.  The second metric (Concealed
   Seconds) reports the number of whole seconds during which the
   receiver played out any locally-generated media data.  A third metric
   (Severely Concealed Seconds) reports the number of whole seconds
   during which the receiver played out locally-generated data for more
   than SCS Threshold (ms).

   The metric belongs to the class of transport-related terminal metrics
   defined in [MONARCH] (work in progress).

   Instances of this Metrics Block refer by tag to the separate
   auxiliary Measurement Identity block [MEASIDENT] which contains
   information such as the SSRC of the measured stream, and RTP sequence
   numbers and time intervals indicating the span of the report.

1.2.  RTCP and RTCP XR Reports

   The use of RTCP for reporting is defined in [RFC3550].  [RFC3611]
   defined an extensible structure for reporting using an RTCP Extended
   Report (XR).  This draft defines a new Extended Report block that
   MUST be used as defined in [RFC3550] and [RFC3611].

1.3.  Performance Metrics Framework

   The Performance Metrics Framework [PMOLFRAME] provides guidance on
   the definition and specification of performance metrics.  Metrics
   described in this draft either reference external definitions or
   define metrics generally in accordance with the guidelines in
   [PMOLFRAME].




Hunt & Clark             Expires April 28, 2009                 [Page 3]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


1.4.  Applicability

   This metric is primarily applicable to audio applications of RTP.
   EDITOR'S NOTE: are there metrics for concealment of transport errors
   for video?














































Hunt & Clark             Expires April 28, 2009                 [Page 4]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


2.  Concealed Seconds Metrics Block

   This sub-block provides a description of potentially audible
   impairments due to lost and discarded packets at the endpoint,
   expressed on a time basis analogous to a traditional PSTN T1/E1
   errored seconds metric.

   The following metrics are based on successive one second intervals as
   declared by a local clock.  This local clock does NOT need to be
   synchronized to any external time reference.  The starting time of
   this clock is unspecified.  Note that this implies that the same loss
   pattern could result in slightly different count values, depending on
   where the losses occur relative to the particular one-second
   demarcation points.  For example, two loss events occurring 50ms
   apart could result in either one concealed second or two, depending
   on the particular 1000 ms boundaries used.

   The seconds in this sub-block are not necessarily calendar seconds.
   At the tail end of a call, periods of time of less than 1000ms shall
   be incorporated into these counts if they exceed 500ms and shall be
   disregarded if they are less than 500ms.

2.1.  Report Block Structure

      Concealed seconds metrics block
       0               1               2               3
       0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     BT=NCS    |I| tag |plc|rsv|       block length = 3        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Unimpaired Seconds                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       Concealed Seconds                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Severely Concealed Seconds    | RESERVED      | SCS Threshold |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                     Figure 1: Report Block Structure

2.2.  Definition of Fields in Concealed Seconds Metrics Block

   block type (BT): 8 bits

      A Concealed Seconds Metrics Report Block is identified by the
      constant NCS.

   [Note to RFC Editor: please replace NCS with the IANA provided RTCP
   XR block type for this block.]



Hunt & Clark             Expires April 28, 2009                 [Page 5]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


   Interval Metric flag (I): 1 bit

      This field is used to indicate whether the Concealed Seconds
      metric block is an Interval or a Cumulative report, that is,
      whether the reported values apply to the most recent measurement
      interval duration between successive metrics reports (I=1) (the
      Interval Duration) or to the accumulation period characteristic of
      cumulative measurements (I=0) (the Cumulative Duration).
      Numerical values for both these intervals are provided in the
      Measurement Identifier block referenced by the tag field below.

   Measurement Identifier association (tag): 3 bits

      This field is used to identify the Measurement Identifier block
      [MEASIDENT] which describes this measurement.  The relevant
      Measurement Identifier block has the same tag value as the
      Concealed Seconds Metrics block.  Note that there may be more than
      one Measurement Identifier block per RTCP packet.

   Packet Loss Concealment Method (plc): 2 bits

      This field is used to identify the packet loss concealment method
      in use at the receiver, according to the following code:


           bits 0-3
                 0 = silence insertion
                 1 = simple replay, no attenuation
                 2 = simple replay, with attenuation
                 3 = enhanced
                 Other values reserved

   Reserved (rsv): 2 bits

      These bits are reserved.  They SHOULD be set to zero by senders
      and MUST be ignored by receivers.

   block length: 16 bits

      The length of this report block in 32-bit words, minus one.  For
      the Concealed Seconds block, the block length is equal to 3.

   Unimpaired Seconds: 32 bits

      A count of the number of unimpaired Seconds that have occurred.

      An unimpaired Second is defined as a continuous period of 1000ms
      during which no frame loss or discard due to late arrival has



Hunt & Clark             Expires April 28, 2009                 [Page 6]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


      occurred.  Every second in a call must be classified as either OK
      or Concealed.

      Normal playout of comfort noise or other silence concealment
      signal during periods of talker silence, if VAD is used, shall be
      counted as unimpaired seconds.

      If the measured value exceeds 0xFFFFFFFD, the value 0xFFFFFFFE
      SHOULD be reported to indicate an over-range measurement.  If the
      measurement is unavailable, the value 0xFFFFFFFF SHOULD be
      reported.



   Concealed Seconds: 32 bits

      A count of the number of Concealed Seconds that have occurred.

      A Concealed Second is defined as a continuous period of 1000ms
      during which any frame loss or discard due to late arrival has
      occurred.

      Equivalently, a concealed second is one in which some Loss-type
      concealment (defined in Section 3.6) has occurred.  Buffer
      adjustment-type concealment SHALL not cause Concealed Seconds to
      be incremented, with the following exception.  An implementation
      MAY cause Concealed Seconds to be incremented for 'emergency'
      buffer adjustments made during talkspurts.

      For clarification, the count of Concealed Seconds MUST include the
      count of Severely Concealed Seconds.

      If the measured value exceeds 0xFFFFFFFD, the value 0xFFFFFFFE
      SHOULD be reported to indicate an over-range measurement.  If the
      measurement is unavailable, the value 0xFFFFFFFF SHOULD be
      reported.  The duration, in milliseconds, of audio playout
      corresponding to Loss-type concealment.

   Severely Concealed Seconds: 16 bits

      A count of the number of Severely Concealed Seconds.

      A Severely Concealed Second is defined as a non-overlapping period
      of 1000 ms during which the cumulative amount of time that has
      been subject to frame loss or discard due to late arrival, exceeds
      the SCS Threshold.





Hunt & Clark             Expires April 28, 2009                 [Page 7]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


      If the measured value exceeds 0xFFFD, the value 0xFFFE SHOULD be
      reported to indicate an over-range measurement.  If the
      measurement is unavailable, the value 0xFFFF SHOULD be reported.

   RESERVED: 8 bits

      These bits are reserved.  They SHOULD be set to zero by senders
      and MUST be ignored by receivers.

   SCS Threshold: 8 bits

      The SCS Threshold defines the amount of time corresponding to lost
      or discarded frames that must occur within a one second period in
      order for the second to be classified as a Severely Concealed
      Second.  This is expressed in milliseconds and hence can represent
      a range of 0.1 to 25.5 percent loss or discard.

      A default threshold of 50ms (5% effective frame loss per second)
      is suggested.
































Hunt & Clark             Expires April 28, 2009                 [Page 8]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


3.  SDP Signaling

   [RFC3611] defines the use of SDP (Session Description Protocol)
   [RFC4566] for signaling the use of XR blocks.  XR blocks MAY be used
   without prior signaling.

   This section augments the SDP [RFC4566] attribute "rtcp-xr" defined
   in [RFC3611] by providing an additional value of "xr-format" to
   signal the use of the report block defined in this document.

   The SDP attribute for the block has an additional optional paremeter,
   "thresh", used to supply a value for the SCS Threshold parameter.  If
   this parameter is present, the RTP system receiving the SDP SHOULD
   use this value for the current session.  If the parameter is not
   present, the RTP system SHOULD use a locally configured value.

   rtcp-xr-attrib = "a=" "rtcp-xr" ":" [xr-format *(SP xr-format)] CRLF

   (defined in [RFC3611])

   xr-format = xr-format / xr-conc-sec-block

   xr-conc-sec-block = "xr-concsec" ["=" thresh]

        thresh      = 1*DIGIT          ; threshold for SCS (ms)
        DIGIT          = %x30-39

























Hunt & Clark             Expires April 28, 2009                 [Page 9]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


4.  IANA Considerations

   This document creates a new block type within the IANA "RTCP XR Block
   Type Registry" called the Concealed Seconds Metrics Block, and a new
   parameter xr-concsec within the "RTCP XR SDP Parameters Registry".














































Hunt & Clark             Expires April 28, 2009                [Page 10]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


5.  Security Considerations

   It is believed that this proposed RTCP XR report block introduces no
   new security considerations beyond those described in [RFC3611].
   This block does not provide per-packet statistics so the risk to
   confidentiality documented in Section 7, paragraph 3 of [RFC3611]
   does not apply.












































Hunt & Clark             Expires April 28, 2009                [Page 11]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


6.  Contributors

   The authors gratefully acknowledge the comments and contributions
   made by Bruce Adams, Philip Arden, Amit Arora, Bob Biskner, Kevin
   Connor, Claus Dahm, Randy Ethier, Roni Even, Jim Frauenthal, Albert
   Higashi, Tom Hock, Shane Holthaus, Paul Jones, Rajesh Kumar, Keith
   Lantz, Mohamed Mostafa, Amy Pendleton, Colin Perkins, Mike Ramalho,
   Ravi Raviraj, Albrecht Schwarz, Tom Taylor, and Hideaki Yamada.











































Hunt & Clark             Expires April 28, 2009                [Page 12]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


7.  References

7.1.  Normative References

   [MEASIDENT]
              Hunt, G., "RTCP XR Measurement Identifier Block",
              ID draft-ietf-avt-rtcp-xr-measid-00, August 2008.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", RFC 2119, BCP 14, March 1997.

   [RFC3550]  Schulzrinne, H., "RTP: A Transport Protocol for Real-Time
              Applications", RFC 3550, July 2003.

   [RFC3611]  Friedman, T., "RTP Control Protocol Extended Reports (RTCP
              XR)", RFC 3611, November 2003.

   [RFC4566]  Handley, M., "SDP: Session Description Protocol",
              RFC 4566, July 2006.

7.2.  Informative References

   [MONARCH]  Hunt, G., "Monitoring Architectures for RTP",
              ID draft-hunt-avt-monarch-01, August 2008.

   [PMOLFRAME]
              Clark, A., "Framework for Performance Metric Development",
              ID draft-ietf-pmol-metrics-framework-00, July 2008.























Hunt & Clark             Expires April 28, 2009                [Page 13]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


Authors' Addresses

   Geoff Hunt
   BT
   Orion 1 PP9
   Adastral Park
   Martlesham Heath
   Ipswich, Suffolk  IP4 2TH
   United Kingdom

   Phone: +44 1473 608325
   Email: geoff.hunt@bt.com


   Alan Clark
   Telchemy Incorporated
   2905 Premiere Parkway, Suite 280
   Duluth, GA  30097
   USA

   Email: alan.d.clark@telchemy.com






























Hunt & Clark             Expires April 28, 2009                [Page 14]

Internet-Draft          RTCP XR Concealed Seconds           October 2008


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.











Hunt & Clark             Expires April 28, 2009                [Page 15]


