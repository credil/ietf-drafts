%!PS-Adobe-3.0
%%Creator: groff version 1.19.2
%%CreationDate: Thu Jun 10 19:12:01 2010
%%DocumentNeededResources: font Times-Roman
%%DocumentSuppliedResources: procset grops 1.19 2
%%Pages: 12 0
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginProcSet: PStoPS 1 15
userdict begin
[/showpage/erasepage/copypage]{dup where{pop dup load
 type/operatortype eq{1 array cvx dup 0 3 index cvx put
 bind def}{pop}ifelse}{pop}ifelse}forall
[/letter/legal/executivepage/a4/a4small/b5/com10envelope
 /monarchenvelope/c5envelope/dlenvelope/lettersmall/note
 /folio/quarto/a5]{dup where{dup wcheck{exch{}put}
 {pop{}def}ifelse}{pop}ifelse}forall
/setpagedevice {pop}bind 1 index where{dup wcheck{3 1 roll put}
 {pop def}ifelse}{def}ifelse
/PStoPSmatrix matrix currentmatrix def
/PStoPSxform matrix def/PStoPSclip{clippath}def
/defaultmatrix{PStoPSmatrix exch PStoPSxform exch concatmatrix}bind def
/initmatrix{matrix defaultmatrix setmatrix}bind def
/initclip[{matrix currentmatrix PStoPSmatrix setmatrix
 [{currentpoint}stopped{$error/newerror false put{newpath}}
 {/newpath cvx 3 1 roll/moveto cvx 4 array astore cvx}ifelse]
 {[/newpath cvx{/moveto cvx}{/lineto cvx}
 {/curveto cvx}{/closepath cvx}pathforall]cvx exch pop}
 stopped{$error/errorname get/invalidaccess eq{cleartomark
 $error/newerror false put cvx exec}{stop}ifelse}if}bind aload pop
 /initclip dup load dup type dup/operatortype eq{pop exch pop}
 {dup/arraytype eq exch/packedarraytype eq or
  {dup xcheck{exch pop aload pop}{pop cvx}ifelse}
  {pop cvx}ifelse}ifelse
 {newpath PStoPSclip clip newpath exec setmatrix} bind aload pop]cvx def
/initgraphics{initmatrix newpath initclip 1 setlinewidth
 0 setlinecap 0 setlinejoin []0 setdash 0 setgray
 10 setmiterlimit}bind def
end
%%EndProcSet
%%BeginResource: procset grops 1.19 2
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
/setpagedevice{}def
}bind def
/PEND{
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Times-Roman
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Roman@0 ENC0/Times-Roman RE
userdict/PStoPSxform PStoPSmatrix matrix currentmatrix
 matrix invertmatrix matrix concatmatrix
 matrix invertmatrix put
%%EndSetup
%%Page: (0) 1
userdict/PStoPSsaved save put
PStoPSmatrix setmatrix
0.000000 -28.346457 translate
userdict/PStoPSmatrix matrix currentmatrix put
userdict/PStoPSclip{0 0 moveto
 595.000000 0 rlineto 0 842.000000 rlineto -595.000000 0 rlineto
 closepath}put initclip
PStoPSxform concat
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(Netw)72 84 Q(ork W)-.1 E(orking Group)-.8 E 2.58
-1.29(Y. N)343.55 H(ir)1.29 E 360.8(Internet-Draft Check)72 96 R(Point)
2.5 E(Intended status: Informational)72 108 Q(June 10, 2010)291.63 E
(Expires: December 12, 2010)72 120 Q(IPsec Cluster Problem Statement)
240.03 156 Q(draft-ietf-ipsecme-ipsec-ha-06)245.19 168 Q(Abstract)72 192
Q(This document de\214nes terminology)102 216 Q 2.5(,p)-.65 G
(roblem statement and requirements for implementing IKE and IPsec on)
-2.5 E 2.5(clusters. It)102 228 R(also describes g)2.5 E(aps in e)-.05 E
(xisting standards and their implementation that need to be \214lled, i\
n order)-.15 E(to allo)102 240 Q 2.5(wp)-.25 G
(eers to interoperate with clusters from dif)-2.5 E(ferent v)-.25 E 2.5
(endors. An)-.15 F(agreed terminology)2.5 E 2.5(,p)-.65 G(roblem)-2.5 E
(statement and requirements will allo)102 252 Q 2.5(wt)-.25 G
(he IPSECME WG to consider de)-2.5 E -.15(ve)-.25 G
(lopment of IPsec/IKEv2).15 E
(mechanisms to simplify cluster implementations.)102 264 Q
(Status of this Memo)72 288 Q
(This Internet-Draft is submitted in full conformance with the pro)102
312 Q(visions of BCP)-.15 E(78 and BCP)5 E(79.)5 E
(Internet-Drafts are w)102 336 Q
(orking documents of the Internet Engineering T)-.1 E(ask F)-.8 E
(orce \(IETF\).)-.15 E(Note that other)5 E(groups may also distrib)102
348 Q(ute w)-.2 E(orking documents as Internet-Drafts.)-.1 E
(The list of current Internet- Drafts is at)5 E(http://datatrack)102 360
Q(er)-.1 E(.ietf.or)-.55 E(g/drafts/current/.)-.18 E
(Internet-Drafts are draft documents v)102 384 Q
(alid for a maximum of six months and may be updated, replaced, or)-.25
E(obsoleted by other documents at an)102 396 Q 2.5(yt)-.15 G 2.5
(ime. It)-2.5 F
(is inappropriate to use Internet-Drafts as reference material or)2.5 E
(to cite them other than as "w)102 408 Q(ork in progress.")-.1 E
(This Internet-Draft will e)102 432 Q(xpire on December 12, 2010.)-.15 E
(Cop)72 456 Q(yright Notice)-.1 E(Cop)102 480 Q
(yright \(c\) 2010 IETF T)-.1 E
(rust and the persons identi\214ed as the document authors.)-.35 E
(All rights reserv)5 E(ed.)-.15 E
(This document is subject to BCP 78 and the IETF T)102 504 Q
(rust\264s Le)-.35 E -.05(ga)-.15 G 2.5(lP).05 G(ro)-2.5 E
(visions Relating to IETF Documents)-.15 E(\(http://trustee.ietf.or)102
516 Q(g/license-info\) in ef)-.18 E
(fect on the date of publication of this document.)-.25 E(Please re)5 E
(vie)-.25 E 2.5(wt)-.25 G(hese)-2.5 E(documents carefully)102 528 Q 2.5
(,a)-.65 G 2.5(st)-2.5 G(he)-2.5 E 2.5(yd)-.15 G
(escribe your rights and restrictions with respect to this document.)
-2.5 E(Code)5 E(Components e)102 540 Q
(xtracted from this document must include Simpli\214ed BSD License te)
-.15 E(xt as described in Section)-.15 E(4.e of)102 552 Q 162.35
(Nir Expires)72 696 R(December 12, 2010)2.5 E([P)144.73 E(age 1])-.15 E
0 Cg EP
PStoPSsaved restore
%%Page: (1) 2
userdict/PStoPSsaved save put
PStoPSmatrix setmatrix
0.000000 -28.346457 translate
userdict/PStoPSmatrix matrix currentmatrix put
userdict/PStoPSclip{0 0 moveto
 595.000000 0 rlineto 0 842.000000 rlineto -595.000000 0 rlineto
 closepath}put initclip
PStoPSxform concat
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 110(Internet-Draft IPsec)72 48 R
(Cluster Problem Statement)2.5 E(June 2010)127.2 E(the T)102 84 Q
(rust Le)-.35 E -.05(ga)-.15 G 2.5(lP).05 G(ro)-2.5 E
(visions and are pro)-.15 E(vided without w)-.15 E
(arranty as described in the Simpli\214ed BSD License.)-.1 E -.8(Ta)72
120 S(ble of Contents).8 E 2.5(1. Introduction)79.5 144 R(3)393.56 E 2.5
(1.1. Con)84.5 156 R -.15(ve)-.4 G(ntions Used in This Document).15 E(3)
282.72 E 2.5(2. T)79.5 168 R 388.98(erminology 3)-.7 F 2.5(3. The)79.5
180 R(Problem Statement)2.5 E(5)348.56 E 2.5(3.1. Scope)84.5 192 R(5)
406.06 E 2.5(3.2. Lots)84.5 204 R(of Long Li)2.5 E -.15(ve)-.25 G 2.5
(dS).15 G 327.85(tate 6)-2.5 F 2.5(3.3. IKE)84.5 216 R 372.73
(Counters 6)2.5 F 2.5(3.4. Outbound)84.5 228 R(SA Counters)2.5 E(6)
336.61 E 2.5(3.5. Inbound)84.5 240 R(SA Counters)2.5 E(7)343.28 E 2.5
(3.6. Missing)84.5 252 R(Synch Messages)2.5 E(8)329.39 E 2.5
(3.7. Simultaneous)84.5 264 R(use of IKE and IPsec SAs by Dif)2.5 E
(ferent)-.25 E 395.23(Members 8)99.5 276 R 2.5(3.7.1. Outbound)89.5 288
R(SAs using counter modes)2.5 E(9)273.56 E 2.5(3.8. Dif)84.5 300 R
(ferent IP addresses for IKE and IPsec)-.25 E(9)267.47 E 2.5
(3.9. Allocation)84.5 312 R(of SPIs)2.5 E(10)351.61 E 2.5(4. Security)
79.5 324 R 339.67(Considerations 10)2.5 F 2.5(5. IAN)79.5 336 R 2.5(AC)
-.35 G 348.36(onsiderations 10)-2.5 F 2.5(6. Ackno)79.5 348 R 356.32
(wledgements 10)-.25 F 2.5(7. Change)79.5 360 R 386.34(Log 11)2.5 F 2.5
(8. Informati)79.5 372 R .3 -.15(ve R)-.25 H 341.77(eferences 11).15 F
(Author\264s Address)79.5 384 Q(12)379.68 E 162.35(Nir Expires)72 696 R
(December 12, 2010)2.5 E([P)144.73 E(age 2])-.15 E 0 Cg EP
PStoPSsaved restore
%%Page: (2) 3
userdict/PStoPSsaved save put
PStoPSmatrix setmatrix
0.000000 -28.346457 translate
userdict/PStoPSmatrix matrix currentmatrix put
userdict/PStoPSclip{0 0 moveto
 595.000000 0 rlineto 0 842.000000 rlineto -595.000000 0 rlineto
 closepath}put initclip
PStoPSxform concat
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 110(Internet-Draft IPsec)72 48 R
(Cluster Problem Statement)2.5 E(June 2010)127.2 E 2.5(1. Introduction)
72 84 R(IKEv2, as described in [RFC4306] and [IKEv2bis], and IPsec, as \
described in [RFC4301] and others, allo)102 108 Q(ws)-.25 E(deplo)102
120 Q(yment of VPNs between dif)-.1 E
(ferent sites as well as from VPN clients to protected netw)-.25 E
(orks.)-.1 E(As VPNs become increasingly important to the or)102 144 Q
-.05(ga)-.18 G(nizations deplo).05 E
(ying them, there is a demand to mak)-.1 E(e)-.1 E
(IPsec solutions more scalable and less prone to do)102 156 Q
(wn time, by using more than one ph)-.25 E(ysical g)-.05 E(ate)-.05 E
-.1(wa)-.25 G 2.5(yt).1 G(o)-2.5 E(either share the load or back each o\
ther up, forming a "cluster" \(see Section)102 168 Q 2.5(2\). Similar)5
F(demands ha)2.5 E .3 -.15(ve b)-.2 H(een).15 E
(made in the past for other critical pieces of an or)102 180 Q -.05(ga)
-.18 G(nization\264s infrastructure, such as DHCP and DNS serv).05 E
(ers,)-.15 E(web serv)102 192 Q(ers, databases and others.)-.15 E(IKE a\
nd IPsec are in particular less friendly to clustering than these other\
 protocols, because the)102 216 Q 2.5(ys)-.15 G(tore more)-2.5 E
(state, and that state is more v)102 228 Q 2.5(olatile. Section 2)-.2 F
(de\214nes terminology for use in this document, and in the)2.5 E(en)102
240 Q(visioned solution documents.)-.4 E(In general, deplo)102 264 Q
(ying IKE and IPsec in a cluster requires such a lar)-.1 E
(ge amount of information to be)-.18 E
(synchronized among the members of the cluster)102 276 Q 2.5(,t)-.4 G
(hat it becomes impractical.)-2.5 E(Alternati)5 E -.15(ve)-.25 G(ly).15
E 2.5(,i)-.65 G 2.5(fl)-2.5 G(ess)-2.5 E(information is synchronized, f)
102 288 Q(ailo)-.1 E -.15(ve)-.15 G 2.5(rw).15 G
(ould mean a prolonged and intensi)-2.6 E .3 -.15(ve r)-.25 H(eco).15 E
-.15(ve)-.15 G(ry phase, which ne).15 E -.05(ga)-.15 G(tes).05 E
(the scalability and a)102 300 Q -.25(va)-.2 G
(ilability promises of using clusters.).25 E(In Section)5 E 2.5(3w)5 G
2.5(ew)-2.5 G(ill describe this in more detail.)-2.5 E 2.5(1.1. Con)72
324 R -.15(ve)-.4 G(ntions Used in This Document).15 E(The k)102 348 Q
.3 -.15(ey w)-.1 H(ords "MUST", "MUST NO).05 E(T", "REQ)-.4 E
(UIRED", "SHALL", "SHALL NO)-.1 E(T", "SHOULD",)-.4 E("SHOULD NO)102 360
Q(T", "RECOMMENDED", "MA)-.4 E(Y", and "OPTION)-1.05 E
(AL" in this document are to be interpreted)-.35 E
(as described in [RFC2119].)102 372 Q 2.5(2. T)72 408 R(erminology)-.7 E
("Single Gate)102 432 Q -.1(wa)-.25 G
(y" is an implementation of IKE and IPsec enforcing a certain polic).1 E
1.3 -.65(y, a)-.15 H 2.5(sd).65 G(escribed in)-2.5 E([RFC4301].)102 444
Q("Cluster" is a set of tw)102 468 Q 2.5(oo)-.1 G 2.5(rm)-2.5 G(ore g)
-2.5 E(ate)-.05 E -.1(wa)-.25 G
(ys, implementing the same security polic).1 E 1.3 -.65(y, a)-.15 H
(nd protecting the same).65 E 2.5(domain. Clusters)102 480 R -.15(ex)2.5
G(ist to pro).15 E(vide both high a)-.15 E -.25(va)-.2 G
(ilability through redundanc).25 E 1.3 -.65(y, a)-.15 H
(nd scalability through load).65 E(sharing.)102 492 Q("Member" is one g)
102 516 Q(ate)-.05 E -.1(wa)-.25 G 2.5(yi).1 G 2.5(nac)-2.5 G(luster)
-2.5 E(.)-.55 E("A)102 540 Q -.25(va)-.74 G(ilability" is a measure of \
a system\264s ability to perform the service for which it w).25 E
(as designed.)-.1 E(It is)5 E(measured as the percentage)102 552 Q
162.35(Nir Expires)72 696 R(December 12, 2010)2.5 E([P)144.73 E(age 3])
-.15 E 0 Cg EP
PStoPSsaved restore
%%Page: (3) 4
userdict/PStoPSsaved save put
PStoPSmatrix setmatrix
0.000000 -28.346457 translate
userdict/PStoPSmatrix matrix currentmatrix put
userdict/PStoPSclip{0 0 moveto
 595.000000 0 rlineto 0 842.000000 rlineto -595.000000 0 rlineto
 closepath}put initclip
PStoPSxform concat
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 110(Internet-Draft IPsec)72 48 R
(Cluster Problem Statement)2.5 E(June 2010)127.2 E
(of time a service is a)102 84 Q -.25(va)-.2 G
(ilable, from the time it is supposed to be a).25 E -.25(va)-.2 G 2.5
(ilable. Colloquially).25 F 2.5(,a)-.65 G -.25(va)-2.7 G(ilability is)
.25 E(sometimes e)102 96 Q(xpressed in "nines" rather than percentage, \
with 3 "nines" meaning 99.9% a)-.15 E -.25(va)-.2 G(ilability).25 E 2.5
(,4")-.65 G(nines")-2.5 E(meaning 99.99% a)102 108 Q -.25(va)-.2 G
(ilability).25 E 2.5(,e)-.65 G(tc.)-2.5 E("High A)102 132 Q -.25(va)-.74
G(ilability" is a condition of a system, not a con\214guration type.).25
E 2.5(As)5 G(ystem is said to ha)-2.5 E .3 -.15(ve h)-.2 H(igh).15 E -.2
(av)102 144 S(ailability if its e)-.05 E(xpected do)-.15 E
(wn time is lo)-.25 E 3.8 -.65(w. H)-.25 H(igh a).65 E -.25(va)-.2 G
(ilability can be achie).25 E -.15(ve)-.25 G 2.5(di).15 G 2.5(nv)-2.5 G
(arious w)-2.75 E(ays, one of which)-.1 E(is clustering.)102 156 Q
(All the clusters described in this document achie)5 E .3 -.15(ve h)-.25
H(igh a).15 E -.25(va)-.2 G(ilability).25 E 5(.W)-.65 G
(hat "high" means)-5 E(depends on application, b)102 168 Q
(ut usually is 4 to 6 "nines" \(at most 0.5-50 minutes of do)-.2 E
(wn time per year in a)-.25 E(system that is supposed to be a)102 180 Q
-.25(va)-.2 G(ilable all the time.).25 E("F)102 204 Q(ault T)-.15 E
(olerance" is a condition related to high a)-.8 E -.25(va)-.2 G
(ilability).25 E 2.5(,w)-.65 G(here a system maintains service a)-2.5 E
-.25(va)-.2 G(ilability).25 E(,)-.65 E -2.15 -.25(ev e)102 216 T 2.5(nw)
.25 G(hen a speci\214ed set of f)-2.5 E(ault conditions occur)-.1 E 5
(.I)-.55 G 2.5(nc)-5 G(lusters, we e)-2.5 E
(xpect the system to maintain service)-.15 E -.2(av)102 228 S
(ailability)-.05 E 2.5(,w)-.65 G
(hen one or more of the cluster members f)-2.5 E(ails.)-.1 E
("Completely T)102 252 Q
(ransparent Cluster" is a cluster where the occurence of a f)-.35 E
(ault is ne)-.1 E -.15(ve)-.25 G 2.5(rv).15 G(isible to the peers.)-2.5
E("P)102 276 Q(artially T)-.15 E
(ransparent Cluster" is a cluster where the occurence of a f)-.35 E
(ault may be visible to the peers.)-.1 E("Hot Standby Cluster", or "HS \
Cluster" is a cluster where only one of the members is acti)102 300 Q .3
-.15(ve a)-.25 H 2.5(ta).15 G .3 -.15(ny o)-2.5 H(ne time.).15 E
(This member is also referred to as the the "acti)102 312 Q -.15(ve)-.25
G(", whereas the other\(s\) are referred to as "stand-bys".).15 E
([VRRP] is one method of b)102 324 Q(uilding such a cluster)-.2 E(.)-.55
E("Load Sharing Cluster", or "LS Cluster" is a cluster where more than \
one of the members may be acti)102 348 Q .3 -.15(ve a)-.25 H(t).15 E
(the same time.)102 360 Q(The term "load balancing" is also common, b)5
E(ut it implies that the load is actually balanced)-.2 E
(between the members, and this is not a requirement.)102 372 Q("F)102
396 Q(ailo)-.15 E -.15(ve)-.15 G(r" is the e).15 E -.15(ve)-.25 G
(nt where a one member tak).15 E(es o)-.1 E -.15(ve)-.15 G 2.5(rs).15 G
(ome load from some other member)-2.5 E 5(.I)-.55 G 2.5(nah)-5 G
(ot standby)-2.5 E(cluster)102 408 Q 2.5(,t)-.4 G
(his hapens when a standby member becomes acti)-2.5 E .3 -.15(ve d)-.25
H(ue to a f).15 E(ailure of the former acti)-.1 E .3 -.15(ve m)-.25 H
(ember).15 E 2.5(,o)-.4 G(r)-2.5 E(because of an administrator command.)
102 420 Q(In a load sharing cluster)5 E 2.5(,t)-.4 G
(his usually happens because of a f)-2.5 E(ailure of)-.1 E
(one of the members, b)102 432 Q
(ut certain load-balancing technologies may allo)-.2 E 2.5(wap)-.25 G
(articular load \(such as all the)-2.5 E<8d6f>102 444 Q
(ws associated with a particular child SA\) to mo)-.25 E .3 -.15(ve f)
-.15 H(rom one member to another to e).15 E -.15(ve)-.25 G 2.5(no).15 G
(ut the load, e)-2.5 E -.15(ve)-.25 G(n).15 E(without an)102 456 Q 2.5
(yf)-.15 G(ailures.)-2.6 E("T)102 480 Q
(ight Cluster" is a cluster where all the members share an IP address.)
-.35 E(This could be accomplished using)5 E(con\214gured interf)102 492
Q(aces with)-.1 E 162.35(Nir Expires)72 696 R(December 12, 2010)2.5 E
([P)144.73 E(age 4])-.15 E 0 Cg EP
PStoPSsaved restore
%%Page: (4) 5
userdict/PStoPSsaved save put
PStoPSmatrix setmatrix
0.000000 -28.346457 translate
userdict/PStoPSmatrix matrix currentmatrix put
userdict/PStoPSclip{0 0 moveto
 595.000000 0 rlineto 0 842.000000 rlineto -595.000000 0 rlineto
 closepath}put initclip
PStoPSxform concat
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 110(Internet-Draft IPsec)72 48 R
(Cluster Problem Statement)2.5 E(June 2010)127.2 E
(specialized protocols or hardw)102 84 Q(are, such as VRRP)-.1 E 2.5(,o)
-1.11 G 2.5(rt)-2.5 G(hrough the use of multicast addresses, b)-2.5 E
(ut in an)-.2 E 2.5(yc)-.15 G(ase,)-2.5 E
(peers need only be con\214gured with one IP address in the P)102 96 Q
(AD.)-.92 E("Loose Cluster" is a cluster where each member has a dif)102
120 Q(ferent IP address.)-.25 E(Peers \214nd the correct member)5 E
(using some method such as DNS queries or [REDIRECT].)102 132 Q
(In some cases, a member\264s IP address\(es\) may be)5 E
(allocated to another member at f)102 144 Q(ailo)-.1 E -.15(ve)-.15 G
-.55(r.).15 G("Synch Channel" is a communications channel among the clu\
ster members, used to transfer state)102 168 Q 2.5(information. The)102
180 R(synch channel may or may not be IP based, may or may not be encry\
pted, and may w)2.5 E(ork)-.1 E -.15(ove)102 192 S 2.5(rs).15 G
(hort or long distances.)-2.5 E(The security and ph)5 E
(ysical characteristics of this channel are out of scope for)-.05 E
(this document, b)102 204 Q
(ut it is a requirement that its use be minimized for scalability)-.2 E
(.)-.65 E 2.5(3. The)72 240 R(Problem Statement)2.5 E(This section star\
ts by scoping the problem, and goes on to list each of the issues encou\
ntered while setting up)102 264 Q 2.5(ac)102 276 S
(luster of IPsec VPN g)-2.5 E(ate)-.05 E -.1(wa)-.25 G(ys.).1 E 2.5
(3.1. Scope)72 300 R(This document will mak)102 324 Q 2.5(en)-.1 G 2.5
(oa)-2.5 G
(ttempt to describe the problems in setting up a generic cluster)-2.5 E
5(.I)-.55 G 2.5(td)-5 G(escribes)-2.5 E
(only problems related to the IKE/IPsec protocols.)102 336 Q
(The problem of synchronizing the polic)102 360 Q 2.5(yb)-.15 G
(etween cluster members is out of scope, as this is an)-2.5 E
(administrati)102 372 Q .3 -.15(ve i)-.25 H
(ssue that is not particular to either clusters or to IPsec.).15 E(The \
interesting scenario here is VPN, whether tunneled site-to-site or remo\
te access.)102 396 Q(Host-to-host transport)5 E(mode is not e)102 408 Q
(xpected to bene\214t from this w)-.15 E(ork.)-.1 E 1.6 -.8(We d)102 432
T 2.5(on).8 G(ot describe in full the problems of the communication cha\
nnel between cluster members \(the Synch)-2.5 E
(Channel\), nor do we intend to specify an)102 444 Q
(ything in this space later)-.15 E 5(.S)-.55 G(peci\214cally)-5 E 2.5
(,m)-.65 G(ix)-2.5 E(ed-v)-.15 E(endor clusters are out)-.15 E
(of scope.)102 456 Q
(The problem statement anticipates possible protocol-le)102 480 Q -.15
(ve)-.25 G 2.5(ls).15 G(olutions between IKE/IPsec peers, in order to)
-2.5 E(impro)102 492 Q .3 -.15(ve t)-.15 H(he a).15 E -.25(va)-.2 G
(ilability and/or performance of VPN clusters.).25 E(One v)5 E
(endor\264s IPsec endpoint should be able to)-.15 E -.1(wo)102 504 S
(rk, optimally).1 E 2.5(,w)-.65 G(ith another v)-2.5 E
(endor\264s cluster)-.15 E(.)-.55 E 162.35(Nir Expires)72 696 R
(December 12, 2010)2.5 E([P)144.73 E(age 5])-.15 E 0 Cg EP
PStoPSsaved restore
%%Page: (5) 6
userdict/PStoPSsaved save put
PStoPSmatrix setmatrix
0.000000 -28.346457 translate
userdict/PStoPSmatrix matrix currentmatrix put
userdict/PStoPSclip{0 0 moveto
 595.000000 0 rlineto 0 842.000000 rlineto -595.000000 0 rlineto
 closepath}put initclip
PStoPSxform concat
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 110(Internet-Draft IPsec)72 48 R
(Cluster Problem Statement)2.5 E(June 2010)127.2 E 2.5(3.2. Lots)72 84 R
(of Long Li)2.5 E -.15(ve)-.25 G 2.5(dS).15 G(tate)-2.5 E
(IKE and IPsec ha)102 108 Q .3 -.15(ve a l)-.2 H(ot of long li).15 E
-.15(ve)-.25 G 2.5(ds).15 G(tate:)-2.5 E 25(oI)102 120 S
(KE SAs last for minutes, hours, or days, and carry k)-25 E -.15(ey)-.1
G 2.5(sa).15 G(nd other information.)-2.5 E(Some g)5 E(ate)-.05 E -.1
(wa)-.25 G(ys may).1 E
(carry thousands to hundreds of thousands of IKE SAs.)132 132 Q 25(oI)
102 144 S(Psec SAs last for minutes or hours, and carry k)-25 E -.15(ey)
-.1 G(s, selectors and other information.).15 E(Some g)5 E(ate)-.05 E
-.1(wa)-.25 G(ys).1 E(may carry hundreds of thousands such IPsec SAs.)
132 156 Q 25(oS)102 168 S(PD \(Security Polic)-25 E 2.5(yD)-.15 G
(atabase\) Cache entries.)-2.5 E
(While the SPD is unchanging, the SPD cache)5 E
(changes on the \215y due to narro)132 180 Q 2.5(wing. Entries)-.25 F
(last at least as long as the SAD \(Security Association)2.5 E
(Database\) entries, b)132 192 Q(ut tend to last e)-.2 E -.15(ve)-.25 G
2.5(nl).15 G(onger than that.)-2.5 E 2.5(An)102 216 S(ai)-2.5 E .3 -.15
(ve i)-.25 H(mplementation of a cluster w).15 E(ould ha)-.1 E .3 -.15
(ve n)-.2 H 2.5(os).15 G(ynchronized state, and a f)-2.5 E(ailo)-.1 E
-.15(ve)-.15 G 2.5(rw).15 G(ould produce an)-2.6 E(ef)102 228 Q
(fect similar to that of a rebooted g)-.25 E(ate)-.05 E -.1(wa)-.25 G
1.3 -.65(y. [).1 H(resumption] describes ho).65 E 2.5(wn)-.25 G .5 -.25
(ew I)-2.5 H(KE and IPsec SAs can be).25 E(recreated in such a case.)102
240 Q 2.5(3.3. IKE)72 264 R(Counters)2.5 E 1.6 -.8(We c)102 288 T(an o)
.8 E -.15(ve)-.15 G(rcome the \214rst problem described in Section).15 E
(3.2, by synchronizing states - whene)5 E -.15(ve)-.25 G 2.5(ra).15 G
2.5(nS)-2.5 G 2.5(Ai)-2.5 G(s)-2.5 E(created, we can synch this ne)102
300 Q 2.5(ws)-.25 G(tate to all other members.)-2.5 E(Ho)5 E(we)-.25 E
-.15(ve)-.25 G .8 -.4(r, t).15 H(hose states are not only long-li).4 E
-.15(ve)-.25 G(d,).15 E(the)102 312 Q 2.5(ya)-.15 G(re also e)-2.5 E
-.15(ve)-.25 G 2.5(rc).15 G(hanging.)-2.5 E(IKE has message counters.)
102 336 Q 2.5(Ap)5 G(eer MUST NO)-2.5 E 2.5(Tp)-.4 G
(rocess message n until after it has processed message n-1.)-2.5 E
(Skipping message IDs is not allo)102 348 Q 2.5(wed. So)-.25 F 2.5(an)
2.5 G -.25(ew)-2.5 G(ly-acti).25 E .3 -.15(ve m)-.25 H
(ember needs to kno).15 E 2.5(wt)-.25 G(he last message IDs both)-2.5 E
(recei)102 360 Q -.15(ve)-.25 G 2.5(da).15 G(nd transmitted.)-2.5 E(One\
 possible solution, is to synchronize information about the IKE message\
 counters after e)102 384 Q -.15(ve)-.25 G(ry IKE).15 E -.15(ex)102 396
S 2.5(change. This).15 F -.1(wa)2.5 G 1.3 -.65(y, t).1 H(he ne).65 E
(wly acti)-.25 E .3 -.15(ve m)-.25 H(ember kno).15 E
(ws what messages it is allo)-.25 E(wed to process, and what)-.25 E
(message IDs to use on IKE requests, so that peers process them.)102 408
Q(This solution may be appropriate in some)5 E(cases, b)102 420 Q
(ut may be too onerous in systems with lots of SAs.)-.2 E
(It also has the dra)5 E(wback, that it ne)-.15 E -.15(ve)-.25 G 2.5(rr)
.15 G(eco)-2.5 E -.15(ve)-.15 G(rs).15 E
(from the missing synch message problem, which is described in Section)
102 432 Q(3.6.)5 E 2.5(3.4. Outbound)72 456 R(SA Counters)2.5 E
(ESP and AH ha)102 480 Q .3 -.15(ve a)-.2 H 2.5(no).15 G
(ptional anti-replay feature, where e)-2.5 E -.15(ve)-.25 G
(ry protected pack).15 E(et carries a counter number)-.1 E(.)-.55 E
(Repeating counter numbers is considered an attack, so the ne)102 492 Q
(wly-acti)-.25 E .3 -.15(ve m)-.25 H(ember MUST NO).15 E 2.5(Tu)-.4 G
(se a replay)-2.5 E(counter number that has already been used.)102 504 Q
(The peer will drop those pack)5 E(ets as duplicates and/or w)-.1 E
(arn of an)-.1 E(attack.)102 516 Q 162.35(Nir Expires)72 696 R
(December 12, 2010)2.5 E([P)144.73 E(age 6])-.15 E 0 Cg EP
PStoPSsaved restore
%%Page: (6) 7
userdict/PStoPSsaved save put
PStoPSmatrix setmatrix
0.000000 -28.346457 translate
userdict/PStoPSmatrix matrix currentmatrix put
userdict/PStoPSclip{0 0 moveto
 595.000000 0 rlineto 0 842.000000 rlineto -595.000000 0 rlineto
 closepath}put initclip
PStoPSxform concat
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 110(Internet-Draft IPsec)72 48 R
(Cluster Problem Statement)2.5 E(June 2010)127.2 E(Though it may be fea\
sible to synchronize the IKE message counters, it is almost ne)102 84 Q
-.15(ve)-.25 G 2.5(rf).15 G(easible to)-2.5 E
(synchronize the IPsec pack)102 96 Q(et counters for e)-.1 E -.15(ve)
-.25 G(ry IPsec pack).15 E(et transmitted.)-.1 E(So we ha)5 E .3 -.15
(ve t)-.2 H 2.5(oa).15 G(ssume that at least)-2.5 E
(for IPsec, the replay counter will not be up-to-date on the ne)102 108
Q(wly- acti)-.25 E .3 -.15(ve m)-.25 H(ember).15 E 2.5(,a)-.4 G
(nd the ne)-2.5 E(wly-acti)-.25 E -.15(ve)-.25 G
(member may repeat a counter)102 120 Q(.)-.55 E 2.5(Ap)102 144 S(ossibl\
e solution is to synch replay counter information, not for each pack)
-2.5 E(et emitted, b)-.1 E(ut only at re)-.2 E(gular)-.15 E(interv)102
156 Q(als, say)-.25 E 2.5(,e)-.65 G -.15(ve)-2.75 G(ry 10,000 pack).15 E
(ets or e)-.1 E -.15(ve)-.25 G(ry 0.5 seconds.).15 E(After a f)5 E(ailo)
-.1 E -.15(ve)-.15 G .8 -.4(r, t).15 H(he ne).4 E(wly-acti)-.25 E .3
-.15(ve m)-.25 H(ember).15 E(adv)102 168 Q
(ances the counters for outbound IPsec SAs by 10,000.)-.25 E 1.6 -.8
(To t)5 H(he peer this looks lik).8 E 2.5(eu)-.1 G 2.5(pt)-2.5 G 2.5(o1)
-2.5 G(0,000 pack)-2.5 E(ets)-.1 E(were lost, b)102 180 Q(ut this shoul\
d be acceptable, as neither ESP nor AH guarantee reliable deli)-.2 E
-.15(ve)-.25 G(ry).15 E(.)-.65 E 2.5(3.5. Inbound)72 204 R(SA Counters)
2.5 E(An e)102 228 Q -.15(ve)-.25 G 2.5(nt).15 G
(ougher issue, is the synchronization of pack)-2.5 E
(et counters for inbound IPsec SAs.)-.1 E(If a pack)5 E(et arri)-.1 E
-.15(ve)-.25 G(s).15 E(at a ne)102 240 Q(wly-acti)-.25 E .3 -.15(ve m)
-.25 H(ember).15 E 2.5(,t)-.4 G(here is no w)-2.5 E
(ay to determine whether this pack)-.1 E(et is a replay or not.)-.1 E
(The periodic)5 E(synch does not solv)102 252 Q 2.5(et)-.15 G
(he problem at all, because suppose we synchronize e)-2.5 E -.15(ve)-.25
G(ry 10,000 pack).15 E(ets, and the last)-.1 E(synch before the f)102
264 Q(ailo)-.1 E -.15(ve)-.15 G 2.5(rh).15 G(ad the counter at 170,000.)
-2.5 E(It is probable, though not certain, that pack)5 E(et number)-.1 E
(180,000 has not yet been processed, b)102 276 Q(ut if pack)-.2 E
(et 175,000 arri)-.1 E -.15(ve)-.25 G 2.5(sa).15 G 2.5(tt)-2.5 G(he ne)
-2.5 E(wly- acti)-.25 E .3 -.15(ve m)-.25 H(ember).15 E 2.5(,i)-.4 G 2.5
(th)-2.5 G(as no w)-2.5 E(ay)-.1 E
(of determining whether or not that pack)102 288 Q
(et has or has not already been processed.)-.1 E
(The synchronization does)5 E(pre)102 300 Q -.15(ve)-.25 G
(nt the processing of really old pack).15 E
(ets, such as those with counter number 165,000.)-.1 E(Ignoring all)5 E
(counters belo)102 312 Q 2.5(w1)-.25 G(80,000 w)-2.5 E(on\264t w)-.1 E
(ork either)-.1 E 2.5(,b)-.4 G
(ecause that\264s up to 10,000 dropped pack)-2.5 E(ets, which may be v)
-.1 E(ery)-.15 E(noticeable.)102 324 Q(The easiest solution is to learn\
 the replay counter from the incoming traf)102 348 Q 2.5(\214c. This)
-.25 F(is allo)2.5 E(wed by the standards,)-.25 E
(because replay counter v)102 360 Q
(eri\214cation is an optional feature \(see section 3.2 in [RFC4301]\).)
-.15 E(The case can e)5 E -.15(ve)-.25 G(n).15 E
(be made that it is relati)102 372 Q -.15(ve)-.25 G
(ly secure, because non- attack traf).15 E
(\214c will reset the counters to what the)-.25 E 2.5(ys)-.15 G
(hould be,)-2.5 E(so an attack)102 384 Q(er f)-.1 E
(aces the dual challenge of a v)-.1 E(ery narro)-.15 E 2.5(ww)-.25 G
(indo)-2.5 E 2.5(wf)-.25 G
(or attack, and the need to time the attack to)-2.5 E 2.5(af)102 396 S
(ailo)-2.6 E -.15(ve)-.15 G 2.5(re).15 G -.15(ve)-2.75 G 2.5(nt. Unless)
.15 F(the attack)2.5 E(er can actually cause the f)-.1 E(ailo)-.1 E -.15
(ve)-.15 G .8 -.4(r, t).15 H(his w).4 E(ould be v)-.1 E(ery dif)-.15 E
2.5(\214cult. It)-.25 F(should be)2.5 E
(noted, though, that although this solution is acceptable as f)102 408 Q
(ar as RFC 4301 goes, it is a matter of polic)-.1 E(y)-.15 E
(whether this is acceptable.)102 420 Q
(Another possible solution to the inbound IPsec SA problem is to rek)102
444 Q .3 -.15(ey a)-.1 H(ll child SAs follo).15 E(wing a f)-.25 E(ailo)
-.1 E -.15(ve)-.15 G -.55(r.).15 G(This may or may not be feasible depe\
nding on the implementation and the con\214guration.)102 456 Q 162.35
(Nir Expires)72 696 R(December 12, 2010)2.5 E([P)144.73 E(age 7])-.15 E
0 Cg EP
PStoPSsaved restore
%%Page: (7) 8
userdict/PStoPSsaved save put
PStoPSmatrix setmatrix
0.000000 -28.346457 translate
userdict/PStoPSmatrix matrix currentmatrix put
userdict/PStoPSclip{0 0 moveto
 595.000000 0 rlineto 0 842.000000 rlineto -595.000000 0 rlineto
 closepath}put initclip
PStoPSxform concat
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 110(Internet-Draft IPsec)72 48 R
(Cluster Problem Statement)2.5 E(June 2010)127.2 E 2.5(3.6. Missing)72
84 R(Synch Messages)2.5 E(The synch channel is v)102 108 Q(ery lik)-.15
E(ely not to be inf)-.1 E 2.5(allible. Before)-.1 F -.1(fa)2.5 G(ilo).1
E -.15(ve)-.15 G 2.5(ri).15 G 2.5(sd)-2.5 G
(etected, some synchronization)-2.5 E(messages may ha)102 120 Q .3 -.15
(ve b)-.2 H(een missed.).15 E -.15(Fo)5 G 2.5(re).15 G(xample, the acti)
-2.65 E .3 -.15(ve m)-.25 H(ember may ha).15 E .3 -.15(ve c)-.2 H
(reated a ne).15 E 2.5(wC)-.25 G(hild SA using)-2.5 E(message n.)102 132
Q(The ne)5 E 2.5(wi)-.25 G(nformation \(entry in the SAD and update to \
counters of the IKE SA\) is sent on the)-2.5 E(synch channel.)102 144 Q
(Still, with e)5 E -.15(ve)-.25 G(ry possible technology).15 E 2.5(,t)
-.65 G(he update may be missed before the f)-2.5 E(ailo)-.1 E -.15(ve)
-.15 G -.55(r.).15 G
(This is a bad situation, because the IKE SA is doomed. the ne)102 168 Q
(wly- acti)-.25 E .3 -.15(ve m)-.25 H(ember has tw).15 E 2.5(op)-.1 G
(roblems:)-2.5 E 25(oI)102 180 S 2.5(td)-25 G(oes not ha)-2.5 E .3 -.15
(ve t)-.2 H(he ne).15 E 2.5(wI)-.25 G(Psec SA pair)-2.5 E 5(.I)-.55 G
2.5(tw)-5 G(ill drop all incoming pack)-2.5 E
(ets protected with such an SA.)-.1 E(This could be \214x)132 192 Q
(ed by sending some DELETEs and INV)-.15 E
(ALID_SPI noti\214cations, if it w)-1.35 E(asn\264t for the)-.1 E
(other problem...)132 204 Q 25(oT)102 216 S
(he counters for the IKE SA sho)-25 E 2.5(wt)-.25 G
(hat only request n-1 has been sent.)-2.5 E(The ne)5 E
(xt request will get the)-.15 E(message ID n, b)132 228 Q
(ut that will be rejected by the peer)-.2 E 5(.A)-.55 G(fter a suf)-5 E
(\214cient number of retransmissions and)-.25 E(rejections, the whole I\
KE SA with all associated IPsec SAs will get dropped.)132 240 Q(The abo)
102 264 Q .3 -.15(ve s)-.15 H(cenario may be rare enough that it is acc\
eptable that on a con\214guration with thousands of IKE).15 E(SAs, a fe)
102 276 Q 2.5(ww)-.25 G(ill need to be recreated from scratch or using \
session resumption techniques.)-2.5 E(Ho)5 E(we)-.25 E -.15(ve)-.25 G
-.4(r,).15 G(detecting this may tak)102 288 Q 2.5(eal)-.1 G
(ong time \(se)-2.5 E -.15(ve)-.25 G(ral minutes\) and this ne).15 E
-.05(ga)-.15 G(tes the goal of creating a cluster in the \214rst).05 E
(place.)102 300 Q 2.5(3.7. Simultaneous)72 324 R
(use of IKE and IPsec SAs by Dif)2.5 E(ferent Members)-.25 E -.15(Fo)102
348 S 2.5(rL).15 G 2.5(Sc)-2.5 G(lusters, all acti)-2.5 E .3 -.15(ve m)
-.25 H(embers may need to use the same SAs, both IKE and IPsec.).15 E
(This is an e)5 E -.15(ve)-.25 G(n).15 E
(greater problem than in the case of HS clusters, because consecuti)102
360 Q .3 -.15(ve p)-.25 H(ack).15 E(ets may need to be sent by dif)-.1 E
(ferent)-.25 E(members to the same peer g)102 372 Q(ate)-.05 E -.1(wa)
-.25 G -.65(y.).1 G
(The solution to the IKE SA issue is up to the application.)102 396 Q
(It\264s possible to create some locking mechanism)5 E -.15(ove)102 408
S 2.5(rt).15 G(he synch channel, or else ha)-2.5 E .3 -.15(ve o)-.2 H
(ne member "o).15 E
(wn" the IKE SA and manage the child SAs for all other)-.25 E 2.5
(members. F)102 420 R(or IPsec, solutions f)-.15 E(all into tw)-.1 E 2.5
(ob)-.1 G(road cate)-2.5 E(gories.)-.15 E(The \214rst is the "stick)102
444 Q(y" cate)-.15 E(gory)-.15 E 2.5(,w)-.65 G
(here all communications with a single peer)-2.5 E 2.5(,o)-.4 G 2.5(ra)
-2.5 G(ll communications)-2.5 E(in)102 456 Q -.2(vo)-.4 G
(lving a certain SPD cache entry go through a single peer).2 E 5(.I)-.55
G 2.5(nt)-5 G(his case, all pack)-2.5 E(ets that match an)-.1 E(y)-.15 E
(particular SA go through the same member)102 468 Q 2.5(,s)-.4 G 2.5(on)
-2.5 G 2.5(os)-2.5 G
(ynchronization of the replay counter needs to be done.)-2.5 E
(Inbound processing is a "stick)102 480 Q(y" issue, because the pack)
-.15 E(ets ha)-.1 E .3 -.15(ve t)-.2 H 2.5(ob).15 G 2.5(ep)-2.5 G
(rocessed by the correct member)-2.5 E(based on peer and SPI.)102 492 Q
(Another issue is that most)5 E 162.35(Nir Expires)72 696 R
(December 12, 2010)2.5 E([P)144.73 E(age 8])-.15 E 0 Cg EP
PStoPSsaved restore
%%Page: (8) 9
userdict/PStoPSsaved save put
PStoPSmatrix setmatrix
0.000000 -28.346457 translate
userdict/PStoPSmatrix matrix currentmatrix put
userdict/PStoPSclip{0 0 moveto
 595.000000 0 rlineto 0 842.000000 rlineto -595.000000 0 rlineto
 closepath}put initclip
PStoPSxform concat
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 110(Internet-Draft IPsec)72 48 R
(Cluster Problem Statement)2.5 E(June 2010)127.2 E(load balancers will \
not be able to match the SPIs of the encrypted side to the clear traf)
102 84 Q(\214c, and so the wrong)-.25 E
(member may get the the other half of the \215o)102 96 Q -.65(w.)-.25 G
(The second is the "duplicate" cate)102 120 Q(gory)-.15 E 2.5(,w)-.65 G
(here the child SA is duplicated for each pair of IPsec SAs for each)
-2.5 E(acti)102 132 Q .3 -.15(ve m)-.25 H(ember).15 E 5(.D)-.55 G(if)-5
E(ferent pack)-.25 E(ets for the same peer go through dif)-.1 E
(ferent members, and get protected using)-.25 E(dif)102 144 Q(ferent SA\
s with the same selectors and matching the same entries in the SPD cach\
e.)-.25 E(This has some)5 E(shortcomings:)102 156 Q 25(oI)102 168 S 2.5
(tr)-25 G(equires multiple parallel SAs, which the peer has no use for)
-2.5 E 5(.S)-.55 G(ection 2.8 or [RFC4306])-5 E(speci\214cally allo)132
180 Q(ws this, b)-.25 E(ut some implementation might ha)-.2 E .3 -.15
(ve a p)-.2 H(olic).15 E 2.5(ya)-.15 G -.05(ga)-2.5 G
(inst long term maintenance).05 E(of redundant SAs.)132 192 Q 25(oD)102
204 S(if)-25 E(ferent pack)-.25 E(ets that belong to the same \215o)-.1
E 2.5(wm)-.25 G(ay be protected by dif)-2.5 E
(ferent SAs, which may seem)-.25 E("weird" to the peer g)132 216 Q(ate)
-.05 E -.1(wa)-.25 G 1.3 -.65(y, e).1 H(specially if it is inte).65 E
(grated with some deep inspection middle)-.15 E -.1(wa)-.25 G(re such).1
E(as a \214re)132 228 Q -.1(wa)-.25 G 2.5(ll. It).1 F(is not kno)2.5 E
(wn whether this will cause problems with current g)-.25 E(ate)-.05 E
-.1(wa)-.25 G 2.5(ys. It).1 F(is also)2.5 E(impossible to mandate ag)132
240 Q(ainst this, because the de\214nition of "\215o)-.05 E(w" v)-.25 E
(aries from one implementation)-.25 E(to another)132 252 Q(.)-.55 E 25
(oR)102 264 S(eply pack)-25 E(ets may arri)-.1 E .3 -.15(ve w)-.25 H
(ith an IPsec SA that is not "matched" to the one used for the outgoing)
.15 E(pack)132 276 Q 2.5(ets. Also,)-.1 F(the)2.5 E 2.5(ym)-.15 G
(ight arri)-2.5 E .3 -.15(ve a)-.25 H 2.5(tad).15 G(if)-2.5 E
(ferent member)-.25 E 5(.T)-.55 G(his problem is be)-5 E
(yond the scope of this)-.15 E(document and should be solv)132 288 Q
(ed by the application, perhaps by forw)-.15 E(arding misdirected pack)
-.1 E(ets to the)-.1 E(correct g)132 300 Q(ate)-.05 E -.1(wa)-.25 G 2.5
(yf).1 G(or deep inspection.)-2.5 E 2.5(3.7.1. Outbound)72 324 R
(SAs using counter modes)2.5 E -.15(Fo)102 348 S 2.5(rS).15 G(As in)-2.5
E -.2(vo)-.4 G(lving counter mode ciphers such as [CTR] or [GCM] there \
is yet another complication.).2 E(The)5 E(initial v)102 360 Q
(ector for such modes MUST NO)-.15 E 2.5(Tb)-.4 G 2.5(er)-2.5 G
(epeated, and senders use methods such as counters or LFSRs)-2.5 E
(to ensure this.)102 372 Q(An SA shared between more than one acti)5 E
.3 -.15(ve m)-.25 H(ember).15 E 2.5(,o)-.4 G 2.5(re)-2.5 G -.15(ve)-2.75
G 2.5(nf).15 G(ailing o)-2.6 E -.15(ve)-.15 G 2.5(rf).15 G
(rom one member)-2.5 E(to another need to mak)102 384 Q 2.5(es)-.1 G
(ure that the)-2.5 E 2.5(yd)-.15 G 2.5(on)-2.5 G
(ot generate the same initial v)-2.5 E(ector)-.15 E 5(.S)-.55 G
(ee [COUNTER_MODES])-5 E
(for a discussion of this problem in another conte)102 396 Q(xt.)-.15 E
2.5(3.8. Dif)72 420 R(ferent IP addresses for IKE and IPsec)-.25 E
(In man)102 444 Q 2.5(yi)-.15 G
(mplementations there are separate IP addresses for the cluster)-2.5 E
2.5(,a)-.4 G(nd for each member)-2.5 E 5(.W)-.55 G(hile the)-5 E(pack)
102 456 Q(ets protected by tunnel mode child SAs are encapsulated in IP\
 headers with the cluster IP address, the)-.1 E(IKE pack)102 468 Q
(ets originate from a speci\214c member)-.1 E 2.5(,a)-.4 G
(nd carry that member\264s IP address.)-2.5 E -.15(Fo)5 G 2.5(rt).15 G
(he peer)-2.5 E 2.5(,t)-.4 G(his looks)-2.5 E
(weird, as the usual thing is for the IPsec pack)102 480 Q
(ets to come from the same IP address as the IKE pack)-.1 E(ets.)-.1 E
162.35(Nir Expires)72 696 R(December 12, 2010)2.5 E([P)144.73 E(age 9])
-.15 E 0 Cg EP
PStoPSsaved restore
%%Page: (9) 10
userdict/PStoPSsaved save put
PStoPSmatrix setmatrix
0.000000 -28.346457 translate
userdict/PStoPSmatrix matrix currentmatrix put
userdict/PStoPSclip{0 0 moveto
 595.000000 0 rlineto 0 842.000000 rlineto -595.000000 0 rlineto
 closepath}put initclip
PStoPSxform concat
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 110(Internet-Draft IPsec)72 48 R
(Cluster Problem Statement)2.5 E(June 2010)127.2 E(One ob)102 84 Q
(vious solution, is to use some f)-.15 E(anc)-.1 E 2.5(yc)-.15 G
(apability of the IKE host to change things so that IKE pack)-2.5 E(ets)
-.1 E(also come out of the cluster IP address.)102 96 Q
(This can be achie)5 E -.15(ve)-.25 G 2.5(dt).15 G(hrough N)-2.5 E 2.22
-1.11(AT o)-.35 H 2.5(rt)1.11 G(hrough assigning multiple)-2.5 E
(addresses to interf)102 108 Q 2.5(aces. This)-.1 F(is not, ho)2.5 E(we)
-.25 E -.15(ve)-.25 G .8 -.4(r, p).15 H
(ossible for all implementations.).4 E([AR)102 132 Q(ORA] discusses thi\
s problem in greater depth, and proposes another solution, that does in)
-.4 E -.2(vo)-.4 G(lv).2 E 2.5(ep)-.15 G(rotocol)-2.5 E(changes.)102 144
Q 2.5(3.9. Allocation)72 168 R(of SPIs)2.5 E(The SPI associated with ea\
ch child SA, and with each IKE SA, MUST be unique relati)102 192 Q .3
-.15(ve t)-.25 H 2.5(ot).15 G(he peer of the)-2.5 E 2.5(SA. Thus,)102
204 R(in the conte)2.5 E(xt of a cluster)-.15 E 2.5(,e)-.4 G
(ach cluster member MUST generate SPIs in a f)-2.5 E(ashion that a)-.1 E
-.2(vo)-.2 G(ids).2 E
(collisions \(with other cluster members\) for these SPI v)102 216 Q 2.5
(alues. The)-.25 F(means by which cluster members achie)2.5 E -.15(ve)
-.25 G(this requirement is a local matter)102 228 Q 2.5(,o)-.4 G
(utside the scope of this document.)-2.5 E 2.5(4. Security)72 264 R
(Considerations)2.5 E(Implementations running on clusters MUST be as se\
cure as implementations running on single g)102 288 Q(ate)-.05 E -.1(wa)
-.25 G 2.5(ys. In).1 F(other w)102 300 Q(ords, no e)-.1 E
(xtension or interpretation used to allo)-.15 E 2.5(wo)-.25 G
(peration in a cluster may f)-2.5 E(acilitate attacks that are)-.1 E
(not possible for single g)102 312 Q(ate)-.05 E -.1(wa)-.25 G(ys.).1 E
(Moreo)102 336 Q -.15(ve)-.15 G .8 -.4(r, t).15 H(hought must be gi).4 E
-.15(ve)-.25 G 2.5(nt).15 G 2.5(ot)-2.5 G
(he synching requirements of an)-2.5 E 2.5(yp)-.15 G(rotocol e)-2.5 E
(xtension, to mak)-.15 E 2.5(es)-.1 G(ure that it)-2.5 E(does not creat\
e an opportunity for denial of service attacks on the cluster)102 348 Q
(.)-.55 E(As mentioned in Section)102 372 Q(3.5, allo)5 E
(wing an inbound child SA to f)-.25 E(ail o)-.1 E -.15(ve)-.15 G 2.5(rt)
.15 G 2.5(oa)-2.5 G(nother member has the ef)-2.5 E(fect of)-.25 E
(disabling replay counter protection for a short time.)102 384 Q
(Though the threat is ar)5 E(guably lo)-.18 E 1.3 -.65(w, i)-.25 H 2.5
(ti).65 G 2.5(sap)-2.5 G(olic)-2.5 E 2.5(yd)-.15 G(ecision)-2.5 E
(whether this is acceptable.)102 396 Q 2.5(5. IAN)72 432 R 2.5(AC)-.35 G
(onsiderations)-2.5 E(This document has no actions for IAN)102 456 Q(A.)
-.35 E 2.5(6. Ackno)72 492 R(wledgements)-.25 E
(This document is the collecti)102 516 Q .3 -.15(ve w)-.25 H
(ork, and includes contrib).05 E(ution from man)-.2 E 2.5(yp)-.15 G
(eople who participate in the)-2.5 E(IPsecME w)102 528 Q(orking group.)
-.1 E(The editor w)102 552 Q(ould particularly lik)-.1 E 2.5(et)-.1 G
2.5(oa)-2.5 G(ckno)-2.5 E(wledge the e)-.25 E(xtensi)-.15 E .3 -.15
(ve c)-.25 H(ontrib).15 E(ution of the follo)-.2 E(wing people \(in)-.25
E(alphabetical order\):)102 564 Q 162.35(Nir Expires)72 696 R
(December 12, 2010)2.5 E([P)139.73 E(age 10])-.15 E 0 Cg EP
PStoPSsaved restore
%%Page: (10) 11
userdict/PStoPSsaved save put
PStoPSmatrix setmatrix
0.000000 -28.346457 translate
userdict/PStoPSmatrix matrix currentmatrix put
userdict/PStoPSclip{0 0 moveto
 595.000000 0 rlineto 0 842.000000 rlineto -595.000000 0 rlineto
 closepath}put initclip
PStoPSxform concat
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 110(Internet-Draft IPsec)72 48 R
(Cluster Problem Statement)2.5 E(June 2010)127.2 E
(Jitender Arora, Jean-Michel Combes, Dan Harkins, Ste)102 84 Q .3 -.15
(ve K)-.25 H(ent, T)-.1 E(ero Ki)-.7 E(vinen, Y)-.25 E(aron Shef)-1 E
(fer)-.25 E 2.5(,M)-.4 G(elinda Shore,)-2.5 E(and Rodne)102 96 Q 2.5(yV)
-.15 G(an Meter)-3.61 E(.)-.55 E 2.5(7. Change)72 132 R(Log)2.5 E(NO)102
156 Q(TE T)-.4 E 2.5(OR)-.18 G(FC EDIT)-2.5 E(OR: REMO)-.18 E
(VE THIS SECTION BEFORE PUBLICA)-.5 E(TION)-1.11 E -1.11(Ve)102 180 S
(rsion 00 w)1.11 E(as identical to draft-nir)-.1 E
(-ipsecme-ipsecha-ps-00, re-spun as an WG document.)-.2 E -1.11(Ve)102
204 S(rsion 01 included closing issues 177, 178 and 180, with updates t\
o terminology)1.11 E 2.5(,a)-.65 G(nd added discussion of)-2.5 E
(inbound SAs and the CTR issue.)102 216 Q -1.11(Ve)102 240 S
(rsion 02 includes comments by Y)1.11 E(aron Shef)-1 E
(fer and the ackno)-.25 E(wledgement section.)-.25 E -1.11(Ve)102 264 S
(rsion 03 \214x)1.11 E(es some ID-nits, and adds the problem presented \
by Jitender Arora in [AR)-.15 E(ORA].)-.4 E -1.11(Ve)102 288 S
(rsion 04 \214x)1.11 E(es a spelling mistak)-.15 E(e, mo)-.1 E -.15(ve)
-.15 G 2.5(st).15 G(he scope discussion to a subsection of its o)-2.5 E
(wn \(Section)-.25 E(3.1\), and)5 E(adds a short discussion of the dupl\
icate SPI problem, presented by Jean-Michel Combes.)102 300 Q 2.5
(8. Informati)72 336 R .3 -.15(ve R)-.25 H(eferences).15 E([AR)102 360 Q
7.5(ORA] Arora,)-.4 F(J. and P)2.5 E 2.5(.K)-1.11 G(umar)-2.65 E 2.5(,")
-.4 G(Alternate T)-2.5 E(unnel Addresses for IKEv2",)-.45 E
(draft-arora-ipsecme-ik)212 372 Q -.25(ev)-.1 G
(2-alt-tunnel-addresses \(w).25 E(ork in progress\), April)-.1 E(2010.)5
E([COUNTER_MODES])102 396 Q(McGre)212 408 Q 1.3 -.65(w, D)-.25 H 2.5(.a)
.65 G(nd B. W)-2.5 E
(eis, "Using Counter Modes with Encapsulating Security)-.8 E -.15(Pa)212
420 S(yload \(ESP\) and Authentication Header \(AH\) to Protect Group T)
.15 E(raf)-.35 E(\214c",)-.25 E(draft-ietf-msec-ipsec-group-counter)212
432 Q(-modes \(w)-.2 E(ork in progress\), March)-.1 E(2010.)5 E 12.5
([CTR] Housle)102 456 R 1.3 -.65(y, R)-.15 H(., "Using Adv).65 E
(anced Encryption Standard \(AES\) Counter Mode", RFC)-.25 E(3686,)5 E
2.5(January 2009.)212 468 R 12.5([GCM] V)102 492 R(ie)-.6 E -.05(ga)-.15
G 2.5(,J).05 G 2.5(.a)-2.5 G(nd D. McGre)-2.5 E 1.3 -.65(w, ")-.25 H
(The Use of Galois/Counter Mode \(GCM\) in IPsec Encapsulating).65 E
(Security P)212 504 Q(ayload \(ESP\)", RFC)-.15 E(4106, June)5 E(2005.)5
E([IKEv2bis])102 528 Q(Kaufman, C., Hof)212 540 Q(fman, P)-.25 E(., Nir)
-1.11 E 2.5(,Y)-.4 G(., and P)-3.79 E 2.5(.E)-1.11 G(ronen, "Internet K)
-2.5 E .3 -.15(ey E)-.25 H(xchange).15 E(Protocol: IKEv2",)212 552 Q
162.35(Nir Expires)72 696 R(December 12, 2010)2.5 E([P)139.73 E(age 11])
-.15 E 0 Cg EP
PStoPSsaved restore
%%Page: (11) 12
userdict/PStoPSsaved save put
PStoPSmatrix setmatrix
0.000000 -28.346457 translate
userdict/PStoPSmatrix matrix currentmatrix put
userdict/PStoPSclip{0 0 moveto
 595.000000 0 rlineto 0 842.000000 rlineto -595.000000 0 rlineto
 closepath}put initclip
PStoPSxform concat
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 110(Internet-Draft IPsec)72 48 R
(Cluster Problem Statement)2.5 E(June 2010)127.2 E
(draft-ietf-ipsecme-ik)212 84 Q -.25(ev)-.1 G(2bis \(w).25 E
(ork in progress\), May)-.1 E(2010.)5 E([REDIRECT])102 108 Q(De)212 120
Q -.25(va)-.25 G(rapalli, V).25 E 2.5(.a)-1.29 G(nd K. W)-2.5 E(eniger)
-.8 E 2.5(,")-.4 G(Redirect Mechanism for IKEv2", RFC)-2.5 E(5685,)5 E
(No)212 132 Q -.15(ve)-.15 G 2.5(mber 2009.).15 F 2.5([RFC2119] Bradner)
102 156 R 2.5(,S)-.4 G(., "K)-2.5 E .3 -.15(ey w)-.25 H
(ords for use in RFCs to Indicate Requirement Le).05 E -.15(ve)-.25 G
(ls", BCP).15 E(14, RFC)5 E(2119,)5 E 2.5(March 1997.)212 168 R 2.5
([RFC4301] K)102 192 R(ent, S. and K. Seo, "Security Architecture for t\
he Internet Protocol", RFC)-.25 E(4301,)5 E 2.5(December 2005.)212 204 R
2.5([RFC4306] Kaufman,)102 228 R(C., "Internet K)2.5 E .3 -.15(ey E)-.25
H(xchange \(IKEv2\) Protocol", RFC).15 E(4306, December)5 E(2005.)5 E 10
([VRRP] Nadas,)102 252 R(S., "V)2.5 E(irtual Router Redundanc)-.6 E 2.5
(yP)-.15 G(rotocol \(VRRP\)", RFC)-2.5 E(5798, March)5 E(2010.)5 E
([resumption])102 276 Q(Shef)212 288 Q(fer)-.25 E 2.5(,Y)-.4 G 2.5(.a)
-3.79 G(nd H. Tschofenig, "IKEv2 Session Resumption", RFC)-2.5 E(5723,)5
E 2.5(January 2010.)212 300 R(Author\264s Address)72 336 Q -1.1(Yo)102
360 S .4 -.2(av N)1.1 H(ir).2 E(Check Point Softw)102 372 Q(are T)-.1 E
(echnologies Ltd.)-.7 E 2.5(5H)102 384 S(asolelim st.)-2.5 E -.7(Te)102
396 S 2.5(lA).7 G(vi)-3.24 E 5(v6)-.25 G(7897)-5 E(Israel)102 408 Q
(Email: ynir@checkpoint.com)102 432 Q 162.35(Nir Expires)72 696 R
(December 12, 2010)2.5 E([P)139.73 E(age 12])-.15 E 0 Cg EP
PStoPSsaved restore
%%Trailer
end
%%EOF
