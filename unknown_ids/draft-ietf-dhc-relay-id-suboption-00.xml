<?xml version="1.0"?>

<?rfc compact="yes" ?>
<?rfc toc="yes" ?>
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
    <!ENTITY rfc2119 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml'>
    <!ENTITY rfc2131 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2131.xml'>
    <!ENTITY rfc3046 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3046.xml'>
    <!ENTITY rfc3315 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3315.xml'>
    <!ENTITY rfc4030 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4030.xml'>
]>

<rfc ipr="full3978" docName="draft-ietf-dhc-relay-id-suboption-00.txt">

<front>

<title abbrev="The Relay Agent Id Suboption">
The DHCPv4 Relay Agent Identifier Suboption
</title>

<author initials="M." surname="Stapp" fullname="Mark Stapp">
<organization>Cisco Systems, Inc.</organization>
<address>
<postal>
<street>1414 Massachusetts Ave.</street>
<city>Boxborough</city> <region>MA</region> <code>01719</code>
<country>USA</country>
</postal>
<phone>+1 978 936 0000</phone>
<email>mjs@cisco.com</email>
</address>
</author>

<date day="13" month="June" year="2008"></date>
<workgroup>DHC</workgroup>
<keyword>I-D</keyword>
<keyword>Internet-Draft</keyword>
<keyword>DHCP</keyword>
<keyword>IPv6</keyword>
<keyword>relay</keyword>
<keyword>DHCPv6</keyword>

<abstract>

<t>
This memo defines a new Relay Agent Identifier suboption for the
Dynamic Host Configuration Protocol's (DHCP) Relay Agent Information
option. The suboption carries a unique identifier configured or
generated at the relay agent. The suboption allows a DHCP relay agent
to include the unique identifier in the DHCP messages it sends.
</t>

</abstract>

</front>

<middle>

<!--------------------------->

<section title="Introduction" anchor="section.intro">

<t>
The Dynamic Host Configuration Protocol for IPv4 (DHCPv4) <xref
target="RFC2131" /> provides IP addresses and configuration
information for IPv4 clients. It includes a relay agent capability, in
which network elements receive broadcast messages from clients and
forward them to DHCP servers as unicast messages. In many network
environments, relay agents add information to the DHCP messages before
forwarding them, using the Relay Agent Information option <xref
target="RFC3046"/>. Servers that recognize the relay information
option echo it back in their replies.
</t>

<!--

<t>
Over the years, a range of suboptions for the Relay Agent Information
option have been defined. Some of the data that relays add may be used
to help an edge device efficiently return replies to clients. The
information that relays supply can also be used in the server's
decision-making about the addresses and configuration parameters that
clients should receive.
</t>

-->

<t>
DHCP typically identifies clients based on information in their DHCP
messages - such as the Client-Identifier option, or the value of the
chaddr field. In some networks, however, the location of a client, its
point of attachment to the network, is a more useful identifier. In
factory-floor networks (commonly called 'Industrial' networks), for
example, the role a device plays is often fixed and based on its
location. Using manual address configuration is possible (and is
common), but it would be beneficial if DHCP configuration could be
applied to these networks.
</t>

<t>
One way to provide connection-based identifiers for industrial
networks is to have the network elements acting as DHCP relay agents
supply information that the DHCP server can use as a client
identifier. A straightforward way to form identifier information is to
combine something that is unique within the scope of the network
element with something that uniquely identifies that network
element. There are several possibilities, but to improve
interoperability we describe a dedicated identifier that can be
associated with the network element and conveyed in a consistent way.
</t>

<t>
This specification introduces a Relay Agent Identifier suboption for
the Relay Information option. The Relay-Id suboption carries an
sequence of octets that is intended to identify the relay agent
uniquely within the administrative domain. The identifier may be
administratively configured: in some networks it may be adequate to
assign strings such as "switch1" and "switch2". Alternatively, the
identifier may be generated by the relay agent itself, and we specify
an algorithm from <xref target="RFC3315"/> for this purpose.
</t>

</section>

<!-- =============================================================== -->

<section title="Terminology">
<t>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in <xref target="RFC2119"/>.
</t>

<t>
DHCPv4 terminology is defined in <xref target="RFC2131"/>, and the
DHCPv4 Relay Agent Information Option in <xref
target="RFC3046"/>. DUID terminology is in <xref target="RFC3315"/>.
</t>

</section>

<!-- ===============================================================-->

<section title="Suboption Format">

<figure>
<preamble>Format of the Relay Agent Identifier suboption:</preamble>
<artwork>

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |SUBOPT_RELAY_ID|   length      |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+     id (variable)             |
      .                                                               .
      .                                                               .
      .                                                               .
      +---------------------------------------------------------------+

      Where:

      SUBOPT_RELAY_ID   [TBD]
      length            the number of octets in the identifier; the
                        minimum length is one.
      id                'length' octets of identifier

</artwork>
</figure>

</section>

<!-- ===============================================================-->

<section title="Generating a Relay Identifier">

<t>
As described in <xref target="section.intro"/>, in some situations it
may be useful for network devices to generate identifiers
themselves. Relay agents who send the Relay Agent Identifier suboption
using identifiers that are not administratively-configured MUST be
generated following the procedures in the DUID section of <xref
target="RFC3315"/>. Relay agents who use generated identifiers should
make the generated value available to their administrators via their
user-interface, through a log entry, or through some other mechanism.
</t>

</section>

<!-- ===============================================================-->

<section title="Security Considerations">

<t>
Security issues with the Relay Agent Information option and its use by
servers in address assignment are discussed in <xref
target="RFC3046"/> and <xref target="RFC4030"/>. Relay agents who send
the Relay Agent Identifier suboption SHOULD use the Relay Agent Authentication
suboption <xref target="RFC4030"/> to provide integrity protection.
</t>

</section>

</middle>

<!-- ===============================================================-->

<section title="IANA Considerations" anchor="section.iana">

<t>
We request that IANA assign a new suboption code from the registry of
DHCP Agent Sub-Option Codes maintained in
http://www.iana.org/assignments/bootp-dhcp-parameters.
</t>

<list>
<t></t>
<t>Relay Agent Identifier Suboption    [TBD]</t>
</list>

</section>

<!-- ============================================================= -->

<back>

<references title="Normative References">

&rfc2131;
&rfc3046;
&rfc3315;
&rfc2119;
&rfc4030;

</references>

</back>

</rfc>
