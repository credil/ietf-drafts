<?xml version="1.0" encoding="US-ASCII"?>
<!-- This template is for creating an Internet Draft using xml2rfc,
     which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!-- One method to get references from the online citation libraries.
     There has to be one entity for each item to be referenced. 
     An alternate method (rfc include) is described in the references. -->
<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC2629 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2629.xml">
<!ENTITY RFC3022 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3022.xml">
<!ENTITY RFC3031 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3031.xml">
<!ENTITY RFC3032 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3032.xml">
<!ENTITY RFC5036 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5036.xml">
<!ENTITY RFC3552 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3552.xml">
<!ENTITY RFC1918 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.1918.xml">
<!ENTITY RFC2473 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2473.xml">
<!ENTITY RFC2784 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2784.xml">
<!ENTITY RFC2890 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2890.xml">
<!ENTITY RFC3775 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3775.xml">
<!ENTITY RFC5213 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5213.xml">
<!ENTITY RFC5555 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5555.xml">
<!ENTITY RFC5565 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5565.xml">
<!ENTITY RFC4379 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4379.xml">
<!ENTITY RFC3376 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3376.xml">
<!ENTITY RFC3810 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3810.xml">
<!ENTITY RFC4541 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4541.xml">
<!ENTITY I-D.draft-ietf-bfd-base SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-bfd-base-11.xml">
<!ENTITY I-D.draft-ietf-netlmm-pmip6-ipv4-support SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-netlmm-pmip6-ipv4-support-17.xml">
<!ENTITY I-D.draft-ietf-multimob-pmipv6-base-solution SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-multimob-pmipv6-base-solution-05.xml">
<!ENTITY I-D.draft-ietf-softwire-gateway-init-ds-lite SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-softwire-gateway-init-ds-lite-00.xml">
<!ENTITY I-D.draft-ietf-softwire-dual-stack-lite SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-softwire-dual-stack-lite-06.xml">
<!ENTITY I-D.draft-ietf-netlmm-grekey-option SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-netlmm-grekey-option-09.xml">
<!ENTITY I-D.draft-ietf-behave-v6v4-framework SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-behave-v6v4-framework-03.xml">
<!ENTITY I-D.draft-ietf-behave-v6v4-xlate-stateful SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-behave-v6v4-xlate-stateful-02.xml">
<!ENTITY I-D.draft-ietf-behave-v6v4-xlate SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-behave-v6v4-xlate-03.xml">
<!ENTITY I-D.draft-ietf-behave-address-format SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-behave-address-format-00.xml">
<!ENTITY I-D.draft-sarikaya-softwire-dslitemobility SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-sarikaya-softwire-dslitemobility-00.xml">
<!ENTITY I-D.draft-miles-behave-l2nat SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-miles-behave-l2nat-00.xml">
<!ENTITY I-D.draft-boucadair-dslite-interco-v4v6 SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-boucadair-dslite-interco-v4v6-02.xml">
<!ENTITY I-D.draft-baker-behave-ivi SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-baker-behave-ivi-01.xml">
<!ENTITY RFC5226 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5226.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs), 
     please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
     (Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space 
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="info" docName="draft-brockners-softwire-mcast-gi-ds-lite-00"
     ipr="trust200902">
  <!-- ipr="full3978"-->

  <!-- category values: std, bcp, info, exp, and historic
     ipr values: full3667, noModification3667, noDerivatives3667
     you can add the attributes updates="NNNN" and obsoletes="NNNN" 
     they will automatically be output with "(if approved)" -->

  <!-- ***** FRONT MATTER ***** -->

  <front>
    <!-- The abbreviated title is used in the page header - it is only necessary if the 
         full title is longer than 39 characters -->

    <title abbrev="Multicast in GI-DS-lite">Multicast Considerations for
    Gateway-Initiated Dual-Stack Lite</title>

    <!-- add 'role="editor"' below for the editors if appropriate -->

    <!-- Another author who claims to be an editor -->

    <author fullname="Frank Brockners" initials="F." surname="Brockners">
      <organization>Cisco</organization>

      <address>
        <postal>
          <street>Hansaallee 249, 3rd Floor</street>

          <!-- Reorder these if your country does things differently -->

          <city>DUESSELDORF</city>

          <region>NORDRHEIN-WESTFALEN</region>

          <code>40549</code>

          <country>Germany</country>
        </postal>

        <email>fbrockne@cisco.com</email>

        <!-- uri and facsimile elements may also be added -->
      </address>
    </author>

    <author fullname="Yiu L. Lee" initials="Y." surname="Lee">
      <organization>Comcast</organization>

      <address>
        <postal>
          <street>One Comcast Center</street>

          <city>Philadelphia</city>

          <region>PA</region>

          <code>19103</code>

          <country>U.S.A.</country>
        </postal>

        <email>yiu_lee@cable.comcast.com</email>

        <uri>http://www.comcast.com</uri>
      </address>
    </author>

    <date year="2010" />

    <!-- If the month and year are both specified and are the current ones, xml2rfc will fill 
         in the current day for you. If only the current year is specified, xml2rfc will fill 
	 in the current day and month for you. If the year is not the current one, it is 
	 necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the 
	 purpose of calculating the expiry date).  With drafts it is normally sufficient to 
	 specify just the year. -->

    <!-- Meta-data Declarations -->

    <area>General</area>

    <workgroup>Internet Engineering Task Force</workgroup>

    <!-- WG name at the upperleft corner of the doc,
         IETF is fine for individual submissions.  
	 If this element is not present, the default is "Network Working Group",
         which is used by the RFC Editor as a nod to the history of the IETF. -->

    <keyword>gi-ds-lite</keyword>

    <!-- Keywords will be incorporated into HTML output
         files in a meta tag but they have no effect on text or nroff
         output. If you submit your draft to the RFC Editor, the
         keywords will be used for the search engine. -->

    <abstract>
      <t>This document discusses multicast deployment aspects for networks
      which leverage Gateway-Initiated Dual-Stack lite.</t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction and Overview">
      <t>This draft discusses the deployment aspects for IPv4-Multicast in
      networks using Gateway-Initiated Dual-Stack lite (GI-DS-lite) <xref
      target="I-D.ietf-softwire-gateway-init-ds-lite"></xref>. GI-DS-lite is a
      modified approach to the original Dual-Stack lite (DS-lite) <xref
      target="I-D.ietf-softwire-dual-stack-lite"></xref> applicable to certain
      tunnel-based access architectures. <xref target="fig-accessarch"></xref>
      shows an example. GI-DS-lite extends existing access tunnels beyond the
      Gateway to an IPv4-IPv4 NAT device (as shown in <xref
      target="fig-gidsl"></xref>) using softwires with an embedded context
      identifier, that uniquely identifies the end-system the tunneled packets
      belong to. The Gateway determines which portion of the traffic requires
      NAT using local policies and sends/receives this portion to/from this
      softwire tunnel.</t>

      <figure anchor="fig-accessarch" title="Tunnel based access architecture">
        <artwork><![CDATA[                                                                            
                  +----------+    Access       +---+              
                  | Access   |    Tunnel-1     | G |                 
                  | Device-1 |=================| A | 
                  +----------+                 | T |  
                                               | E |
                  +----------+    Access       | W |
                  | Access   |    Tunnel-2     | A |
                  | Device-2 |=================| Y |                          
                  +----------+                 +---+                                         

]]></artwork>
      </figure>

      <figure anchor="fig-gidsl"
              title="Gateway-initiated dual-stack lite reference architecture">
        <artwork><![CDATA[                                                                            
   +----------+    Access       +---+              
   | Access   |    Tunnel-1     | G |                  +---------------+
   | Device-1 |=================| A |                  | Address       |
   +----------+                 | T |  Softwire-Tunnel | Family        | 
                                | E |==================| Transition    |
   +----------+    Access       | W |                  | Router (AFTR) |
   | Access   |    Tunnel-2     | A |                  +---------------+
   | Device-2 |=================| Y |                          
   +----------+                 +---+                                         

]]></artwork>
      </figure>

      <t>Some applications require multicast to deliver services to the access
      devices. For example: Live sport event and IP-TV broadcast could use
      multicast to deliver video streams to the access devices. During
      IPv4-IPv6 transitioning, the multicast traffic could continue to be
      transported over IPv4, access devices behind GI-DS-lite require an
      architecture to subscribe to IPv4-Multicast groups and receive
      IPv4-Multicast traffic. Currently, most IPv4-Multicast deployments
      require the access devices to receive multicast traffic but not to
      source multicast traffic. This memo considers the scenario where the
      access device subscribes an IPv4-Multicast group and recommends how the
      multicast routing could be done. The following cases are out of scope in
      this memo:</t>

      <t><list style="symbols">
          <t>IPv4-Multicast sourced by Access Devices.</t>

          <t>Network Address Translation (NAT) for IPv4-Multicast traffic.</t>
        </list></t>
    </section>

    <!--Abbreviations-->

    <section anchor="Conventions" title="Abbreviations">
      <t>The following abbreviations are used within this document:</t>

      <t><list style="empty">
          <t>AFTR: Address Family Transition Router (also known as "Large
          Scale NAT (LSN)" or "Dual-Stack lite Tunnel Concentrator", or
          "Carrier Grade NAT (CGN)"). An AFTR combines IP-in-IPv6 tunnel
          termination and IPv4-IPv4 NAT.</t>

          <t>DS-lite: Dual-stack lite</t>

          <t>GI-DS-lite: Gateway-initiated DS-lite</t>

          <t>NAT: Network Address Translation</t>
        </list></t>
    </section>

    <!--Deployment-->

    <section title="Multicast Deployment Considerations" toc="default">
      <t>This section details the IPv4-Multicast deployment considerations for
      GI-DS-lite. Several networks which follow the architecture shown in
      <xref target="fig-accessarch"></xref> above deploy IPv4-Multicast. If
      GI-DS-lite is introduced, the Gateway continues to perform the role of
      the first hop IPv4-Multicast router and the overall multicast
      distribution architecture is left unchanged. Deployment dependent, the
      introduction of GI-DS-lite could go hand in hand with the Gateway no
      longer having native IPv4-Multicast connectivity. If the Gateway does
      not have native IPv4-Multicast connectivity it should create a tunnel
      (e.g. IP-in-IPv6 or IP-over-GRE6) to an IPv4-Multicast router (e.g. the
      closest). The Gateway peers with that IPv4-Multicast router via the
      tunnel to join the IPv4-Multicast routing domain.</t>

      <section title="Architectural Attributes">
        <t>Deployment details for IP-Multicast are defined for several
        architectures which leverage tunnel-based access, such as <xref
        target="TR101"></xref> for DSL-Broadband, 3GPP TS 23.246 for mobile
        Multimedia Broadcast Service (MBMS) <xref target="TS23246"></xref>, or
        <xref target="I-D.ietf-multimob-pmipv6-base-solution"></xref> for
        multicast in Proxy Mobile-IP deployments). Multicast in mobile or
        broadband deployments with tunnel based access architectures share a
        set of common architectural attributes:<list style="symbols">
            <t>Subscribers are able to receive IP multicast, but are not
            assumed to send IP multicast (inline with the scope of this
            document).</t>

            <t>The Gateway is an IP-Multicast router, which is attached to the
            IP-Multicast distribution network of the service provider.</t>

            <t>Architectures often include devices which perform IGMP/MLD
            snooping and proxy reporting between the access device and the
            Gateway. Proxy Mobile IPv6 deployments <xref
            target="I-D.ietf-multimob-pmipv6-base-solution"></xref> are an
            example: Mobile devices (i.e. the Access Devices) are connected
            via a Mobile Access Gateway (MAG) implementing an IGMP proxy
            function to the Local Mobility Anchor (LMA) which performs the
            role of the Gateway.</t>

            <t>In several broadband multicast deployments IP-Multicast traffic
            is not forwarded over the access tunnels used for unicast traffic,
            but uses an alternate vehicle, which allows for traffic
            replication between access devices and Gateway. DSL-broadband
            networks with Ethernet aggregation are an example: While unicast
            traffic is forwarded between the access devices and the Broadband
            Network Gateway (BNG) over dedicated point to point VLANs, a
            separate VLAN is used to forward multicast traffic. This allows
            taking advantage of the multicast replication capabilities of
            Ethernet within the aggregation network.</t>
          </list></t>
      </section>

      <!--Arch Attrib-->

      <section title="Overlapping private IPv4 addresses">
        <t>GI-DS-lite supports deployments with (potentially overlapping) IPv4
        addresses assigned to the access devices. This could present
        challenges from a theoretical point of view for the following
        scenarios:</t>

        <t><list style="numbers">
            <t>The network deploys Source Specific Multicast (SSM) and
            IP-multicast is sourced from an access device: Per the note above,
            this scenario is out of the scope of this document.</t>

            <t>The network deploys IGMPv3 and leverages explicit tracking (see
            appendix 2 of <xref target="RFC3376"></xref>, or appendix 2 of
            <xref target="RFC3810"></xref>) only based on the source IP
            address of the IGMP messages: Explicit tracking is in use by
            several networks today, though one often does not rely (only) on
            the source IP-address to identify different hosts. Several
            multicast networks deploy devices performing IGMP snooping with
            proxy reporting between the multicast host and the first hop
            IP-Multicast router. In those deployments, the source IP address
            of the IGMP join messages does no longer represent the multicast
            host. The Broadband Forum, for example, requires the source IP
            address of IGMP packets sent by the proxy reporting function to be
            0.0.0.0 <xref target="TR101"></xref>. If explicit tracking is
            still desired in those environments, identifiers other than the
            source IP address need to be considered. Depending on the
            deployment and architecture, those could for example be the
            interface (as recommended for proxy Mobile-IP multicast
            deployments <xref
            target="I-D.ietf-multimob-pmipv6-base-solution"></xref>) or the
            MAC-address (see <xref target="TR101"></xref>), an access tunnel
            identifier etc.).</t>
          </list></t>
      </section>

      <!--Overlap-->

      <section title="Considerations for the Gateway and AFTR">
        <t>The Gateway's role with regards to IPv4-Multicast traffic
        forwarding and routing does not change if GI-DS-lite is deployed
        within the network and multicast traffic bypasses the AFTR. For
        deployments which require explicit tracking and the use of overlapping
        IPv4 address ranges at a Gateway, this Gateway needs to support
        explicit tracking based on identifiers other than the source
        IP-address of IGMP messages. The Gateway functions as IPv4-Multicast
        first hop router for the access devices. The Gateway is a multicast
        replication point for multicast flows towards receivers on or attached
        to the access devices. IPv4-Multicast traffic will be forwarded
        according to the group/source-specific forwarding states. If there are
        multiple receivers within the scope of the Gateway, its still a single
        flow which the Gateway receives. IPv4-Multicast forwarding at the
        Gateway is also not impacted in case IGMP-proxies exist between the
        access devices and the Gateway. This can be the case in broadband
        architectures (see <xref target="TR101"></xref>) as well as in mobile
        architectures (e.g., with PMIP, the MAG acts as MLD proxy, see <xref
        target="I-D.ietf-multimob-pmipv6-base-solution"></xref>).</t>
      </section>

      <!--Considerations-->
    </section>

    <!--Mcast Arch-->

    <!-- -->

    <section anchor="Acknowledgements" title="Acknowledgements">
      <t>The authors would like to acknowledge their discussions on this topic
      with Wojciech Dec and Sri Gundavelli.</t>
    </section>

    <!-- Possibly a 'Contributors' section ... -->

    <section anchor="IANA" title="IANA Considerations">
      <t>This document includes no request to IANA.</t>
    </section>

    <section anchor="Security" title="Security Considerations">
      <t>This draft does not introduce additional messages or novel protocol
      operations. Consequently, no new threats are introduced by this document
      in addition to those identified as security concerns for IP-Multicast
      deployments.</t>
    </section>
  </middle>

  <!--  *****BACK MATTER ***** -->

  <back>
    <!-- References split into informative and normative -->

    <!-- There are 2 ways to insert reference entries from the citation libraries:
     1. define an ENTITY at the top, and use "ampersand character"RFC2629; here (as shown)
     2. simply use a PI "less than character"?rfc include="reference.RFC.2119.xml"?> here
        (for I-Ds: include="reference.I-D.narten-iana-considerations-rfc2434bis.xml")

     Both are cited textually in the same manner: by using xref elements.
     If you use the PI option, xml2rfc will, by default, try to find included files in the same
     directory as the including file. You can also define the XML_LIBRARY environment variable
     with a value containing a set of directories to search.  These can be either in the local
     filing system or remote ones accessed by http (http://domain/dir/... ).-->

    <references title="Normative References">
      <!--?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?-->

      &RFC3376;

      &RFC3810;

      &RFC4541;

      &I-D.draft-ietf-softwire-dual-stack-lite;

      &I-D.draft-ietf-multimob-pmipv6-base-solution;

      &I-D.draft-ietf-softwire-gateway-init-ds-lite;
    </references>

    <references title="Informative References">
      <reference anchor="TR101">
        <front>
          <title>TR-101: Migration to Ethernet-Based DSL Aggregation</title>

          <author fullname="Broadband Forum" surname="Broadband Forum">
            <organization></organization>
          </author>

          <date month="April" year="2006" />
        </front>
      </reference>

      <reference anchor="TS23246">
        <front>
          <title>3GPP TS 23.246: Multimedia Broadcast/Multicast Service
          (MBMS), Architecture and functional description, Release 9</title>

          <author fullname="3GPP" surname="3GPP">
            <organization></organization>
          </author>

          <date month="June" year="2010" />
        </front>
      </reference>
    </references>
  </back>
</rfc>
