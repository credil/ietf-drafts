<?xml version="1.0" encoding="US-ASCII"?>
<!-- This template is for creating an Internet Draft using xml2rfc,
     which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!-- One method to get references from the online citation libraries.
     There has to be one entity for each item to be referenced. 
     An alternate method (rfc include) is described in the references. -->

<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC4360 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4360.xml">
<!ENTITY I-D.ietf-l3vpn-2547bis-mcast SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-l3vpn-2547bis-mcast-08.xml">
<!ENTITY I-D.ietf-l3vpn-2547bis-mcast-bgp SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.draft-ietf-l3vpn-2547bis-mcast-bgp-07.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs), 
     please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
     (Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space 
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="yes" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="std" docName="draft-mfine-l3vpn-mvpn-cfg-00" ipr="trust200902">
  <!-- category values: std, bcp, info, exp, and historic
     ipr values: full3667, noModification3667, noDerivatives3667
     you can add the attributes updates="NNNN" and obsoletes="NNNN" 
     they will automatically be output with "(if approved)" -->

  <!-- ***** FRONT MATTER ***** -->

  <front>
    <!-- The abbreviated title is used in the page header - it is only necessary if the 
         full title is longer than 39 characters -->

    <title abbrev="MVPN Configuration">Multicast in MPLS/BGP IP VPN Configuration BGP Extended Communities
    </title>

    <!-- add 'role="editor"' below for the editors if appropriate -->

    <!-- Another author who claims to be an editor -->

    <author fullname="Mark Fine" initials="M." surname="Fine">
      <organization>Alcatel-Lucent</organization>

      <address>
        <postal>
          <street>701 E Middlefield Road</street>

          <!-- Reorder these if your country does things differently -->

          <city>Mountain View</city>

          <region>CA</region>

          <code>94043</code>

          <country>USA</country>
        </postal>

        <email>mark.fine@alcatel-lucent.com</email>

        <!-- uri and facsimile elements may also be added -->
      </address>
    </author>

    <author fullname="Ray Qiu" initials="R." surname="Qiu">
      <organization>Alcatel-Lucent</organization>

      <address>
        <postal>
          <street>701 E Middlefield Road</street>

          <!-- Reorder these if your country does things differently -->

          <city>Mountain View</city>

          <region>CA</region>

          <code>94043</code>

          <country>USA</country>
        </postal>

        <email>ray.qiu@alcatel-lucent.com</email>

        <!-- uri and facsimile elements may also be added -->
      </address>
    </author>

    <date month="July" day="2" year="2009"/>

    <!-- If the month and year are both specified and are the current ones, xml2rfc will fill 
         in the current day for you. If only the current year is specified, xml2rfc will fill 
	 in the current day and month for you. If the year is not the current one, it is 
	 necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the 
	 purpose of calculating the expiry date).  With drafts it is normally sufficient to 
	 specify just the year. -->

    <!-- Meta-data Declarations -->

    <area>Routing</area>

    <!-- WG name at the upperleft corner of the doc,
         IETF is fine for individual submissions.  
	 If this element is not present, the default is "Network Working Group",
         which is used by the RFC Editor as a nod to the history of the IETF. -->

    <keyword>MVPN</keyword>

    <!-- Keywords will be incorporated into HTML output
         files in a meta tag but they have no effect on text or nroff
         output. If you submit your draft to the RFC Editor, the
         keywords will be used for the search engine. -->

    <abstract>

      <t>This document defines new BGP extended communities for exchanging
      Multicast in MPLS/BGP IP VPN configuration.</t>

    </abstract>
  </front>

  <middle>
    <section title="Requirements Language">

      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <xref target="RFC2119">RFC
      2119</xref>.</t>

    </section>

    <section title="Introduction">
      
      <t>The document <xref target="I-D.ietf-l3vpn-2547bis-mcast"></xref>
      provides a framework for handling IP multicast traffic from one customer
      site to another, and specifies how a number of different protocols fit
      together to support it. The framework provides a range of configurable
      protocol options that are not all interoperable from one customer site to
      another. The framework does not provide a way to specify configurable
      protocol options or to identify misconfigurations.</t>
      
      <t>This document describes a mechanism for specifying a configuration for
      handling IP multicast traffic from one customer site to another. The
      mechanism specifies configurable protocol options and identifies
      misconfigurations.</t>
      
      <t>This document defines new BGP extended communities for exchanging
      Multicast in MPLS/BGP IP VPN configuration.</t>

    </section>

    <section title="MVPN Intra-AS Configuration Extended Community">

      <t>This document defines a new BGP extended community called MVPN Intra-AS
      Configuration.</t>
      
      <t>MVPN Intra-AS Configuration is an IP address specific extended
      community, of an extended type, and is transitive across AS boundaries
      <xref target="RFC4360"></xref>.</t>
      

      <t>The Global Administrator field of this community MUST be set to the
      an IP address of the PE. This address SHOULD be common for all the
      VRFs on the PE.</t>

      <?rfc needLines="20" ?>

      <t>The Local Administrator field of this community is encoded as
      follows:</t>

      <figure align="center">
        <artwork align="center">
          <![CDATA[
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                               |I| S | C |                     |
                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
          ]]></artwork>
      </figure>

      <t>This document defines the following fields:</t>
      <t><list style="hanging">
        <t>I - Inter-Site Shared C-Trees Support</t>
        <t>S - S-PMSI Bindings Exchange Mode</t>
        <t>C - C-Multicast Routes Exchange Mode</t>
      </list></t>

      <?rfc needLines="10" ?>

      <t>The Inter-Site Shared C-Trees Support field indicates whether a given
      MVPN supports inter-site shared C-trees. This document defines the
      following values for this field:</t>
      <t><list style="hanging">
        <t>0 - inter-site shared C-trees are not supported;</t>
        <t>1 - inter-site shared C-trees are supported.</t>
      </list></t>

      <?rfc needLines="10" ?>

      <t>The S-PMSI Bindings Exchange Mode field indicates which S-PMSI bindings
      transmission method a given MVPN supports. This document defines the
      following values for this field:</t>
      <t><list style="hanging">
        <t>0 - S-PMSI bindings are not exchanged;</t>
        <t>1 - S-PMSI bindings are exchanged with UDP-based protocols;</t>
        <t>2 - S-PMSI bindings are exchanged with BGP protcools.</t>
      </list></t>

      <?rfc needLines="10" ?>

      <t>The C-Multicast Routes Exchange Mode field indicates which C-multicast
      routes transimission method a given MVPN supports. This document defines
      the following values for this field:</t>
      <t><list style="hanging">
        <t>0 - C-multicast routes are not exchanged;</t>
        <t>1 - C-multicast routes are exchanged with PIM protocols;</t>
        <t>2 - C-multicast routes are exchanged with BGP protocols.</t>
      </list></t>
      
      <t>An implementation that supports MVPN Intra-AS Configuration considers
      this extended community malformed if it contains either an undefined
      C-Multicast Routes Exchange Mode or an undefined S-PMSI Bindings Exchange
      Mode.</t>

      <t>An implementation MUST provide debugging facilities to permit issues
      caused by the malformed MVPN Intra-AS Configuration to be diagnosed.</t>

      <t>The MVPN Intra-AS Configuration is used in conjunction with Intra-AS
      I-PMSI A-D routes. When an implementation originates an Intra-AS I-PMSI
      route it MUST carry a MVPN Intra-AS Configuration describing the
      configured protocol options for the MVPN on the PE.</t>

      <t>Discovery of PE capabilities in terms of what protocol options they
      support is outside the scope of this document.</t>

    </section>

    <section title="MVPN Inter-AS Configuration Extended Community">

      <t>This document defines a new BGP extended community called MVPN Inter-AS
      Configuration.</t>
      
      <t>MVPN Inter-AS Configuration is an AS specific extended community, of an
      extended type, and is transitive across AS boundaries <xref
      target="RFC4360"></xref>.</t>
      
      <t>The Global Administrator field of this community MUST be set to the
      autonomous system number of the PE.</t>

    <?rfc needLines="20" ?>

      <t>The Local Administrator field of this community is encoded as
      follows:</t>

      <figure align="center">
        <artwork align="center">
          <![CDATA[
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|I| S |                                                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
          ]]></artwork>
      </figure>

      <t>This document defines the following fields:</t>
      <t><list style="hanging">
        <t>I - Inter-Site Shared C-Trees Support</t>
        <t>S - S-PMSI Bindings Exchange Mode</t>
      </list></t>

      <?rfc needLines="10" ?>

      <t>The Inter-Site Shared C-Trees Support field indicates whether a given
      MVPN supports inter-site shared C-trees. This document defines the
      following values for this field:</t>
      <t><list style="hanging">
        <t>0 - inter-site shared C-trees are not supported;</t>
        <t>1 - inter-site shared C-trees are supported.</t>
      </list></t>

      <?rfc needLines="10" ?>

      <t>The S-PMSI Bindings Exchange Mode field indicates which S-PMSI bindings
      transmission method a given MVPN supports. This document defines the
      following values for this field:</t>
      <t><list style="hanging">
        <t>0 - S-PMSI bindings are not exchanged;</t>
        <t>1 - S-PMSI bindings are exchanged with UDP-based protocols;</t>
        <t>2 - S-PMSI bindings are exchanged with BGP protcools.</t>
      </list></t>

      <t>An implementation that supports MVPN Inter-AS Configuration considers
      this extended community malformed if it contains either an undefined
      S-PMSI Bindings Exchange Mode.</t>

      <t>An implementation MUST provide debugging facilities to permit issues
      caused by the malformed MVPN Inter-AS Configuration to be diagnosed.</t>

      <t>The MVPN Inter-AS Configuration is used in conjunction with Inter-AS
      I-PMSI A-D routes. When an implementation originates an Inter-AS I-PMSI
      route it MUST carry a MVPN Inter-AS Configuration describing the
      configured protocol options for the MVPN in the AS.</t>

      <t>Discovery of AS capabilities in terms of what protocol options they
      support is outside the scope of this document.</t>

    </section>

    <section anchor="IANA" title="IANA Considerations">
      <t>This document introduces a new BGP extended community called MVPN
      Intra-AS Configuration. This community is IP address specific, of an
      extended type, and is transitive.</t>

      <t>This document introduces a new BGP extended community called MVPN
      Inter-AS Configuration. This community is AS specific, of an extended
      type, and is transitive.</t>
    </section>

    <section anchor="Security" title="Security Considerations">
      <t>There are no additional security risks introduced by this design.</t>
    </section>

  </middle>

  <!--  *****BACK MATTER ***** -->

  <back>

    <references title="Normative References">

      &RFC2119;

      &RFC4360;

      &I-D.ietf-l3vpn-2547bis-mcast;

    </references>

    <references title="Informative References">

      &I-D.ietf-l3vpn-2547bis-mcast-bgp;

    </references>
    
  </back>
</rfc>
