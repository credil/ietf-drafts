   
    
   CCAMP Working Group                                        Zafar Ali 
                                                           Hassan Sheikh 
   Internet Draft                                    Cisco Systems, Inc. 
                                                          Tomohiro Otani 
                                             KDDI R&D Laboratories, Inc.  
   Intended status: BCP                                       July 9, 
   2007 
   Expires: January 2008 
                                       
    
                                        
        Address Resolution for GMPLS controlled PSC Ethernet Interfaces 
                                        
           draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-04.txt 
                                        
    

   Status of this Memo 

      By submitting this Internet-Draft, each author represents that       
      any applicable patent or other IPR claims of which he or she is       
      aware have been or will be disclosed, and any of which he or she       
      becomes aware will be disclosed, in accordance with Section 6 of       
      BCP 79. 

      Internet-Drafts are working documents of the Internet Engineering 
      Task Force (IETF), its areas, and its working groups.  Note that 
      other groups may also distribute working documents as Internet-
      Drafts. 

      Internet-Drafts are draft documents valid for a maximum of six 
      months and may be updated, replaced, or obsoleted by other 
      documents at any time.  It is inappropriate to use Internet-
      Drafts as reference material or to cite them other than as "work 
      in progress." 

      The list of current Internet-Drafts can be accessed at 
      http://www.ietf.org/ietf/1id-abstracts.txt 

      The list of Internet-Draft Shadow Directories can be accessed at 
      http://www.ietf.org/shadow.html 

      This Internet-Draft will expire on August 9, 2007. 

   Copyright Notice 

      Copyright (C) The IETF Trust (2007). 

    
    
    
                          Expires January 2008               [Page 1] 
    
   draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-04.txt July 2007 
       

    

   Abstract 

      This document outlines some interoperability issues observed with 
      the use of ARP over GMPLS controlled Ethernet router-to-router 
      (PSC) interfaces transiting from a non-Ethernet core, e.g., FSC 
      or LSC GMPLS core. The document also recommends some procedures 
      to address these issues. The aim of this document is to 
      facilitate and ensure better interworking of GMPLS-capable Label 
      Switching Routers (LSRs), based on experience gained in 
      interoperability testing.  

       
   Conventions used in this document 

      In examples, "C:" and "S:" indicate lines sent by the client and 
      server respectively. 

      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL 
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and 
      "OPTIONAL" in this document are to be interpreted as described in 
      RFC-2119. 

   Table of Contents 

       
      1. Introduction...............................................2 
      2. Address to use for ARP Resolution..........................5 
      3. Security Considerations....................................5 
      4. IANA Considerations........................................5 
      5. References.................................................5 
         5.1. Normative References..................................5 
         5.2. Informative References................................5 
      Author's Addresses............................................6 
      Intellectual Property Statement...............................6 
      Disclaimer of Validity........................................7 
       
   1. Introduction 

      This draft addresses the scenario where edge routers are 
      connected via a non-Ethernet switch capable GMPLS core, e.g., FSC 
      or LSC core [RFC3471], [RFC3473]. Furthermore, the interfaces 
      between the router and the optical device (OXC) are Ethernet, and 
      considered as point-to-point. Unlike POS links where a L2 
      adjacency resolution is not required, the Ethernet links require 

                        
                        
                       Expires January 2008                [Page 2] 
       
   draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-04.txt July 2007 
       

      that the ARP be resolved (also known as Layer 2 MAC address) 
      before any forwarding works on this link.  
       
      This draft addresses the following scenario,  
        
      <---------------------- GMPLS Tunnel -----------------------> 
        
      RTR1 <---- GE TE link ----> OXC <---- GE TE link ----> RTR2 
        segment # 1                                   segment # 2 
         
        Figure 1: Reference Diagram.  
       
      Here TE links can be numbered or unnumbered. Similarly, tunnel 
      interface can be numbered or unnumbered. Furthermore, segment # 1 
      and segment #2 may or may not be in the same subnets.  
       
      When an LSP Path is established between the Ingress Router (RTR1) 
      to Egress Router (RTR2), Ethernet interface at the two routers 
      comes up. However, before this LSP (or interface) can forward any 
      IP traffic, MAC address of the remote router needs to be 
      resolved. The remote MAC address learning is the same procedure 
      used in ARP resolution to be able to map and ip address to a MAC 
      address on an Ethernet segment.  
    
      End-point MAC address needs to be re-learned once the ARP cache 
      entries time-out, or every time the path taken by the GMPLS LSP 
      changes (e.g., due to re-routing or re-optimization). This 
      introduces latency that is at least equal to the round trip 
      delay. Such latency adds to the traffic switchover delay and 
      consequently traffic loss for 1:1 protected LSP without extra 
      traffic, or when LSP route changes due to re-routing 
      (restoration) or re-optimization, etc.  
       
      Interoperability issues in learning end-point MAC address using 
      ARP are also found among vendors at various Interoperability 
      events/ testing efforts. This is because different vendors use 
      different IP address for ARP resolution. Some LSR vendor uses the 
      address of the TE link at the end-point, while others adapt to 
      use tunnel interface address for ARP resolution. When both end-
      point TE link address and tunnel interface addresses are 
      unnumbered, the ARP needs to be performed using loopback 
      addresses or unique node-ids. Some LSRs do not reply to ARP 
      request sent to a loopback address unless proxy Arp is used or 
      unless there is no issues with the L3 reachability of such 
      loopback address.  When tunnel interface is protected, i.e., it 
      has working and protecting LSP-es, the ARP requested for a given 
      tunnel IF address should resolve ARP for the physical interfaces 
                        
                        
                       Expires January 2008                [Page 3] 
       
   draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-04.txt July 2007 
       

      along the path of working and protecting LSP. Issue associated 
      with ARP latency and traffic loss for 1:1 protected LSP without 
      extra traffic, or when LSP route changes due to due to re-routing 
      (restoration) or re-optimization, etc. could not be addressed. 
      Furthermore tunnel IF address can also be unnumbered.  
       
      This document provides some recommendations for the use of the 
      MAC addresses resolution (ARP resolution) for a GMPLS LSP. In the 
      following, we provide reason behind recommendations provided in 
      this document.  
       
      Consider following scenarios. Please refer to Figure 1.  
       
      1. When numbered TE links are used but segment # 1 and segment # 
         2 are in different subnets: In this case disjoint subnets are 
         used with numbered TE links between the Ingress LSR and the 
         Optical node, and the Egress LSR and the optical node. In this 
         situation we really have no way of resolving ARP using the 
         addresses of the underlying TE link Ethernet links without 
         using static ARP entries. The issue is that the subnets are 
         different so the ARP request received by RTR2 from RTR1 will 
         be rejected as it is not known to RTR2, and vice versa. 
         Instead, if the ARP request if for the GMPLS tunnel instead 
         then there should be no problem as the GMPLS tunnel is point-
         to-point virtual link with IPV4 addresses in the same subnet.  
      2. When the GMPLS tunnel is numbered but the TE links are 
         Unnumbered and RTR1 does not have loopback address used by RTR2 
         in its forwarding database, and vice versa. An example of such 
         scenario is the case when optical and packet TE links are 
         flooded with different IGP instances. In this case, we are 
         again faced with the same issue of L2 ARP adjacency resolution 
         between RTR1 and RTR2. RTR2 will reject the ARP request for 
         RTR1 as it will not find the unnumbered address (used by RTR1) 
         in its forwarding database. This issue would not be 
         encountered if we were resolving the ARP on GMPLS tunnel 
         address.  
      3. If the GMPLS tunnel is unnumbered then the ARP resolution 
         needs to be done using Loopback addresses associated with the 
         GMPLS tunnel.  
      4. GMPLS Protection Case: The use of the GMPLS tunnel IP address 
         for ARP resolution can also be extended to the case where the 
         GMPLS tunnel is providing 1:1 protection i.e. a working LSP 
         and a protected LSP exists for the GMPLS tunnel. The protected 
         and the working LSP of the GMPLS tunnel are typically using 
         different physical interfaces with different MAC address and 
         TE link addresses. In this case, using the same GMPLS tunnel 
         IP addresses for resolving ARP for both working and the 
                        
                        
                       Expires January 2008                [Page 4] 
       
   draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-04.txt July 2007 
       

         protecting links would require the router to associate two 
         physical interfaces with different MAC addresses with the same 
         GMPLS tunnel IP address. The use of this implementation along 
         with the creation of such mapping would also eliminate the 
         problem of ARP cache timeout on the protecting link; and hence 
         can address the above-mentioned ARP latency issue related to 
         protection/ restoration or reoptimization case. 
       
   2. Address to use for ARP Resolution 

      An LSR SHOULD use tunnel interface address for ARP request. An 
      LSR, based on a local decision, can determine if the Interface is 
      point-to-point and SHOULD resolve APR using loopback addresses. 
      Similarly, for point-to-point interfaces, an LSR SHOULD resolve 
      APR for two or more physical interfaces using the same IP address 
      (this is to address ARP Latency issue mentioned-above). 
       
      In the case of protected tunnels, the ARP cache SHOULD NOT 
      timeout the ARP entry on both the working and the protecting 
      LSPs. To meet this requirement, an LSR MAY resolve the ARP at the 
      GMPLS tunnel setup time and MAY use an infinite ARP timeout (this 
      is to make sure that ARP entire will not timeout as long as the 
      GMPLS tunnel is UP). Alternatively, an LSR MAY implement a 
      periodic ARP refresh scheme for the GMPLS tunnel to keep the ARP 
      cache refreshed for both the working and the protected LSP.   
        

   3. Security Considerations 

      This document does not introduce new security issues. 

    
   4. IANA Considerations 

      This document does not require any IANA consideration.   

   5. References 

   5.1. Normative References 

       






                        
                        
                       Expires January 2008                [Page 5] 
       
   draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-04.txt July 2007 
       

   5.2. Informative References 

      [RFC3471] Generalized Multi-Protocol Label Switching (GMPLS) 
         Signaling Functional Description, RFC 3471, L. Berger, et al, 
         January 2003. 
      [RFC3473] "Generalized Multi-Protocol Label Switching (GMPLS) 
         Signaling Resource ReserVation Protocol-Traffic Engineering 
         (RSVP-TE) Extensions", RFC 3473, L. Berger, et al, January 
         2003.  
       
   Author's Addresses 

      Zafar Ali 
      Cisco Systems Inc. 
      2000 Innovation Dr.,  
      Kanata, Ontario, K2K 3E8   
      Canada. 
      Phone: (613) 889-6158 
      Email: zali@cisco.com  
       
      Hassan Sheikh 
      Cisco Systems Inc. 
      2000 Innovation Dr.,  
      Kanata, Ontario, K2K 3E8   
      Canada. 
      Phone: (613) 254-3356 
      Email: hassans@cisco.com  
       
      Tomohiro Otani 
      KDDI R&D Laboratories, Inc.  
      2-1-15 Ohara Fujimino-shi      
      Saitama, 356-8502. Japan      
      Phone:  +81-49-278-7357 
      Email:  otani@kddilabs.jp 
    

   Intellectual Property Statement 

      The IETF takes no position regarding the validity or scope of any 
      Intellectual Property Rights or other rights that might be 
      claimed to pertain to the implementation or use of the technology 
      described in this document or the extent to which any license 
      under such rights might or might not be available; nor does it 
      represent that it has made any independent effort to identify any 
      such rights.  Information on the procedures with respect to 
      rights in RFC documents can be found in BCP 78 and BCP 79. 

                        
                        
                       Expires January 2008                [Page 6] 
       
   draft-ali-arp-over-gmpls-controlled-ethernet-psc-i-04.txt July 2007 
       

      Copies of IPR disclosures made to the IETF Secretariat and any 
      assurances of licenses to be made available, or the result of an 
      attempt made to obtain a general license or permission for the 
      use of such proprietary rights by implementers or users of this 
      specification can be obtained from the IETF on-line IPR 
      repository at http://www.ietf.org/ipr. 

      The IETF invites any interested party to bring to its attention 
      any copyrights, patents or patent applications, or other 
      proprietary rights that may cover technology that may be required 
      to implement this standard.  Please address the information to 
      the IETF at ietf-ipr@ietf.org. 

   Disclaimer of Validity 

      This document and the information contained herein are provided 
      on an "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE 
      REPRESENTS OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE 
      IETF TRUST AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL 
      WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY 
      WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE 
      ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR 
      FITNESS FOR A PARTICULAR PURPOSE. 

   Copyright Statement 

      Copyright (C) The IETF Trust (2007). 

      This document is subject to the rights, licenses and restrictions 
      contained in BCP 78, and except as set forth therein, the authors 
      retain all their rights. 

       














                        
                        
                       Expires January 2008                [Page 7] 
       
