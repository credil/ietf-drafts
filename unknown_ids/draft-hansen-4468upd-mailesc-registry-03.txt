


Network Working Group                                          T. Hansen
Internet-Draft                                         AT&T Laboratories
Updates: 3463,4468,4954                                       J. Klensin
(if approved)                                           January 10, 2008
Intended status: Standards Track
Expires: July 13, 2008


         A Registry for SMTP Enhanced Mail System Status Codes
                draft-hansen-4468upd-mailesc-registry-03

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on July 13, 2008.

Copyright Notice

   Copyright (C) The IETF Trust (2008).












Hansen & Klensin          Expires July 13, 2008                 [Page 1]

Internet-Draft     SMTP Enhanced Status Code Registry       January 2008


Abstract

   The specification for enhanced mail system enhanced status codes, RFC
   3463, establishes a new code model and lists a collection of status
   codes.  While it anticipated that more codes would be added over
   time, it did not provide an explicit mechanism for registering and
   tracking those codes.  This document specifies an IANA registry for
   mail system enhanced status codes, and initializes that registry with
   the codes so far established in published standards-track documents,
   as well as other codes that have become established in the industry.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  4
     2.1.  SMTP Enhanced Status Codes Registry  . . . . . . . . . . .  4
     2.2.  Review Process for New Values  . . . . . . . . . . . . . .  5
     2.3.  Registration Updates . . . . . . . . . . . . . . . . . . .  5
     2.4.  Initial Values . . . . . . . . . . . . . . . . . . . . . .  5
   3.  Security Considerations  . . . . . . . . . . . . . . . . . . .  9
   4.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 10
   5.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 11
     5.1.  Normative References . . . . . . . . . . . . . . . . . . . 11
     5.2.  Informative References . . . . . . . . . . . . . . . . . . 11
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 12
   Intellectual Property and Copyright Statements . . . . . . . . . . 13
























Hansen & Klensin          Expires July 13, 2008                 [Page 2]

Internet-Draft     SMTP Enhanced Status Code Registry       January 2008


1.  Introduction

   Enhanced Status Codes for SMTP were first defined in [RFC1893],
   subsequently replaced by [RFC3463].  While it anticipated that more
   codes would be added over time (see its Section 2), it did not
   provide an explicit mechanism for registering and tracking those
   codes.  Since that time, various RFCs have been published and
   internet drafts proposed that define further status codes.  However,
   without an IANA registry, conflicts in definitions have begun to
   appear.

   This RFC defines such an IANA registry and was written to help
   prevent further conflicts from appearing in the future.  It
   initializes the registry with the established standards-track
   enhanced status codes from [RFC3463], [RFC3886], [RFC4468] and
   [RFC4954].  In addition, several codes are added that were
   established by various internet drafts and have come into common use,
   despite the expiration of the documents themselves.

   NOTE: The values given in Table 1 below are incomplete.

   This document is being discussed on the SMTP mailing list,
   ietf-smtp@imc.org.  (RFC EDITOR NOTE: Remove this paragraph on
   publication.)



























Hansen & Klensin          Expires July 13, 2008                 [Page 3]

Internet-Draft     SMTP Enhanced Status Code Registry       January 2008


2.  IANA Considerations

2.1.  SMTP Enhanced Status Codes Registry

   IANA is directed to create the registry "SMTP Enhanced Status Codes".
   The Mail Enhanced Status Codes registry will have three tables:

   o  class sub-code,

   o  subject sub-code, and

   o  enumerated status codes, which include both a subject sub-code and
      a detail sub-code.

   Each entry in the tables will include:

   1.  The sub-code or enumerated status code, which will be a numeric
       code consisting of three components, as specified in RFC 3463.

   2.  Text expected to be associated with the code.

   3.  If applicable, the basic status code of RFC 2821 [RFC2821] with
       which it is usually associated.

   4.  A short description of the code.

   5.  A reference to the document in which the code is defined.  This
       reference should note whether the relevant specification is
       standards-track or not.

   6.  The identity of the submitter, usually the document author.

   7.  The identity of the owner for the specification.  This will be
       "IESG" in the case of IETF-produced documents.

   An example of an entry in the enumerated status code table would be:

   X.0.0 Other undefined Status
      Associated basic status code: any
      Other undefined status is the only undefined error code.
      X.0.0 should be used for all errors for which only the class of
      the error is known.

      Defined in RFC 3463.







Hansen & Klensin          Expires July 13, 2008                 [Page 4]

Internet-Draft     SMTP Enhanced Status Code Registry       January 2008


      Submitter: G. Vaudreuil

      Owner: IESG.

2.2.  Review Process for New Values

   Entries in this registry are expected to follow the "Specification
   Required" model ([RFC2434]) although, in practice, most entries are
   expected to derive from standards-track documents.  However, any
   review process for non-standards-track documents SHOULD accept
   evidence of significant deployment as a persuasive argument that the
   registration should be permitted: the principal purpose of this
   registry is to avoid confusion and conflicts among different
   definitions or uses for the same code.

   The procedures from [RFC4020] may be followed to pre-allocate an
   Enhanced Status Code before final publication of an internet draft.

2.3.  Registration Updates

   Standards-track registrations may be updated if the relevant
   standards are updated as a consequence of that action.  Non-
   standards-track entries may be updated by the listed responsible
   party.  Only the entry's short description or references may be
   modified in this way, not the code or associated text.  In
   exceptional cases, any aspect of any registered entity may be updated
   at the direction of the IESG (for example, to correct a conflict).

2.4.  Initial Values

   The initial values for the class and subject sub-code tables is to be
   populated from section 2 of [RFC3463].  Specifically, these are the
   values for 2.XXX.XXX, 4.XXX.XXX and 5.XXX.XXX for the class sub-code
   table, and the values X.0.XXX, X.1.XXX, X.2.XXX, X.3.XXX, X.4.XXX,
   X.5.XXX, X.6.XXX and X.7.XXX for the subject sub-code table.  Each
   entry is to be designated as defined in [RFC3463], submitted by G.
   Vaudreuil, and owned by IESG.

   The initial values for the enumerated status code table is to be
   populated from:

   1.  sections 3.1 through 3.8 of [RFC3463], (X.0.0, X.1.0 through
       X.1.8, X.2.0 through X.2.4, X.3.0 through X.3.5, X.4.0 through
       X.4.7,

   2.  X.5.0 through X.5.5, X.6.0 through X.6.5, and X.7.0 through
       X.7.7) section 3.3.4 of [RFC3886] (X.1.9),




Hansen & Klensin          Expires July 13, 2008                 [Page 5]

Internet-Draft     SMTP Enhanced Status Code Registry       January 2008


   3.  X.6.6 found in section 5 of [RFC4468],

   4.  and X.5.6, X.7.8, X.7.9, X.7.11 and X.7.12, found in section 6 of
       [RFC4954].

   Each entry is to be designated as defined in the corresponding RFC,
   submitted by the corresponding RFC author, and owned by the IESG.

   The initial values for the Associated Basic Status Code for each of
   the above initial enhanced status codes is given in the following
   table.
   NOTE: this table is incomplete.

   +--------------+------------------+--------------+------------------+
   | Enhanced     | Associated Basic | Enhanced     | Associated Basic |
   | Status Code  | Status Code      | Status Code  | Status Code      |
   +--------------+------------------+--------------+------------------+
   | X.0.0        | any              | X.1.0        | ???              |
   |              |                  |              |                  |
   | X.1.1        | ???              | X.1.2        | ???              |
   |              |                  |              |                  |
   | X.1.3        | ???              | X.1.4        | ???              |
   |              |                  |              |                  |
   | X.1.5        | 250              | X.1.6        | ???              |
   |              |                  |              |                  |
   | X.1.7        | ???              | X.1.8        | ???              |
   |              |                  |              |                  |
   | X.2.0        | ???              | X.2.1        | ???              |
   |              |                  |              |                  |
   | X.2.2        | 552              | X.2.3        | ???              |
   |              |                  |              |                  |
   | X.2.4        | ???              | X.3.0        | ???              |
   |              |                  |              |                  |
   | X.3.1        | ???              | X.3.2        | ???              |
   |              |                  |              |                  |
   | X.3.3        | ???              | X.3.4        | 554              |
   |              |                  |              |                  |
   | X.3.5        | ???              | X.4.0        | ???              |
   |              |                  |              |                  |
   | X.4.1        | 451              | X.4.2        | ???              |
   |              |                  |              |                  |
   | X.4.3        | ???              | X.4.4        | ???              |
   |              |                  |              |                  |
   | X.4.5        | ???              | X.4.6        | ???              |
   |              |                  |              |                  |
   | X.4.7        | ???              | X.5.0        | 250, 554, 503    |
   |              |                  |              |                  |
   | X.5.1        | ???              | X.5.2        | ???              |



Hansen & Klensin          Expires July 13, 2008                 [Page 6]

Internet-Draft     SMTP Enhanced Status Code Registry       January 2008


   | X.5.3        | ???              | X.5.4        | ???              |
   |              |                  |              |                  |
   | X.5.5        | ???              | X.5.6        | 500              |
   |              |                  |              |                  |
   | X.6.0        | ???              | X.6.1        | ???              |
   |              |                  |              |                  |
   | X.6.2        | ???              | X.6.3        | 554              |
   |              |                  |              |                  |
   | X.6.4        | 250              | X.6.5        | ???              |
   |              |                  |              |                  |
   | X.6.6        | 554              | X.7.0        | 235, 454, 530,   |
   |              |                  |              | 554              |
   |              |                  |              |                  |
   | X.7.1        | 550              | X.7.2        | ???              |
   |              |                  |              |                  |
   | X.7.3        | ???              | X.7.4        | ???              |
   |              |                  |              |                  |
   | X.7.5        | ???              | X.7.6        | ???              |
   |              |                  |              |                  |
   | X.7.7        | ???              | X.7.8        | 554, 535         |
   |              |                  |              |                  |
   | X.7.9        | 534              | X.7.11       | 538              |
   |              |                  |              |                  |
   | X.7.12       | 432              |              |                  |
   +--------------+------------------+--------------+------------------+

                                  Table 1

   The following additional definitions are to be registered in the
   enumerated status code table.  (RFC EDITOR NOTE: change XXXX below to
   this document's RFC number.)

   X.7.10 Encryption Needed
      Associated basic status code: ???
      This indicates that external strong privacy layer is needed in
      order to use the requested authentication mechanism.  This is
      primarily intended for use with clear text authentication
      mechanisms.  A client which receives this may activate a security
      layer such as TLS prior to authenticating, or attempt to use a
      stronger mechanism.
      Defined: RFC XXXX.
      Submitter: T. Hansen, J. Klensin
      Owner: IESG.

   X.7.13 User Account Disabled
      Associated basic status code: ???
      Sometimes a system administrator will have to disable a user's
      account (e.g., due to lack of payment, abuse, evidence of a



Hansen & Klensin          Expires July 13, 2008                 [Page 7]

Internet-Draft     SMTP Enhanced Status Code Registry       January 2008


      break-in attempt, etc).  This error code occurs after a successful
      authentication to a disabled account.  This informs the client
      that the failure is permanent until the user contacts their system
      administrator to get the account re-enabled.  It differs from a
      generic authentication failure where the client's best option is
      to present the passphrase entry dialog in case the user simply
      mistyped their passphrase.
      Defined: RFC XXXX.
      Submitter: T. Hansen, J. Klensin
      Owner: IESG.

   X.7.14 Trust relationship required
      Associated basic status code: ???
      The submission server requires a configured trust relationship
      with a third-party server in order to access the message content.
      This value replaces the prior use of X.7.8 for this error
      condition. thereby updating [RFC4468].
      Defined: RFC XXXX.
      Submitter: T. Hansen, J. Klensin
      Owner: IESG.































Hansen & Klensin          Expires July 13, 2008                 [Page 8]

Internet-Draft     SMTP Enhanced Status Code Registry       January 2008


3.  Security Considerations

   As stated in [RFC1893], use of enhanced status codes may disclose
   additional information about how an internal mail system is
   implemented beyond that available through the SMTP status codes.

   Many proposed additions to the response code list are security
   related.  Having these registered in one place to prevent collisions
   will improve their value.  Security error responses can leak
   information to active attackers (e.g., the distinction between "user
   not found" and "bad password" during authentication).  Documents
   defining security error codes should make it clear when this is the
   case so SMTP server software subject to such threats can provide
   appropriate controls to restrict exposure.





































Hansen & Klensin          Expires July 13, 2008                 [Page 9]

Internet-Draft     SMTP Enhanced Status Code Registry       January 2008


4.  Acknowledgements

   While the need for this registry should have become clear shortly
   after [RFC3463] was approved, the growth of the code table through
   additional documents and work done as part of email
   internationalization and [RFC2821] updating efforts made the
   requirement much more clear.  The comments of the participants in
   those efforts are gratefully acknowledged, particularly the members
   of the ietf-smtp@imc.org mailing list.  Chris Newman and Randy
   Gellens provided useful comments and some text for early versions of
   the document.








































Hansen & Klensin          Expires July 13, 2008                [Page 10]

Internet-Draft     SMTP Enhanced Status Code Registry       January 2008


5.  References

5.1.  Normative References

   [RFC3463]  Vaudreuil, G., "Enhanced Mail System Status Codes",
              RFC 3463, January 2003.

   [RFC2821]  Klensin, J., "Simple Mail Transfer Protocol", RFC 2821,
              April 2001.

   [RFC3886]  Allman, E., "An Extensible Message Format for Message
              Tracking Responses", RFC 3886, September 2004.

   [RFC4020]  Kompella, K. and A. Zinin, "Early IANA Allocation of
              Standards Track Code Points", BCP 100, RFC 4020,
              February 2005.

   [RFC4468]  Newman, C., "Message Submission BURL Extension", RFC 4468,
              May 2006.

   [RFC4954]  Siemborski, R. and A. Melnikov, "SMTP Service Extension
              for Authentication", RFC 4954, July 2007.

5.2.  Informative References

   [RFC1893]  Vaudreuil, G., "Enhanced Mail System Status Codes",
              RFC 1893, January 1996.

   [RFC2434]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", BCP 26, RFC 2434,
              October 1998.




















Hansen & Klensin          Expires July 13, 2008                [Page 11]

Internet-Draft     SMTP Enhanced Status Code Registry       January 2008


Authors' Addresses

   Tony Hansen
   AT&T Laboratories
   200 Laurel Ave.
   Middletown, NJ  07748
   USA

   Email: tony+mailesc@maillennium.att.com


   John C Klensin
   1770 Massachusetts Ave, Ste 322
   Cambridge, MA  02140
   USA

   Phone: +1 617 245 1457
   Email: john+ietf@jck.com

































Hansen & Klensin          Expires July 13, 2008                [Page 12]

Internet-Draft     SMTP Enhanced Status Code Registry       January 2008


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Acknowledgment

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).





Hansen & Klensin          Expires July 13, 2008                [Page 13]


