<?xml version="1.0"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd"[

      <!ENTITY rfc2119 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml'>

    ]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>

<?rfc toc="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<?rfc strict="yes" ?>
<?rfc linkmailto="yes" ?>
<rfc category="info" docName="draft-tsou-pcn-racf-applic-01.txt" ipr="full3978">
    <front>
        <title abbrev="PCN Applicability to RACF"> Applicability Statement for the Use of Pre-Congestion Notification in a Resource-Controlled Network
</title>
        <author fullname="Tina Tsou" initials="T." surname="Tsou">
            <organization abbrev="Huawei">Huawei Technologies</organization>
            <address>
                <postal>
                    <street>F3-5-089S, R&amp;D Center,</street>
                    <street>Longgang District</street>
                    <city>Shenzhen</city>
                    <code>518129</code>
                    <country>China</country>
                </postal>
                <email>tena@huawei.com</email>
            </address>
        </author>

        <author fullname="Fortune Huang" initials="F." surname="Huang">
            <organization abbrev="Huawei">Huawei Technologies</organization>
            <address>
                <postal>
                    <street>F3-5-089S, R&amp;D Center,</street>
                    <street>Longgang District</street>
                    <city>Shenzhen</city>
                    <code>518129</code>
                    <country>China</country>
                </postal>
                <email>fqhuang@huawei.com</email>
            </address>
        </author>

        <author fullname="Tom Taylor" initials="T." surname="Taylor">
            <organization abbrev="Huawei">Huawei Technologies</organization>
            <address>
                <postal>
                    <street>1852 Lorraine Ave</street>
                    <city>Ottawa</city>
                    <region>Ontario</region>
                    <code>K1H 6Z8</code>
                    <country>Canada</country>
                </postal>
                <phone>+1 613 680 2675</phone>
                <email>tom.taylor@rogers.com</email>
            </address>
        </author>
        <date month="November" year="2008"/>
        <area>Transport</area>
        <workgroup>PCN</workgroup>

        <abstract>
<t>This document is written to help coordinate work on pre-congestion notification (PCN) between the IETF PCN Working Group and the ITU-T. It maps the use of PCN into the ITU-T transport control architecture. It examines three scenarios, showing in each, where new requirements are placed on the ITU-T architecture. In each case, the ITU-T functional entity known as the Transport Resource Control Functional Entity (TRC-FE) is seen as the logical destination for PCN congestion reports and PCN flow termination reports, which it uses to keep track of network status. As logical entities, instances of the TRC-FE can be present in the ingress nodes, in one or more centralized devices, or in both. These alternatives define the scenarios examined.</t>

        </abstract>

</front>

<middle>

<section anchor="term" title="Terminology">

<t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119. </t>

</section><!-- term -->

<section anchor="intro" title="Introduction">

<section anchor="pcnIntro" title="Pre-Congestion Notification (PCN)">
	
<t>The PCN Working Group is working on a new approach for maintenance of quality of service (QoS) within Diffserv-controlled domains. This approach is called "pre-congestion notification" (PCN). The principles and associated architecture are documented in <xref target="I-D.PCNarch"/>.</t>

<t>PCN distinguishes and assigns roles to ingress nodes, interior nodes, and egress nodes relative to a given PCN domain. Ingress nodes mark admitted packets to indicate that they should be PCN-metered. Interior nodes check the next-hop interface traffic status for each PCN-marked packet before routing it. Marking behaviour is described in detail in <xref target="I-D.PCNmark"/> and depends in fact on the encoding scheme being used. The current view of this encoding scheme is provided in <xref target="I-D.PCNencod"/>, but other schemes are possible. In particular, note <xref target="I-D.PCN3in1"/>. If three encoding states are available, it is possible to have the following marking behaviour:
<list style="symbols">
<t>If the traffic status exceeds a lower "pre-congestion" threshold (but not the upper threshold described next), the packet is marked to indicate that it has encountered pre-congestion. </t>

<t>If the traffic status exceeds an upper "termination" threshold, the packet is marked to indicate that it has encountered a flow termination condition. </t>

</list></t>

<t>The egress nodes relate the packets they receive to the aggregate flows they receive from individual ingress nodes. 
Statistics on packet marking are reported to a decision point (possibly within the egress node itself), which makes two decisions:

<list style="symbols">
<t>whether one or more flows should be terminated immediately to preserve QoS for the remainder;</t>

<t>whether new flows can be admitted without degrading the QoS for existing flows to an unacceptable level.</t>
</list></t>

<t>The architecture on which the IETF work has focussed assumes that egress nodes communicate directly to ingress nodes to effect the termination and admission decisions.</t>

</section><!-- pcnIntro -->

<section anchor="racfIntro" title="Admission Control System">

<t>A number of standards bodies (such as the ITU-T and ETSI TISPAN) have defined admission control systems (ITU-T RACF <xref target="Y.2111"/>, TISPAN RACS <xref target="ES283003"/>) to allow per-flow imposition of policy based on subscriptions across a variety of transport technologies.</t>

<t>This section provides some general guidance how the admission control system is used in the PCN environment.</t>

<section anchor="introFlows" title="Basic Flows of the Admission Control System">

<t>The admission control system generally performs both admission control functions and flow termination functions based on the network congestion status information collected from the PCN-egress-node. </t>

<t>The PCN-egress-node measures the traffic from a particular PCN-ingress-node, and calculates the congestion value at the ingress-egress-aggregate level. The PCN-egress-node may compare the current congestion value with the previous congestion value, if the difference of the two congestion value exceeds a preset range, the PCN-egress-node sends the PCN-feedback-information (e.g. the current congestion value for a particular pair of PCN-boundary-nodes) to the admission control system. After receiving the PCN-feedback-information, the admission control system saves the information for admission control and flow termination. Based on this information, the admission control system can determine whether to admit a service flow request or not after receiving the flow request, and can also determine whether some of the admitted flows need to be terminated. The admission control system also needs to signal to the PCN-ingress-node the decision about admission or termination.</t>

</section><!-- introFlows -->

<section anchor="introAddr" title="Addressing">

<t>Generally, there is a mapping between the PCN-ingress-node and the addresses which are outside the PCN domain and accessible by the PCN-ingress-node, i.e. the source addresses of the incoming flows to the PCN domain. The PCN-ingress-node can abstract this mapping from for example the routing table or the configuration data. The PCN-ingress-node can send the mapping to the admission control system and the admission control system can determine the PCN-ingress-node for each flow based on the mapping and the address information of the flow. The admission control system may also forward the mapping to the PCN-egress-node, so that the PCN-egress-node can determine the PCN-ingress-node of a flow based on the mapping and the address information of the flow.</t>

</section><!-- introAddr -->

</section><!-- racfIntro -->

<section anchor="combin" title="Combining the PCN and ITU-T RACF Architectures">

<t>The ITU-T RACF architecture is a generalization of the architecture originally developed by 3GPP for cellular radio networks connected to an IP core. The architecture features a top-level control function which transmits requests (push mode) or provides policy responses (pull mode) to edge nodes where enforcement takes place. This top-level control function provides an abstract view of network infrastructure to the session control layer (SIP servers and the like). A second-level control function is aware of the specific transport technology in use in the network, tracks network topology and resource availability, and indicates to the top-level function whether resources are available to serve a specific flow request.</t>


<t>In the ITU-T architecture in particular <xref target="Y.2111"/>, the top-level function is called the Policy Decision Functional Entity (PD-FE-FE), and the second-level function is called the Transport Resource Control Functional Entity (TRC-FE). The complete transport control subsystem is called the Resource and Admission Control Function (RACF).  The function within the edge node at which decisions are enforced is called the Policy Enforcement Functional Entity (PE-FE). Interested parties will find a complete description of the first release of this architecture in [ITU-T Y.2111] , but a partial diagram labelling the reference points of interest in this document is shown in <xref target="figRACF"/>.</t>

<figure anchor="figRACF" title="A Portion of the ITU-T-Defined Transport Control Architecture">
<artwork>

                        Session Control
                        _______________
                               |
                               + Rs
                          -----+-----
                          |  PD-FE  |------
                          -----+-----     |
                               |          |
                               + Rt       |
       -----------   Rp   -----+-----     + Rw
       |  TRC-FE |---+----|  TRC-FE |     |
       -----+-----        -----+-----     |
            + Rc               + Rc       |
      ------+------------------+----------|-------
      |                              -----+----- |
      |         . . . .              |  PE-FE  | |
      |     Transport Processing     ----------- |
      --------------------------------------------
                        
</artwork>
</figure>

<t>The typical message flow associated with a flow admission request in the ITU-T architecture is as follows:

<list style="numbers">
<t>In the general case, the TRC-FE gathers topology and status information from the transport processing layer across the Rc reference point. The use of PCN offers the possibility that the TRC-FE no longer has to deal with detailed topology.</t>

<t>The PD-FE receives a request to admit a flow. In push mode this comes from a P-CSCF, for example, across the Rs reference point; in pull mode it comes from the PE-FE across the Rw reference point.</t>

<t>The PD-FE checks subscription data (provided by another subsystem) to see if the subscriber is permitted to add the requested flow. If not, it rejects the request immediately.</t>

<t>The PD-FE contacts an instance of the TRC-FE by way of the Rt reference point to determine if the network resources are available to allocate to the requested flow. The selected instance may locate other TRC-FE instances along the flow path via the Rp reference point to make this determination.</t>

<t>If the response from the TRC-FE is negative, the PD-FE rejects the request. Otherwise it downloads the required policy to the PE-FE across the Rw reference point. In push mode it also responds positively to the original request across the Rs reference point.</t>
</list>
</t>

<t>The PD-FE and TRC-FE actually track sessions, which typically consist of multiple flows in both directions. The TRC-FE can tell the PD-FE to terminate a flow or to abort a complete session due to, for instance, loss of the supporting resources. The PD-FE from its side can add or terminate individual flows or terminate a complete session as required by the user.</t>

<t>This document considers how PCN would interact with the RACF architecture just described. Since that architecture is functional, various implementations are possible, depending on what elements are combined in the same physical entities. This document looks at three possible deployment scenarios. In all three cases, the PD-FE is implemented in a centralized device and the PE-FE is a functional component of the ingress nodes. The scenarios vary in where the TRC-FE is implemented.

<list style="numbers">
<t>The TRC-FE is implemented both in one or more centralized devices (possibly combined with the PD-FE) and as a logical component of the ingress nodes. Congestion level and flow termination reports from the egress nodes pass directly to the ingress nodes. The TRC-FE in the centralized device is just a proxy that forwards requests and responses between the PD-FE and the ingress nodes.  The TRC-FE instances in the ingress nodes respond to flow admission requests from the PD-FE with indications of resource status derived from the PCN reports.  They process flow termination reports based on the priority parameters for existing flows that were supplied by the PD-FE during resource reservation, and send reports to the PD-FE indicating which flows or sessions must be terminated to protect the QoS of the remaining flows</t>
 
<t>The TRC-FE is absorbed into the ingress nodes and no centralized instance exists. Congestion level and flow termination reports from the egress nodes pass directly to the ingress nodes. The TRC-FE instances in the ingress nodes respond to flow admission requests and process flow termination reports in the same way as in Scenario 1.</t>

<t>The TRC-FE is implemented in one or more centralized devices only (possibly combined with the PD-FE). It receives and processes the congestion level and flow termination reports and responds to flow admission requests in the same way as the distributed TRC-FE instances in the previous two scenarios.</t>
</list>
</t>

<t>The following sections examine each of these scenarios in turn. Amongst other things, they will consider whether the message flow described in the previous section is appropriate or whether it should be modified.</t>

</section><!-- combin -->

</section><!-- intro -->

<section anchor="scen1" title="Scenario 1: Proxy and Ingress TRC-FE Instances">

<t>The functional layout for Scenario 1 is shown in <xref target="figScen1"/> below. The PCN reports pass across the existing Rc reference point between the embedded TRC-FE and the transport processing layer. If probes are used, they also cross the Rc reference point.  
The figure assumes that the PD-FE uses the proxy TRC-FE to locate the ingress node for a given user flow, and places the Rt and Rp reference points accordingly.</t>

<figure anchor="figScen1" title="Functional Architecture For Scenario 1">
<artwork>

                        Session Control
                        _______________
                               |
                               + Rs
                          -----+-----
                          |  PD-FE  |
                          -+---+-----
                          /    |
                         /     + Rt
                        /      |
               Rp      /  -----+----- 
           ----+----------+  TRC-FE |
          /          /    | (Proxy) |
         /          /     -----------
        /          x Rw 
 ------/-------   /                           ----------
 | ---+------ |  /             Rc             | Egress |
 | | TRC-FE +------------------+--------------+  Nodes |
 | ---------- |/   PCN reports and probes     ----------
 | ---------- /         (if used)
 | |  PE-FE +/|
 | ---------- |
 --------------
     Ingress
      Nodes

</artwork>
</figure>
<t> If we follow through the message flows specified in <xref target="racfIntro"/>, we find that they now run as follows:

<list style="numbers">
<t>Network status, but not network topology, is now determined from the PCN report message flows across Rc, as already noted.</t>
 
<t>Step 2 is unchanged.</t>

<t>Step 3 is unchanged.</t>

<t>Step 4 involves messaging through the Rt reference point to the proxy TRC-FE instance, and from there through the Rp reference point to the TRC-FE instance embedded in the desired ingress node. If probing is used to determine congestion status, the probing messages are another increment to the messaging through the Rc reference point. The responses to the probes pass back through Rc.</t>
 
<t>Step 5 is unchanged: a request from the PD-FE directly to the PE-FE instance in the ingress node, across Rw.</t>
</list>
</t>

<t>Note that the messaging flow appears to be less than optimal, in that the PD-FE is really communicating twice with the ingress node - once to the embedded TRC-FE instance in step 4, then, based on a positive response, to the PE-FE instance in step 5. Messaging could be reduced to one exchange if the PD-FE were aware in advance that it was communicating with a combined TRC-FE + PE-FE entity. It is an open issue whether such a special-case modification of the general control architecture should be developed.</t>
 
</section><!-- scen1 -->
 
<section anchor="scen2" title="Scenario 2: TRC-FE Present In Ingress Nodes Only">

<t>The functional architecture corresponding to this scenario is shown in <xref target="figScen2"/>. The figure assumes that the PD-FE does not know which ingress node to contact until the TRC-FE instance it reached in the first place locates it. It is plausible that the TRC-FE instance has the necessary knowledge simply because ingress nodes tend also to be egress nodes, and in this scenario the egress nodes have to know where to send their PCN reports. As an alternative, the PD-FE could be required to have the necessary knowledge to locate the right ingress node directly. However, this seems contrary to the spirit of the existing ITU-T architecture.</t>

<figure anchor="figScen2" title="Functional Architecture For Scenario 2">
<artwork>

                        Session Control
                        _______________
                               |
                               + Rs
                          -----+-----
                          |  PD-FE  |
                          -+---+-----
                          /    |
                         /     |
                        /      |
                       x Rw    + Rt
                      /        |
                     /         |         Rc
         --------------------------------+-------
         |         /           |                |
 --------|-----   /       -----|--------     ---+------
 | ------+--- |  /   Rp   | ---+------ | Rc  | Egress |
 | | TRC-FE +--------+------+ TRC-FE +---+---+ Nodes  |
 | ---------- |/          | ---------- |     ----------
 | ---------- /           | ---------- |
 | |  PE-FE +/|           | |  PE-FE | |
 | ---------- |           | ---------- |
 --------------           --------------
     Ingress                   Ingress
       Node                      Node
 
</artwork>

</figure>

<t>Aside from the routing of messages between the PD-FE and the TRC-FE, this scenario is the same as Scenario 1.</t>
 

</section><!-- scen2 -->
<section anchor="scen3" title="Scenario 3: Centralized TRC-FE Only">

<t>In this scenario centralized TRC-FE instances collect PCN reports from egress nodes within their scope of responsibility. As in the other scenarios, the TRC-FE instances track resource status, respond to inquiries from the PD-FE, and notify the PD-FE if flows have to be terminated. However, since they are physically separate from the ingress nodes, there is no possibility of message optimization.
It is assumed in the figure that a given egress node sends all of its PCN reports to the same TRC-FE instance, which must then distribute them to the TRC-FE instances in charge of the various ingress nodes. Thus the PCN reports appear as incremental information flows Rc' and Rp' across the Rc and Rp reference points respectively.</t>

<figure anchor="figScen3" title="Functional Architecture For Scenario 3">

<artwork>

                        Session Control
                        _______________
                               |
                               + Rs
                          -----+-----
                          |  PD-FE  |
                          -+---+-----
                          /    |
                         /     + Rt
                        /      |
 -----------   Rp      /  -----+----- PCN reports
 |  TRC-FE +---+----------|  TRC-FE +-----+-----  
 -----------         /    -----------     Rc    \
      |             /                            \
      + Rc'        x Rw                           \
 -----|--------   /                                \
 | ---+------ |  /                            -----+----
 | |  PE-FE +---/                             | Egress |
 | |        +---------------------------------+  Nodes |
 | ---------- |          Probes (if used)     ----------
 --------------
     Ingress
      Nodes

</artwork>

</figure>

<t>The first thing to note in <xref target="figScen3"/> is that the centralized TRC-FE reduces the scale of a problem already encountered in PCN operation: where to send the PCN reports? In the straightforward case initially dealt with by the PCN Working Group, each egress node must know to which ingress node to send each of its flow reports. Now the centralized TRC-FE has that problem, but the egress nodes only have to discover or be configured with the address of a single collection point.</t>

<t>The information exchanges needed to admit a flow are pretty well those described in <xref target="racfIntro"/>. This scenario has one interesting point not seen in the other scenarios. If probes are used, they must be sent from the ingress nodes rather than the TRC-FE instances. This raises the question of how they are triggered. It seems inappropriate to require the PD-FE to be aware of the use of PCN in the domain, since it is supposed to operate in technology-independent fashion. It makes more sense for the TRC-FE to trigger a probe at the PE-FE in response to a query from the PD-FE. In terms of the ITU-T architecture, the trigger and response from the PE-FE would pass via the Rc reference point, but this is shown as Rc' in the figure because it represents an incremental requirement.</t>

</section><!-- scen3 -->

<section anchor="secur" title="Security Considerations">

<t>The security considerations for the different scenarios described in this document are not fundamentally different from those already applying for PCN and for the ITU-T architecture respectively. A more detailed analysis of specific issues may be appropriate as this document is further developed.</t>

</section><!-- secur -->

<section anchor="IANA" title="IANA Considerations">

<t>This memo presents no IANA considerations.</t>

</section><!-- IANA -->

<section anchor="ack" title="Acknowledgements">

<t>Thanks to Gabriele Corliano for ideas contributed in preliminary discussion.</t>

</section><!-- ack -->

</middle>

<back>
   <references title="Normative References">
      &rfc2119;

      <reference anchor='I-D.PCNarch'>
        <front>
            <title>Pre-Congestion Notification Architecture</title>
            <author initials='P.' surname='Eardley'
                    fullname='Philip Eardley'>
                <organization abbrev='BT'>
                British Telecom
                </organization>
            </author>

            <date month='October' year='2008' />
        </front>
        <format type='TXT' 
                target='http://www.ietf.org/internet-drafts/draft-ietf-pcn-architecture-08.txt' />
    </reference>

      <reference anchor='I-D.PCNencod'>
        <front>
            <title>Baseline Encoding and Transport of Pre-Congestion Information
</title>
            <author initials='T.' surname='Moncaster'
                    fullname='Toby Moncaster'>
                <organization abbrev='BT'>
                British Telecom
                </organization>
            </author>
            <author initials='B.' surname='Briscoe'
                    fullname='Bob Briscoe'>
                <organization abbrev='BT & UCL'>
                British Telecom and University College London
                </organization>
            </author>
            <author initials='M.' surname='Menth'
                    fullname='Michael Menth'>
                <organization abbrev='U. Wuerzburg'>
                University of Wuerzburg
                </organization>
            </author>

            <date month='October' year='2008' />
        </front>
        <format type='TXT' 
                target='http://www.ietf.org/internet-drafts/draft-ietf-pcn-baseline-encoding-01
.txt' />
    </reference>

      <reference anchor='I-D.PCNmark'>
        <front>
            <title>Marking behaviour of PCN-nodes</title>
            <author initials='P.' surname='Eardley'
                    fullname='Philip Eardley'>
                <organization abbrev='BT'>
                British Telecom
                </organization>
            </author>

            <date month='October' year='2008' />
        </front>
        <format type='TXT' 
                target='http://www.ietf.org/internet-drafts/draft-ietf-pcn-marking-behaviour-01
.txt' />
    </reference>

    <reference anchor="Y.2111">
    <front>
       <title>Resource and admission control functions in Next Generation Networks</title>
       <author initials="" surname="" fullname="">
       <organization abbrev="ITU-T">
       International Telecommunications Union
       </organization>
       </author>
       <date  month="September" year="2006"/>
    </front>

    </reference>

   </references><!-- Normative -->

   <references title="Informative References">

    <reference anchor="ES283003">
    <front>
       <title>ETSI ES 282 003 V2.0.0, Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN);
Resource and Admission Control Sub-System (RACS):
Functional Architecture</title>
       <author initials="" surname="" fullname="">
       <organization abbrev="ETSI TISPAN">
       ETSI Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN)
       </organization>
       </author>
       <date  month="May" year="2008"/>
    </front>

    </reference>

      <reference anchor='I-D.PCN3in1'>
        <front>
            <title>PCN 3-State Encoding Extension in a single DSCP</title>
            <author initials='B.' surname='Briscoe'
                    fullname='Bob Briscoe'>
                <organization abbrev='BT'>
                British Telecom
                </organization>
            </author>

            <date month='October' year='2008' />
        </front>
        <format type='TXT' 
                target='http://www.ietf.org/internet-drafts/draft-ietf-pcn-marking-behaviour-01
.txt' />
    </reference>

   </references><!-- Informative -->

</back>
</rfc>
