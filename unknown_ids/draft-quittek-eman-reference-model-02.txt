


Network Working Group                                         J. Quittek
Internet-Draft                                           NEC Europe Ltd.
Intended status: Informational                                B. Nordman
Expires: January 12, 2012                     Lawrence Berkeley National
                                                              Laboratory
                                                           July 11, 2011


                 Reference Model for Energy Management
                 draft-quittek-eman-reference-model-02

Abstract

   This memo proposes a reference model for energy consumption
   monitoring and control.  It claims that the only basic extension of
   conventional network management models is the concept of power
   interfaces of managed entities.  Power interfaces can be treated
   similarly to network interfaces.  They have different modes (outlet,
   inlet, probe) and their connections to transmission media (lines)
   define a power supply topology among the involved managed entities.
   This memo elaborates an information model for power interfaces that
   meets the requirements for energy management.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 12, 2012.

Copyright Notice

   Copyright (c) 2011 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of



Quittek & Nordman       Expires January 12, 2012                [Page 1]

Internet-Draft    Reference Model for Energy Management        July 2011


   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  4

   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  5
     2.1.  Energy Management  . . . . . . . . . . . . . . . . . . . .  5
     2.2.  Power  . . . . . . . . . . . . . . . . . . . . . . . . . .  5
     2.3.  Energy . . . . . . . . . . . . . . . . . . . . . . . . . .  5

   3.  Energy Management Reference Model  . . . . . . . . . . . . . .  5
     3.1.  Power Interface (PI) . . . . . . . . . . . . . . . . . . .  5
       3.1.1.  Powered Entity (PE)  . . . . . . . . . . . . . . . . .  6
       3.1.2.  Power Source (PS)  . . . . . . . . . . . . . . . . . .  6
       3.1.3.  Power Meter (PM) . . . . . . . . . . . . . . . . . . .  6
     3.2.  Power supply topology  . . . . . . . . . . . . . . . . . .  6
       3.2.1.  Lack of instrumentation  . . . . . . . . . . . . . . .  8
       3.2.2.  Remote power measurement . . . . . . . . . . . . . . .  8
       3.2.3.  Aggregated power measurement . . . . . . . . . . . . .  8
       3.2.4.  Remote power supply control  . . . . . . . . . . . . .  9
       3.2.5.  Aggregated power supply control  . . . . . . . . . . .  9
     3.3.  Basic functions of energy management . . . . . . . . . . .  9
     3.4.  Energy management information model  . . . . . . . . . . . 10

   4.  Security Considerations  . . . . . . . . . . . . . . . . . . . 12

   5.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 12

   6.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 12

   7.  Open Issues  . . . . . . . . . . . . . . . . . . . . . . . . . 12
     7.1.  Change mode from inlet to outlet?  . . . . . . . . . . . . 12
     7.2.  Collector and Aggregator . . . . . . . . . . . . . . . . . 12

   8.  Informative References . . . . . . . . . . . . . . . . . . . . 12

   Appendix A.  Energy Monitoring Reference Model Version -01 . . . . 14
     A.1.  Introduction to Energy Monitoring  . . . . . . . . . . . . 14
       A.1.1.  Basic Energy Monitoring (local metering) . . . . . . . 14
       A.1.2.  External Metering  . . . . . . . . . . . . . . . . . . 14
       A.1.3.  Functions and Entities . . . . . . . . . . . . . . . . 15



Quittek & Nordman       Expires January 12, 2012                [Page 2]

Internet-Draft    Reference Model for Energy Management        July 2011


       A.1.4.  Power Monitors . . . . . . . . . . . . . . . . . . . . 15
     A.2.  Energy Monitoring Entities . . . . . . . . . . . . . . . . 17
       A.2.1.  Powered Device . . . . . . . . . . . . . . . . . . . . 17
       A.2.2.  Power Source . . . . . . . . . . . . . . . . . . . . . 17
       A.2.3.  Power Meter  . . . . . . . . . . . . . . . . . . . . . 17
       A.2.4.  Power Monitors . . . . . . . . . . . . . . . . . . . . 17
         A.2.4.1.  Power State Monitor  . . . . . . . . . . . . . . . 18
         A.2.4.2.  Power Source Monitor . . . . . . . . . . . . . . . 18
         A.2.4.3.  Power Usage Monitor  . . . . . . . . . . . . . . . 18
       A.2.5.  Energy Monitoring System . . . . . . . . . . . . . . . 18
     A.3.  Standardization Scope  . . . . . . . . . . . . . . . . . . 18
     A.4.  Entity Relationships . . . . . . . . . . . . . . . . . . . 19
     A.5.  Energy Monitoring Scenarios  . . . . . . . . . . . . . . . 19
       A.5.1.  Simple Device with Power Meter . . . . . . . . . . . . 19
       A.5.2.  External Power Meter . . . . . . . . . . . . . . . . . 20
       A.5.3.  External Power Meter for Multiple Powered Devices  . . 21
       A.5.4.  Powered Device with Dual Power Supply  . . . . . . . . 22
       A.5.5.  Two energy monitoring systems  . . . . . . . . . . . . 23
       A.5.6.  Power over Ethernet Switch . . . . . . . . . . . . . . 24
       A.5.7.  Power Distribution Unit  . . . . . . . . . . . . . . . 25
       A.5.8.  Aggregator . . . . . . . . . . . . . . . . . . . . . . 25
       A.5.9.  Energy Monitoring Gateway  . . . . . . . . . . . . . . 26
       A.5.10. Further Scenarios  . . . . . . . . . . . . . . . . . . 27

   Appendix B.  Energy Management Reference Model version -01 . . . . 27
     B.1.  Energy Management Entities . . . . . . . . . . . . . . . . 28
       B.1.1.  Powered Device . . . . . . . . . . . . . . . . . . . . 28
       B.1.2.  Power Source . . . . . . . . . . . . . . . . . . . . . 29
       B.1.3.  Power Meter  . . . . . . . . . . . . . . . . . . . . . 29
       B.1.4.  Power Controllers  . . . . . . . . . . . . . . . . . . 29
         B.1.4.1.  Power State Controller . . . . . . . . . . . . . . 29
         B.1.4.2.  Power Source Controller  . . . . . . . . . . . . . 29
         B.1.4.3.  Power Meter Controller . . . . . . . . . . . . . . 29
       B.1.5.  Energy Management System . . . . . . . . . . . . . . . 29
     B.2.  Reference Points . . . . . . . . . . . . . . . . . . . . . 30
     B.3.  Entity Relationships . . . . . . . . . . . . . . . . . . . 30
     B.4.  Energy Management Scenarios  . . . . . . . . . . . . . . . 30
       B.4.1.  Simple Self-Managed Device . . . . . . . . . . . . . . 30
       B.4.2.  Simple Managed Device  . . . . . . . . . . . . . . . . 32
       B.4.3.  Power over Ethernet Switch . . . . . . . . . . . . . . 34
       B.4.4.  Power Distribution Unit  . . . . . . . . . . . . . . . 35
       B.4.5.  Energy Management Gateway  . . . . . . . . . . . . . . 35
       B.4.6.  Further Scenarios  . . . . . . . . . . . . . . . . . . 36

   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 36






Quittek & Nordman       Expires January 12, 2012                [Page 3]

Internet-Draft    Reference Model for Energy Management        July 2011


1.  Introduction

   Managing energy consumption of devices with network connections is
   different from several well understood network management functions
   because of the special nature of energy supply and consumption.

   A simple example of energy management is a single device reporting
   information about its own energy status.  It may have local energy
   control mechanisms, for example putting itself into a sleep mode when
   appropriate and it may receive energy control commands from a
   management system.  This and similar cases are well understood and
   can be handled with well established and standardized management
   procedures.  The only missing components today are standardized ways
   for reporting energy consumption information, such as, for example,
   specific MIB modules, and for controlling energy consumption, such
   as, for example, a specific YANG model.  The simple example is also
   likely to be most common and cover most energy use for the
   foreseeable future.

   Energy management has some differences from other common network
   management tasks.  This is caused by the nature of energy supply and
   consumption and by the commonly deployed technologies:
   o  Energy supply for powered devices is often controlled by other
      devices that we call power sources.  Examples of power sources are
      Power Distribution Units (PDUs) for AC power supply and Power over
      Ethernet (PoE) switches providing DC power over Ethernet cables.
      Thus power supply control for a specific powered device is often
      conducted through interaction the corresponding power source and
      not with the particular device.  Also monitoring of power supply
      for a specific device may include interaction with the
      corresponding power source.
   o  In many cases, energy consumption is not measured by the powered
      device itself, but by a power meter located upstream in the power
      distribution tree.  An example is a power distribution unit (PDU)
      that measures energy consumption of attached devices and may
      report this to an energy management system.  Unlike many other
      management functions, the powered device is not involved in this
      process.
   o  A power meter measuring at the outlet of a PDU or at a power
      supply line may measure the accumulated power of several powered
      devices supplied via the outlet or the power line.  In such a case
      no separate power values can be measured for the individual
      powered devices, but only the sum of the power of all devices
      powered via the outlet or power line is available.

   This memo aims to clarify roles of entities involved in energy
   monitoring and control and the relationships among them.  This is
   achieved by defining a model for energy management that particularly



Quittek & Nordman       Expires January 12, 2012                [Page 4]

Internet-Draft    Reference Model for Energy Management        July 2011


   covers the special issues of energy management including, but not
   limited to the three issues listed above.

   Version -01 of this model presented in the previous version of this
   draft was focusing on devices or entities involved in energy
   management.  This version -02 is completely different.  It is based
   on the concept of a power interface.  The result is much simpler and
   very close to the common concept of a network interface.  For
   comparison, version -01 of the model is appended to the end of this
   memo as Appendices A and B.

   There is already a reference model defined in section 4 of
   [I-D.ietf-eman-framework].  The intention of this memo is to refine
   this model based on recent discussions.


2.  Terminology

   This section defines terms used for the description of the energy
   management reference model.  Terms specific to the reference model
   are defined in Section 3.1.

2.1.  Energy Management

   To be agreed on in the EMAN WG.

2.2.  Power

   To be agreed on in the EMAN WG.

2.3.  Energy

   To be agreed on in the EMAN WG.


3.  Energy Management Reference Model

   This section specifies a reference model for energy monitoring.  The
   basic extension that the model makes on top of existing network
   management models is that it introduced the concept of power
   interfaces in addition to network interfaces of managed entities.

3.1.  Power Interface (PI)

   The term 'power interface' is not new.  It is already used by the
   IEEE standard for Power over Ethernet (PoE) [IEEE-802.3at].  There
   are some similarities between power interfaces and network
   interfaces.  A network interface can be used in different modes, such



Quittek & Nordman       Expires January 12, 2012                [Page 5]

Internet-Draft    Reference Model for Energy Management        July 2011


   as sending or receiving on an attached line.  A PI can have the
   following modes:

   o  inlet: receiving power
   o  outlet: providing power

   In addition, like a network interface, it can be monitoring the
   shared (power) transmission media and meter power and other electric
   quantities on it.  PIs with metering capability is called a meter PI.

   Physically, a power interface can be located at an AC power socket,
   an AC power cord attached to a device, an 8P8C (RJ45) PoE socket, a
   current clamp of an ammeter, etc.

   Derived from the terminology defined by the IEEE standard for Power
   over Ethernet (PoE) in [IEEE-802.3af] and [IEEE-802.3at] we define
   the following terms:

3.1.1.  Powered Entity (PE)

   An entity with one or more PIs in mode "inlet" is called a Powered
   Entity (PE).  This extends the term Powered Device (PD) used in
   [IEEE-802.3af] and [IEEE-802.3at] to cover not only entities that are
   individual devices, but also entities that are just components of
   devices.

3.1.2.  Power Source (PS)

   An entity with one or more PIs in mode "outlet" is called a Power
   Source (PS).  Note that this extends the term Power Source Equipment
   (PSE) used in the IEEE PoE standards [IEEE-802.3af] and
   [IEEE-802.3at] where at a single PI the PSE provides power to a
   single PD only.  Here a PS may supply arbitrary numbers of PEs at a
   single PI.  Note further that most PSs have also PIs in mode "inlet"
   and thus are also a PE.

3.1.3.  Power Meter (PM)

   An entity with a meter PI is called a Power Meter (PM) for this PI.

3.2.  Power supply topology

   Similar to network interfaces, power interface can be connected to
   each other.  The most simple connection is a single outlet connected
   to a single inlet as shown in Figure 1.






Quittek & Nordman       Expires January 12, 2012                [Page 6]

Internet-Draft    Reference Model for Energy Management        July 2011


          +--------------------------+    +----------------+
          | Power Source             |    | Powered Entity |
          |              +---------+ |    | +---------+    |
          |              |    PI   | |    | |    PI   |    |
          |              | (outlet)########## (inlet) |    |
          |              +---------+ |    | +---------+    |
          +--------------------------+    +----------------+

                      ######## power supply line

             Figure 1: Simple one-to-one power supply topology

   Figure 2 shows a more complex example.  Here a PS has two power
   outlets, one of them with metering capability.  Note that because is
   has also a PI in mode "inlet" it is also a PE.  At one outlet, the PE
   supplies two PEs.  The power supply line connected to this PI is also
   monitored by a PM.  Note that the PM can only measure the accumulated
   power of the two supplied PEs.  It cannot differentiate which part of
   the measured values relates to an individual PE.

                                                      +----------------+
                                                      | Powered Entity |
                                                      | +------------+ |
                                   +-------------+    | | PI (inlet, | |
                                   | Power Meter |  #####     meter) | |
                                   | +---------+ |  # | +------------+ |
                                   | |   PI    | |  # +----------------+
     +--------------------------+  | | (meter) | |  #
     |           PS/PE          |  | +----#----+ |  # +----------------+
     |              +---------+ |  +------#------+  # | Powered Entity |
     |              |  PI #2  | |         #         # | +------------+ |
     |              | (outlet)########################### PI (inlet) | |
     | +---------+  +---------+ |                     | +------------+ |
     | |  PI #1  |              |                     +----------------+
   ##### (inlet) |              |
     | +---------+  +---------+ |                     +----------------+
     |              |  PI #3  | |                     | Powered Entity |
     |              | (outlet,| |                     | +------------+ |
     |              |  meter) | ########################### PI (inlet) |
     |              +---------+ |                     | +------------+ |
     +--------------------------+                     +----------------+

                      ######## power supply line

               Figure 2: More complex power supply topology

   Figure 2 shows an example in which the metering function is not
   within the PE being metered.  We see that for energy management in



Quittek & Nordman       Expires January 12, 2012                [Page 7]

Internet-Draft    Reference Model for Energy Management        July 2011


   this type of deployment it is important to monitor power interfaces
   and as well to detect the energy supply topology by finding out which
   PIs are connected with each other by power supply lines.

   Also from the example scenario in Figure 2 we can identify the
   following issues for energy management:

3.2.1.  Lack of instrumentation

   Many PEs and PSs are not sufficiently instrumented to monitor their
   own power interface(s).  If there is no other entity that has
   capabilities to collect data on these interfaces, then this
   information is not available for energy management.

3.2.2.  Remote power measurement

   In many cases PSs or PMs have the capability to provide power
   measurements for other entities.  Examples are a Power Distribution
   Unit (PDU) and a Power over Ethernet (PoE) Power Sourcing Equipment
   (PSE).  These entities often have the capability to measure power per
   power outlet.  In such a case an association between the measurement
   values and the (potentially remote) entities that consume the
   measured power needs to be established. the association is given by
   the power supply topology.

   There are two examples for this in Figure 2.  The first one is PI #3
   of the PS/PE that provides power measurement for the PE connected to
   this PI.  The second one is the PM that provides power metering for
   PI #2 of the PS/PE which is an aggregated power measurement for the
   two PEs connected to this PI.

3.2.3.  Aggregated power measurement

   An entity providing power at outlets may supply more than one other
   entity with a single outlet.  In such a case power measurements
   conducted at the outlet are aggregated measurement for all powered
   entities that have their power inlets connected to this outlet.
   Separate values for the individual supplied entities are not
   available in this case.  Furthermore, for the energy management
   system it would be highly desirable to receive information on which
   entities are actually receiving the power provided at the outlet.

   An examples for this is the PM in Figure 2.  It provides an
   aggregated power measurement for the two PEs connected to this PI.
   Only with additional power metering at the PI of one of the PEs power
   values for the individual PEs can be determined.

   Note that in some cases, some or all of the PEs attached to an



Quittek & Nordman       Expires January 12, 2012                [Page 8]

Internet-Draft    Reference Model for Energy Management        July 2011


   aggregated outlet will have their own metering capabilities.  A
   typical AC mains circuit breaker is an example of an aggregated
   outlet with many devices powered off of a single supply point.

3.2.4.  Remote power supply control

   There are three ways for an energy management system to change the
   power state of a managed entity.  First is for a management system to
   provide policy or other useful information (like the electricity
   price) to the PE for it to use in determining its power state.  The
   second is sending the entity a command to switch to another state.
   The third is to utilize an upstream device (to the PE) that has
   capabilities to switch on and off power at its outlet.  Some entities
   do not have capabilities for receiving commands or changing their
   power states by themselves.  Such devices may be controlled by
   switching on and off the power supply for them and so have particular
   need for the third method.

   In Figure 2 the PS/PE can switch on and off power at its two PIs in
   outlet mode and thereby switch on and off power supply for the
   respective connected PEs.

3.2.5.  Aggregated power supply control

   The issue of supplying multiple PEs via a single power outlet of a
   device is also relevant for power control.  Here it must be
   considered that by switching off power at such an outlet, multiple
   entities might be switched on or off simultaneously.

   The example for this in Figure 2 is PI #2 of the PS/PE.  It cannot
   switch power separately for an individual PE.  Every power switching
   action affects the two connected PEs in the same way.

3.3.  Basic functions of energy management

   Based on the concept of power interfaces and the implications of
   potential power supply topologies discussed above, the basic
   functions of energy management can be defined.  For our energy
   management reference model we consider five basic energy management
   functions:
   1.  monitoring power states (on, off, sleep, etc.) of PEs
   2.  controlling power states of PEs
   3.  monitoring PIs (inlets, outlets, probes)
   4.  controlling PIs
   5.  detecting power supply topologies

   Monitoring and controlling power states of PEs (functions 1. and 2.)
   has many similarities with conventional network management functions.



Quittek & Nordman       Expires January 12, 2012                [Page 9]

Internet-Draft    Reference Model for Energy Management        July 2011


   The reference model includes them for completeness, but not many
   special arrangements are necessary for dealing with them.  One
   special issue might be finding ways to monitor and control entities
   that are in a sleep state or an off state, as these may lack the
   normal network interaction capabilities of entities that are fully
   on.  A second issue that may occur is proxying power state
   information for other entities, for example when the entities do not
   have IP interfaces themselves, but can communicate with the Internet
   only via gateways.  But for proxying of information, sufficient
   conventional means are available.

   More challenging are functions 3. to 5.  For monitoring PIs it may be
   difficult to determine where information on a PI is available.  As
   shown in Figure 2 a PI in inlet mode (without metering capability)
   may receive power values from a PM, or from a supplying PI in outlet
   mode.  Vice versa, a PI in outlet mode without a metering capability
   may receive power values from one or more PMs and PIs in inlet mode.
   For controlling PIs it may be difficult to find out where control
   capabilities are available and which PEs would be affected by
   switching an PI in outlet mode at a PS.

   Most of these problems can be resolved by the availability of power
   supply topology information.  The information model for PIs described
   in the following section reflects the need for topology detection by
   offering information elements for each PI that identify other PEs
   that are connected to the same power transmission medium.  How this
   information is obtained remains an open issue.  In case of Power over
   Ethernet (PoE), devices may detect the device at the other end of the
   line via the coupled Ethernet connection.  Other information may have
   been entered manually when setting up devices, or automatically
   determined through other means.

3.4.  Energy management information model

   This section specifies an information model for monitoring entities
   and Power Interfaces (PIs).  It addresses the issues discussed in the
   previous sections and meets all the requirements for energy
   management specified in [I-D.ietf-eman-requirements]. except for the
   reporting of time series of energy and power values.  But these can
   easily be added.

   The model assumes that there is a given mechanism to identify managed
   entities by a network management system and that this mechanism uses
   a sufficiently unique entity identifier (EID).  Then the information
   model for PIs is specified by the diagram in Figure 3.






Quittek & Nordman       Expires January 12, 2012               [Page 10]

Internet-Draft    Reference Model for Energy Management        July 2011


        +---------------------------------+
        | ManagedEntity                   |      +-----------------+
        +---------------------------------+      | PowerState      |
        | EID                             |    1 +-----------------+
        | Type                            |    . | Number          |
        | Tags                            |    . | Description     |
        |                                 | 1  N | MaxPower        |
        | PowerStates                     |----- | AveragePower    |
        | ActualStateSet                  |      | TimeInState     |
        | ActualState                     |      | LastTimeInState |
        +---------------------------------+      | TimesEntered    |
              1 |                                | TotalEnergy     |
                |                                +-----------------+
           0..N |
        +---------------------------------+
        | PowerInterface                  |
        +---------------------------------+
        | Index                           |    0 +-----------------+
        | Tags (for grouping)             |    . | PiId            |
        | Mode (inlet,outlet)             |    . +-----------------+
        | MeteringCapability              | 1  N | EID             |
        | ConnectedTo (PIs of others)     |------| PI Index        |
        | TypeOfCurrent (AC,DC)           |      +-----------------+
        | NominalVoltage                  |
        | NominalAcFrequency              |
        | NumberOfAcPhases                |
        | ControlCapability (switch)      |
        |                                 |      +-----------------+
        | PowerAvaialbility (on,off)      |      | Phase           |
        | InUse (current>0)               |      +-----------------+
        | RealPower                       |    1 | PowerFactor     |
        | PowerMeasurementInterval        |    . | ActualVoltage   |
        | PowerMeasurementConfidence      |    . | ActualFrequency |
        | PowerMeasurementAccuracy        | 1  3 | TotalHarmonic-  |
        | Phases                          |------|   Distortion    |
        |                                 |      | SupplyImpedance |
        | TotalEnergy                     |      +-----------------+
        +---------------------------------+

             Figure 3: Information model for energy management

   We further assume that existing mechanisms for reporting values on
   behalf of other entities or devices are sufficient for meeting
   requirements in Sections 7 and 8 of [I-D.ietf-eman-requirements].

   The information model in Figure 3 contains five kinds of objects.
   The ManagedEntity object contains attributes describing the monitored
   entity.  Instances of class PowerState describe a single power state



Quittek & Nordman       Expires January 12, 2012               [Page 11]

Internet-Draft    Reference Model for Energy Management        July 2011


   of the managed entity.  PIs are described by PowerInterface objects.
   Instances of class PiId identify PIs of other managed entities
   connected to the same power transmission medium and can be used for
   describing the power supply topology.  Objects Phase are used for
   representing actual power quality values.  For DC current only one
   object is required per PI, for AC current up to three objects may be
   needed.


4.  Security Considerations

   This memo currently does not impose any security considerations.


5.  IANA Considerations

   This memo has no actions for IANA..


6.  Acknowledgements

   This memo was inspired by discussions with Benoit Claise, John
   Parello, Mouli Chandramouli, Rolf Winter, Thomas Dietz, Bill Mielke,
   and Chris Verges.


7.  Open Issues

7.1.  Change mode from inlet to outlet?

   Is it needed to support a PI to be in mode "inlet" to be able to
   change to mode "outlet" and back?

7.2.  Collector and Aggregator

   It looks like we need to extend the model by a collector function and
   an aggregator function.  A collector would collect energy-related
   information on other devices and report for multiple of them.  An
   aggregator would use information from several devices and excecute
   operations on them, for example calculating a sum.


8.  Informative References

   [I-D.ietf-eman-requirements]
              Quittek, J., Winter, R., Dietz, T., Claise, B., and M.
              Chandramouli, "Requirements for Energy Management",
              draft-ietf-eman-requirements-03 (work in progress),



Quittek & Nordman       Expires January 12, 2012               [Page 12]

Internet-Draft    Reference Model for Energy Management        July 2011


              June 2011.

   [I-D.ietf-eman-framework]
              Claise, B., Parello, J., Silver, L., and J. Quittek,
              "Energy Management Framework",
              draft-ietf-eman-framework-02 (work in progress),
              July 2011.

   [RFC3410]  Case, J., Mundy, R., Partain, D., and B. Stewart,
              "Introduction and Applicability Statements for Internet-
              Standard Management Framework", RFC 3410, December 2002.

   [RFC6241]  Enns, R., Bjorklund, M., Schoenwaelder, J., and A.
              Bierman, "Network Configuration Protocol (NETCONF)",
              RFC 6241, June 2011.

   [RFC5101]  Claise, B., "Specification of the IP Flow Information
              Export (IPFIX) Protocol for the Exchange of IP Traffic
              Flow Information", RFC 5101, January 2008.

   [RFC5675]  Marinov, V. and J. Schoenwaelder, "Mapping Simple Network
              Management Protocol (SNMP) Notifications to SYSLOG
              Messages", RFC 5675, October 2009.

   [IEEE-802.3af]
              IEEE 802.3 Working Group, "IEEE Std 802.3af-2003 - IEEE
              Standard for Information technology - Telecommunications
              and information exchange between systems - Local and
              metropolitan area networks - Specific requirements - Part
              3: Carrier Sense Multiple Access with Collision Detection
              (CSMA/CD) Access Method and Physical Layer Specifications
              - Amendment: Data Terminal Equipment (DTE) -  Power via
              Media Dependent Interface (MDI)", July 2003.

   [IEEE-802.3at]
              IEEE 802.3 Working Group, "IEEE Std 802.3at-2009 - IEEE
              Standard for Information technology - Telecommunications
              and information exchange between systems - Local and
              metropolitan area networks - Specific requirements - Part
              3: Carrier Sense Multiple Access with Collision Detection
              (CSMA/CD) Access Method and Physical Layer Specifications
              - Amendment: Data Terminal Equipment (DTE) -  Power via
              Media Dependent Interface (MDI) Enhancements",
              October 2009.







Quittek & Nordman       Expires January 12, 2012               [Page 13]

Internet-Draft    Reference Model for Energy Management        July 2011


Appendix A.  Energy Monitoring Reference Model Version -01

   This appendix specifies the previous version -01 of the reference
   model for energy monitoring.  After introducing basic concepts of
   energy monitoring in Appendix A.1 it defines entities of the model
   and their interactions in Appendix A.2.  Examples of devices and
   scenarios are illustrated in Appendix A.5.

A.1.  Introduction to Energy Monitoring

   In this section we introduce basic concepts of energy monitoring
   starting with the most basic scenario and extending it stepwise to
   our full reference model.

   The main subject of energy monitoring is a powered device.  An energy
   monitoring system collects information about powered devices, their
   current power state (for example: on, sleep, off) and their actual
   power consumption.

A.1.1.  Basic Energy Monitoring (local metering)

   The most basic interaction in an energy monitoring system is a
   powered device directly reporting its own energy-related information,
   with no other devices involved, as shown below.

                            energy monitoring
                                 system
                                    ^
                                    |
                                 device

A.1.2.  External Metering

   Reporting its current power state is a relatively easy task for a
   powered device because usually information on the current power state
   is locally available at the device and a reporting function just
   needs some additional software to implement it.

   Reporting the current power level of a device and its accumulated
   energy consumption is a harder task, particularly if there are strict
   requirements for accuracy.  Today very few devices are instrumented
   with means for measuring their own energy consumption as that usually
   implies adding hardware for this purpose.

   This can be addressed by external meters, that is, dedicated probes
   that can meter energy consumption on a power source (line).  Some
   Power Distributions Units (PDUs) and Power over Ethernet (PoE)
   [IEEE-802.3af] switches integrate power source and power metering for



Quittek & Nordman       Expires January 12, 2012               [Page 14]

Internet-Draft    Reference Model for Energy Management        July 2011


   individual devices.

   For supporting scenarios with external meters we extend the basic
   model from above by an external power meter and a power source as
   shown below.

                         energy monitoring system
                           ^         ^         ^
                           |         |         |
                         power     power    powered
                         source    meter    device
                              ###############

              symbols ######### represent a power supply line

   All three potentially report to the energy monitoring system.  The
   power meter may report the current power and accumulated energy
   consumption and the power source may report if the power supply for
   the device is switched on or if it is off.

   Implementation may be incomplete.  For example, an energy management
   system may have access to only one or two of these three types of
   data.

A.1.3.  Functions and Entities

   This reference model operates at two levels/layers.  One is simple
   basic functions that are implemented.  The second is how they are
   arranged in devices.  A device in this model may implement only a
   single function, or may implement many.

   That is, having multiple entities does not require that all of them
   need to be instantiated by individual devices.  For example, the
   power meter function may be co-located and integrated with the
   powered device, with the power source, or it may be implemented by a
   separate device.

A.1.4.  Power Monitors

   In the models above, the powered device and other components deliver
   reports directly to an energy monitoring system.  However, there are
   energy monitoring scenarios where this is not possible or not
   desirable.

   Extreme examples are energy consumers that do not have IP interfaces
   but can communicate by other means.  For delivering their reports to
   an IP-based energy monitoring system, it may be required to use a
   gateway that can communicate with the energy monitoring system.



Quittek & Nordman       Expires January 12, 2012               [Page 15]

Internet-Draft    Reference Model for Energy Management        July 2011


   However, even if all involved devices (PDUs, power meters, and
   powered devices) can communicate via IP, it may be desirable to have
   mediation functions in place between powered devices and the energy
   monitoring system.  An example, is an aggregating device that
   aggregates and reports information on several powered devices.

   There are several further useful scenarios.  To generalize the model
   (and to not exclude any kind of gateway, proxy, relay, mediator or
   other device) we define reporting entities called 'monitors'.  The
   figure below shows three monitors, each of which reports to the
   energy monitoring system.  This figure is the most generic
   representation of the energy monitoring reference model described by
   this document.

                     Energy Monitoring Reference Model

   +-------------------------------------------------------------------+
   |                     energy monitoring system                      |
   +-------------------------------------------------------------------+
             ^                       ^                       ^
             |                       |                       |
   +-------------------+   +-------------------+   +-------------------+
   |    power source   |   |    power usage    |   |    power state    |
   |      monitor      |   |      monitor      |   |      monitor      |
   +-------------------+   +-------------------+   +-------------------+
             |                       |                       |
   +-------------------+   +-------------------+   +-------------------+
   |       power       |   |    power meter    |   |      powered      |
   |       source      |   +-------------------+   |      device       |
   +-------------------+###########################+-------------------+

              symbols ######### represent a power supply line

   A monitor function reports directly to the energy monitoring system
   using the EMON protocol (an Internet protocol).  A monitor must have
   means to acquire the information it reports, but how this information
   is acquired is not relevant for our model.  That is, only the
   interactions with a caret symbol in this and following diagrams is
   the subject of standardization.  Those with only the vertical bar
   character are outside the scope of these documents; they may be IP or
   non-IP.

   The reference model defines the communication between power monitors
   an the energy monitoring system.  The communication lines between
   these entities are reference points of our model described in more
   detail in the following.





Quittek & Nordman       Expires January 12, 2012               [Page 16]

Internet-Draft    Reference Model for Energy Management        July 2011


A.2.  Energy Monitoring Entities

   This section defines entities of the energy monitoring reference
   model and describes interactions between them.  Examples scenarios
   are illustrated in Appendix A.5.

A.2.1.  Powered Device

   A powered device is provided with energy (typically electrical)
   usuallly provided via power lines.  Power state, power and consumed
   energy of powered devices are subject to monitoring and control
   functions of energy management.

A.2.2.  Power Source

   A power source provides a powered device with energy, typically via a
   power line.  It may have means to switch on and off the power for the
   powered device.  A power source does not necessarily generate power,
   but it may do so.  It may be as simple as a power switch or a power
   plug, but it may also be a battery or a power generator.  Regardless,
   the nature of the source does not affect energy monitoring.

   Note that an internal battery within a device, such as the battery of
   a notebook PC or of a mobile phone are not considered to be a power
   source.  When a device runs on battery only, there is n flow of
   energy into the device and consequently the power to be reported for
   this device is zero.  On the other hand, when a device charges its
   battery, then the power supplied for charging needs to be accounted,
   even if the device is not operational.

A.2.3.  Power Meter

   A power meter measures power and/or consumed energy, and typically is
   electrically connected to power supply lines for powered devices.
   However, many devices can also provide a reliable estimate of their
   power consumption based on internal status information without having
   dedicated metering hardware.  Regardless, all metering information is
   qualified by an indication of its accuracy.

   The meter function also includes integrating power consumption over
   time to provide a "meter reading" with a time stamp to enable an
   energy monitoring system to track energy consumption over time.

A.2.4.  Power Monitors

   A power monitor has access to energy-related information concerning
   powered devices and is able to report this information to energy
   management systems.



Quittek & Nordman       Expires January 12, 2012               [Page 17]

Internet-Draft    Reference Model for Energy Management        July 2011


   A power monitor may also provide information on identity and
   properties of a powered device to the management system.

   A power monitor may store energy-related information and process it,
   for example, for aggregating information or for extracting statistics
   that are provided to an energy management system.

   There are three power monitor functions in the energy monitoring
   reference model: power state monitors, power source monitors, and
   power usage monitors.

A.2.4.1.  Power State Monitor

   A power state monitor has access to the power state of a powered
   device and is able to report this information to an energy monitoring
   system.  For acquiring power state information it may interact with
   powered devices.

A.2.4.2.  Power Source Monitor

   A power state monitor has access to information on the power supply
   of powered devices and is able to report this information to an
   energy monitoring system.  Typically, it will just report either 'on'
   or 'off'.  In addition, it may report on power availability.  For
   acquiring power source information it may interact with the power
   sources of powered devices.

A.2.4.3.  Power Usage Monitor

   A power usage monitor has access to information on energy consumption
   of powered devices and is able to report this information to energy
   management systems.  For acquiring information on energy consumption
   it may interact with power meters.

A.2.5.  Energy Monitoring System

   An energy monitoring system receives information from power monitors,
   such as: power states, power source states, and energy consumption.
   An energy monitoring system may be centralized or distributed.  In
   most of the example scenarios illustrated in Appendix A.5 a
   centralized energy monitoring system is shown but in all cases can be
   replaced by a distributed monitoring system.

A.3.  Standardization Scope

   The reference model specifies interactions of an energy monitoring
   system with power monitors.  They reference points of the model are
   potential subjects of standardization (in the EMAN working group).



Quittek & Nordman       Expires January 12, 2012               [Page 18]

Internet-Draft    Reference Model for Energy Management        July 2011


   Interactions of power monitors with other entities are currently not
   considered to be subject of standardization.

   It is argued in [I-D.ietf-eman-requirements] that for most of the
   relevant scenarios the best choice a management protocol for the
   reference points is SNMP [RFC3410].  The reference model defined in
   this document does not assume a specific protocol between energy
   monitoring system and power monitors.  It is also applicable if other
   protocols, such as, for example, Syslog [RFC5675] or IPFIX [RFC5101]
   are used.

A.4.  Entity Relationships

   No restrictions on entity relationships have been identified for
   interacting entities of the energy monitoring reference model
   specified in this document.  This means that all relationships
   between entities may be one-to-one, one-to-many, many-to-one, or
   many-to-many.  For example,
   o  a single power state monitor may report the power state of
      multiples powered entities,
   o  a single powered entity may have its power states reported by<
      multiple power state monitors,
   o  a single powered device may receive power from several power
      sources,
   o  a single power monitor may report to multiple energy monitoring
      systems.
   A few of scenarios with multiple instances of units are illustrated
   by the examples in the following Appendix A.5.

A.5.  Energy Monitoring Scenarios

   This section describes common example scenarios for energy monitoring
   and how they are modeled with the entities and interactions described
   in the previous sections.

A.5.1.  Simple Device with Power Meter

   A very basic example is a powered device that has a built-in meter
   for measuring its own energy consumption and that reports its power
   state and power usage directly to the energy monitoring system.











Quittek & Nordman       Expires January 12, 2012               [Page 19]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------------------------------------------+
   |                     energy monitoring system                      |
   +-------------------------------------------------------------------+
                                               ^
                                               |
                       +-----------------------------------------------+
                       |                       |                       |
                       |           +-----------+-----------+           |
                       |           |                       |           |
                       | +-------------------+   +-------------------+ |
                       | |    power usage    |   |    power state    | |
                       | |      monitor      |   |      monitor      | |
                       | +-------------------+   +-------------------+ |
                       |           |                       |           |
   +-----------------+ | +-------------------+   +-------------------+ |
   |      power      | | |    power meter    |   |      powered      | |
   |      source     | | +---------#---------+   |      device       | |
   +-----------------+#|#########################+-------------------+ |
                       |                                               |
                       | powered device with meter and power monitors  |
                       +-----------------------------------------------+

        Scenario 1: Powered device metering and self-reporting

   Here four entities are combined in a single device: the powered
   device, the power meter, and two power monitors.

A.5.2.  External Power Meter

   The second example shows a power meter that is attached to the power
   line of a powered device that does not have means for measuring its
   own energy consumption.  The meter is integrated with a power usage
   monitor that reports metered data.  The powered device may report its
   own power state by an integrated power state monitor.

















Quittek & Nordman       Expires January 12, 2012               [Page 20]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------------------------------------------+
   |                     energy monitoring system                      |
   +-------------------------------------------------------------------+
                                    ^
                                    |
                        +-----------------------+
                        |  external | meter     |
                        | +-------------------+ |
                        | |    power usage    | |
                        | |      monitor      | |
                        | +-------------------+ |
                        |           |           |
                        | +-------------------+ |
   +-----------------+  | |    power meter    | |  +-------------------+
   |      power      |  | +---------#---------+ |  |      powered      |
   |      source     |  +-----------#-----------+  |      device       |
   +-----------------+#############################+-------------------+

                     Scenario 2: An external meter

A.5.3.  External Power Meter for Multiple Powered Devices

   Power meters may be located at a power line that provides power for
   multiple powered devices.  In scenario 3, a single power meter
   measures the accumulated power and energy consumption of multiple
   powered devices.  In general, In this scenario it is usually not
   possible to derive power values for the individual powered devices
   from the accumulated measurement.























Quittek & Nordman       Expires January 12, 2012               [Page 21]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------------------------------------------+
   |                     energy monitoring system                      |
   +-------------------------------------------------------------------+
                                    ^
                                    |
                        +-----------------------+
                        |  external | meter     |
                        | +-------------------+ |
                        | |    power usage    | |     +----------------+
                        | |      monitor      | |     |    powered     |
                        | +-------------------+ |     |    device      |
                        |           |           |  ###+----------------+
                        | +-------------------+ |  #
   +-----------------+  | |    power meter    | |  #  +----------------+
   |      power      |  | +---------#---------+ |  #  |    powered     |
   |      source     |  +-----------#-----------+  #  |    device      |
   +-----------------+################################+----------------+
                                                   #
                                                   #  +----------------+
                                                   #  |    powered     |
                                                   #  |    device      |
                                                   ###+----------------+

          Scenario 3: An external meter for multiple powered devices

A.5.4.  Powered Device with Dual Power Supply

   Some powered devices have dual power supply.  It may be that one
   supply comes from a power grid and the other one from a battery.
   High-reliability devices may have two power sources from different
   power distribution networks, as shown in scenarios 4 and 5.




















Quittek & Nordman       Expires January 12, 2012               [Page 22]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------------------------------------------+
   |                     energy monitoring system                      |
   +-------------------------------------------------------------------+
                                     ^
                                     |
                +-----------------------------------------+
                |                    |                    |
                | +-------------------------------------+ |
                | |         power usage monitor         | |
                | +-------------------------------------+ |
                |      |                           |      |
                | +---------+  +-----------+  +---------+ |
   +---------+  | |  power  |  |  powered  |  |  power  | |  +---------+
   |  power  |  | |  meter  |  |  device   |  |  meter  | |  |  power  |
   |  source |  | +----#----+  |           |  +----#----+ |  |  source |
   +---------+##|##############+-----------+##############|##+---------+
                |                                         |
                | powered device with dual power supply   |
                | and dual metering                       |
                +-----------------------------------------+

          Scenario 4: powered device with dual power supply

   In scenario 4 the device uses two meters, one for each power line and
   reports from both to the energy monitoring system.  If the two power
   sources belong to different power distribution domains, it may be
   necessary to report power and energy separately for each supply.

A.5.5.  Two energy monitoring systems

   Scenario 5 is more complex.  Both meters are individual external
   devices and there are even two separate energy monitoring systems
   involved, one for each power distribution tree.


















Quittek & Nordman       Expires January 12, 2012               [Page 23]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------+   +-------------------------------+
   |   energy monitoring system    |   |   energy monitoring system    |
   +-------------------------------+   +-------------------------------+
                     ^                               ^
                     |                               |
               +-----------+                   +-----------+
               |     |     |                   |     |     |
               | +-------+ |                   | +-------+ |
               | |power  | |                   | |power  | |
               | |usage  | |                   | |usage  | |
               | |monitor| |                   | |monitor| |
               | +-------+ |                   | +-------+ |
               |     |     |                   |     |     |
               | +-------+ |                   | +-------+ |
               | | power | |                   | | power | |
   +--------+  | | meter | |  +-------------+  | | meter | |  +--------+
   | power  |  | +---#---+ |  |   powered   |  | +---#---+ |  | power  |
   | source |  +-----#-----+  |   device    |  +-----#-----+  | source |
   +--------+#################+-------------+#################+--------+

             Scenario 5: powered device with dual power supply
                  from different power distribution trees

A.5.6.  Power over Ethernet Switch

   This example shows a Power over Ethernet (PoE) [IEEE-802.3af] switch
   supplying a powered device.  The switch contains a power source and a
   meter for each of its ports.

   There typically are multiple instances of power sources and power
   meters in a PoE switch, but the drawing below shows only a single
   instance.  The same applies to the powered devices that are
   represented by a single instance only.

   Note that a typical PoE switch has also means to control power supply
   for powered devices (not shown here).  Control of power supply is a
   subject of Appendix B.














Quittek & Nordman       Expires January 12, 2012               [Page 24]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------------------------------------------+
   |                     energy monitoring system                      |
   +-------------------------------------------------------------------+
                         ^
                         |
   +---------------------------------------------+
   |                     |                       |
   |          +----------+-----------+           |
   |          |                      |           |
   | +-----------------+   +-------------------+ |
   | |   power source  |   |    power usage    | |
   | |     monitor     |   |      monitor      | |
   | +-----------------+   +-------------------+ |
   |          |                      |           |
   | +-----------------+   +-------------------+ | +-------------------+
   | |      power      |   |    power meter    | | |      powered      |
   | |      source     |   +---------#---------+ | |      device       |
   | +-----------------+#########################|#+-------------------+
   |                                             |
   | Power over Ethernet switch                  |
   | or Power Distribution Unit                  |
   +---------------------------------------------+
     Scenarios 6 & 7: Power over Ethernet switch or Power Distribution
     Unit reporting on power source and power usage of powered devices

   In this scenario the identification of the powered device can be done
   by the PoE switch by observing MAC and IP addresses of the powered
   devices.  The switch can report them to the energy management system
   which then in turn can contact the devices directly to obtain further
   information.

A.5.7.  Power Distribution Unit

   The same figure as used for the PoE switch in the previous section is
   be used for scenario 7 modeling a power distribution unit (PDU).  A
   PDU with meters for every socket can report power for each.

   Identifying the powered devices can more difficult in this scenario
   than in the previous one with the PoE switch, because the PDU does
   not necessarily communicate with the powered devices.  In this case
   the PDU or EMS needs to obtain this information by other means, for
   example by manual configuration.

A.5.8.  Aggregator

   Scenario 8 shows a power usage monitor acting as an aggregator.  It
   collects power information from three powered devices and delivers
   all of the information to the energy monitoring system.  The



Quittek & Nordman       Expires January 12, 2012               [Page 25]

Internet-Draft    Reference Model for Energy Management        July 2011


   aggregator may deliver the full information or aggregated
   information, for example, just the sum of the power of all three
   powered devices.

   +-------------------------------------------------------------------+
   |                     energy monitoring system                      |
   +-------------------------------------------------------------------+
                                     ^
                                     |
   +-------------------------------------------------------------------+
   |                        power usage monitor                        |
   +-------------------------------------------------------------------+
        |                       |                       |
   +-------------------+   +-------------------+   +-------------------+
   |    |              |   |    |              |   |    |              |
   |+-------+ +-------+|   |+-------+ +-------+|   |+-------+ +-------+|
   || power | |powered||   || power | |powered||   || power | |powered||
   || meter | |device ||   || meter | |device ||   || meter | |device ||
   |+-------##+-------+|   |+-------##+-------+|   |+-------##+-------+|
   +--------#----------+   +--------#----------+   +--------#----------+
            #                       #                       #
   +-------------------------------------------------------------------+
   |                          power source                             |
   +-------------------------------------------------------------------+

        Scenario 8: An aggregator collecting monitoring information
                         from three powered devices

A.5.9.  Energy Monitoring Gateway

   Some energy monitoring scenarios include a gateway between the
   monitored units and the energy monitoring system.  The powered device
   and the power meter may use means of communication other than IP.

   The gateway is a relay and protocol converter that delivers energy
   information to a power monitor.  A single device may implement
   logically independent gateways for multiple devices.

   Scenario 9 can easily extended to a gateway that also contains a
   power source monitor.











Quittek & Nordman       Expires January 12, 2012               [Page 26]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------------------------------------------+
   |                     energy monitoring system                      |
   +-------------------------------------------------------------------+
                                                 ^
                                                 |
                         +---------------------------------------------+
                         |                       |                     |
                         |           +-----------+----------+          |
                         |           |                      |          |
                         | +-------------------+   +-----------------+ |
                         | |    power usage    |   |   power state   | |
                         | |      monitor      |   |     monitor     | |
                         | +-------------------+   +-----------------+ |
                         | gateway   |                      |          |
                         +---------------------------------------------+
                                     |                      |
   +-------------------+   +-------------------+   +-----------------+
   |       power       |   |    power meter    |   |     powered     |
   |       source      |   +---------#---------+   |     device      |
   +-------------------+###########################+-----------------+

                Scenario 9: A gateway between monitored devices
                         and energy monitoring system

   Here again, the problem of identifying the powered device has become
   very difficult, because neither can the power monitor provide an IP
   address of the powered device to the energy management system nor can
   the energy management system directly communicate with the powered
   device.  Identification must be provided by other means.  The Proxy
   can have a gateway function and relay identification between powered
   device and energy management system or the energy management system
   needs to acquire information on powered devices by other means, such
   as manual configuration.

A.5.10.  Further Scenarios

   More scenarios may be added to future versions of this document.
   Particularly, scenarios with multiple instances of an entity have not
   been elaborated a lot.  Appendix B.4 shows scenarios for energy
   control.  They can also be considered as further monitoring scenarios
   if only their power monitors are considered and power controllers are
   ignored.


Appendix B.  Energy Management Reference Model version -01

   This appendix specifies the previous version -01 of the reference
   model for energy management.  It extends the energy monitoring



Quittek & Nordman       Expires January 12, 2012               [Page 27]

Internet-Draft    Reference Model for Energy Management        July 2011


   reference model specified in the previous Appendix A by adding power
   control functions.  The resulting model is a complete energy
   management reference model.

   As in Appendix A we first discuss entities and their relationships
   and then illustrate the model with example scenarios.

   The extension from energy monitoring to energy management is straight
   forward.  To achieve the required control functions the power source,
   power meter, and powered device have additional functions for
   control.  For each power monitor a corresponding power controller is
   added as shown below.

                     Energy Management Reference Model

   +-------------------------------------------------------------------+
   |                     energy management system                      |
   +-------------------------------------------------------------------+
       ^          |            ^          |            ^          |
       |          v            |          v            |          v
   +--------+ +--------+   +--------+ +--------+   +--------+ +--------+
   | power  | | power  |   | power  | | power  |   | power  | | power  |
   | source | | source |   | usage  | | meter  |   | state  | | state  |
   | monitor| | ctrler |   | monitor| | ctrler |   | monitor| | ctrler |
   +--------+ +--------+   +--------+ +--------+   +--------+ +--------+
       |          |            |          |            |          |
   +-------------------+   +-------------------+   +-------------------+
   |       power       |   |    power meter    |   |      powered      |
   |       source      |   +-------------------+   |      device       |
   +-------------------+###########################+-------------------+

              symbols ######### represent a power line

B.1.  Energy Management Entities

   This section defines entities of the energy management reference
   model and describes interactions between them.  Examples scenarios
   are illustrated in Appendix B.4.  For entities already specified in
   Appendix A.2 of the energy monitoring reference model, only their
   additional properties are mentioned here.  Power monitors are not
   discussed here again, because their specification in the energy
   management reference model do not change.

B.1.1.  Powered Device

   A powered device may be capable of changing its own power state from
   a request from the energy management system.  Some devices may not be
   able to power up from an off state based on EMS request.  Most



Quittek & Nordman       Expires January 12, 2012               [Page 28]

Internet-Draft    Reference Model for Energy Management        July 2011


   devices that are asleep will be able to wake on EMES request.

B.1.2.  Power Source

   A power source may be capable of switching on and off power for
   powered devices.

B.1.3.  Power Meter

   A power meter may be switched on or off or have its metering
   parameters modified.

B.1.4.  Power Controllers

   A power controller receives commands from an energy management system
   to change the status or parameters of power sources, power meters, or
   powered devices.

   There are three kinds of power controller entities: power state
   controllers, power source controllers, and power meter controllers.

B.1.4.1.  Power State Controller

   A power state controller can initiate a change in the power state of
   a powered device.

B.1.4.2.  Power Source Controller

   A power source controller can change the power supply of a powered
   device.  Typically, it has means for switching power supply on and
   off.  It may use these means without communicating with the affected
   powered device.

B.1.4.3.  Power Meter Controller

   A power meter controller has means for influencing the operation of a
   power meter.  It may switch on and off the power meters and change
   parameters of their operation.  For this purpose it may interact with
   power meters.

B.1.5.  Energy Management System

   An energy management system is an energy monitoring system extended
   by control functions.  It interacts with power monitors and power
   controllers in order to achieve objectives of energy management.

   It sends commands to power controllers.  To power state controllers
   it sends requested power states for powered devices.  To power source



Quittek & Nordman       Expires January 12, 2012               [Page 29]

Internet-Draft    Reference Model for Energy Management        July 2011


   controllers it requests to switch on or off power for powered
   devices.  To power meter controllers it sends commands concerning the
   operation of power meters.

B.2.  Reference Points

   Relevant for our reference model are interactions of the energy
   management system with power monitors and power controllers.  They
   are reference points of our model and potential subjects of
   standardization in the EMAN working group.  Interactions of power
   monitors and power controllers with other entities are currently not
   considered to be subject of standardization.

   Monitoring protocols have already been discussed in Appendix A.3.
   There are several choices of control protocols to be used for energy
   management.  Among them are SNMP [RFC3410] and NETCONF [RFC6241].

B.3.  Entity Relationships

   The considerations on entity relationships for the energy monitoring
   reference model described in Appendix A.4. apply as well to the
   energy management reference model: No restrictions on entity
   relationships have been identified.

B.4.  Energy Management Scenarios

   This section describes example scenarios for energy management and
   how they are modeled with the entities and interactions described
   above.

B.4.1.  Simple Self-Managed Device

   The first two examples are expected to become very common scenarios.
   Here, a powered device is managing its power state on its own based
   on input other than from the energy management system.  The device
   may decide to change power state based on observation of its
   environment (no current load, high temperature, not sufficient light,
   scheduled time for service interruption, etc.) or it may receive
   external triggers, such as by a human-operated remote control.












Quittek & Nordman       Expires January 12, 2012               [Page 30]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------------------------------------------+
   |                     energy management system                      |
   +-------------------------------------------------------------------+
                                                     ^
                                                     |
                                               +-----------------------+
                                               |     |                 |
                                               | +--------+ +--------+ |
                                               | | power  | | power  | |
                                               | | state  | | state  | |
                                               | | monitor| | ctrler | |
                                               | +--------+ +--------+ |
                                               |     |          |      |
   +-----------------+                         | +-------------------+ |
   |      power      |                         | |      powered      | |
   |      source     |                         | |      device       | |
   +-----------------+#|#########################+-------------------+ |
                                               |                       |
                                               | powered device with   |
                                               | power state control   |
                                               +-----------------------+

                  Scenario 10: A self-managed powered device

   In any way, it's power state control is independent of the energy
   management system.  The only interaction with the system is reporting
   of power state to the energy management system in scenario 10, and in
   addition reporting of its current power and/or accumulated consumed
   energy in scenario 11.






















Quittek & Nordman       Expires January 12, 2012               [Page 31]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------------------------------------------+
   |                     energy management system                      |
   +-------------------------------------------------------------------+
                                               ^
                                               |
                       +-----------------------------------------------+
                       |                       |                       |
                       |     +-----------------+-----+                 |
                       |     |                       |                 |
                       | +--------+ +--------+   +--------+ +--------+ |
                       | | power  | | power  |   | power  | | power  | |
                       | | usage  | | meter  |   | state  | | state  | |
                       | | monitor| | ctrler |   | monitor| | ctrler | |
                       | +--------+ +--------+   +--------+ +--------+ |
                       |     |          |            |          |      |
   +-----------------+ | +-------------------+   +-------------------+ |
   |      power      | | |    power meter    |   |      powered      | |
   |      source     | | +---------#---------+   |      device       | |
   +-----------------+#|#########################+-------------------+ |
                       |                                               |
                       | powered device with built-in meter            |
                       | and autonomous control                        |
                       +-----------------------------------------------+

       Scenario 11: A self-managed powered device with built-in meter

   In scenario 11 also the control of the power meter is handled by the
   device itself.

B.4.2.  Simple Managed Device

   In our model, the scenario does not change much if the powered
   devices are not self-managed but managed by the energy management
   system.  Scenarios 12 and 13 show that just an interaction between
   the energy management system and the powered device is added that
   serves for sending commands concerning power states to the device.















Quittek & Nordman       Expires January 12, 2012               [Page 32]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------------------------------------------+
   |                     energy management system                      |
   +-------------------------------------------------------------------+
                                                     ^          |
                                                     |          |
                                               +-----------------------+
                                               |     |          v      |
                                               | +--------+ +--------+ |
                                               | | power  | | power  | |
                                               | | state  | | state  | |
                                               | | monitor| | ctrler | |
                                               | +--------+ +--------+ |
                                               |     |          |      |
   +-----------------+                         | +-------------------+ |
   |      power      |                         | |      powered      | |
   |      source     |                         | |      device       | |
   +-----------------+#########################|#+-------------------+ |
                                               |                       |
                                               | powered device with   |
                                               | power state control   |
                                               +-----------------------+

                  Scenario 12: A managed powered device

   Control of the power meter by the management system can easily added
   to scenario 13.  It is not included here, because for built-in meters
   this seems not to be necessary in many common cases.
























Quittek & Nordman       Expires January 12, 2012               [Page 33]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------------------------------------------+
   |                     energy management system                      |
   +-------------------------------------------------------------------+
                                               ^                |
                                               |                |
                       +-----------------------------------------------+
                       |                       |                |      |
                       |     +-----------------+-----+          |      |
                       |     |                       |          v      |
                       | +--------+ +--------+   +--------+ +--------+ |
                       | | power  | | power  |   | power  | | power  | |
                       | | usage  | | meter  |   | state  | | state  | |
                       | | monitor| | ctrler |   | monitor| | ctrler | |
                       | +--------+ +--------+   +--------+ +--------+ |
                       |     |          |            |          |      |
   +-----------------+ | +-------------------+   +-------------------+ |
   |      power      | | |    power meter    |   |      powered      | |
   |      source     | | +---------#---------+   |      device       | |
   +-----------------+#|#########################+-------------------+ |
                       |                                               |
                       | powered device with built-in meter            |
                       | and autonomous control                        |
                       +-----------------------------------------------+

         Scenario 13: A managed powered device with built-in meter

B.4.3.  Power over Ethernet Switch

   Scenario 14 adds control functions to the PoE switch of scenario 6 in
   Appendix A.5.  Here the energy management system can explicitly
   request the power for a powered device to be switched on or off.  It
   also can switch on and off metering and reporting of energy
   consumption per port of the switch


















Quittek & Nordman       Expires January 12, 2012               [Page 34]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------------------------------------------+
   |                     energy management system                      |
   +-------------------------------------------------------------------+
                   |     ^               |            ^
                   |     |               |            |
   +-------------------------------------------+ +---------------------+
   |               |     |               |     | |    |                |
   |    +----------------+----+          |     | |    |                |
   |    |          v          |          v     | |    |                |
   |+--------+ +--------+ +--------+ +--------+| |+--------+ +--------+|
   || power  | | power  | | power  | | power  || || power  | | power  ||
   || source | | source | | usage  | | meter  || || state  | | state  ||
   || monitor| | ctrler | | monitor| | ctrler || || monitor| | ctrler ||
   |+--------+ +--------+ +--------+ +--------+| |+--------+ +--------+|
   |    |          |          |          |     | |    |          |     |
   |+-------------------+ +-------------------+| |+-------------------+|
   ||       power       | |    power meter    || ||      powered      ||
   ||       source      | +---------#---------+| ||      device       ||
   |+-------------------+######################|#|+-------------------+|
   |                                           | |                     |
   | Power over Ethernet switch                | | powered device with |
   | or Power Distribution Unit                | | power state control |
   +-------------------------------------------+ +---------------------+

               Scenario 14 & 15: Power over Ethernet switch
                        or Power Distribution Unit

   Still, the powered device in this scenario is self-managed
   controlling its power state on its own and just reporting it to the
   energy management system.

B.4.4.  Power Distribution Unit

   Again, as in Appendix A.5 the scenario for a power distribution unit
   looks exactly the same in our reference model as the scenario for a
   power distribution unit.

B.4.5.  Energy Management Gateway

   Starting from an energy monitoring gateway in Appendix A.5 the
   extension towards an energy management gateway is again straight
   forward.









Quittek & Nordman       Expires January 12, 2012               [Page 35]

Internet-Draft    Reference Model for Energy Management        July 2011


   +-------------------------------------------------------------------+
   |                     energy management system                      |
   +-------------------------------------------------------------------+
                                        |      ^                |
                                        |      |                |
                       +-----------------------------------------------+
                       |                |      |                |      |
                       |     +-----------------+-----+          |      |
                       |     | gateway  v            |          v      |
                       | +--------+ +--------+   +--------+ +--------+ |
                       | | power  | | power  |   | power  | | power  | |
                       | | usage  | | meter  |   | state  | | state  | |
                       | | monitor| | ctrler |   | monitor| | ctrler | |
                       | +--------+ +--------+   +--------+ +--------+ |
                       |     |          |            |          |      |
                       +-----------------------------------------------+
                             |          |            |          |
   +-----------------+   +-------------------+   +-------------------+
   |      power      |   |    power meter    |   |      powered      |
   |      source     |   +---------#---------+   |      device       |
   +-----------------+###########################+-------------------+

              Scenario 16: A gateway between powered devices
                         and energy monitoring system

   Here again, the problem of identifying the powered device has become
   very difficult, because neither can the power monitor provide an IP
   address of the powered device to the energy management system nor can
   the energy management system directly communicate with the powered
   device.  Identification must be provided by other means.  The Proxy
   can have a gateway function and relay identification between powered
   device and energy management system or the energy management system
   needs to acquire information on powered devices by other means, such
   as manual configuration.

B.4.6.  Further Scenarios

   More scenarios may be added to future versions of this document.
   Particularly, scenarios with multiple instances of an entity have not
   been elaborated, yet.  Appendix B.4 shows scenarios for energy
   control.  They can also be considered as further monitoring scenarios
   if only their power monitors are considered and power controllers are
   ignored.








Quittek & Nordman       Expires January 12, 2012               [Page 36]

Internet-Draft    Reference Model for Energy Management        July 2011


Authors' Addresses

   Juergen Quittek
   NEC Europe Ltd.
   Network Research Division
   Kurfuersten-Anlage 36
   Heidelberg  69115
   DE

   Phone: +49 6221 4342-115
   Email: quittek@neclab.eu


   Bruce Nordman
   Lawrence Berkeley National Laboratory
   1 Cyclotron Road
   Berkeley  94720
   US

   Phone: +1 510 486 7089
   Email: bnordman@lbl.gov






























Quittek & Nordman       Expires January 12, 2012               [Page 37]

