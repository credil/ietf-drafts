


Diameter Maintenance and                               J. Korhonen (ed.)
Extensions (DIME)                                            TeliaSonera
Internet-Draft                                              J. Bournelle
Intended status: Standards Track                      France Telecom R&D
Expires: December 25, 2007                                  K. Chowdhury
                                                        Starent Networks
                                                           June 23, 2007


  Diameter Proxy Mobile IPv6: Support For Mobility Access Gateway and
          Local Mobility Anchor to Diameter Server Interaction
                    draft-korhonen-dime-pmip6-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on December 25, 2007.

Copyright Notice

   Copyright (C) The IETF Trust (2007).

Abstract

   This specification defines the Diameter support for the Proxy Mobile
   IPv6.  The policy information needed by the Proxy Mobile IPv6 is
   defined in mobile node's policy profile, which gets downloaded from
   the Diameter server to the Mobile Access Gateway once the mobile node



Korhonen (ed.), et al.  Expires December 25, 2007               [Page 1]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


   roams into a Proxy Mobile IPv6 Domain and performs the access
   authentication.  The access authentication procedure into the Proxy
   Mobile IPv6 Domain resembles the Mobile IPv6 integrated scenario
   bootstrapping.  Rather than defining a completely new set of
   attributes or a new Diameter application this specification only
   leverages the work already done for the Mobile IPv6 bootstrapping.













































Korhonen (ed.), et al.  Expires December 25, 2007               [Page 2]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  4
   2.  Terminology and Abbreviations  . . . . . . . . . . . . . . . .  4
   3.  Solution Overview  . . . . . . . . . . . . . . . . . . . . . .  5
   4.  Attribute Value Pair Definitions . . . . . . . . . . . . . . .  7
     4.1.  PMIP6-MAG-Address  . . . . . . . . . . . . . . . . . . . .  7
     4.2.  Mobility-Agent-Info  . . . . . . . . . . . . . . . . . . .  7
     4.3.  PMIP6-LMA-Address  . . . . . . . . . . . . . . . . . . . .  7
     4.4.  PMIP6-LMA-FQDN . . . . . . . . . . . . . . . . . . . . . .  7
     4.5.  PMIP6-IPv4-Home-Address  . . . . . . . . . . . . . . . . .  7
     4.6.  PMIP6-DHCP-Address . . . . . . . . . . . . . . . . . . . .  7
     4.7.  PMIP6-Home-Prefix  . . . . . . . . . . . . . . . . . . . .  8
     4.8.  Mobility-Capability  . . . . . . . . . . . . . . . . . . .  8
   5.  MAG to HAAA Interface Application Support, Commands Codes
       and Attribute Value Pairs  . . . . . . . . . . . . . . . . . .  9
     5.1.  Application Support and Command Codes  . . . . . . . . . .  9
     5.2.  Diameter-EAP-Request (DER) . . . . . . . . . . . . . . . . 10
     5.3.  Diameter-EAP-Answer (DEA)  . . . . . . . . . . . . . . . . 10
     5.4.  AA-Request (AAR) . . . . . . . . . . . . . . . . . . . . . 11
     5.5.  AA-Answer (AAA)  . . . . . . . . . . . . . . . . . . . . . 12
     5.6.  Accounting at MAG  . . . . . . . . . . . . . . . . . . . . 12
   6.  LMA to HAAA Interface Application Support, Commands Codes
       and Attribute Value Pairs  . . . . . . . . . . . . . . . . . . 12
     6.1.  Application Support and Command Codes  . . . . . . . . . . 12
     6.2.  AA-Request (AAR) . . . . . . . . . . . . . . . . . . . . . 13
     6.3.  AA-Answer (AAA)  . . . . . . . . . . . . . . . . . . . . . 14
     6.4.  Accounting at LMA  . . . . . . . . . . . . . . . . . . . . 14
   7.  Proxy Mobile IPv6 Session Management . . . . . . . . . . . . . 14
     7.1.  Session Termination Request - Command  . . . . . . . . . . 15
     7.2.  Session Termination Answer - Command . . . . . . . . . . . 15
     7.3.  Abort Session Request - Command  . . . . . . . . . . . . . 15
     7.4.  Abort Session Answer - Command . . . . . . . . . . . . . . 15
   8.  Attribute Value Pair Occurrence Tables . . . . . . . . . . . . 15
   9.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 16
     9.1.  Attribute Value Pair Codes . . . . . . . . . . . . . . . . 16
     9.2.  Namespaces . . . . . . . . . . . . . . . . . . . . . . . . 17
   10. Security Considerations  . . . . . . . . . . . . . . . . . . . 17
   11. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 17
   12. References . . . . . . . . . . . . . . . . . . . . . . . . . . 17
     12.1. Normative References . . . . . . . . . . . . . . . . . . . 17
     12.2. Informative References . . . . . . . . . . . . . . . . . . 18
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 18
   Intellectual Property and Copyright Statements . . . . . . . . . . 20







Korhonen (ed.), et al.  Expires December 25, 2007               [Page 3]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


1.  Introduction

   In the Proxy Mobile IPv6 (PMIPv6) protocol [1] and its IPv4 support
   [2] a Mobile Access Gateway (MAG) performs a proxy registration with
   a Local Mobility Anchor (LMA) on behalf of the mobile node (MN).  In
   order to perform the proxy registration the PMIPv6 MAG needs the
   address of the LMA, MN's home network prefix (MN-HNP), possibly MN's
   IPv4 home address (IPv4-HoA), DHCP server address and other PMIPv6
   specific information such as allowed address configuration modes and
   possible roaming related policies.  All this information is defined
   in MN's policy profile that gets downloaded from the Diameter server
   to the MAG once the MN roams into a Proxy Mobile IPv6 Domain (PMIPv6-
   Domain) and performs the access authentication.

   Dynamic assignment and downloading of PMIPv6 policy profile
   information is a desirable feature to ease the deployment and network
   maintenance of larger PMIPv6 deployments.  For this purpose, the AAA
   infrastructure, which is used for access authentication, can be
   leveraged to assign some or all of the necessary parameters.  The
   Diameter server in the Mobility Service authorizer's (MSA) or in the
   Mobility Service Provider's (MSP) network may return these parameters
   to the Network Access Server (NAS).

   Once the MN authenticates to the network the MAG or actually the
   integrated Proxy Mobile Agent (PMA) sends the Proxy Binding Update
   (PBU) towards the LMA on behalf of the MN.  Upon arrival of the PBU
   the LMA needs to interact with the Diameter server and fetch the MN's
   policy related information that was already partially downloaded to
   the MAG.

   This specification defines the Diameter support for the PMIPv6.  In
   the context of this specification the location of the subscriber
   policy profile equals to the home Diameter server, which is also
   referred as the home AAA server (HAAA).  The NAS functionality of the
   MAG may be co-located or integral part of the MAG.  The access
   authentication procedure into a PMIPv6-Domain resembles the Mobile
   IPv6 integrated scenario bootstrapping [3].  The assumption is that
   the Access Service Authenticator (ASA) is the same entity as the MSA/
   MSP.  This specification leverages the work already done for the
   Mobile IPv6 integrated scenario bootstrapping [3].


2.  Terminology and Abbreviations

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119 [4].




Korhonen (ed.), et al.  Expires December 25, 2007               [Page 4]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


   General mobility terminology can be found in [9].  The following
   additional or clarified terms are used in this document:

   Network Access Server (NAS):

      A device that provides an access service for a user to a network.
      In the context of this document the NAS may be integrated into or
      co-located to a MAG.  The NAS contains a Diameter client function.

   Home AAA (HAAA):

      An authentication, authorization and accounting server located in
      user's home network.  A HAAA is essentially a Diameter server.



3.  Solution Overview

   This document addresses the authentication, authorization, accounting
   and session management functionality needed by the PMIPv6 protocol.
   This document defines Diameter based MAG to HAAA and LMA to HAAA
   interfaces.  The intention of this document is only to extend
   existing Mobile IPv6 specifications such as [3] and define needed
   additional AVPs and functionality to fulfil the needs of the PMIPv6
   deployment.

   The policy profile download from the HAAA to the MAG is part of the
   network access authentication procedure when a MN roams into or
   within a PMIPv6 Domain.  Figure 1 shows the participating network
   entities.  This document, however, only concentrates on the MAG, LMA,
   possible local Diameter proxies and the home Diameter server.  When
   aligned with [3] the MAG acts as the NAS located in ASP, the HAAA
   acts as the Diameter server located in ASA/MSA/MSP and the LMA acts
   as the HA in ASP/MSP.

















Korhonen (ed.), et al.  Expires December 25, 2007               [Page 5]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


    +--------+
    | HAAA & | Diameter +-----+
    | Policy |<-------->| LMA |
    | Profile|          +-----+
    +--------+             | <--- LMA-Address
         ^                 |
         |               // \\
     +---|------------- //---\\----------------+
    (    |  IPv4/IPv6  //     \\                )
    (    |   Network  //       \\               )
     +---|-----------//---------\\-------------+
         |          //           \\
     Diameter      // <- Tunnel1  \\ <- Tunnel2
         |        //               \\
         |        |- MAG-Address1   |- MAG-Address2
         |     +----+             +----+
         +---->|MAG1|             |MAG2|
               +----+             +----+
                  |                 |
                  |                 |
                [MN1]             [MN2]

    Figure 1: Proxy Mobile IPv6 Domain with MAG to HAAA and LMA to HAAA
                                Interfaces

   In a PMIPv6 access scenario a MN attaches to a PMIPv6-Domain and
   starts a network access authentication procedure.  The choice of the
   authentication mechanism is specific to the access network
   deployment, but could be based on the Extensible Authentication
   Protocol (EAP) [10].  During the network access authentication
   procedure, the MAG acting as a NAS queries the HAAA through the AAA
   infrastructure using the Diameter protocol.  If the HAAA detects that
   the subscriber is also authorized for the PMIPv6 service, the
   subscriber policy is returned along with the successful network
   access authentication answer to the MAG.

   During the access authentication procedure the MAG sends a PBU to the
   LMA.  Prior to sending the PBU there might be a need to dynamically
   setup the MAG to LMA Security Association (SA), for example using
   IKEv2/IPSec [11].  Upon receiving the PBU the LMA interacts with the
   HAAA and fetches the relevant subscriber policy, authorization and
   security information related to the PMIPv6 session.  This
   specification assumes that the HAAA is the central node for managing
   everything related to PMIPv6 subscription and session, possibly even
   including the allocation of prefixes.






Korhonen (ed.), et al.  Expires December 25, 2007               [Page 6]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


4.  Attribute Value Pair Definitions

4.1.  PMIP6-MAG-Address

   The PMIP6-MAG-Address AVP (AVP Code TBD) is of type Address and
   contains the IP address of the MAG.

4.2.  Mobility-Agent-Info

   The Mobility-Agent-Info grouped AVP is defined in [3].  This document
   only adds new AVPs to the group within the limits of the original
   grouped AVP definition in [3].  The new AVPs contain information
   about the LMA address.  The grouped AVP has the following grammar:

   <Mobility-Agent-Info> ::= < AVP Header: TBD >
                             ...
                             [ PMIP6-LMA-Address ]
                             [ PMIP6-LMA-FQDN ]
                             ...
                           * [ AVP ]

   Both PMIP6-LMA-Address or PMIP6-LMA-FQDN AVPs MUST NOT be included in
   the grouped AVP simultaneously.

4.3.  PMIP6-LMA-Address

   The PMIP6-LMA-Address AVP (AVP Code TBD) is of type Address and
   contains the IP address of the LMA.  This AVP is included inside the
   Mobility-Agent-Info grouped AVP.

4.4.  PMIP6-LMA-FQDN

   The PMIP6-LMA-FQDN AVP (AVP Code TBD) is of type DiameterIdentity and
   contains the FQDN of the LMA.  This AVP is included inside the
   Mobility-Agent-Info grouped AVP.

4.5.  PMIP6-IPv4-Home-Address

   The PMIP6-IPv4-Home-Address AVP (AVP Code TBD) is of type Address and
   contains the IPv4-HoA of the MN.

4.6.  PMIP6-DHCP-Address

   The PMIP6-DHCP-Address AVP (AVP Code TBD) is of type Address and
   contains the IP address of the DHCPv4 and/or DHCPv6 server assigned
   to the MAG serving the newly attached MN.  If the AVP contains a
   DHCPv4 server address, then the Address type MUST be IPv4.  If the
   AVP contains a DHCPv6 server address, then the Address type MUST be



Korhonen (ed.), et al.  Expires December 25, 2007               [Page 7]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


   IPv6.

4.7.  PMIP6-Home-Prefix

   The PMIP6-Home-Prefix AVP (AVP Code TBD) is of type Address and
   contains the MN-NHP.  The low 64 bits of the IPv6 address MUST be all
   zeroes.  The high 64 bits of the IPv6 address are used as the MN-HNP.

   The PMIP6-Home-Prefix AVP may also be used on the LMA to HAAA
   interface.  In this scenario the AVP contains the prefix the LMA has
   assigned to the MN.  If the LMA delegates assignment of the home
   network prefix to the HAAA, the AVP MUST contain all zeroes address
   in the request message.  The reply message SHOULD in all cases
   contain the assigned home prefix value.

4.8.  Mobility-Capability

   The Mobility-Capability AVP is originally defined in [3]".  This
   document only reserves new capability bits according to the rules in
   [3].  The new reserved bits contain PMIPv6 capability announcement of
   the MAG and the HAAA(/LMA)).  Using the capability announcement it is
   possible to perform a simple capability negotiation between the MAG
   and the HAAA.  Those capabilities that are announced by both parties
   are also known to be mutually supported.  The following capability
   bits are defined in this document:

   PMIP6_SUPPORTED (0x0000000100000000)

      When the MAG/NAS sets this bit in the Mobility-Capability AVP, it
      is an indication to the HAAA that the NAS supports PMIPv6.  When
      the HAAA sets this bit in the response Mobility-Capability AVP, it
      indicates that the HAAA also has PMIPv6 support.

   IP4_HOA_SUPPORTED (0x0000000200000000)

      Assignment of the IPv4-HoA is supported.  When the MAG sets this
      bit in the Mobility-Capability AVP, it indicates that the MAG
      implements a minimal functionality of a DHCP server (and a relay)
      and is able to deliver IPv4-HoA to the MN.  When the HAAA sets
      this bit in the response Mobility-Capability AVP, it indicates
      that the HAAA has authorized the use of IPv4-HoA for the MN.  If
      this bit is unset in the returned Mobility-Capability AVP, the
      HAAA does not authorize the configuration of IPv4 address.  Use of
      the IP4_HOA_SUPPORTED bit is also an indication of DSMIPv6 support
      [12].






Korhonen (ed.), et al.  Expires December 25, 2007               [Page 8]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


   LOCAL_MAG_ROUTING_SUPPORTED (0x0000000400000000)

      Direct routing of IP packets between MNs anchored to the same MAG
      is supported.  When a MAG sets this bit in the Mobility-
      Capability, it indicates that routing IP packets between MNs
      anchored to the same MAG is supported, without reverse tunneling
      packets via the LMA or requiring any Route Optimization related
      signaling (e.g. the Return Routability Procedure in [13] prior
      direct routing.  If this bit is unset in the returned Mobility-
      Capability AVP, the HAAA does not authorize direct routing of
      packets between MNs anchored to the same MAG.

   RO_SUPPORTED (0x0000000800000000)

      Route optimization between MAGs is supported.  When the MAG sets
      this bit, it indicates support for the route optimization between
      MAGs.  If this bit is unset in the returned Mobility-Capability
      AVP, the HAAA does not authorize Route Optimization between MAGs.

   The Mobility-Capability AVP is also used on the LMA to HAAA
   interface.  Using the capability announcement AVP it is possible to
   perform a simple capability negotiation between the LMA and the HAAA.
   Those capabilities that are announced by both parties are also known
   to be mutually supported.  The capabilities listed in earlier are
   also supported in the LMA to HAAA interface.  The LMA to HAAA
   interface does not define any new capability values.


5.  MAG to HAAA Interface Application Support, Commands Codes and
    Attribute Value Pairs

5.1.  Application Support and Command Codes

   This document re-uses the Diameter NASREQ [5] and the EAP [6]
   applications and their command codes in the same way as defined in
   [3].  The MAG acts as a Diameter client.

   The MAG to HAAA interface is primarily used for bootstrapping PMIPv6
   when a MN attaches and authenticates to the PMIPv6 capable network.
   This includes the bootstrapping of PMIPv6 session related information
   and possibly PMIPv6 security related information retrieval.  The same
   interface may also be used for accounting.

   Whenever the MAG sends a Diameter message to the HAAA the User-Name
   AVP MUST contain the MN identity.  The identity MUST be in Network
   Access Identifier (NAI) [7] format.

   The Diameter response messages MAY contain Framed-IPv6-Prefix and/or



Korhonen (ed.), et al.  Expires December 25, 2007               [Page 9]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


   Framed-IPv4-Address AVPs.  For example a local Diameter proxy MAY add
   those in order to advertise locally availble prefixes as well [14].

5.2.  Diameter-EAP-Request (DER)

   The Diameter-EAP-Request (DER) message [6] is sent by the MAG to the
   Diameter server to initiate a network access authentication and
   authorization procedure.  The DER message format is the same as
   defined in [6].  The DER message MAY include optional PMIPv6 MAG to
   HAAA interface AVPs:

   <Diameter-EAP-Request> ::= < Diameter Header: 268, REQ, PXY >
                              < Session-Id >
                              { Auth-Application-Id }
                              { Origin-Host }
                              { Origin-Realm }
                              { Destination-Realm }
                              { Auth-Request-Type }
                              ...
                              [ Mobility-Capability ]
                              [ PMIP6-MAG-Address ]

                              [ User-Name ]
                              [ Destination-Host ]
                              ...
                            * [ AVP ]

5.3.  Diameter-EAP-Answer (DEA)

   The Diameter-EAP-Answer (DEA) message defined in [6] is sent in
   response to the Diameter-EAP-Request message (DER).  The DEA message
   format is the same as defined in [6].  If the network access
   authentication procedure was successful then the response MAY include
   PMIPv6 MAG to HAAA interface AVPs.  The PMIP6-Home-Prefix AVP
   contains MN-HNP and the PMIP6-IPv4-Home-Address AVP contains IPv4-
   HoA, if such information are needed:















Korhonen (ed.), et al.  Expires December 25, 2007              [Page 10]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


   <Diameter-EAP-Answer> ::= < Diameter Header: 268, PXY >
                             < Session-Id >
                             { Auth-Application-Id }
                             { Auth-Request-Type }
                             { Result-Code }
                             { Origin-Host }
                             { Origin-Realm }
                             ...
                           * [ Mobility-Agent-Info ]
                             [ Mobility-Capability ]
                             [ PMIP6-MAG-Address ]
                           * [ PMIP6-DHCP-Address ]
                             [ PMIP6-Home-Prefix ]
                             [ PMIP6-IPv4-Home-Address ]

                             [ User-Name ]
                             [ Framed-IPv6-Prefix ]
                             [ Framed-IPv4-Address ]
                             ...
                           * [ AVP ]

5.4.  AA-Request (AAR)

   The AA-Request (AAR) message [5] is sent by the MAG to the Diameter
   server to initiate a network access authentication and authorization
   procedure.  The AAR message format is the same as defined in [5].
   The message MAY include optional PMIPv6 MAG to HAAA interface AVPs:

   <AA-Request> ::= < Diameter Header: 265, REQ, PXY >
                    < Session-Id >
                    { Auth-Application-Id }
                    { Origin-Host }
                    { Origin-Realm }
                    { Destination-Realm }
                    { Auth-Request-Type }
                    ...
                    [ Mobility-Capability ]
                    [ PMIP6-MAG-Address ]

                    [ User-Name ]
                    [ Destination-Host ]
                    ...
                  * [ AVP ]








Korhonen (ed.), et al.  Expires December 25, 2007              [Page 11]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


5.5.  AA-Answer (AAA)

   The AA-Answer (AAA) message is sent in response to the AA-Request
   (AAR) message.  The AAA message format is the same as defined in [5].
   If the network access authentication procedure was successful then
   the response MAY include PMIPv6 MAG to HAAA interface AVPs.  The
   PMIP6-Home-Prefix AVP contains MN-HNP and the PMIP6-IPv4-Home-Address
   AVP contains IPv4-HoA, if such information are needed:

   <AA-Answer> ::= < Diameter Header: 265, PXY >
                   < Session-Id >
                   { Auth-Application-Id }
                   { Auth-Request-Type }
                   { Result-Code }
                   { Origin-Host }
                   { Origin-Realm }
                   ...
                 * [ Mobility-Agent-Info ]
                   [ Mobility-Capability ]
                   [ PMIP6-MAG-Address ]
                 * [ PMIP6-DHCP-Address ]
                   [ PMIP6-Home-Prefix ]
                   [ PMIP6-IPv4-Home-Address ]

                   [ User-Name ]
                   [ Framed-IPv6-Prefix ]
                   [ Framed-IPv4-Address ]
                   ...
                 * [ AVP ]

5.6.  Accounting at MAG

   The accounting at the MAG to HAAA interface is based on the [5].  The
   application identifier used for accounting is the Diameter Base
   Accounting (3) [8].

   TBD.


6.  LMA to HAAA Interface Application Support, Commands Codes and
    Attribute Value Pairs

6.1.  Application Support and Command Codes

   The LMA to HAAA interface may be used for multiple purposes.  These
   include the authorization of the incoming PBU, possible PMIPv6
   security related information retrieval, accounting and PMIPv6 session
   management.



Korhonen (ed.), et al.  Expires December 25, 2007              [Page 12]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


   This document re-uses the Diameter NASREQ [5] application and its
   command codes.  The LMA acts as a Diameter client.

   Whenever the LMA sends a Diameter message to the HAAA, the User-Name
   AVP MUST contain the MN identity.  The identity MUST be in a NAI
   format.  The LMA MAY retrieve the MN identity information from the
   PBU MN-ID [15] mobility option.  The identity SHOULD be the same as
   used on the MAG to HAAA interface, but in a case those identities
   differ the HAAA MUST have a mechanism of mapping the MN identity used
   on the MAG to HAAA interface to the identity used on the LMA to HAAA
   interface.

   The LMA and the HAAA use the PMIP6-Home-Prefix AVP to exchange the
   MN-HNP when appropriate.  The low 64 bits of the prefix must be all
   zeroes.  Similarly, the LMA and the HAAA use the PMIP6-IPv4-Home-
   Address AVP to exchange the MN IPv4-HoA when appropriate.  If the
   PMIP6-Home-Prefix is set to an undefined address (::/128) in the
   request message, it is an indication that the HAAA needs to assign
   the MN-HNP and return it to the LMA in the response message.  If the
   PMIP6-IPv4-Home-Address is set to all zeroes (0.0.0.0) in the request
   message, it is an indication that the HAAA needs to assign the MN
   IPv4-HoA and return it to the LMA in the response message.

6.2.  AA-Request (AAR)

   The AA-Request (AAR) message [5] is sent by the LMA to the Diameter
   server to initiate a network access authentication and authorization
   procedure.  The AAR message format is the same as defined in [5].
   The message MAY include optional PMIPv6 LMA to HAAA interface AVPs:

   <AA-Request> ::= < Diameter Header: 265, REQ, PXY >
                    < Session-Id >
                    { Auth-Application-Id }
                    { Origin-Host }
                    { Origin-Realm }
                    { Destination-Realm }
                    { Auth-Request-Type }
                    ...
                    [ Mobility-Agent-Info ]
                    [ Mobility-Capability ]
                    [ PMIP6-MAG-Address ]
                    [ PMIP6-Home-Prefix ]
                    [ PMIP6-IPv4-Home-Address ]

                    [ User-Name ]
                    ...
                  * [ AVP ]




Korhonen (ed.), et al.  Expires December 25, 2007              [Page 13]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


6.3.  AA-Answer (AAA)

   The AA-Answer (AAA) message is sent in response to the AA-Request
   (AAR) message.  The AAA message format is the same as defined in [5].
   If the network access authentication procedure was successful then
   the response MAY include PMIPv6 LMA to HAAA interface AVPs.  The
   PMIP6-Home-Prefix AVP contains MN-HNP and the PMIP6-IPv4-Home-Address
   AVP contains IPv4-HoA, if such information are needed:

   <AA-Answer> ::= < Diameter Header: 265, PXY >
                   < Session-Id >
                   { Auth-Application-Id }
                   { Auth-Request-Type }
                   { Result-Code }
                   { Origin-Host }
                   { Origin-Realm }
                   ...
                   [ Mobility-Capability ]
                   [ PMIP6-Home-Prefix ]
                   [ PMIP6-IPv4-Home-Address ]

                   [ User-Name ]
                   ...
                 * [ AVP ]

6.4.  Accounting at LMA

   The accounting at the LMA to HAAA interface is based on the [5].  The
   application identifier used for accounting is the Diameter Base
   Accounting (3) [8].

   TBD.


7.  Proxy Mobile IPv6 Session Management

   Concerning a PMIPv6 session, the AAAH MAY maintain a state.  The LMA
   and the MAG MUST support the Authorization Session State Machine
   defined in [8].  Diameter session termination related commands
   described in the following sections may be exchanged between the LMA
   and the HAAA.

   The actual PMIPv6 session termination procedures take place at PMIPv6
   protocol level and are out of scope of this document.







Korhonen (ed.), et al.  Expires December 25, 2007              [Page 14]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


7.1.  Session Termination Request - Command

   The LMA or the MAG MAY send the Session-Termination-Request (STR)
   command [8] to the HAAA and inform the termination of an ongoing
   PMIPv6 session is in progress.

7.2.  Session Termination Answer - Command

   The Session-Termination-Answer (STA) [8] is sent by the HAAA to
   acknowledge the termination of a PMIPv6 session.

7.3.  Abort Session Request - Command

   The HAAA MAY send the Abort-Session-Request (ACR) command [8] to the
   LMA or to the MAG and request termination of a PMIPv6 session.

7.4.  Abort Session Answer - Command

   The Abort-Session-Answer (ASA) command [8]is sent by the LMA or the
   MAG to acknowledge that the termination of a PMIPv6 session.


8.  Attribute Value Pair Occurrence Tables

   The following tables list the PMIPv6 MAG to HAAA interface and LMA to
   HAAA interface AVPs including those that are defined in [3].

   The Figure 2 contains the AVPs and their occurrences on the MAG to
   HAAA interface.  The AVPs that are part of grouped AVP are not listed
   in the table, rather only the grouped AVP is listed.


                                     +---------------------------+
                                     |        Command-Code       |
                                     |-------+-------+-----+-----+
      Attribute Name                 |  DER  |  DEA  | AAR | AAA |
      -------------------------------+-------+-------+-----+-----+
      PMIP6-MAG-Address              |  0-1  |  0-1  | 0-1 | 0-1 |
      PMIP6-DHCP-Address             |   0   |  0+   |  0  | 0+  |
      Mobility-Agent-Info            |   0   |  0+   |  0  | 0+  |
      Mobility-Capability            |  0-1  |  0-1  | 0-1 | 0-1 |
      PMIP6-IPv4-Home-Address        |   0   |  0-1  |  0  | 0-1 |
      PMIP6-Home-Prefix              |   0   |  0-1  |  0  | 0-1 |
                                     +-------+-------+-----+-----+

    Figure 2: MAG to HAAA Interface DER, DEA, AAR and AAA Commands AVPs

   The Figure 3 contains the AVPs and their occurrences on the LMA to



Korhonen (ed.), et al.  Expires December 25, 2007              [Page 15]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


   HAAA interface.  The AVPs that are part of grouped AVP are not listed
   in the table, rather only the grouped AVP is listed.


                                     +---------------+
                                     | Command-Code  |
                                     |-------+-------+
      Attribute Name                 |  AAR  |  AAA  |
      -------------------------------+-------+-------+
      PMIP6-MAG-Address              |  0-1  |   0   |
      PMIP6-IPv4-Home-Address        |  0-1  |  0-1  |
      PMIP6-Home-Prefix              |  0-1  |  0-1  |
      Mobility-Agent-Info            |  0-1  |   0   |
      Mobility-Capability            |  0-1  |  0-1  |
                                     +-------+-------+

         Figure 3: LMA to HAAA Interface AAR and AAA Commands AVPs

   The following table describes the Diameter AVPs code values, types,
   possible flag values, and whether the AVP MAY be encrypted.  The
   Diameter base protocol specification [8] specifies the AVP Flags
   rules for AVPs in section 4.5.  Due to space constraints, the short
   form DiamIdent is used to represent DiameterIdentity.

                                            +---------------------+
                                            |    AVP Flag rules   |
                                            +----+-----+----+-----+----+
                     AVP  Section           |    |     |SHLD|MUST |    |
  Attribute Name     Code Defined Data Type |MUST| MAY |NOT |NOT  |Encr|
  ------------------------------------------+----+-----+----+-----+----+
  PMIP6-MAG-Address  TBD  4.1     Address   |    |  P  |    | M,V | Y  |
  PMIP6-LMA-Address  TBD  4.3     Address   |    |  P  |    | M,V | Y  |
  PMIP6-LMA-FQDN     TBD  4.4     DiamIdent |    |  P  |    | M,V | Y  |
  PMIP6-IPv4-Home-                          |    |     |    |     |    |
      Address        TBD  4.5     Address   |    |  P  |    | M,V | Y  |
  PMIP6-DHCP-Address TBD  4.6     Address   |    |  P  |    | M,V | Y  |
  PMIP6-Home-Prefix  TBD  4.7     Address   |    |  P  |    | M,V | Y  |
  ------------------------------------------+----+-----+----+-----+----+

                      Figure 4: AVP Flag Rules Table


9.  IANA Considerations

9.1.  Attribute Value Pair Codes

   This specification defines the following new AVPs:




Korhonen (ed.), et al.  Expires December 25, 2007              [Page 16]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


     PMIP6-MAG-Address           is set to TBD
     PMIP6-LMA-Address           is set to TBD
     PMIP6-LMA-FQDN              is set to TBD
     PMIP6-DHCP-Address          is set to TBD
     PMIP6-Home-Prefix           is set to TBD
     PMIP6-IPv4-Home-Address     is set to TBD

9.2.  Namespaces

   This specification defines new values to the Mobility Capability
   registry (see [3]) for use with the Mobility-Capability AVP:

  Token                             | Value                | Description
  ----------------------------------+----------------------+------------
  PMIP6_SUPPORTED                   | 0x0000000100000000   | [RFC TBD]
  IP4_HOA_SUPPORTED                 | 0x0000000200000000   | [RFC TBD]
  LOCAL_MAG_ROUTING_SUPPORTED       | 0x0000000400000000   | [RFC TBD]
  RO_SUPPORTED                      | 0x0000000800000000   | [RFC TBD]


10.  Security Considerations

   TBD


11.  Acknowledgements

   Jouni Korhonen would like to thank TEKES MERCoNe project for
   providing funding to work on this document.


12.  References

12.1.  Normative References

   [1]   Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K., and
         B. Patil, "Proxy Mobile IPv6", draft-ietf-netlmm-proxymip6-01
         (work in progress), June 2007.

   [2]   Wakikawa, R. and S. Gundavelli, "IPv4 Support for Proxy Mobile
         IPv6", draft-ietf-netlmm-pmip6-ipv4-support-00 (work in
         progress), April 2007.

   [3]   Korhonen, J., "Diameter Mobile IPv6: Support for Network Access
         Server to Diameter Server  Interaction",
         draft-ietf-dime-mip6-integrated-04 (work in progress),
         May 2007.




Korhonen (ed.), et al.  Expires December 25, 2007              [Page 17]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


   [4]   Bradner, S., "Key words for use in RFCs to Indicate Requirement
         Levels", BCP 14, RFC 2119, March 1997.

   [5]   Calhoun, P., Zorn, G., Spence, D., and D. Mitton, "Diameter
         Network Access Server Application", RFC 4005, August 2005.

   [6]   Eronen, P., Hiller, T., and G. Zorn, "Diameter Extensible
         Authentication Protocol (EAP) Application", RFC 4072,
         August 2005.

   [7]   Aboba, B., Beadles, M., Arkko, J., and P. Eronen, "The Network
         Access Identifier", RFC 4282, December 2005.

   [8]   Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko,
         "Diameter Base Protocol", RFC 3588, September 2003.

12.2.  Informative References

   [9]   Manner, J. and M. Kojo, "Mobility Related Terminology",
         RFC 3753, June 2004.

   [10]  Aboba, B., Blunk, L., Vollbrecht, J., Carlson, J., and H.
         Levkowetz, "Extensible Authentication Protocol (EAP)",
         RFC 3748, June 2004.

   [11]  Kaufman, C., "Internet Key Exchange (IKEv2) Protocol",
         RFC 4306, December 2005.

   [12]  Soliman, H., "Mobile IPv6 support for dual stack Hosts and
         Routers (DSMIPv6)", draft-ietf-mip6-nemo-v4traversal-04 (work
         in progress), March 2007.

   [13]  Johnson, D., Perkins, C., and J. Arkko, "Mobility Support in
         IPv6", RFC 3775, June 2004.

   [14]  Damic, D., "Proxy Mobile IPv6 indication and discovery",
         draft-damic-netlmm-pmip6-ind-discover-01 (work in progress),
         June 2007.

   [15]  Patel, A., Leung, K., Khalil, M., Akhtar, H., and K. Chowdhury,
         "Mobile Node Identifier Option for Mobile IPv6 (MIPv6)",
         RFC 4283, November 2005.









Korhonen (ed.), et al.  Expires December 25, 2007              [Page 18]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


Authors' Addresses

   Jouni Korhonen
   TeliaSonera
   Teollisuuskatu 13
   Sonera  FIN-00051
   Finland

   Email: jouni.korhonen@teliasonera.com


   Julien Bournelle
   France Telecom R&D
   38-4O rue du general Leclerc
   Issy-Les-Moulineaux  92794
   France

   Email: julien.bournelle@orange-ftgroup.com


   Kuntal Chowdhury
   Starent Networks
   30 International Place
   Tewksbury  MA  01876
   US

   Phone: +1 214 550 1416
   Email: kchowdhury@starentnetworks.com























Korhonen (ed.), et al.  Expires December 25, 2007              [Page 19]

Internet-Draft   Diameter Support for Proxy Mobile IPv6        June 2007


Full Copyright Statement

   Copyright (C) The IETF Trust (2007).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Acknowledgment

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).





Korhonen (ed.), et al.  Expires December 25, 2007              [Page 20]

