IS-IS Working Group                                             Fang Wei
Internet Draft                                                   Yue Qin
Intended status: Standard                                    Lianyuan Li
Expires: April 2010                                          China Mobile
                                                       October 19, 2009



                        New TLV for Purge Packet in ISIS
                           draft-wei-isis-tlv-00.txt



Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the 
   provisions of BCP 78 and BCP 79. 

   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet-Drafts. 

   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 

   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt 

   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html 

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the 
   document authors. All rights reserved. 

   This document is subject to BCP 78 and the IETF Trust's Legal 
   Provisions Relating to IETF Documents in effect on the date of 
   publication of this document (http://trustee.ietf.org/license-info). 
   Please review these documents carefully, as they describe your rights 
   and restrictions with respect to this document. 






Wei                           April 2010                       [Page 1]

Internet-Draft       New TLV for Purge Packet in ISIS           October 2009




Abstract

   At present the purge packet does not contain information of source router
   generating purge packets, so under the circumstance of route oscillation, it is
   difficult to locate the router closest to the point of failure that receives the
   LSP.

   In this draft, it is proposed to add a new TLV for purge packet in which the
   system ID of source router is included. The TLVs are not changed in purge packets
   sent by other routers. When there is a network failure and purge packets are sent
   by routers, it is easy to locate the point of failure.



1. Introduction

   ISIS [RFC1195] routing protocol has been widely used large-scale IP
   networks because of its strong scalability and fast speed of
   convergence. ISIS is a kind of link-state routing protocols by
   flooding the LSP to advertise route network widely.



   When router A receives a LSP from router B, if the LSP is damaged,
   which may be caused by router B or the link between them, router A
   will remove routes to the router B. Then, router A generates purge
   packet and floods it to the whole network. The purge message informs
   other routers in the whole network that the LSP is wrong and the
   route to router B is not reachable. Other routers receiving the purge
   messages will do the same operation: deleting the route and flooding
   the purge packet. The route will be recovered until router B
   generates a new LSP packet to inform the whole network.



2. Current Purge Packet and Its Problems

   If under the environment that a router is abnormal, quick update
   method can is helpful to update routes rapidly. Unfortunately,
   sometimes LSPs may be damaged by some reasons even though the routers
   are under normal conditions, for example when QoS of transport
   network is downgraded.

   In this case, purge packets will be generated by the router receiving
   the damaged LSP and flooded to the whole network. After receiving a


Wei                           April 2010                       [Page 2]

Internet-Draft       New TLV for Purge Packet in ISIS           October 2009


   purge packet, the source router sending the LSP will send out a
   packet to inform that there is no problem with the route. These
   packets may result in deleting and adding routes frequently, which
   lead to network route oscillation. At this time, it is very difficult
   to locate which router is the first router generating the purge
   packet, so it may take much time to make route stable.

   In order not to cause route oscillation, it is also defined in ISIS
   that when routers receive a damaged LSP packet, it should be
   discarded without deleting route, not producing purge packets.
   Obviously when there is something wrong with source router, the
   following datagrams going through the links will be damaged or
   dropped.



3. New TLV in Purge Packet

   This draft proposes a new TLV for purge packet, which carries the
   system ID of source router generating purge packet.

   The new TLV is:

   CODE - XX (to be assigned)

   LENGTH - total length of the value field.

   VALUE -System ID of Intermediate System which generates the first
   Purge packet

   When other routers generating new Purge packets, the TLV should be
   included in these packets and unchanged. So, it is easy to locate the
   router receiving the damaged LSP.



4. Security Considerations

   The suggestions in this document will not cause extra new security
   concerns.

5. IANA Considerations

   This document defines the following new TLV type, which has already
   been reflected in the IANA TLV code-point registry:

   Name                    Value


Wei                           April 2010                       [Page 3]

Internet-Draft       New TLV for Purge Packet in ISIS           October 2009


   (TBD)



6. Technical merits

   [1]  [RFC1195] R. Callon, "Use of OSI IS-IS for Routing in TCP/IP
         and Dual Environments" RFC 1195, December 1990.

7. Author's Addresses

   Fang Wei

   weifang@chinamobile.com



   Yue Qin

   qinyue@chinamobile.com



   Lianyuan Li

   lilianyuan@chinamobile.com



   Zhaorui Huang

   huangzhaorui@chinamobile.com



   Chuan Fan

   Fanchuan@chinamobile.com










Wei                           April 2010                       [Page 4]

