<?xml version="1.0" encoding="US-ASCII"?>
<!-- This template is for creating an Internet Draft using xml2rfc,
     which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
	<!-- One method to get references from the online citation libraries.
     There has to be one entity for each item to be referenced. 
     An alternate method (rfc include) is described in the references. -->
	<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
	<!ENTITY RFC6275 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6275.xml">
	<!ENTITY RFC3963 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3963.xml">
	<!ENTITY RFC3753 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3753.xml">
	<!ENTITY RFC5340 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5340.xml">
	<!ENTITY RFC3626 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3626.xml">
	<!ENTITY RFC4301 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4301.xml">
	<!ENTITY I-D.narten-iana-considerations-rfc2434bis SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.narten-iana-considerations-rfc2434bis.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs), 
     please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
     (Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space 
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="info" docName="draft-zhangjie-manemo-ro-00" ipr="trust200902">
	<!-- category values: std, bcp, info, exp, and historic
     ipr values: full3667, noModification3667, noDerivatives3667
     you can add the attributes updates="NNNN" and obsoletes="NNNN" 
     they will automatically be output with "(if approved)" -->
	<!-- ***** FRONT MATTER ***** -->
	<front>
		<!-- The abbreviated title is used in the page header - it is only necessary if the 
         full title is longer than 39 characters -->
		<title abbrev="Abbreviated Title">The MANEMO Route Optimization in the Rescue Operation</title>
		<!-- add 'role="editor"' below for the editors if appropriate -->
		<!-- Another author who claims to be an editor -->
		<author fullname="Ma Xiaolei" initials="X" surname="Ma">
			<organization>Beijing University of Post and Telecommunications</organization>
			<address>
				<postal>
					<street>Xi Tu Cheng Road</street>
					<!-- Reorder these if your country does things differently -->
					<region>HaiDian</region>
					<city>Beijing</city>
					<code>100876</code>
					<country>China</country>
				</postal>
				<phone>+86 010 6228 1300</phone>
				<email>horsedavid@163.com</email>
				<!-- uri and facsimile elements may also be added -->
			</address>
		</author>
		<author fullname="Zhang Jie" initials="J" surname="Zhang">
			<organization>Beijing University of Post and Telecommunications</organization>
			<address>
				<postal>
					<street>Xi Tu Cheng Road</street>
					<!-- Reorder these if your country does things differently -->
					<region>HaiDian</region>
					<city>Beijing</city>
					<code>100876</code>
					<country>China</country>
				</postal>
				<email>lindalary@163.com</email>
			</address>
		</author>
		<author fullname="Jia Jintao" initials="J" surname="Jia">
			<organization>Beijing University of Post and Telecommunications</organization>
			<address>
				<postal>
					<street>Xi Tu Cheng Road</street>
					<!-- Reorder these if your country does things differently -->
					<region>HaiDian</region>
					<city>Beijing</city>
					<code>100876</code>
					<country>China</country>
				</postal>
				<email>jiajintao1987@163.com</email>
			</address>
		</author>
		<author fullname="Liu Yuanan" initials="Y" surname="Liu">
			<organization>Beijing University of Post and Telecommunications</organization>
			<address>
				<postal>
					<street>Xi Tu Cheng Road</street>
					<!-- Reorder these if your country does things differently -->
					<region>HaiDian</region>
					<city>Beijing</city>
					<code>100876</code>
					<country>China</country>
				</postal>
				<email>yuliu@bupt.edu.cn</email>
			</address>
		</author>
		<date month="Oct" year="2011"/>
		<!-- If the month and year are both specified and are the current ones, xml2rfc will fill 
         in the current day for you. If only the current year is specified, xml2rfc will fill 
	 in the current day and month for you. If the year is not the current one, it is 
	 necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the 
	 purpose of calculating the expiry date).  With drafts it is normally sufficient to 
	 specify just the year. -->
		<!-- Meta-data Declarations -->
		<area>Routing</area>
		<workgroup>Network Working Group</workgroup>
		<!-- WG name at the upperleft corner of the doc,
         IETF is fine for individual submissions.  
	 If this element is not present, the default is "Network Working Group",
         which is used by the RFC Editor as a nod to the history of the IETF. -->
		<keyword>MANEMO</keyword>
		<!-- Keywords will be incorporated into HTML output
         files in a meta tag but they have no effect on text or nroff
         output. If you submit your draft to the RFC Editor, the
         keywords will be used for the search engine. -->
		<abstract>
			<t>Network Mobility Basic Support Protocol (NEMO BS) is the protocol proposed for the mobility management of mobile networks. However, NEMO BS cannot deal with the problem of pinball routing in the nested mobile network. And the related solutions are not yet considered and discussed in the IETF. MANEMO (MANET for NEMO) is designed to solve this problem. This article puts forward a novel MANEMO route optimization solution to solve the pinball routing in nested NEMO.</t>
		</abstract>
	</front>
	<middle>
		<section title="Introduction">
			<t>With the mobile technology rapidly developing, more and more mobile devices come into our life in recent years. Sometimes a group of mobile devices will move as a whole subnet, for example, the passengers will use mobile devices in the train or on the bus. The subnet needs a mobile access support to the Internet. To meet this demand, the NEMO working group of Internet Engineering Task Force (IETF) extended the Mobile Internet Protocol Version 6 (MIPv6) and put forward NEMO BS. NEMO BS can ensure the session continuity of a whole mobile network when it changes the access point to the Internet. However, NEMO BS has not considered the route optimization in the nested network, so the problem of pinball routing will be more serious with the nesting level increasing. It will lead to multiple encapsulations of messages and communication delay which impair the quality of communication seriously.</t>
			<t>This draft is aimed at using the idea of MANEMO to deal with the sub-optimal routing problem in nested NEMO. The draft introduces the modified MANET routing protocol OLSR into the NEMO BS to route the messages inside and outside the mobile network.</t>
			<!--The original specification of xml2rfc format is in <xref target="RFC2629">RFC&nbsp;2629</xref>-->
		</section>
		<section title="Terminology">
			<t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT","SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119.</t>
			<t>Readers are expected to be familiar with all the terms defined in the RFC 6275 and the NEMO Terminology draft</t>
			<t>Nested NEMO  The Nested NEMO is a network configuration where one more mobile router access the Internet through other mobile routers. The mobile routers are connected in a nested formation.</t>
			<t>MANEMO  MANET for NEMO.  The network architecture of MANEMO can be described as a nested NEMO. MANEMO network is integrated by MANET and NEMO. The two kinds of network can extend each other's capability to construct a stronger network system.</t>
		</section>
		<section title="NEMO-OLSR scheme description">
			<t>In the proposed NEMO-OLSR scheme, the MRs that have the same AR property will form a MANET network. The scheme is described in two scenarios: the local MANET communication and the roaming NEMO communication.</t>
			<section title="Protocol extensions">
				<t>This article changes the mobile communications within the network to optimize the route in nested NEMO network. So the extensions focus on the MR, which are described as follows:</t>
				<t>1 The MR manages all the communication in the mobile subnet. And the MRs under the same AR compose a MANET network. A module called OLSR MODULE is added to every MR to support the OLSR protocol. It sends HELLO message periodically to build the topology of the mobile network. The "AR Address" field is added to the Hello message to be the mark of a specified MANET network.</t>
				<t>2 The "Grounded Router flag" is added in the OLSR-Hello message to indicate whether the MR is G-MR or not. If the MR is G-MR, it will be the gateway of the MANET. Otherwise, it will keep the address of its G-MR, and send the data packets to the G-MR firstly every time when it communicates with the nodes in the Internet.</t>
				<t>3 A G-MR List is added in every MR. When the status of an MR is non-G-MR, it will record the information of the G-MR in this list. The information of G-MR is taken from the Hello messages the MR receives. There can be a lot of G-MR information in the G-MR list. The MR will choose an optimized one according to the related parameters. We will describe the procedure in detail later.</t>
			</section>
			<section title="Local MANET Communication">
				<t>Figure 1 depicts the structure of nested mobile networks.</t>
				<figure align="center" anchor="xml_figure1">
					<preamble/>
					<artwork align="center"><![CDATA[
                +---+   +---+    +---+   +--+--+
                |HA2|   |HA3|    |HA4|---| CN  |
                +---+   +---+    +---+   +--+--+ 
                  |2::    |3::     |4::
                  |       |        |
   +-----+1::   +------------------------+      
   | HA1 |------|         Internet       |
   +-----+      ++-----------------------+                                                    
                           |                     
                         +---+                
                         |AR1|                 
                         +---+                 
                           |1::                  
                         +---+                 
                         |MR1|                 
                         +---+                 
                           |                        
                      -+---+---+-              
                       |2::    |3::                        
                     +---+   +---+                    
                     |MR2|   |MR3|                   
                     +---+   +---+                    
                               |4::                                 
                             +---+                             
                             |MR4|                               
                             +---+                                  
                               |
                             +---+
                             |MNN|
                             +---+
            ]]></artwork>
					<postamble>The structure of nested mobile networks</postamble>
				</figure>
				<section title="Modified Hello Message Format">
					<t>The proposed modified hello message format is shown as follows:</t>
					<figure align="center" anchor="xml_table1">
						<preamble/>
						<artwork align="center"><![CDATA[
				
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1

 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |Grounded Router flag|AR Address|     Htime     |  Willingness  |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |   Link Code   |   Reserved    |       Link Message Size       |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                  Neighbor Interface Address                   |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                  Neighbor Interface Address                   |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 :                             .  .  .                           :
 :                                                               :
 :                                                               :
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |   Link Code   |   Reserved    |       Link Message Size       |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                  Neighbor Interface Address                   |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                  Neighbor Interface Address                   |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 :                                                               :
 :                                                               :
(etc)
            ]]></artwork>
						<postamble/>
					</figure>
					<t>The format of the modified hello message is based on the OLSR hello message. The difference is that, we add the "Grounded Router flag" field and the "AR Address" field at the place of the original "Reserved" field. In MR1, the value of this flag is 1. It means that MR1 is a G-MR.</t>
				</section>
				<section title="G-MR List Format">
					<t>The proposed modified G-MR list format is shown as follows:</t>
					<figure align="center" anchor="xml_table2">
						<preamble/>
						<artwork align="center"><![CDATA[			

 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Grounded MR Address                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Hop Count               |       Life Time (Second)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

            ]]></artwork>
						<postamble/>
					</figure>
					<t>There are three items in the G-MR list. The items are described as follows:</t>
					<t>-	G-MR: This field includes the CoA of the G-MR. The function of this filed is to record the G-MRs which the MR can access.</t>
					<t>-	Hop_count: This field includes the number of hops between the MR and the G-MR. It is calculated by the OLSR protocol in the MANET. The MANET is composed by the MRs which have the same AR-CoA as the "AR Address" of the G-MR in this record. The Hop_count is an important parameter to choose the optimized G-MR. Generally, we choose the G-MR with the smallest Hop_count.</t>
					<t>-    Life_time: This field includes the life time of the corresponding G-MR. And the unit of the field is second. When the MR receives the G-MRs hello message, the initial life time of this record is 16 seconds, and the time decreases secondly. When the life time gets to zero, this record is invalid, and it will be discarded. This field is another important parameter to choose the G-MR. Generally, we prefer the one with the longer life time.</t>
				</section>
				<section title="Communication Process">
					<t>1 the ARs broadcast its ID information.</t>
					<t>2 the MRs which can receive the AR broadcast set their status as G-MR and broadcast its modified OLSR hello message. For example, in Fig.1, MR1 receives the AR broadcast, and sets the "Grounded Router flag" as 1.</t>
					<t>the MRs which cannot receive the AR broadcast will access the Internet through the G-MRs. For example, in Fig.1, MR_2-MR_4 can receive the hello message of MR1. Then, they choose MR1 as the gateway to the Internet. The value of the "Grounded Router flag" in their hello message is 0, and they will put the information of MR1 in the G-MR list. </t>
					<t>When choosing the G-MR, we will consider the Hop_count and the Life_time together. Then, the non-G-MR will make its hello message. It will set the "Grounded Router flag" as 0, and set the "AR Address" as the AR-CoA of the chosen G-MR.</t>
					<t>4 the MRs that have the same "AR address" will compose a MANET. And the OLSR protocol is used in the MANET to route the messages. </t>
					<t>When an MNN wants to transmit message to the corresponding node in the Internet, it will firstly send the message to the MR. Secondly, the MR further sends the message to the G-MR it has chosen using the OLSR protocol. Thirdly, the G-MR transmits the message to its HA through the MR-HA bi-directional tunnel. Fourthly, the HA of the G-MR will send the message to the HA of the source MR through the HA-HA bi-directional tunnel. And finally, the HA of the source MR sends the message to the destination node in the Internet. Then the MNN and the corresponding node in the Internet can communicate through the established path.</t>
				</section>
			</section>
			<section title="Roaming NEMO communication">
				<t>The scenario of the roaming NEMO communication is described as follows:</t>
				<figure align="center" anchor="xml_figure2">
					<preamble/>
					<artwork align="center"><![CDATA[
                +---+   +---+    +---+
                |HA2|   |HA3|    |HA4|
                +---+   +---+    +---+
                  |2::    |3::     |4::
                  |       |        |
   +-----+1::   +---------------------+ 5::  +-----+
   | HA1 |------|     Internet        |------| HA5 |
   +-----+      ++--------------------+      +-----+  
                |                     |
              +---+                 +---+
              |AR1|                 |AR2|
              +---+                 +---+
                |1::                  |
   AR:AR1     +---+                   :
   G-MR:MR1   |MR1|                   |5::
              +---+                 +-+-+
                |                   |MR5|  G-MR:MRn 
           -+---+---+-             /+-+-+  AR:AR2 
            |2::    |3::          /              
 AR:AR1   +---+   +---+          /          
 G-MR:MR1 |MR2|   |MR3|         /           
          +---+   +---+        /            
            |4::              /                   
 AR:AR1   +---+              /               
 G-MR:MR1 |MR4|             /                  
          +---+                                  
                                               
            ]]></artwork>
					<postamble>Roaming NEMO communication scenario</postamble>
				</figure>
				<t>1 The NEMO with MR5 roams from AR2 to AR1, when MR5 exchanges hello message with the MRs under AR1, it will find the AR information is different from the neighbor MRs. So, MR5 changes its AR address, set MR1 as its G-MR and reconfigure its CoA.</t>
				<t>2 MR5 sends the Binding Update (BU) request to its HA to register its new CoA. The BU request will come to its G-MR firstly, so MR1 receives the request via the route established by OLSR protocol.</t>
				<t>3 MR1 sends the BU request to HA1 through the MR-HA bi-direction tunnel. Then HA1 looks up the destination HA address in the packet and further sends the request to HA5.</t>
				<t>4 HA5 receives the BU request, gets the new CoA of MR5, and maps it with the HoA of MR5 in the mapping table. Then, HA5 sends the BU_ack to HA_1 according to the reverse route record.</t>
				<t>5 HA1 sends the BU_ack to MR1, and MR1 further sends the message to MR5 according to the OLSR protocol. Finally, the procedure of the binding update has been finished.</t>
			</section>
			<section title="The advantages of the proposed scheme">
				<t>In the proposed scheme, the problem of pinball routing can be well prevented, and the transmission delay can be largely reduced. The NEMO network self organizes as a MANET according to the same access router. Under this condition, the communication within the NEMO can be directly routed via OLSR protocol, and the communication between the NEMO and the corresponding node in the Internet can also be more efficient. Because the messages will be routed to the G-MR by OLSR protocol regardless of the number of the MRs nested level. The messages will be sent to the destination node through the bi-directional tunnel between the G-MR and its HA. So, the largest number of the encapsulation is two. And when the roaming NEMO communicate in the range of new access point, the improved situation is the same as the communication between the NEMO and the Internet.</t>
			</section>
		</section>
		<!-- Possibly a 'Contributors' section ... -->
		<section anchor="IANA" title="IANA Considerations">
			<t>This memo includes no request to IANA.</t>
		</section>
		<section anchor="Security" title="Security Considerations">
			<t>   This specification operates in the security constraints and requirements of MIPv6 [RFC6275] and IPSec [RFC4301].</t>
		</section>
	</middle>
	<!--  *****BACK MATTER ***** -->
	<back>
		<!-- References split into informative and normative -->
		<!-- There are 2 ways to insert reference entries from the citation libraries:
     1. define an ENTITY at the top, and use "ampersand character"RFC2629; here (as shown)
     2. simply use a PI "less than character"?rfc include="reference.RFC.2119.xml"?> here
        (for I-Ds: include="reference.I-D.narten-iana-considerations-rfc2434bis.xml")

     Both are cited textually in the same manner: by using xref elements.
     If you use the PI option, xml2rfc will, by default, try to find included files in the same
     directory as the including file. You can also define the XML_LIBRARY environment variable
     with a value containing a set of directories to search.  These can be either in the local
     filing system or remote ones accessed by http (http://domain/dir/... ).-->
		<references title="Normative References">
			<!--?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?-->
      
      &RFC6275;

      &RFC3963;

      &RFC2119;
      
      &RFC3626;
      
      	</references>
		<references title="Informative References">
			<!-- Here we use entities that we defined at the beginning. -->

      &RFC4301;	

      &RFC3753;

	   &RFC5340;
		</references>
	</back>
</rfc>
