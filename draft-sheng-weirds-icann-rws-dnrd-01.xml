<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY rfc2119 PUBLIC '' 
'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml'>
]>

<rfc category="info" ipr="trust200902" docName="draft-sheng-weirds-icann-rws-dnrd-01">

    <?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
    <?rfc toc="yes"?>
    <?rfc strict="yes"?>
    <?rfc tocompact="yes"?>
    <?rfc compact="yes"?>
    <?rfc subcompact="no"?>
    <?rfc tocdepth="2"?>
    <?rfc symrefs="yes"?>
    <?rfc comments="yes" ?>
    <?rfc sortrefs="yes" ?>

    <front>
        
        <title abbrev="RWS-DNRD">            
            A RESTful Web Service for Domain Name Registration Data (RWS-DNRD)     
        </title>
                
        <author initials="S." surname="Sheng" fullname="Steve Sheng">
            <organization abbrev="ICANN">
                Internet Corporation for Assigned Names and Numbers
            </organization>
            <address>
                <postal>
                    <street>4676 Admiralty Way, Suite 330</street>
                    <country>United States of America</country>
                    <code>90292</code> <city>Marina del Rey, CA </city>
                </postal>
                <phone>+1.310.823.9358</phone>
                <email>steve.sheng@icann.org</email>
            </address>
        </author>
        
        <author initials="F." surname="Arias" fullname="Francisco Arias">
            <organization abbrev="ICANN">
                Internet Corporation for Assigned Names and Numbers
            </organization>
            <address>
                <postal>
                    <street>4676 Admiralty Way, Suite 330</street>
                    <country>United States of America</country>
                    <code>90292</code> <city>Marina del Rey, CA</city>
                </postal>
                <phone>+1.310.823.9358</phone>
                <email>francisco.arias@icann.org</email>
            </address>
        </author>
        
        <author initials="F." surname="Obispo" fullname="Francisco Obispo">
            <organization abbrev="ISC">
                Internet Systems Consortium
            </organization>
            <address>
                <postal>
                    <street>950 Charter St</street>
                    <country>United States of America</country>
                    <code>94063</code> <city>Redwood City, CA</city>
                </postal>
                <phone>+1.650.423.1374</phone>
                <email>fobispo@isc.org</email>
            </address>
        </author>
        
        <author initials="N." surname="Kong" fullname="Ning Kong">
            <organization abbrev="CNNIC">
                China Internet Network Information Center
            </organization>
            <address>
                <postal>
                    <street>4 South 4th Street, Zhongguancun, Haidian District </street>
                    <country>China</country>
                    <code>100190</code> <city>Beijing</city>
                </postal>
                <phone>+86 10 5881 3147</phone>
                <email>nkong@cnnic.cn</email>
            </address>
        </author>

        <date month="March" year="2012"/>
        
        <area> Applications </area>
        
        <keyword>Whois</keyword>       
        <keyword>Registry</keyword>
        <keyword>Domain Name</keyword>
        <keyword>RESTful</keyword>
        <keyword>Directory Service</keyword>
               
        <abstract>
            <t>
                This document specifies a RESTful Web Service for querying Domain Name Registration Data (WHOIS data). 
            </t>
            <t>
                The purpose of this document is to facilitate discussion and serve as
                input into a standards process in this area, currently being
                discussed on the Worthwhile Extensible Internet Registry Data
                Service (WEIRDS) mailing list
                (https://www.ietf.org/mailman/listinfo/weirds).
            </t>
        </abstract>
                
    </front>
    
    <middle>

        <section title="Introduction">
            <t>
                This document describes a way for querying domain name registration data through a 
                RESTful Web-based Interface. This draft closely follows the query patterns set by the 
                Internet Draft on RESTful WHOIS proposed by some Regional Internet Registries 
                (<xref target="I-D.newton-et-al-weirds-rir-query"/>).
            </t>
            <section title="Domain Name Registration Data">
                <t>
                    Domain Name Registration Data is the information that a registrant provides when s/he acquires or is assigned a domain name. Many domain registries and registrars (<xref target="RFC3707"/>) provide public access to some of these data via the WHOIS protocol (<xref target="RFC3912"/>) or a web interface. For example, for interactions between ICANN Accredited Generic Top Level Domain (gTLD) registrars and registrants, the data elements are specified in the current Registrar Accreditation Agreement (RAA).  For country code Top Level Domains (ccTLDs), the operators of these TLDs set their own or follow their government's policy regarding the request and display of these data. The Domain Name Registration Data defined here is intended to satisfy such public access services. 
                </t>
            </section> 
            
            <section title="REST and RESTful Web Service">
                <t>
                    REST stands for Representational State Transfer. It is a set of architectural constraints that is developed as an abstract model of the Web architecture. These constraints include: client-server model, stateless, cacheable, layered system, code on demand (optional), and uniform interface. REST was used to guide the redesign of the Hypertext Transfer Protocol (HTTP) and Uniform Resource Identifiers (URI). It is widely regarded as the architecture of the Web today. Principles of REST have been used to design other protocols such as the ATOM publishing protocol.
                </t>
                <t>
                    A RESTful web service is a web service implemented using HTTP and the principles of REST. It is a collection of resources, with three defined aspects: 1) The "verbs" of the service are strictly those defined by the HTTP methods HEAD, GET, PUT, POST, and DELETE, 2) The "verbs" are used to act upon resources, and 3) resources are addressable using URLs
                </t> 
                <t>
                    Whois services, in general, are read-only services. Therefore URL patterns <xref target="RFC3986"/> presented here are only applicable to the HTTP <xref target="RFC2616"/> GET and HEAD methods.
                </t>
            </section>         
        </section>
        
        <section title="Terminology">
            <t>
                For convenience, this implementation can be referred to as the "RESTful Web Service for Domain Name Registration Data" or "RWS - DNRD". The following terminology is used by this specification:
                <list>
                    <t>
                        Domain Name Registration Data (DNRD) - the information that registrants provide when registering a domain name and that registrars or registries supplement with registry or registrar specific information. 
                    </t>
                    
                    <t>
                        URI - A Uniform Resource Identifier as defined in <xref target="RFC3986"/>.
                    </t>
                    <t>
                        IRI - An internationalized Resource Identifier as defined in <xref target="RFC3987"/>.
                    </t>
                    <t>
                        Resource - A network-accessible data object or service identified by an URI, as defined in <xref target="RFC2616"/>. In this context, resources refers to the registration data objects.
                    </t>
                    <t>
                        Representation - An entity included with a request or response as defined in 
                        <xref target="RFC2616"/>.
                    </t>
                </list>
            </t>
            <t> Additionally, we use ".tld" as a convention in this document to represent, generically, any top level domain (TLD) in the Domain Name System (DNS). </t>  
        </section>
        
        <section title="The Request" anchor="request">
            
            <t>
                As its name implies RWS-DNRD is Web-based, i.e., uses HTTP <xref target="RFC2616"/> as its transport. Given its RESTful nature it only uses the standard HTTP methods. And given it is read-only, it only uses the GET and HEAD methods.
            </t>
            <t>
                The server accepts standard HTTP "GET" requests for the resources it serves. The client 
                sends its request with the following URI structure. The URI structure start with a base 
                URL specified by each domain registry or any other service provider offering this service.
                The base URL will be appended with resource type specific path segments.  The base URL may 
                contain its own path segments (e.g. http://whois.tld/... or 
                http://whois.tld/restful-whois/...).
            </t>
            <t>   The resource type path segments are: 
                
                <list>
                    <t>       'domain' -  information about the domain including registration information, contact information, host information and possible other details specified by registries' Whois policy. </t>
                    <t>       'contact'- Contact record for a particular entity. This includes contact name, organization, address, phone, email, etc. </t>
                    <t>       'host' - information about an Internet Host. This includes server name, ipv4 or ipv6 address, sponsoring registrar, etc. </t>
                    <t>       'registrar' - information about an registrar, specifically the sponsoring registrar. This includes registrar name, address, contact information, etc. </t>
                    
                </list>
            </t>
            
            <section title="Domain" anchor="domain">
                <t>
                    Queries for information about domain names are of the form /domain/example.tld/... 
                    where the path segment following 'domain' is an domain name, in this case example.tld.
                    Path segments following the domain name can target specific information associated with 
                    the domain name in the following way: 
                    <list>
                        <t>
                            'registration' - for the registration data associated with the domain name
                            including references to contacts and registrar, but not the actual contact
                            information.
                        </t>
                        <t>
                            'contacts' - contact information for the domain.
                        </t>
                        <t>
                            'registrar' - contact information of the sponsoring registrar of the domain
                            name.
                        </t>
                    </list>
                </t>
                <t>
                    Optionally, specific type of contact information may be further targeted by 
                    following that path segment with a type. What types of contacts a registry supports
                    is for each registry policy to define. Examples of types of contacts typically 
                    supported are:
                    <list>
                        <t>    registrant  - contact information for the registrant </t>
                        <t>    admin - administrative contact information </t>
                        <t>    tech - technical contact information </t>
                        <t>    billing - billing contact information </t>
                    </list>
                </t>
                <t>
                    Finally, when no path segment follows the domain name, the semantics of the query 
                    are that both registration, contact, and registrar information are to be returned.
                </t>
                <t>
                    Here are some example queries:
                </t>
                <t> base URL: http://whois.tld/somepath
                    <list>

	         <t>                   /domain/example.tld/ -  returns all of example.tld's information. This includes registration, contact, host, and sponsoring registrar information. 
	                     </t>


                <t>            /domain/example.tld/registration -  query for example.tld's registration 
                            information. It will return the registration record with references to the 
                            contacts, registrar, name servers, and hosts. But it would not return the actual information for those data objects. 

                        </t>
                        <t>
                            /domain/example.tld/contacts  - returns all the contact information fordomain example.tld.
                        </t>
                        <t>/domain/example.tld/contacts/registrant - returns only the registrant 
                            information for domain example.tld.
                        </t>
                        <t>/domain/example.tld/contacts/tech - returns only the technical contact's 
                            information for domain example.tld.
                        </t>

						<t>
                            /domain/example.tld/registrar -  returns the sponsoring registrar's contact information for domain example.tld.   </t>

                    </list>
                </t>
                
            </section>
            
            <section title="Contacts" anchor="contacts"> 
                
                <t>
                    Queries for information about contacts are of the form /contact/contact-id/... 
                    where the contact-id is the id that the registry or registrar, as the case may be, 
                    uses to uniquely identify the contact. Path segments following the domain name can 
                    target specific information associated with the domain name in the following way:
                </t>
                <t>
                    Here are some example queries:
                </t>
                <t>
                    Base URL: http://whois.tld/somepath
                    <list>
                        <t> /contact/CNT-2222/ -  queries the registrar or registry for contact id 
                            CNT-2222.
                        </t>
                    </list>
                </t>
            </section>
            
            <section title="Hosts" anchor="hosts"> 
                
                <t>
                    Queries for information about hosts (or nameservers) are of the form /host/XXX/...
                    where the path segment following 'host' is either a hostname <xref target="RFC1123"/>,
                    IPv4 <xref target="RFC0791"/>  or IPv6 <xref target="RFC5952"/> address of the 
                    hostname.
                </t> 
                <t>
                    Here are some example queries:
                </t>
                <t>
                    base URL: http://whois.tld/somepath
                    <list>
                        <t>
                            /host/192.0.2.0/ -  queries for host name with IPv4 address.
                        </t>
                        <t>
                            /host/ns.example.tld/ -  queries for host name ns.example.tld.
                        </t>
                    </list>
                </t>
            </section>
            
            <section title="Registrars" anchor="registrars"> 
                <t> 
                    Queries for information about registrars are of the form /registrar/XXX/...
                    where the path segment following 'registrar' SHOULD be the the full name of the 
                    registrar (including punctuation, "Inc.", etc.) or its assigned ID.
                </t> 
                <t>
                    Here are some example queries:
                </t>
                <t>
                    base URL: http://whois.tld/somepath
                    <list>
                        <t>
                            /registrar/"Network Solutions, LLC"/ - query the registrar names 
                            "Network Solutions. LLC"
                        </t>
                        <t>
                            /registrar/123/ -  queries the registrar whose ID is 123.
                        </t>
                    </list>
                </t>
            </section>
            
            <section title="Signaling Response Formats" anchor="response_format">
                <t>
                    The default response format for the RWS-RDNRD server is XML. However, additional 
                    formats such as JSON, HTML or plain text can be provided. The client signals the 
                    preferred format using the standard HTTP "Accept:" header. For example, if the 
                    client wishes to receive JSON <xref target="RFC4627"/> response, it SHOULD put the 
                    "application/json" MIME type in the Accept header.  Servers SHOULD respond with 
                    JSON responses when this MIME type is present in the Accept header in accordance 
                    with the preference rules for the Accept header in HTTP [RFC2616]. However the use 
                    of multiple MIME types in the Accept header is not supported.
                </t>	
                <t>
                    Possible response formats and their signaling methods include: 
                    <list>
                        <t> XML (default) - application/xml </t>
                        <t> JSON - application/json </t>
                        <t> HTML - text/html </t>
                        <t> plain text - text/plain </t>
                    </list>	 
                </t> 
            </section>
            
        </section>

        <section title="The Response" anchor="response">
            
            <t>
                The root element for a RWS-DNRD response is &lt;rws&gt;. This element contains one 
                &lt;result&gt; element, and one &lt;addtional&gt; element, that are explained in the 
                following section.
            </t>
            <t>
                Example of root element object:
            </t>
            <t>
                <figure><artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<rws:rws xmlns:rws="urn:ietf:params:xml:ns:rws-1.0"
    ...
    <rws:result>
    ...
    </rws:result>
    <rws:additional>
    ...
    </rws:additional>
    ...
</rws:rws>]]>
                </artwork></figure>
            </t>
            
            <section title="Domain Names">
                
                <t> Example Query: http://whois.test/domain/example.test/   </t>  
                <t> Response: </t>
                <t>
                    <figure><artwork>
                        <![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<rws xmlns="urn:ietf:params:xml:ns:rws-1.0">
    <result>
        <domain:object 
            xmlns:domain="urn:ietf:params:xml:ns:rwsDomain-1.0" 
            href="/domain/example.test">
            <domain:name>example.test</domain:name>
            <domain:roid>9690-TEST</domain:roid>
            <domain:status s="clientHold"/>
            <domain:status s="clientRenewProhibited"/>
            <domain:status s="clientUpdateProhibited"/>
            <domain:registrant href="/contact/jd4447">
                jd4447
            </domain:registrant>
            <domain:contact type="admin" href="/contact/jd4447">
                jd4447
            </domain:contact>
            <domain:contact type="tech" href="/contact/jd4447">
                jd4447
            </domain:contact>
            <domain:ns>
                <domain:hostObj href="/host/ns1.example.test">
                    ns1.example.test
                </domain:hostObj>
                <domain:hostObj href="/host/ns2.example.test">
                    ns2.example.test
                </domain:hostObj>
                <domain:hostObj href="/host/ns3.example.test">
                    ns3.example.test
                </domain:hostObj>
            </domain:ns>
            <domain:registrar type="sponsor" href="/registrar/reg-793">
                reg-793
            </domain:registrar>
            <domain:registrar type="created" href="/registrar/reg-1289">
                reg-1289
            </domain:registrar>
            <domain:crDate>1992-07-26T09:10:56Z</domain:crDate>
            <domain:exDate>2019-01-21T10:11:18Z</domain:exDate>
        </domain:object>
    </result>
    <additional>
        <contact:object 
            xmlns:contact="urn:ietf:params:xml:ns:rwsContact-1.0"
            href="/contact/jd4447">
            <contact:id>jd4447</contact:id>
            <contact:status s="clientDeleteProhibited"/>
            <contact:postalInfo type="int">
                <contact:name>John Doe</contact:name>
                <contact:org>Example Inc.</contact:org>
                <contact:addr>
                    <contact:street>123 Example Dr.</contact:street>
                    <contact:street>Suite 100</contact:street>
                    <contact:city>Redwood City</contact:city>
                    <contact:sp>CA</contact:sp>
                    <contact:pc>94063</contact:pc>
                    <contact:cc>US</contact:cc>
                </contact:addr>
            </contact:postalInfo>
            <contact:voice x="1234">+1.7035555555</contact:voice>
            <contact:fax>+1.7035555556</contact:fax>
            <contact:email>jdoe@example.com</contact:email>
            <contact:registrar type="sponsor" href="/registrar/reg-793">
                reg-793
            </contact:registrar>
            <contact:crDate>1999-04-03T22:00:00.0Z</contact:crDate>
            <contact:upID>ClientX</contact:upID>
            <contact:upDate>1999-12-03T09:00:00.0Z</contact:upDate>
        </contact:object>
        <host:object xmlns:host="urn:ietf:params:xml:ns:rwsHost-1.0"
            href="/host/ns1.example.test">
            <host:name>ns1.example.test</host:name>
            <host:status s="clientUpdateProhibited"/>
            <host:addr ip="v4">192.168.12.13</host:addr>
            <host:addr ip="v4">192.14.15.16</host:addr>
            <host:addr ip="v6">2001::A:B:C:1</host:addr>
            <host:registrar type="sponsor" href="/registrar/reg-793">
                reg-793
            </host:registrar>
        </host:object>
        <host:object xmlns:host="urn:ietf:params:xml:ns:rwsHost-1.0"
            href="/host/ns2.example.test">
            <host:name>ns2.example.test</host:name>
            <host:status s="clientUpdateProhibited"/>
            <host:addr ip="v4">172.16.10</host:addr>
            <host:addr ip="v4">172.17.12</host:addr>
            <host:addr ip="v6">2001::B:C:D:1</host:addr>
            <host:registrar type="sponsor" href="/registrar/reg-793">
                reg-793
            </host:registrar>
        </host:object>
        <host:object xmlns:host="urn:ietf:params:xml:ns:rwsHost-1.0"
            href="/host/ns3.example.test">
            <host:name>ns3.example.test</host:name>
            <host:status s="clientUpdateProhibited"/>
            <host:addr ip="v4">10.1.2.3</host:addr>
            <host:addr ip="v4">10.4.5.6</host:addr>
            <host:addr ip="v6">2001::C:D:E:1</host:addr>
            <host:registrar type="sponsor" href="/registrar/reg-793">
                reg-793
            </host:registrar>
        </host:object>
        <registrar:object 
            xmlns:registrar="urn:ietf:params:xml:ns:rwsRegistrar-1.0" 
            href="/registrar/reg-793">
            <registrar:id>reg-793</registrar:id>
            <registrar:name>Example Registrar Inc.</registrar:name>
        </registrar:object>
        <registrar:object 
            xmlns:registrar="urn:ietf:params:xml:ns:rwsRegistrar-1.0"
            href="/registrar/reg-1289">
            <registrar:id>reg-1289</registrar:id>
            <registrar:name>XYZ Corporation</registrar:name>
        </registrar:object>
    </additional>
</rws>
]]>
                    </artwork></figure>
                </t>
                
                <t> Example Query: http://whois.test/domain/example.test/registration/   </t>  
                <t> Response: </t>
                <t>
                    <figure><artwork>
                        <![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<rws xmlns="urn:ietf:params:xml:ns:rws-1.0">
    <result>
        <domain:object 
            xmlns:domain="urn:ietf:params:xml:ns:rwsDomain-1.0" 
            href="/domain/example.test">
            <domain:name>example.test</domain:name>
            <domain:roid>9690-TEST</domain:roid>
            <domain:status s="clientHold"/>
            <domain:status s="clientRenewProhibited"/>
            <domain:status s="clientUpdateProhibited"/>
            <domain:registrant href="/contact/jd4447">
                jd4447
            </domain:registrant>
            <domain:contact type="admin" href="/contact/jd4447">
                jd4447
            </domain:contact>
            <domain:contact type="tech" href="/contact/jd4447">
                jd4447
            </domain:contact>
            <domain:ns>
                <domain:hostObj href="/host/ns1.example.test">
                    ns1.example.test
                </domain:hostObj>
                <domain:hostObj href="/host/ns2.example.test">
                    ns2.example.test
                </domain:hostObj>
                <domain:hostObj href="/host/ns3.example.test">
                    ns3.example.test
                </domain:hostObj>
            </domain:ns>
            <domain:registrar type="sponsor" href="/registrar/reg-793">
                reg-793
            </domain:registrar>
            <domain:registrar type="created" href="/registrar/reg-1289">
                reg-1289
            </domain:registrar>
            <domain:crDate>1992-07-26T09:10:56Z</domain:crDate>
            <domain:exDate>2019-01-21T10:11:18Z</domain:exDate>
        </domain:object>
    </result>
</rws>
]]>
                    </artwork></figure>
                </t>

                <t> Example Query: http://whois.test/domain/example.test/contacts/   </t>  
                <t> Response: </t>
                <t>
                    TBD.
                </t>
                
                <t> Example Query: http://whois.test/domain/example.test/contacts/registrant/   </t>  
                <t> Response: </t>
                <t>
                    TBD.
                </t>
                
                <t> Example Query: http://whois.test/domain/example.test/registrar/   </t>  
                <t> Response: </t>
                <t>
                    TBD.
                </t>
                
            </section>
            
            <section title="Contacts">
                
                <t>
                    Example Query: http://whois.test/contact/jd4447/
                </t>  
                <t>
                    Response:
                </t>
                <t>
                    <figure><artwork>
                        <![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<rws xmlns="urn:ietf:params:xml:ns:rws-1.0">
    <result>
        <contact:object 
            xmlns:contact="urn:ietf:params:xml:ns:rwsContact-1.0"
            href="/contact/jd4447">
            <contact:id>jd4447</contact:id>
            <contact:status s="clientDeleteProhibited"/>
            <contact:postalInfo type="int">
                <contact:name>John Doe</contact:name>
                <contact:org>Example Inc.</contact:org>
                <contact:addr>
                    <contact:street>123 Example Dr.</contact:street>
                    <contact:street>Suite 100</contact:street>
                    <contact:city>Redwood City</contact:city>
                    <contact:sp>CA</contact:sp>
                    <contact:pc>94063</contact:pc>
                    <contact:cc>US</contact:cc>
                </contact:addr>
            </contact:postalInfo>
            <contact:voice x="1234">+1.7035555555</contact:voice>
            <contact:fax>+1.7035555556</contact:fax>
            <contact:email>jdoe@example.com</contact:email>
            <contact:registrar href="/registrar/reg-793">
                reg-793
            </contact:registrar>
            <contact:crDate>1999-04-03T22:00:00.0Z</contact:crDate>
            <contact:upDate>1999-12-03T09:00:00.0Z</contact:upDate>
        </contact:object>
    </result>
    <additional> 
        <registrar:object 
            xmlns:registrar="urn:ietf:params:xml:ns:rwsRegistrar-1.0" 
            href="/registrar/reg-793">
            <registrar:id>reg-793</registrar:id>
            <registrar:name>Example Registrar Inc.</registrar:name>
        </registrar:object>
    </additional>
</rws>
                     ]]>
                    </artwork></figure>
                </t>
                
                <t> Example Query: http://whois.test/contact/jd4447/registration/   </t>  
                <t> Response: </t>
                <t>
                    <figure><artwork>
                        <![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<rws xmlns="urn:ietf:params:xml:ns:rws-1.0">
    <result>
        <contact:object 
            xmlns:contact="urn:ietf:params:xml:ns:rwsContact-1.0"
            href="/contact/jd4447">
            <contact:id>jd4447</contact:id>
            <contact:status s="clientDeleteProhibited"/>
            <contact:postalInfo type="int">
                <contact:name>John Doe</contact:name>
                <contact:org>Example Inc.</contact:org>
                <contact:addr>
                    <contact:street>123 Example Dr.</contact:street>
                    <contact:street>Suite 100</contact:street>
                    <contact:city>Redwood City</contact:city>
                    <contact:sp>CA</contact:sp>
                    <contact:pc>94063</contact:pc>
                    <contact:cc>US</contact:cc>
                </contact:addr>
            </contact:postalInfo>
            <contact:voice x="1234">+1.7035555555</contact:voice>
            <contact:fax>+1.7035555556</contact:fax>
            <contact:email>jdoe@example.com</contact:email>
            <contact:registrar href="/registrar/reg-793">
                reg-793
            </contact:registrar>
            <contact:crDate>1999-04-03T22:00:00.0Z</contact:crDate>
            <contact:upDate>1999-12-03T09:00:00.0Z</contact:upDate>
        </contact:object>
    </result>
</rws>
                     ]]>
                    </artwork></figure>
                </t>
                
                <t> Example Query: http://whois.test/contact/jd4447/registrar/   </t>  
                <t> Response: </t>
                <t>
                    TBD.
                </t>
                
            </section>
            
            <section title="Host Names">
                <t>
                    Example Query: http://whois.test/host/ns1.example.test/
                </t>  
                <t>
                    Response:
                </t>
                <t>
                    <figure><artwork>
                        <![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<rws xmlns="urn:ietf:params:xml:ns:rws-1.0">
    <result>
        <host:object xmlns:host="urn:ietf:params:xml:ns:rwsHost-1.0"
            href="/host/ns1.example.test">
            <host:name>ns1.example.test</host:name>
            <host:status s="clientUpdateProhibited"/>
            <host:addr ip="v4">192.168.12.13</host:addr>
            <host:addr ip="v4">192.14.15.16</host:addr>
            <host:addr ip="v6">2001::A:B:C:1</host:addr>
            <host:registrar type="sponsor" href="/registrar/reg-793">
                reg-793
            </host:registrar>
        </host:object>
    </result>
    <additional>
        <registrar:object 
            xmlns:registrar="urn:ietf:params:xml:ns:rwsRegistrar-1.0" 
            href="/registrar/reg-793">
            <registrar:id>reg-793</registrar:id>
            <registrar:name>Example Registrar Inc.</registrar:name>
        </registrar:object>
    </additional>
</rws>
                     ]]>
                    </artwork></figure>
                </t>
                
                <t> Example Query: http://whois.test/host/ns1.example.test/registration/   </t>  
                <t> Response: </t>
                <t>
                    <figure><artwork>
                        <![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<rws xmlns="urn:ietf:params:xml:ns:rws-1.0">
    <result>
        <host:object xmlns:host="urn:ietf:params:xml:ns:rwsHost-1.0"
            href="/host/ns1.example.test">
            <host:name>ns1.example.test</host:name>
            <host:status s="clientUpdateProhibited"/>
            <host:addr ip="v4">192.168.12.13</host:addr>
            <host:addr ip="v4">192.14.15.16</host:addr>
            <host:addr ip="v6">2001::A:B:C:1</host:addr>
            <host:registrar type="sponsor" href="/registrar/reg-793">
                reg-793
            </host:registrar>
        </host:object>
    </result>
</rws>
                     ]]>
                    </artwork></figure>
                </t>
                
                <t> Example Query: http://whois.test/host/ns1.example.test/registrar/   </t>  
                <t> Response: </t>
                <t>
                    TBD.
                </t>
                
            </section>
            
            <section title="Registrars">
                <t>
                    TBD
                </t>
            </section>
            
        </section>                                 
        
        <section title="Error Codes" anchor="resultCodes">
            <t>
                In compliance with the REST paradigm any error information is returned in the form of a 
                standard HTTP response with an HTTP status code describing the error and a text/plain 
                body message describing the exception causing the error response. In this version we are 
                using only standard HTTP codes (http://www.iana.org/assignments/http-status-codes).
            </t>
            <t>
                [[ Define specialized error codes. ]]
            </t>
        </section>

        <section title="Formal XML Syntax" anchor="formalSyntax">
            <t>
                The formal syntax presented here is a complete schema representation suitable for 
                automated validation of an XML instance. It is based on the object schemas from the 
                Extension Provisioning Protocol (EPP), by Scott Hollenbeck. It references and includes 
                the following EPP schemas:                 
                <list>
                    <t>
                        <xref target="RFC5730"/> - Extensible Provisioning Protocol (EPP)
                    </t>
                    <t>
                        <xref target="RFC5731"/> - Extensible Provisioning Protocol (EPP) Domain Name 
                        Mapping
                    </t>
                    <t>
                        <xref target="RFC5732"/> - Extensible Provisioning Protocol (EPP) Host Mapping
                    </t>
                    <t>
                        <xref target="RFC5733"/> - Extensible Provisioning Protocol (EPP) Contact Mapping
                    </t>
                </list>
            </t>
            <t>
                To represent objects, the &lt;result&gt; section will contain exactly one &lt;object&gt; 
                element, under a specific namespace that describes the object type. The object element 
                will also contain an "href" property which can be used to verify it against the query.
            </t>
            <t>
                Objects in the result element can refer to other objects, i.e.: a domain object with 
                multiple host object associations, contacts, etc. In order for the client to obtain all 
                the information needed about the queried object, additional objects can be described 
                within the &lt;additional&gt; section. Only objects referenced in the &lt;object&gt; 
                element from the &lt;result&gt; section are allowed in the &lt;additional&gt; section.
            </t>
            <t>	Server implementations can opt not to return the full object, but instead define an empty 
                &lt;object&gt; element with an appropriate "href" property. This enables the client to 
                retrieve the additional objects from the server if needed.
            </t>
            
            <section title ="Contact XML Schema">
                <t>
                    TBD
                </t>
            </section>
            
            <section title="Domain Name XML Schema">
                <t>
                    TBD
                </t>                    
            </section>
            
            <section title="Host XML Schema">   
                <t>
                    TBD
                </t>    
            </section>
            
            <section title ="Registrar XML Schema">
                <t>
                    TBD
                </t>
            </section>
            
            <section title="RWS XML Schema">            
                <t>
                    TBD
                </t>            
            </section>
            
        </section>
        
        <section title="Internationalization Considerations">
            
            <section title="Considerations for Querying IDNs">
                <t>	Three possibilities exist on how to query IDNs: 
                    
                    <list>
                        <t> U-label only  - in this case an U-label is entered as part of the query. 
                            For example: 	/domain/"U+82F1""U+96C4".test  </t>
                        <t> A-label only  - in this case the U-label is first converted to its 
                            corresponding A-label before submitted to the server. In the example above, 
                            the U-label would be /domain/xn--dj1az91b.test before it is submitted to the 
                            RWS-DNRD.</t>
                        <t> IRI -> URI conversion  - in this case the IRI (which contains the U-label) 
                            is converted to URI according to [<xref target="RFC3987"/>] before submitted 
                            to the server.  In the example above, the query becomes 
                            /domain/%E8%8B%B1%E9%9B%84.test </t>
                    </list>
                </t>
            </section>
            
            <section title="Considerations for Display of Internationalized Registration Data">
                <t>
                    Information published in RWS-DNRD is represented in XML, which provides native support for encoding information using the Unicode character set and its more compact representations including UTF-8. Conformant XML processors recognize both UTF-8 and UTF-16. Though use of UTF-8 is preferred, XML includes provisions to identify and use other character encodings through use of an "encoding" attribute in an &lt;?xml?&gt; declaration. 
                </t>
            </section>
            
            <section title="Considerations for Indicating Language/scripts in Responses">
                <t>
                    The RWS-DNRD proposed by this document supports internationalized registration data,  
                    responses of a RWS-DNRD server may contain data in any languages/scripts. Although 
                    the internationalized registration data of a RWS-DNRD response can be correctly 
                    displayed, users will still be confused when reading the data in a language which t
                    hey are not familiar. So if the response of the RWS-DNRD need to contain information 
                    to indicate the language/scripts the responses is in. This is also one of the recommendations / requirements from the ICANN Internationalized Registration Data Working Group Final Report <xref target="IRD-WG"/>.  </t>
                
                <t>In order to meet the above requirement, one additional data element needs to be added to allow for the association of the IRD response to a language/script identifier. The identifiers SHALL be structured as documented in <xref target="RFC5646"/>.</t>
                  
                <t> For example, 
                    <figure><artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<rws:rws xmlns:rws="urn:ietf:params:xml:ns:rws-1.0"
    <rws:language>
    zh
    </rws:language>
    <rws:result>
    ...
    </rws:result>
</rws:rws>]]>
                    </artwork></figure>
                </t>
                
                <t>The above solution can only support one language within one response. If multiple languages need to be supported by one response, one additional attribute of data element might be considered to be added to allow for association of the value of a data element to an internationalized language identifier. </t>
                
                <t> Further discussions is needed on this topic. </t>
                
            </section>
            
        </section>
        
        <section title="IANA Considerations">
            <t>
                TBD
            </t>
        </section>


        <section title="Security Considerations">
            <t>
                TBD
            </t>
            <section title="URIs and IRIs">
                <t>
                    RWS-DNRD implementations use URIs and IRIs.  See Section 7 of 
                    <xref target="RFC3986"/> and Section 8 of <xref target="RFC3987"/> for security 
                    considerations related to their handling and use.
                </t>
            </section>
        </section>
        
        
        <section title="Acknowledgments">
            <t>
                Parts of this document are based on EPP <xref target="RFC5730"/> and related RFCs by 
                Scott Hollenbeck.
            </t>
            <t>
                The authors would like to acknowledge the following individuals for their input: 
                Andy Newton, Andrew Sullivan, Dave Piscitello and James Galvin. 
            </t>
        </section>
                                
        <section title="Change History">
            <section title="Changes from version 00 to 01">
                <t>
                    <list style="numbers">
                        <t> Added two co-authors. </t> 
                        <t> Modified the query structure to resemble RIR query structures </t> 
                           
                        <t> Added considerations for the query of Internationalized Domain Names (IDNs)</t>                      
                        <t> Added considerations for the display of Internationalized Registration Data. </t>
                        <t> Updated the data schema. </t>

                        <t>Fixed some typographical errors and omissions.</t>
                    </list>
                </t>
            </section>
        </section>
        
    </middle>
    <back>
        
        <references title='Normative References'>	

            <?rfc include="reference.RFC.2616" ?>
			<?rfc include="reference.RFC.5646" ?>          
  			<?rfc include="reference.RFC.5730" ?>
            <?rfc include="reference.RFC.5731" ?>
            <?rfc include="reference.RFC.5732" ?>
            <?rfc include="reference.RFC.5733" ?>
            <?rfc include="reference.RFC.5952" ?>

            <reference anchor="REST">
                <front>
                    <title>
                        Principled Design of the Modern Web Architecture
                    </title>
                    <author initials="R." surname="Fielding" fullname="Roy T. Fielding"/>
                    <author initials="R." surname="Taylor" fullname="Richard N. Taylor"/>
                    <date month="May" year="2002"/>
                </front>
                <seriesInfo name="ACM Transactions on Internet Technology" value="Vol. 2, No. 2"/>	
            </reference>    
        </references>
        
        <references title='Informative References'>
            
            <?rfc include="reference.RFC.0791" ?>
            <?rfc include="reference.RFC.1123" ?>
            <?rfc include="reference.RFC.3707" ?>
            <?rfc include="reference.RFC.3912" ?>
            <?rfc include="reference.RFC.4627" ?>          
            <?rfc include="reference.RFC.3987" ?>
            <?rfc include="reference.RFC.3986" ?>
            <?rfc include="reference.I-D.draft-newton-et-al-weirds-rir-query-01" ?>
            <?rfc include="reference.I-D.draft-newton-et-al-weirds-rir-json-response-01" ?>

            <reference anchor="IRD-WG">
                <front>
                    <title>
The Final Report of the Internationalized Registration Data Working Group
                    </title>
                    <author initials="" surname="ICANN" fullname="Internet Corporation For Assigned Names and Numbers"/>
                    <date month="February" year="2012"/>
                </front>
            </reference>

            
        </references>

        
    </back>


</rfc>
